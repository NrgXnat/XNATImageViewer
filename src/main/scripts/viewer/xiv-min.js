var f,aa=aa||{},ba=this;function da(a){return void 0!==a}function ea(a){a=a.split(".");for(var b=ba,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function fa(){}function ga(a){a.ye=function(){return a.jB?a.jB:a.jB=new a}}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function g(a){return"array"==ha(a)}function ia(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function ja(a){return"boolean"==typeof a}function u(a){return"number"==typeof a}function la(a){return"function"==ha(a)}function ma(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function na(a){return a[pa]||(a[pa]=++qa)}
var pa="closure_uid_"+(1E9*Math.random()>>>0),qa=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ua(a,b,c){ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return ua.apply(null,arguments)}function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var xa=Date.now||function(){return+new Date};
function v(a,b){var c=a.split("."),d=ba;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&da(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.WP=function(a,c,h){var k=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,k)}};var A=A||{};A.sN=!0;A.ne=function(a){eval("X.DEV === undefined")||window.console.time(a)};A.Qd=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.JF=0;this.TM=function(){return this.JF++}};function Aa(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);c in a||(d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c])}}var Ba=window.TD;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return h.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),h=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),h=Math.max(0,16-(c-a)),k=window.setTimeout(function(){b(c+h)},h);a=c+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),h=new Uint8Array(d),k=a,l=0;k<c;++k,++l)h[l]=e[k];return d});v("$",Ba);
v("Function.prototype.bind",Function.prototype.bind);v("window.requestAnimationFrame",window.requestAnimationFrame);v("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ca;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Da,Error);Da.prototype.name="CustomError";function Ea(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Fa(a,b){var c=String(b).toLowerCase(),d=String(a.substr(a.length-b.length,b.length)).toLowerCase();return 0==(c<d?-1:c==d?0:1)}function Ga(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ha(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}
function Ia(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}var Ka=/(\.\d+)|(\d+)|(\D+)/g;function La(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(Ka),d=b.toLowerCase().match(Ka),e=Math.min(c.length,d.length),h=0;h<e;h++){var k=c[h],l=d[h];if(k!=l)return c=parseInt(k,10),!isNaN(c)&&(d=parseInt(l,10),!isNaN(d)&&c-d)?c-d:k<l?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1}
function Ma(a){if(!Na.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Oa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ua,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Va,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Wa,"&#0;"));return a}var Oa=/&/g,Sa=/</g,Ta=/>/g,Ua=/"/g,Va=/'/g,Wa=/\x00/g,Na=/[\x00&<>"']/;
function Xa(a,b){var c;if(c&&a.length>b)c>b&&(c=b),a=a.substring(0,b-c)+"..."+a.substring(a.length-c);else if(a.length>b){c=Math.floor(b/2);var d=a.length-c;a=a.substring(0,c+b%2)+"..."+a.substring(d)}return a}function Ya(a,b){return-1!=a.toLowerCase().indexOf(b.toLowerCase())}function Za(a){return Array.prototype.join.call(arguments,"")}
function $a(a,b){for(var c=0,d=Ia(String(a)).split("."),e=Ia(String(b)).split("."),h=Math.max(d.length,e.length),k=0;0==c&&k<h;k++){var l=d[k]||"",n=e[k]||"",p=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var q=p.exec(l)||["","",""],t=m.exec(n)||["","",""];if(0==q[0].length&&0==t[0].length)break;c=ab(0==q[1].length?0:parseInt(q[1],10),0==t[1].length?0:parseInt(t[1],10))||ab(0==q[2].length,0==t[2].length)||ab(q[2],t[2])}while(0==c)}return c}function ab(a,b){return a<b?-1:a>b?1:0}
var bb=2147483648*Math.random()|0;function B(){return"goog_"+bb++}function cb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function db(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()}function eb(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function fb(a,b){b.unshift(a);Da.call(this,Ga.apply(null,b));b.shift()}w(fb,Da);fb.prototype.name="AssertionError";function gb(a,b){throw new fb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var hb="closure_listenable_"+(1E6*Math.random()|0);function ib(a){return!(!a||!a[hb])}var jb=0;function kb(a,b,c,d,e){this.Wk=a;this.es=null;this.src=b;this.type=c;this.In=!!d;this.ir=e;this.key=++jb;this.Lm=this.uq=!1}function mb(a){a.Lm=!0;a.Wk=null;a.es=null;a.src=null;a.ir=null};function C(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function nb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function ob(a){var b=0,c;for(c in a)b++;return b}function pb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function qb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function rb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function sb(){var a=tb,b;for(b in a)return!1;return!0}function D(a){for(var b in a)delete a[b]}function ub(a,b){b in a&&delete a[b]}
function vb(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function wb(a){var b={},c;for(c in a)b[c]=a[c];return b}var xb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var h=0;h<xb.length;h++)c=xb[h],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function zb(a){var b=arguments.length;if(1==b&&g(arguments[0]))return zb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var Ab=Array.prototype,Bb=Ab.indexOf?function(a,b,c){return Ab.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Cb=Ab.lastIndexOf?function(a,b,c){return Ab.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(r(a))return r(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;
return-1},E=Ab.forEach?function(a,b,c){Ab.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)h in e&&b.call(c,e[h],h,a)},Db=Ab.filter?function(a,b,c){return Ab.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],h=0,k=r(a)?a.split(""):a,l=0;l<d;l++)if(l in k){var n=k[l];b.call(c,n,l,a)&&(e[h++]=n)}return e},Eb=Ab.map?function(a,b,c){return Ab.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),h=r(a)?a.split(""):a,k=0;k<d;k++)k in h&&(e[k]=
b.call(c,h[k],k,a));return e},Fb=Ab.some?function(a,b,c){return Ab.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&b.call(c,e[h],h,a))return!0;return!1},Gb=Ab.every?function(a,b,c){return Ab.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&!b.call(c,e[h],h,a))return!1;return!0};
function Hb(a){var b;a:{b=Ib;for(var c=a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]}function Jb(a,b){return 0<=Bb(a,b)}function Kb(a){if(!g(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Lb(a,b){Jb(a,b)||a.push(b)}function Mb(a,b){var c=Bb(a,b),d;(d=0<=c)&&Ab.splice.call(a,c,1);return d}function Nb(a){return Ab.concat.apply(Ab,arguments)}
function Ob(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Pb(a,b,c,d){Ab.splice.apply(a,Qb(arguments,1))}function Qb(a,b,c){return 2>=arguments.length?Ab.slice.call(a,b):Ab.slice.call(a,b,c)}function Rb(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b};function Sb(a){this.src=a;this.Zc={};this.Jp=0}f=Sb.prototype;f.add=function(a,b,c,d,e){var h=a.toString();a=this.Zc[h];a||(a=this.Zc[h]=[],this.Jp++);var k=Tb(a,b,d,e);-1<k?(b=a[k],c||(b.uq=!1)):(b=new kb(b,this.src,h,!!d,e),b.uq=c,a.push(b));return b};f.remove=function(a,b,c,d){a=a.toString();if(!(a in this.Zc))return!1;var e=this.Zc[a];b=Tb(e,b,c,d);return-1<b?(mb(e[b]),Ab.splice.call(e,b,1),0==e.length&&(delete this.Zc[a],this.Jp--),!0):!1};
function Ub(a,b){var c=b.type;if(!(c in a.Zc))return!1;var d=Mb(a.Zc[c],b);d&&(mb(b),0==a.Zc[c].length&&(delete a.Zc[c],a.Jp--));return d}f.Gg=function(a){a=a&&a.toString();var b=0,c;for(c in this.Zc)if(!a||c==a){for(var d=this.Zc[c],e=0;e<d.length;e++)++b,mb(d[e]);delete this.Zc[c];this.Jp--}return b};f.eo=function(a,b,c,d){a=this.Zc[a.toString()];var e=-1;a&&(e=Tb(a,b,c,d));return-1<e?a[e]:null};
f.jr=function(a,b){var c=da(a),d=c?a.toString():"",e=da(b);return nb(this.Zc,function(a){for(var k=0;k<a.length;++k)if(!(c&&a[k].type!=d||e&&a[k].In!=b))return!0;return!1})};function Tb(a,b,c,d){for(var e=0;e<a.length;++e){var h=a[e];if(!h.Lm&&h.Wk==b&&h.In==!!c&&h.ir==d)return e}return-1};var Vb;a:{var Wb=ba.navigator;if(Wb){var Xb=Wb.userAgent;if(Xb){Vb=Xb;break a}}Vb=""}function Yb(a){return-1!=Vb.indexOf(a)}function Zb(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function $b(){return Yb("Opera")||Yb("OPR")}function ac(){return Yb("Trident")||Yb("MSIE")}function bc(){return Yb("Safari")&&!Yb("Chrome")&&!Yb("CriOS")&&!Yb("Android")}
function cc(){var a=Vb;if(ac()){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])a=b[1];else{var b="",c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];a=b}return a}if($b())return a=Zb(a),b=a[a.length-1],"OPR"==b[0]&&b[1]?b[1]:a[2]&&a[2][1]?a[2][1]:"";a=Zb(a);return a[2]&&a[2][1]?a[2][1]:""};var dc,ec,fc;function gc(){return ba.navigator||null}var hc=$b(),F=ac(),ic=Yb("Gecko")&&!Ya(Vb,"WebKit")&&!(Yb("Trident")||Yb("MSIE")),jc=Ya(Vb,"WebKit"),kc,lc=gc();kc=lc&&lc.platform||"";dc=-1!=kc.indexOf("Mac");ec=-1!=kc.indexOf("Win");fc=-1!=kc.indexOf("Linux");var mc=!!gc()&&-1!=(gc().appVersion||"").indexOf("X11");function nc(){var a=ba.document;return a?a.documentMode:void 0}
var oc=function(){var a="",b;if(hc&&ba.opera)return a=ba.opera.version,la(a)?a():a;ic?b=/rv\:([^\);]+)(\)|;)/:F?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:jc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Vb))?a[1]:"");return F&&(b=nc(),b>parseFloat(a))?String(b):a}(),pc={};function qc(a){return pc[a]||(pc[a]=0<=$a(oc,a))}function rc(a){return F&&sc>=a}var tc=ba.document,sc=tc&&F?nc()||("CSS1Compat"==tc.compatMode?parseInt(oc,10):5):void 0;var uc=!F||rc(9),vc=!F||rc(9),wc=F&&!qc("9");!jc||qc("528");ic&&qc("1.9b")||F&&qc("8")||hc&&qc("9.5")||jc&&qc("528");ic&&!qc("8")||F&&qc("9");function xc(){0!=yc&&(zc[na(this)]=this)}var yc=0,zc={};xc.prototype.Bk=!1;xc.prototype.g=function(){if(!this.Bk&&(this.Bk=!0,this.f(),0!=yc)){var a=na(this);delete zc[a]}};function Ac(a,b){a.Lo||(a.Lo=[]);a.Lo.push(da(void 0)?ua(b,void 0):b)}xc.prototype.f=function(){if(this.Lo)for(;this.Lo.length;)this.Lo.shift()()};function Bc(a){a&&"function"==typeof a.g&&a.g()}function Cc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ia(d)?Cc.apply(null,d):Bc(d)}};function Dc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Eg=!1;this.Yo=!0}Dc.prototype.f=function(){};Dc.prototype.g=function(){};Dc.prototype.stopPropagation=function(){this.Eg=!0};Dc.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Yo=!1};function Ec(a){a.preventDefault()};function Fc(a){Fc[" "](a);return a}Fc[" "]=fa;function Hc(a,b){Dc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.lw=!1;this.Yc=null;a&&this.xa(a,b)}w(Hc,Dc);var Ic=[1,4,2];f=Hc.prototype;
f.xa=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(ic){var e;a:{try{Fc(d.nodeName);e=!0;break a}catch(h){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=jc||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=jc||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.lw=dc?a.metaKey:a.ctrlKey;this.state=a.state;this.Yc=a;a.defaultPrevented&&this.preventDefault()};function Kc(a){return(uc?0==a.Yc.button:"click"==a.type?!0:!!(a.Yc.button&Ic[0]))&&!(jc&&dc&&a.ctrlKey)}
f.stopPropagation=function(){Hc.d.stopPropagation.call(this);this.Yc.stopPropagation?this.Yc.stopPropagation():this.Yc.cancelBubble=!0};f.preventDefault=function(){Hc.d.preventDefault.call(this);var a=this.Yc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,wc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};f.bH=function(){return this.Yc};f.f=function(){};var Lc="closure_lm_"+(1E6*Math.random()|0),Mc={},Nc=0;function G(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)G(a,b[h],c,d,e);return null}c=Oc(c);return ib(a)?a.D(b,c,d,e):Pc(a,b,c,!1,d,e)}function Pc(a,b,c,d,e,h){if(!b)throw Error("Invalid event type");var k=!!e,l=Qc(a);l||(a[Lc]=l=new Sb(a));c=l.add(b,c,d,e,h);if(c.es)return c;d=Rc();c.es=d;d.src=a;d.Wk=c;a.addEventListener?a.addEventListener(b.toString(),d,k):a.attachEvent(Sc(b.toString()),d);Nc++;return c}
function Rc(){var a=Tc,b=vc?function(c){return a.call(b.src,b.Wk,c)}:function(c){c=a.call(b.src,b.Wk,c);if(!c)return c};return b}function Uc(a,b,c,d,e){if(g(b)){for(var h=0;h<b.length;h++)Uc(a,b[h],c,d,e);return null}c=Oc(c);return ib(a)?a.sv(b,c,d,e):Pc(a,b,c,!0,d,e)}function Vc(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)Vc(a,b[h],c,d,e);else c=Oc(c),ib(a)?a.Bb(b,c,d,e):a&&(a=Qc(a))&&(b=a.eo(b,c,!!d,e))&&Wc(b)}
function Wc(a){if(u(a)||!a||a.Lm)return!1;var b=a.src;if(ib(b))return Ub(b.hh,a);var c=a.type,d=a.es;b.removeEventListener?b.removeEventListener(c,d,a.In):b.detachEvent&&b.detachEvent(Sc(c),d);Nc--;(c=Qc(b))?(Ub(c,a),0==c.Jp&&(c.src=null,b[Lc]=null)):mb(a);return!0}function J(a){if(a)if(ib(a))a.removeAllListeners(void 0);else if(a=Qc(a)){var b=0,c;for(c in a.Zc)for(var d=a.Zc[c].concat(),e=0;e<d.length;++e)Wc(d[e])&&++b}}
function Xc(a,b){if(ib(a))return a.jr(b,void 0);var c=Qc(a);return!!c&&c.jr(b,void 0)}function Sc(a){return a in Mc?Mc[a]:Mc[a]="on"+a}function Yc(a,b,c,d){var e=1;if(a=Qc(a))if(b=a.Zc[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var h=b[a];h&&h.In==c&&!h.Lm&&(e&=!1!==Zc(h,d))}return Boolean(e)}function Zc(a,b){var c=a.Wk,d=a.ir||a.src;a.uq&&Wc(a);return c.call(d,b)}
function Tc(a,b){if(a.Lm)return!0;if(!vc){var c=b||ea("window.event"),d=new Hc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(k){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=d.currentTarget;h;h=h.parentNode)c.push(h);for(var h=a.type,l=c.length-1;!d.Eg&&0<=l;l--)d.currentTarget=c[l],e&=Yc(c[l],h,!0,d);for(l=0;!d.Eg&&l<c.length;l++)d.currentTarget=c[l],e&=Yc(c[l],h,!1,d)}return e}return Zc(a,new Hc(b,this))}
function Qc(a){a=a[Lc];return a instanceof Sb?a:null}var $c="__closure_events_fn_"+(1E9*Math.random()>>>0);function Oc(a){return la(a)?a:a[$c]||(a[$c]=function(b){return a.handleEvent(b)})};function ad(){xc.call(this);this.hh=new Sb(this);this.TF=this;this.as=null}w(ad,xc);ad.prototype[hb]=!0;f=ad.prototype;f.Ew=function(a){this.as=a};f.addEventListener=function(a,b,c,d){G(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){Vc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.as;if(c)for(b=[];c;c=c.as)b.push(c);var c=this.TF,d=a.type||a;if(r(a))a=new Dc(a,c);else if(a instanceof Dc)a.target=a.target||c;else{var e=a;a=new Dc(d,c);yb(a,e)}var e=!0,h;if(b)for(var k=b.length-1;!a.Eg&&0<=k;k--)h=a.currentTarget=b[k],e=bd(h,d,!0,a)&&e;a.Eg||(h=a.currentTarget=c,e=bd(h,d,!0,a)&&e,a.Eg||(e=bd(h,d,!1,a)&&e));if(b)for(k=0;!a.Eg&&k<b.length;k++)h=a.currentTarget=b[k],e=bd(h,d,!1,a)&&e;return e};
f.f=function(){ad.d.f.call(this);this.removeAllListeners();this.as=null};f.D=function(a,b,c,d){return this.hh.add(String(a),b,!1,c,d)};f.sv=function(a,b,c,d){return this.hh.add(String(a),b,!0,c,d)};f.Bb=function(a,b,c,d){return this.hh.remove(String(a),b,c,d)};f.removeAllListeners=function(a){return this.hh?this.hh.Gg(a):0};
function bd(a,b,c,d){b=a.hh.Zc[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,h=0;h<b.length;++h){var k=b[h];if(k&&!k.Lm&&k.In==c){var l=k.Wk,n=k.ir||k.src;k.uq&&Ub(a.hh,k);e=!1!==l.call(n,d)&&e}}return e&&!1!=d.Yo}f.eo=function(a,b,c,d){return this.hh.eo(String(a),b,c,d)};f.jr=function(a,b){return this.hh.jr(da(a)?String(a):void 0,b)};function cd(){ad.call(this);this.u="base";this.xd=window["X.counter"].TM();this.J=!1}w(cd,ad);cd.prototype.__defineGetter__("classname",function(){return this.u});cd.prototype.__defineGetter__("id",function(){return this.xd});v("X.base",cd);function dd(a,b){cd.call(this);this.u="triplets";this.gg=Infinity;this.dg=-Infinity;this.hg=Infinity;this.eg=-Infinity;this.ig=Infinity;this.fg=-Infinity;this.Wp=[0,0,0];this.Va=0;this.kc=new Float32Array(a);null!=b&&(this.kc=b.kc.subarray(0,b.kc.length),this.Va=this.kc.length,this.gg=b.gg,this.dg=b.dg,this.hg=b.hg,this.eg=b.eg,this.ig=b.ig,this.fg=b.fg,this.Wp=b.Wp.slice())}w(dd,cd);f=dd.prototype;
f.add=function(a,b,c){this.gg=Math.min(this.gg,a);this.dg=Math.max(this.dg,a);this.hg=Math.min(this.hg,b);this.eg=Math.max(this.eg,b);this.ig=Math.min(this.ig,c);this.fg=Math.max(this.fg,c);this.Wp=[(this.gg+this.dg)/2,(this.hg+this.eg)/2,(this.ig+this.fg)/2];this.J=!0;this.kc[this.Va++]=a;this.kc[this.Va++]=b;this.kc[this.Va++]=c;return this.Va/3};f.resize=function(){if(this.Va!=this.kc.length){var a=new Float32Array(this.Va);a.set(this.kc.subarray(0,this.Va));this.kc=a}};
f.get=function(a){a*=3;return[this.kc[a],this.kc[a+1],this.kc[a+2]]};f.remove=function(){throw Error("Not implemented.");};f.clear=function(){this.kc=new Float32Array(this.kc.length);this.J=!0};dd.prototype.__defineGetter__("count",function(){this.resize();return this.kc.length/3});dd.prototype.__defineGetter__("length",function(){this.resize();return this.kc.length});v("X.triplets",dd);v("X.triplets.prototype.add",dd.prototype.add);v("X.triplets.prototype.resize",dd.prototype.resize);
v("X.triplets.prototype.get",dd.prototype.get);v("X.triplets.prototype.remove",dd.prototype.remove);v("X.triplets.prototype.clear",dd.prototype.clear);function ed(){cd.call(this);this.u="indexer";this.Ct=[];this.oe={}}w(ed,cd);ed.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.oe||(this.oe[b]=this.Ct.length,this.Ct.push(a));return this.oe[b]};ed.prototype.unique=function(){return this.Ct};function fd(a){cd.call(this);this.u="file";this.gq=a;this.J=!0}w(fd,cd);function gd(){this.Xg=this.la=null}gd.prototype.__defineSetter__("file",function(a){if(null==a||g(a)&&0==a.length)this.la=null;else{if(g(a)){if(1==a.length){this.la=new fd(a[0]);return}this.la=Eb(a,function(a){var c=new K;c.la=new fd(a);return c})}else this.la=new fd(a);this.Xg=null}});gd.prototype.__defineGetter__("file",function(){return this.la?g(this.la)?this.la.map(function(a){return a.la.gq}):this.la.gq:""});
gd.prototype.__defineGetter__("filedata",function(){return g(this.la)?this.la.map(function(a){return a.Xg}):this.Xg});gd.prototype.__defineSetter__("filedata",function(a){if(null==a||g(a)&&0==a.length)this.Xg=null;if(g(a))if(1==a.length)this.Xg=a[0];else{var b=this.la.length,c;for(c=0;c<b;c++)this.la[c].Xg=a[c]}else this.Xg=a});function hd(){return null};function id(a,b,c){return Math.min(Math.max(a,b),c)};function jd(a,b){this.Hb={};this.rb=[];this.di=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Et(a)}f=jd.prototype;f.sg=function(){return this.di};f.li=function(){kd(this);for(var a=[],b=0;b<this.rb.length;b++)a.push(this.Hb[this.rb[b]]);return a};f.co=function(){kd(this);return this.rb.concat()};
f.au=function(a){for(var b=0;b<this.rb.length;b++){var c=this.rb[b];if(md(this.Hb,c)&&this.Hb[c]==a)return!0}return!1};f.km=function(a,b){if(this===a)return!0;if(this.di!=a.sg())return!1;var c=b||nd;kd(this);for(var d,e=0;d=this.rb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function nd(a,b){return a===b}f.Bm=function(){return 0==this.di};f.clear=function(){this.Hb={};this.di=this.rb.length=0};
f.remove=function(a){return md(this.Hb,a)?(delete this.Hb[a],this.di--,this.rb.length>2*this.di&&kd(this),!0):!1};function kd(a){if(a.di!=a.rb.length){for(var b=0,c=0;b<a.rb.length;){var d=a.rb[b];md(a.Hb,d)&&(a.rb[c++]=d);b++}a.rb.length=c}if(a.di!=a.rb.length){for(var e={},c=b=0;b<a.rb.length;)d=a.rb[b],md(e,d)||(a.rb[c++]=d,e[d]=1),b++;a.rb.length=c}}f.get=function(a,b){return md(this.Hb,a)?this.Hb[a]:b};f.set=function(a,b){md(this.Hb,a)||(this.di++,this.rb.push(a));this.Hb[a]=b};
f.Et=function(a){var b;a instanceof jd?(b=a.co(),a=a.li()):(b=qb(a),a=pb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.co(),d=0;d<c.length;d++){var e=c[d],h=this.get(e);a.call(b,h,e,this)}};f.clone=function(){return new jd(this)};f.fx=function(){for(var a=new jd,b=0;b<this.rb.length;b++){var c=this.rb[b];a.set(this.Hb[c],c)}return a};function md(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function od(){cd.call(this);this.u="colortable";this.oe=new jd;Aa(this,new gd)}w(od,cd);od.prototype.add=function(a,b,c,d,e,h){if(!(u(a)&&u(c)&&u(d)&&u(e)&&u(h)))throw Error("Invalid color table entry.");this.oe.set(a,[b,c,d,e,h]);this.J=!0};od.prototype.get=function(a){return this.oe.get(a)};v("X.colortable.prototype.get",od.prototype.get);function pd(a,b,c){this.x=da(a)?a:0;this.y=da(b)?b:0;this.z=da(c)?c:0}pd.prototype.clone=function(){return new pd(this.x,this.y,this.z)};pd.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};pd.prototype.ax=function(){return[this.x,this.y,this.z]};function qd(a,b,c){this.x=a;this.y=b;this.z=c}w(qd,pd);f=qd.prototype;f.clone=function(){return new qd(this.x,this.y,this.z)};f.Ag=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};f.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};f.Ib=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};f.normalize=function(){return this.scale(1/this.Ag())};f.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
f.Pc=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};f.km=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function rd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function sd(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return c*c+d*d+e*e}function td(a,b){return new qd(a.x+b.x,a.y+b.y,a.z+b.z)}function ud(a,b){return new qd(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};A.S=qd;f=A.S.prototype;f.clone=qd.prototype.clone;f.Ag=qd.prototype.Ag;f.scale=qd.prototype.scale;f.Ib=qd.prototype.Ib;f.add=qd.prototype.add;f.Pc=qd.prototype.Pc;f.normalize=function(){var a=this.Ag();return 0==a?this.scale(0):this.scale(1/a)};A.S.nj=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};A.S.zk=ud;A.S.su=rd;A.S.Dr=function(a,b,c){var d=a.x,e=a.y;a=a.z;return new qd(d+c*(b.x-d),e+c*(b.y-e),a+c*(b.z-a))};A.S.prototype.__defineGetter__("xx",function(){return this.x});
A.S.prototype.__defineGetter__("yy",function(){return this.y});A.S.prototype.__defineGetter__("zz",function(){return this.z});v("X.vector",A.S);v("X.vector.prototype.clone",A.S.prototype.clone);v("X.vector.prototype.magnitude",A.S.prototype.Ag);v("X.vector.prototype.scale",A.S.prototype.scale);v("X.vector.prototype.invert",A.S.prototype.Ib);v("X.vector.prototype.normalize",A.S.prototype.normalize);v("X.vector.prototype.add",A.S.prototype.add);v("X.vector.prototype.subtract",A.S.prototype.Pc);
v("X.vector.dot",A.S.nj);v("X.vector.cross",A.S.zk);v("X.vector.distance",A.S.su);v("X.vector.lerp",A.S.Dr);function vd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}vd.prototype.BYTES_PER_ELEMENT=8;vd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};vd.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{vd.BYTES_PER_ELEMENT=8}catch(wd){}vd.prototype.BYTES_PER_ELEMENT=vd.prototype.BYTES_PER_ELEMENT;vd.prototype.set=vd.prototype.set;vd.prototype.toString=vd.prototype.toString;v("Float64Array",vd)};function xd(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}xd.prototype.BYTES_PER_ELEMENT=4;xd.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};xd.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(xd.BYTES_PER_ELEMENT=4,xd.prototype.BYTES_PER_ELEMENT=xd.prototype.BYTES_PER_ELEMENT,xd.prototype.set=xd.prototype.set,xd.prototype.toString=xd.prototype.toString,v("Float32Array",xd));function yd(){return new Float32Array(3)}function zd(a,b,c){var d=yd();d[0]=a;d[1]=b;d[2]=c;return d}function Ad(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function Bd(){return new Float32Array(4)}function Cd(a,b,c,d){var e=Bd();e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};function Dd(){return new Float32Array(16)}function Ed(){var a=Dd();a[0]=a[5]=a[10]=a[15]=1;return a}function Fd(a,b,c,d,e,h,k,l,n,p,m,q,t,s,z,y,I){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=h;a[5]=k;a[6]=l;a[7]=n;a[8]=p;a[9]=m;a[10]=q;a[11]=t;a[12]=s;a[13]=z;a[14]=y;a[15]=I;return a}function Gd(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Hd(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function L(a,b,c,d,e,h){a[b]=c;a[b+4]=d;a[b+8]=e;a[b+12]=h}
function Id(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Jd(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Kd(a,b,c){var d=a[0],e=a[1],h=a[2],k=a[3],l=a[4],n=a[5],p=a[6],m=a[7],q=a[8],t=a[9],s=a[10],z=a[11],y=a[12],I=a[13],P=a[14];a=a[15];var N=b[0],H=b[1],T=b[2],ca=b[3],W=b[4],wa=b[5],oa=b[6],ya=b[7],Pa=b[8],Ja=b[9],Qa=b[10],ka=b[11],za=b[12],ra=b[13],Jc=b[14];b=b[15];c[0]=d*N+l*H+q*T+y*ca;c[1]=e*N+n*H+t*T+I*ca;c[2]=h*N+p*H+s*T+P*ca;c[3]=k*N+m*H+z*T+a*ca;c[4]=d*W+l*wa+q*oa+y*ya;c[5]=e*W+n*wa+t*oa+I*ya;c[6]=h*W+p*wa+s*oa+P*ya;c[7]=k*W+m*wa+z*oa+a*ya;c[8]=d*Pa+l*Ja+q*Qa+y*ka;c[9]=e*Pa+n*Ja+t*Qa+
I*ka;c[10]=h*Pa+p*Ja+s*Qa+P*ka;c[11]=k*Pa+m*Ja+z*Qa+a*ka;c[12]=d*za+l*ra+q*Jc+y*b;c[13]=e*za+n*ra+t*Jc+I*b;c[14]=h*za+p*ra+s*Jc+P*b;c[15]=k*za+m*ra+z*Jc+a*b;return c}
function Ld(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=a[8],q=a[9],t=a[10],s=a[11],z=a[12],y=a[13],I=a[14],P=a[15],N=c*l-d*k,H=c*n-e*k,T=c*p-h*k,ca=d*n-e*l,W=d*p-h*l,wa=e*p-h*n,oa=m*y-q*z,ya=m*I-t*z,Pa=m*P-s*z,Ja=q*I-t*y,Qa=q*P-s*y,ka=t*P-s*I,za=N*ka-H*Qa+T*Ja+ca*Pa-W*ya+wa*oa;if(0==za)return!1;za=1/za;b[0]=(l*ka-n*Qa+p*Ja)*za;b[1]=(-d*ka+e*Qa-h*Ja)*za;b[2]=(y*wa-I*W+P*ca)*za;b[3]=(-q*wa+t*W-s*ca)*za;b[4]=(-k*ka+n*Pa-p*ya)*za;b[5]=(c*ka-e*Pa+h*ya)*za;b[6]=(-z*wa+I*T-P*H)*za;
b[7]=(m*wa-t*T+s*H)*za;b[8]=(k*Qa-l*Pa+p*oa)*za;b[9]=(-c*Qa+d*Pa-h*oa)*za;b[10]=(z*W-y*T+P*N)*za;b[11]=(-m*W+q*T-s*N)*za;b[12]=(-k*Ja+l*ya-n*oa)*za;b[13]=(c*Ja-d*ya+e*oa)*za;b[14]=(-z*ca+y*H-I*N)*za;b[15]=(m*ca-q*H+t*N)*za;return!0}function Md(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}
function Nd(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];c[0]=d*a[0]+e*a[4]+h*a[8]+b*a[12];c[1]=d*a[1]+e*a[5]+h*a[9]+b*a[13];c[2]=d*a[2]+e*a[6]+h*a[10]+b*a[14];c[3]=d*a[3]+e*a[7]+h*a[11]+b*a[15];return c}function Od(a,b,c,d){var e=a[1]*b+a[5]*c+a[9]*d+a[13],h=a[2]*b+a[6]*c+a[10]*d+a[14],k=a[3]*b+a[7]*c+a[11]*d+a[15];a[12]=a[0]*b+a[4]*c+a[8]*d+a[12];a[13]=e;a[14]=h;a[15]=k;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);A.v={};A.v.zB=function(a,b,c,d){c=c.Pc(b);c.normalize();d=A.S.zk(c,d);d.normalize();var e=A.S.zk(d,c);e.normalize();c.Ib();L(a,0,d.x,d.y,d.z,0);L(a,1,e.x,e.y,e.z,0);L(a,2,c.x,c.y,c.z,0);Od(a,-b.x,-b.y,-b.z);return a};A.v.cc=function(a,b,c,d){var e=1/(b*a[3]+c*a[7]+d*a[11]+a[15]);return new A.S((b*a[0]+c*a[4]+d*a[8]+a[12])*e,(b*a[1]+c*a[5]+d*a[9]+a[13])*e,(b*a[2]+c*a[6]+d*a[10]+a[14])*e)};
A.v.HM=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Jd(a,b,d);Jd(a,c,e);Id(a,b,e);Id(a,c,d);return a};A.v.GM=function(a,b,c){var d=new Float32Array(4),e=new Float32Array(4);Hd(a,b,d);Hd(a,c,e);Gd(a,b,e);Gd(a,c,d);return a};A.v.oo=Ed;A.v.clone=function(a){var b=Dd();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
A.v.fx=function(a,b){if(b==a){var c=a[1],d=a[2],e=a[3],h=a[6],k=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=h;b[11]=a[14];b[12]=e;b[13]=k;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
A.v.DG=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],h=a[4],k=a[5],l=a[6],n=a[7],p=a[8],m=a[9],q=a[10],t=a[11],s=a[12],z=a[13],y=a[14];a=a[15];return(b*k-c*h)*(q*a-t*y)-(b*l-d*h)*(m*a-t*z)+(b*n-e*h)*(m*y-q*z)+(c*l-d*k)*(p*a-t*s)-(c*n-e*k)*(p*y-q*s)+(d*n-e*l)*(p*z-m*s)};A.v.Ib=Ld;A.v.yv=function(a,b,c,d,e){var h=b/2;b=e-d;var k=Math.sin(h);if(0==b||0==k||0==c)return a;h=Math.cos(h)/k;return Fd(a,h/c,0,0,0,0,h,0,0,0,0,-(e+d)/b,-1,0,0,-(2*d*e)/b,0)};
A.v.UJ=function(a,b,c,d,e,h,k){return Fd(a,2*h/(c-b),0,0,0,0,2*h/(e-d),0,0,(c+b)/(c-b),(e+d)/(e-d),-(k+h)/(k-h),-1,0,0,-(2*k*h)/(k-h),0)};A.v.VJ=function(a,b,c,d,e,h,k){return Fd(a,2/(c-b),0,0,0,0,2/(e-d),0,0,0,0,-2/(k-h),0,-(c+b)/(c-b),-(e+d)/(e-d),-(k+h)/(k-h),1)};A.v.multiply=Kd;A.v.JB=Nd;A.v.translate=Od;A.v.scale=function(a,b,c,d){return Fd(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*d,a[9]*d,a[10]*d,a[11]*d,a[12],a[13],a[14],a[15])};
A.v.rotate=function(a,b,c,d,e){var h=a[0],k=a[1],l=a[2],n=a[3],p=a[4],m=a[5],q=a[6],t=a[7],s=a[8],z=a[9],y=a[10],I=a[11],P=Math.cos(b),N=Math.sin(b),H=1-P;b=c*c*H+P;var T=c*d*H+e*N,ca=c*e*H-d*N,W=c*d*H-e*N,wa=d*d*H+P,oa=d*e*H+c*N,ya=c*e*H+d*N;c=d*e*H-c*N;e=e*e*H+P;return Fd(a,h*b+p*T+s*ca,k*b+m*T+z*ca,l*b+q*T+y*ca,n*b+t*T+I*ca,h*W+p*wa+s*oa,k*W+m*wa+z*oa,l*W+q*wa+y*oa,n*W+t*wa+I*oa,h*ya+p*c+s*e,k*ya+m*c+z*e,l*ya+q*c+y*e,n*ya+t*c+I*e,a[12],a[13],a[14],a[15])};
A.v.js=function(a,b){var c=a[4],d=a[5],e=a[6],h=a[7],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[4]=c*m+k*q;a[5]=d*m+l*q;a[6]=e*m+n*q;a[7]=h*m+p*q;a[8]=c*-q+k*m;a[9]=d*-q+l*m;a[10]=e*-q+n*m;a[11]=h*-q+p*m;return a};A.v.ks=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[8],l=a[9],n=a[10],p=a[11],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*-q;a[1]=d*m+l*-q;a[2]=e*m+n*-q;a[3]=h*m+p*-q;a[8]=c*q+k*m;a[9]=d*q+l*m;a[10]=e*q+n*m;a[11]=h*q+p*m;return a};
A.v.ls=function(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7],m=Math.cos(b),q=Math.sin(b);a[0]=c*m+k*q;a[1]=d*m+l*q;a[2]=e*m+n*q;a[3]=h*m+p*q;a[4]=c*-q+k*m;a[5]=d*-q+l*m;a[6]=e*-q+n*m;a[7]=h*-q+p*m;return a};v("X.matrix.identity",A.v.oo);v("X.matrix.clone",A.v.clone);v("X.matrix.transpose",A.v.fx);v("X.matrix.determinant",A.v.DG);v("X.matrix.invert",A.v.Ib);v("X.matrix.multiply",A.v.multiply);v("X.matrix.multiplyByVector",A.v.cc);v("X.matrix.multiplyByVec4",A.v.JB);
v("X.matrix.makePerspective",A.v.yv);v("X.matrix.makeFrustum",A.v.UJ);v("X.matrix.makeOrtho",A.v.VJ);v("X.matrix.makeLookAt",A.v.zB);v("X.matrix.translate",A.v.translate);v("X.matrix.scale",A.v.scale);v("X.matrix.rotate",A.v.rotate);v("X.matrix.rotateX",A.v.js);v("X.matrix.rotateY",A.v.ks);v("X.matrix.rotateZ",A.v.ls);v("X.matrix.swapRows",A.v.HM);v("X.matrix.swapCols",A.v.GM);function Pd(){cd.call(this);this.u="transform";this.Fb=A.v.oo()}w(Pd,cd);Pd.prototype.__defineGetter__("matrix",function(){return this.Fb});Pd.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid matrix.");this.Fb=a;this.ia()});f=Pd.prototype;f.js=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.js(this.Fb,a*Math.PI/180);this.ia()};
f.ks=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.ks(this.Fb,a*Math.PI/180);this.ia()};f.ls=function(a){if(!u(a)||-360>a||360<a)throw Error("Invalid angle.");A.v.ls(this.Fb,a*Math.PI/180);this.ia()};f.DD=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.Fb,a,0,0);this.ia()};f.ED=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.Fb,0,a,0);this.ia()};
f.FD=function(a){if(!u(a))throw Error("Invalid distance.");A.v.translate(this.Fb,0,0,a);this.ia()};function Qd(a,b,c){a.Fb[b+4*c]*=-1;a.ia()}f.WG=function(){Qd(this,0,0)};f.XG=function(){Qd(this,1,1)};f.YG=function(){Qd(this,2,2)};f.ia=function(){this.J=!0};v("X.transform",Pd);v("X.transform.prototype.rotateX",Pd.prototype.js);v("X.transform.prototype.rotateY",Pd.prototype.ks);v("X.transform.prototype.rotateZ",Pd.prototype.ls);v("X.transform.prototype.translateX",Pd.prototype.DD);
v("X.transform.prototype.translateY",Pd.prototype.ED);v("X.transform.prototype.translateZ",Pd.prototype.FD);v("X.transform.prototype.flipX",Pd.prototype.WG);v("X.transform.prototype.flipY",Pd.prototype.XG);v("X.transform.prototype.flipZ",Pd.prototype.YG);v("X.transform.prototype.modified",Pd.prototype.ia);function Rd(){cd.call(this);this.u="texture";this.Xi=this.cg=this.la=null;this.vt=this.wt=0;this.dy=!1;Aa(this,new gd)}w(Rd,cd);Rd.prototype.__defineSetter__("rawData",function(a){this.Xi=a;this.J=!0});Rd.prototype.__defineSetter__("rawDataHeight",function(a){this.vt=a;this.J=!0});Rd.prototype.__defineSetter__("rawDataWidth",function(a){this.wt=a;this.J=!0});Rd.prototype.__defineSetter__("grayscale",function(a){this.dy=a;this.J=!0});v("X.texture",Rd);function Sd(){this.Vd=Ud;this.sc=new Pd;this.Oa=[1,1,1];this.Xl=this.fb=this.Uc=this.ha=this.G=null;this.Sl=[];this.vb=!0;this.Rl=this.tn=1;this.Jl=null;this.jn=!1;this.gd=1;this.wd=0;this.sn=!0}var Ud="TRIANGLES";Sd.prototype.__defineSetter__("type",function(a){return this.Vd=a});Sd.prototype.__defineGetter__("type",function(){return this.Vd});Sd.prototype.__defineGetter__("texture",function(){this.fb||(this.fb=new Rd);return this.fb});Sd.prototype.__defineGetter__("transform",function(){return this.sc});
Sd.prototype.__defineGetter__("points",function(){return this.G});Sd.prototype.__defineSetter__("points",function(a){this.G=a});Sd.prototype.__defineGetter__("normals",function(){return this.ha});Sd.prototype.__defineSetter__("normals",function(a){this.ha=a});Sd.prototype.__defineGetter__("colors",function(){return this.Uc});Sd.prototype.__defineSetter__("colors",function(a){this.Uc=a});Sd.prototype.__defineGetter__("color",function(){return this.Oa});
Sd.prototype.__defineSetter__("color",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Oa=a;this.J=!0});Sd.prototype.__defineGetter__("opacity",function(){return this.gd});Sd.prototype.__defineSetter__("opacity",function(a){if(!u(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].opacity=a);this.gd=a;this.J=!0});Sd.prototype.__defineGetter__("caption",function(){return this.Jl});
Sd.prototype.__defineSetter__("caption",function(a){this.Jl=a;this.J=!0});Sd.prototype.__defineGetter__("visible",function(){return this.vb});Sd.prototype.__defineSetter__("visible",function(a){for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)null!=b[d]&&(b[d].visible=a);this.vb=a;this.J=!0});Sd.prototype.__defineGetter__("pointsize",function(){return this.tn});Sd.prototype.__defineSetter__("pointsize",function(a){if(!u(a))throw Error("Invalid point size.");this.tn=a;this.J=!0});
Sd.prototype.__defineGetter__("magicmode",function(){return this.jn});Sd.prototype.__defineSetter__("magicmode",function(a){if(!ja(a))throw Error("Invalid magic mode setting.");this.jn=a;this.J=!0});Sd.prototype.__defineGetter__("linewidth",function(){return this.Rl});Sd.prototype.__defineSetter__("linewidth",function(a){if(!u(a))throw Error("Invalid line width.");this.Rl=a;this.J=!0});Sd.prototype.__defineGetter__("pickable",function(){return this.sn});
Sd.prototype.__defineSetter__("pickable",function(a){if(!ja(a))throw Error("Invalid pickable setting.");this.sn=a;this.J=!0});Sd.prototype.__defineGetter__("textureCoordinateMap",function(){return this.Xl});Sd.prototype.__defineSetter__("textureCoordinateMap",function(){});function Vd(){this.pe=Infinity;this.Eb=this.jc=-Infinity;this.Gb=Infinity;this.Ti=[0,0,0];this.Ri=[1,1,1]}Vd.prototype.__defineGetter__("lowerThreshold",function(){return this.Eb});Vd.prototype.__defineSetter__("lowerThreshold",function(a){this.Eb=a});Vd.prototype.__defineGetter__("upperThreshold",function(){return this.Gb});Vd.prototype.__defineSetter__("upperThreshold",function(a){this.Gb=a});Vd.prototype.__defineGetter__("min",function(){return this.pe});Vd.prototype.__defineGetter__("max",function(){return this.jc});
Vd.prototype.__defineGetter__("minColor",function(){return this.Ti});Vd.prototype.__defineSetter__("minColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid min. color.");this.Ti=a});Vd.prototype.__defineGetter__("maxColor",function(){return this.Ri});Vd.prototype.__defineSetter__("maxColor",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid max. color.");this.Ri=a});function Wd(){cd.call(this);this.u="scalars";this.fn=this.kb=null;this.qy=!0;this.jt=0;Aa(this,new gd);Aa(this,new Vd);this.Ti=[0,1,0];this.Ri=[1,0,0]}w(Wd,cd);Wd.prototype.__defineGetter__("array",function(){return this.kb});Wd.prototype.__defineSetter__("array",function(a){this.fn=this.kb=a;this.J=!0});Wd.prototype.__defineGetter__("interpolation",function(){return this.jt});Wd.prototype.__defineSetter__("interpolation",function(a){this.jt=a});v("X.scalars",Wd);function Xd(a){cd.call(this);this.u="object";this.j=[];this.lb=this.Sd=null;Aa(this,new Sd);null!=a&&this.xk(a)}w(Xd,cd);
Xd.prototype.xk=function(a){this.Vd=a.Vd;this.sc=new Pd;this.sc.Fb=new Float32Array(a.sc.Fb);this.Oa=a.Oa.slice();a.G&&(this.G=new dd(a.G.length,a.G));a.ha&&(this.ha=new dd(a.ha.length,a.ha));a.Uc&&(this.Uc=new dd(a.Uc.length,a.Uc));this.fb=a.fb;this.Xl=a.Xl;a.la&&(this.la=new fd((new String(a.la.gq)).toString()));this.gd=a.gd;this.j.length=0;var b=a.j;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.j.push(new A[b[d].u](b[d]));this.vb=a.vb;this.tn=a.tn;this.Rl=a.Rl;a.Jl&&(this.Jl=(new String(a.Jl)).toString());
this.jn=a.jn;this.sn=a.sn;this.Sl=a.Sl.slice();this.J=!0};Xd.prototype.__defineGetter__("colortable",function(){this.Sd||(this.Sd=new od);return this.Sd});Xd.prototype.__defineGetter__("scalars",function(){this.lb||(this.lb=new Wd);return this.lb});Xd.prototype.__defineGetter__("children",function(){return this.j});Xd.prototype.ia=function(){var a=new Yd;a.Wa=this;this.dispatchEvent(a)};Xd.prototype.remove=function(){var a=new Zd;a.Wa=this;this.dispatchEvent(a)};
function $d(a,b){if(!(null!=a&&null!=b&&a instanceof Xd&&b instanceof Xd))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.gd?-1:1==b.gd?1:null!=a.wd&&null!=b.wd&&a.wd>b.wd?-1:1}v("X.object",Xd);v("X.object.prototype.modified",Xd.prototype.ia);v("X.object.prototype.remove",Xd.prototype.remove);function ae(a){Dc.call(this,a);this.u="event"}w(ae,Dc);var be="pan"+B(),de="rotate"+B(),ee="zoom"+B(),fe="scroll"+B();B();var ge="resetview"+B(),he="windowlevel"+B(),ie="modified"+B(),je="remove"+B(),ke="progress"+B(),le="hover"+B(),me="hover_end"+B(),ne="computing"+B(),oe="computing_end"+B(),pe="computing_progress"+B();function qe(){ae.call(this,he);this.pt=this.Dt=0}w(qe,ae);function re(){ae.call(this,be);this.wd=new A.S(0,0,0)}w(re,ae);function se(){ae.call(this,de);this.wd=new A.S(0,0,0)}
w(se,ae);function te(){ae.call(this,ee);this.bg=this.Yg=!1}w(te,ae);function ue(){ae.call(this,fe);this.lc=!1}w(ue,ae);function we(){ae.call(this,le);this.nq=this.mq=0}w(we,ae);function xe(){ae.call(this,me)}w(xe,ae);function ye(){ae.call(this,ge)}w(ye,ae);function Yd(){ae.call(this,ie);this.Ba=this.Wa=null}w(Yd,ae);function Zd(){ae.call(this,je);this.Ba=this.Wa=null}w(Zd,ae);function ze(){ae.call(this,ke);this.nk=0}w(ze,ae);function Ae(){ae.call(this,ne);this.Wa=null}w(Ae,ae);
function Be(){ae.call(this,pe);this.nk=0}w(Be,ae);function Ce(){ae.call(this,oe);this.Wa=null}w(Ce,ae);v("X.event.events.PAN",be);v("X.event.events.ROTATE",de);v("X.event.events.ZOOM",ee);v("X.event.events.SCROLL",fe);function Ge(){cd.call(this);this.u="parser";this._data=null;this.Va=0;this.MF=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.cq=!0}w(Ge,cd);Ge.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function He(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)if(!isNaN(a[e]))var h=a[e],b=Math.min(b,h),c=Math.max(c,h);return[b,c]}
function Ie(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
Ge.prototype.h=function(a,b){null!=b||(b=1);var c=1,d=Uint8Array;switch(a){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;c=2;break;case "sshort":d=Int16Array;c=2;break;case "uint":d=Uint32Array;c=4;break;case "sint":d=Int32Array;c=4;break;case "float":d=Float32Array;c=4;break;case "complex":d=Float64Array;c=8;break;case "double":d=Float64Array,c=8}d=new d(this._data.slice(this.Va,this.Va+=b*c));if(this.MF!=this.cq)for(var e=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),h=0;h<d.byteLength;h+=
c)for(var k=h+c-1,l=h;k>l;k--,l++){var n=e[l];e[l]=e[k];e[k]=n}return 1==b?d[0]:d};
function Je(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],d=Cd(0,0,0,1),e=Bd();Nd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(0,0,b[2]-1,1);Nd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(0,b[1]-
1,0,1);Nd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(b[0]-1,0,0,1);Nd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(b[0]-1,b[1]-1,0,1);Nd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];
c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(b[0]-1,0,b[2]-1,1);Nd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(0,b[1]-1,b[2]-1,1);Nd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];d=Cd(b[0]-1,b[1]-1,b[2]-1,1);Nd(a,d,e);c[0]=e[0]<c[0]?e[0]:c[0];c[1]=e[0]>c[1]?e[0]:c[1];c[2]=e[1]<c[2]?e[1]:
c[2];c[3]=e[1]>c[3]?e[1]:c[3];c[4]=e[2]<c[4]?e[2]:c[4];c[5]=e[2]>c[5]?e[2]:c[5];return c}
function Ke(a,b){var c=Ed();if(a.length!=b.length||a[0]!=b[0]||a[1]!=b[1]||a[2]!=b[2]){var d=Math.acos(a[2]),e=yd(),h=a[0],k=a[1],l=a[2],n=b[0],p=b[1],m=b[2];e[0]=k*m-l*p;e[1]=l*n-h*m;e[2]=h*p-k*n;Ad(e,e);h=Math.cos(d/2);k=Math.sin(d/2)*e[0];l=Math.sin(d/2)*e[1];d=Math.sin(d/2)*e[2];L(c,0,h*h+k*k-l*l-d*d,2*(k*l-h*d),2*(k*d+h*l),0);L(c,1,2*(k*l+h*d),h*h+l*l-k*k-d*d,2*(l*d-h*k),0);L(c,2,2*(k*d-h*l),2*(l*d+h*k),h*h+d*d-l*l-k*k,0)}d=Dd();Ld(c,d);return[c,d]}
function Le(a,b,c,d,e,h,k,l,n){var p=new Me;Ad(c,c);for(var m=[],q=[],t=0;6>t;t++)for(var s=Math.floor(t/2),z=(s+1)%3,y=(s+2)%3,I=(4+2*s)%6,P=0;2>P;P++){var N=(2+P+2*s)%6,H=-(c[s]*(e[t]-a[s])+c[z]*(e[N]-a[z]))/c[y]+a[y];if(H>=e[I]&&H<=e[I+1]||H<=e[I]&&H>=e[I+1]){var T=[];T[s]=e[t];T[z]=e[N];T[y]=H;m.push(T)}else T=[],T[s]=e[t],T[z]=e[N],T[y]=H,q.push(T)}a=zd(0,0,1);a=Ke(c,a);e=a[0];a=a[1];s=[];for(q=0;q<m.length;++q)t=Cd(m[q][0],m[q][1],m[q][2],1),z=Bd(),Nd(e,t,z),s.push([z[0],z[1],z[2]]);e=zd(1,
0,0);m=yd();Md(a,e,m);q=zd(0,1,0);e=yd();Md(a,q,e);t=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(q=q=0;q<s.length;++q)s[q][0]<t[0]&&(t[0]=s[q][0]),s[q][0]>t[1]&&(t[1]=s[q][0]),s[q][1]<t[2]&&(t[2]=s[q][1]),s[q][1]>t[3]&&(t[3]=s[q][1]),s[q][2]<t[4]&&(t[4]=s[q][2]),s[q][2]>t[5]&&(t[5]=s[q][2]);q=Cd(t[0]+(t[1]-t[0])/2,t[2]+(t[3]-t[2])/2,t[4]+(t[5]-t[4])/2,0);s=Bd();Kd(a,q,s);z=Math.floor(t[0]);y=Math.ceil(t[1]);z==y&&y++;I=y-z;P=Math.floor(t[2]);
N=Math.ceil(t[3]);H=N-P;T=b[0];b=b[1];var q=Math.ceil(I/T),ca=Math.ceil(H/b),W=new Uint8Array(4*q*ca),wa=new Rd;wa.wt=q;wa.vt=ca;var ca=Bd(),oa=Cd(0,0,t[4],1),ya=Dd();Kd(k.DF,a,ya);for(var Pa=N-1E-7,Ja=y-1E-7,Qa=0,ka=0,za=0,ra=P,ra=P;ra<=Pa;ra+=b)for(za++,ka=0,oa[1]=ra,q=z;q<=Ja;q+=T){ka++;oa[0]=q;Nd(ya,oa,ca);var Jc=4*Qa,De=Math.floor(ca[2]),Ee=Math.floor(ca[1]),Fe=Math.floor(ca[0]);if(0<=Fe&&Fe<k.Ja[0]&&0<=Ee&&Ee<k.Ja[1]&&0<=De&&De<k.Ja[2]){var ce=h[De][Ee][Fe],Uh=Fe=Ee=De=0;n?((ce=n.get(ce))||
(ce=[0,.61,0,0,1]),De=255*ce[1],Ee=255*ce[2],Fe=255*ce[3],Uh=255*ce[4]):(De=Ee=Fe=ce/k.jc*255,Uh=255);W[Jc]=De;W[++Jc]=Ee;W[++Jc]=Fe;W[++Jc]=Uh}else W[Jc]=0,W[++Jc]=0,W[++Jc]=0,W[++Jc]=0;Qa++}wa.Xi=W;p.fb=wa;p.SF=t;p.FF=a;p.EF=ya;p.LF=P;p.SP=N;p.RF=z;p.TP=y;p.fy=ka;p.ey=za;p.Zh=T;p.gb=I;p.Sh=b;p.Pa=H;p.ab=[s[0],s[1],s[2]];p.Ml=[c[0],c[1],c[2]];p.hq=[m[0],m[1],m[2]];p.lc=[e[0],e[1],e[2]];p.vb=!1;p.Yh=k;p.Rh=null==k.Yh||l?!0:!1;p.Il=d;p.Af();p.vb=!1;return p}
function Ne(a,b,c,d){var e;e=d.Tc;for(var h=[],k=[],l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,q=(2+2*n)%6,t=(4+2*n)%6,s=1/c[n]*(e[l]-b[n]);if(Infinity!=s&&-Infinity!=s){var z=b[p]+c[p]*s,s=b[m]+c[m]*s;z>=e[q]&&z<=e[q+1]&&s>=e[t]&&s<=e[t+1]?(q=[],q[n]=e[l],q[p]=z,q[m]=s,h.push(q)):(q=[],q[n]=e[l],q[p]=z,q[m]=s,k.push(q))}}e=[h,k];b=e[0];d.e[a].K=e;e=rd(new qd(b[0][0],b[0][1],b[0][2]),new qd(b[1][0],b[1][1],b[1][2]));d.e[a].RP=e;h=zd(0,0,1);k=Ke(c,h)[0];l=Cd(d.gt[0],d.gt[1],d.gt[2],0);
h=Bd();Nd(k,l,h);k=Bd();l=h[2];k[0]=c[0]*l;k[1]=c[1]*l;k[2]=c[2]*l;k[3]=c[3]*l;.5>Math.abs(h[0])&&(h[0]=.5);.5>Math.abs(h[1])&&(h[1]=.5);d.e[a].Ud=[Math.abs(h[0]),Math.abs(h[1])];d.e[a].Vl=h[2];d.e[a].Xa=k;e=Math.floor(Math.abs(e/h[2]));d.vn[a]=e+1;d.e[a].ga=e+1;d.e[a].K[0][0][0]>d.e[a].K[0][1][0]?0<k[0]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][0]<d.e[a].K[0][1][0]?0>k[0]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][1]>
d.e[a].K[0][1][1]?0<k[1]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][1]<d.e[a].K[0][1][1]?0>k[1]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][2]>d.e[a].K[0][1][2]?0<k[2]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e):d.e[a].K[0][0][2]<d.e[a].K[0][1][2]&&0>k[2]&&(e=d.e[a].K[0][0],d.e[a].K[0][0]=d.e[a].K[0][1],d.e[a].K[0][1]=e);d.e[a].st=-(c[0]*b[0][0]+c[1]*b[0][1]+c[2]*b[0][2])}
function Oe(a,b){var c;c=b._data;for(var d=b.Ja,e=b.jc,h=Array(d[2]),k=Array(d[2]),l=d[1]*d[0],n=0,p=0,m=0,q=0,t=0,q=0;q<d[2];q++){var s=c.subarray(q*l,(q+1)*l),t=0;k[q]=Array(d[1]);h[q]=Array(d[1]);for(m=0;m<d[1];m++)for(k[q][m]=new c.constructor(d[0]),h[q][m]=new c.constructor(d[0]),p=0;p<d[0];p++)n=s[t],k[q][m][p]=n/e*255,h[q][m][p]=n,t++}c=[h,k];b.rc=c[0];b.QP=c[1];A.ne(a.u+".reslice");b.ob=null!=b.t;b.Sd&&(b.en=b.Sd.oe);b.MQ=[0,0,0];b.Aa=[b.Rd[0]+(b.Qh[0]-1)/2,b.Rd[1]+(b.Qh[1]-1)/2,b.Rd[2]+(b.Qh[2]-
1)/2];b.Tc=[Math.min(b.Rd[0],b.Rd[0]+b.Qh[0]-1),Math.max(b.Rd[0],b.Rd[0]+b.Qh[0]-1),Math.min(b.Rd[1],b.Rd[1]+b.Qh[1]-1),Math.max(b.Rd[1],b.Rd[1]+b.Qh[1]-1),Math.min(b.Rd[2],b.Rd[2]+b.Qh[2]-1),Math.max(b.Rd[2],b.Rd[2]+b.Qh[2]-1)];b.e=[{},{},{}];c=zd(b.Aa[0],b.Aa[1],b.Aa[2]);b.e[0].wn=c;d=zd(1,0,0);Ad(d,d);b.e[0].H=d;e=[1,0,0];b.e[0].Oa=e;Ne(0,c,d,b);b.j[0].j=Array(b.e[0].ga);c[0]=b.e[0].K[0][0][0]+b.e[0].Xa[0]*Math.floor(b.e[0].ga/2);c[1]=b.e[0].K[0][0][1]+b.e[0].Xa[1]*Math.floor(b.e[0].ga/2);c[2]=
b.e[0].K[0][0][2]+b.e[0].Xa[2]*Math.floor(b.e[0].ga/2);c=Le(c,b.e[0].Ud,b.e[0].H,b.e[0].Oa,b.Tc,b.rc,b,b.ob,b.en);b.ob&&(c.t=b.t.j[0].j[Math.floor(b.e[0].ga/2)].fb);b.j[0].j[Math.floor(b.e[0].ga/2)]=c;b.Th=Math.floor(b.e[0].ga/2);b.Nl=Math.floor(b.e[0].ga/2);c=zd(b.Aa[0],b.Aa[1],b.Aa[2]);b.e[1].wn=c;d=zd(0,1,0);Ad(d,d);b.e[1].H=d;e=[0,1,0];b.e[1].Oa=e;Ne(1,c,d,b);b.j[1].j=Array(b.e[1].ga);c[0]=b.e[1].K[0][0][0]+b.e[1].Xa[0]*Math.floor(b.e[1].ga/2);c[1]=b.e[1].K[0][0][1]+b.e[1].Xa[1]*Math.floor(b.e[1].ga/
2);c[2]=b.e[1].K[0][0][2]+b.e[1].Xa[2]*Math.floor(b.e[1].ga/2);c=Le(c,b.e[1].Ud,b.e[1].H,b.e[1].Oa,b.Tc,b.rc,b,b.ob,b.en);b.ob&&(c.t=b.t.j[1].j[Math.floor(b.e[1].ga/2)].fb);b.j[1].j[Math.floor(b.e[1].ga/2)]=c;b.Uh=Math.floor(b.e[1].ga/2);b.Ol=Math.floor(b.e[1].ga/2);c=zd(b.Aa[0],b.Aa[1],b.Aa[2]);b.e[2].wn=c;d=zd(0,0,1);Ad(d,d);b.e[2].H=d;e=[0,.392,.804];b.e[2].Oa=e;Ne(2,c,d,b);b.j[2].j=Array(b.e[2].ga);c[0]=b.e[2].K[0][0][0]+b.e[2].Xa[0]*Math.floor(b.e[2].ga/2);c[1]=b.e[2].K[0][0][1]+b.e[2].Xa[1]*
Math.floor(b.e[2].ga/2);c[2]=b.e[2].K[0][0][2]+b.e[2].Xa[2]*Math.floor(b.e[2].ga/2);c=Le(c,b.e[2].Ud,b.e[2].H,b.e[2].Oa,b.Tc,b.rc,b,b.ob,b.en);b.ob&&(c.t=b.t.j[2].j[Math.floor(b.e[2].ga/2)].fb);b.j[2].j[Math.floor(b.e[2].ga/2)]=c;b.Vh=Math.floor(b.e[2].ga/2);b.Pl=Math.floor(b.e[2].ga/2);A.Qd(a.u+".reslice");return b.rc};function Pe(){Ge.call(this);this.u="parserOFF"}w(Pe,Ge);
Pe.prototype.parse=function(a,b,c){function d(){if(n===e)throw Error("End of file reached unexpectedly.");for(var a=n;a<e;++a)if(10===h[a]){var b=Ie(h,n,a);n=a+1;return b}n=e;return Ie(h,n,e-1)}A.ne(this.u+".parse");this._data=c;var e=c.byteLength,h=this.h("uchar",e);c=[];b.G=new dd(e);b.ha=new dd(e);for(var k=b.G,l=b.ha,n=0,p=d(),p=("OFF"===p?d():p).split(" "),m=p[0],p=p[1];m--;){var q=d(),q=q.split(" ");c.push([parseFloat(q[0]),parseFloat(q[1]),parseFloat(q[2])])}for(;p--;){var q=d(),q=q.split(" "),
t=c[parseInt(q[1],10)],m=c[parseInt(q[2],10)],q=c[parseInt(q[3],10)];k.add(t[0],t[1],t[2]);k.add(m[0],m[1],m[2]);k.add(q[0],q[1],q[2]);t=new qd(t[0],t[1],t[2]);q=new qd(q[0],q[1],q[2]);m=ud((new qd(m[0],m[1],m[2])).Pc(t),q.Pc(t));m.normalize();l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z);l.add(m.x,m.y,m.z)}A.Qd(this.u+".parse");c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};v("X.parserOFF",Pe);v("X.parserOFF.prototype.parse",Pe.prototype.parse);function Me(a){Xd.call(this);this.u="slice";this.ab=[0,0,0];this.Ml=[0,0,1];this.lc=[0,1,0];this.hq=[1,0,0];this.Pa=this.gb=10;this.Xl=[0,1,0,0,1,1,1,1,1,0,0,0];this.t=this.Yh=null;this.Rh=!0;this.Il=[1,1,1];null!=a&&this.xk(a)}w(Me,Xd);Me.prototype.xk=function(a){this.ab=a.ab.slice();this.Ml=a.Ml.slice();this.lc=a.lc.slice();this.gb=a.gb;this.Pa=a.Pa;this.Yh=a.Yh;this.t=a.t;this.Rh=a.Rh;this.Il=a.Il;this.KF=a.KF;Me.d.xk.call(this,a)};Me.prototype.__defineSetter__("height",function(a){this.Pa=a});
Me.prototype.__defineSetter__("width",function(a){this.gb=a});Me.prototype.create=function(){this.Af()};
Me.prototype.Af=function(){var a=(new qd(this.Ml[0],this.Ml[1],this.Ml[2])).normalize(),b=new qd(this.lc[0],this.lc[1],this.lc[2]),c=new qd(this.hq[0],this.hq[1],this.hq[2]),d=new qd(this.ab[0],this.ab[1],this.ab[2]),e=td(c.clone().Ib().scale(this.gb/2),b.clone().Ib().scale(this.Pa/2)),h=new qd(e.x+d.x,e.y+d.y,e.z+d.z),e=td(c.clone().Ib().scale(this.gb/2),b.clone().scale(this.Pa/2)),k=new qd(e.x+d.x,e.y+d.y,e.z+d.z),e=td(c.clone().scale(this.gb/2),b.clone().Ib().scale(this.Pa/2)),l=new qd(e.x+d.x,
e.y+d.y,e.z+d.z),e=td(c.clone().scale(this.gb/2),b.clone().scale(this.Pa/2)),b=new qd(e.x+d.x,e.y+d.y,e.z+d.z);this.G=new dd(18);this.ha=new dd(18);this.G.add(h.x,h.y,h.z);this.G.add(k.x,k.y,k.z);this.G.add(l.x,l.y,l.z);this.G.add(l.x,l.y,l.z);this.G.add(b.x,b.y,b.z);this.G.add(k.x,k.y,k.z);this.ha.add(a.x,a.y,a.z);this.ha.add(a.x,a.y,a.z);this.ha.add(a.x,a.y,a.z);this.ha.add(a.x,a.y,a.z);this.ha.add(a.x,a.y,a.z);this.ha.add(a.x,a.y,a.z);this.Rh&&(a=new Xd,a.G=new dd(24),a.ha=new dd(24),a.G.add(h.x,
h.y,h.z),a.G.add(k.x,k.y,k.z),a.G.add(k.x,k.y,k.z),a.G.add(b.x,b.y,b.z),a.G.add(b.x,b.y,b.z),a.G.add(l.x,l.y,l.z),a.G.add(l.x,l.y,l.z),a.G.add(h.x,h.y,h.z),a.ha.add(0,0,0),a.ha.add(0,0,0),a.ha.add(0,0,0),a.ha.add(0,0,0),a.ha.add(0,0,0),a.ha.add(0,0,0),a.ha.add(0,0,0),a.ha.add(0,0,0),a.Oa=[this.Il[0],this.Il[1],this.Il[2]],a.Vd="LINES",a.Rl=2,this.j.push(a))};v("X.slice",Me);v("X.slice.prototype.create",Me.prototype.create);function K(a){Xd.call(this);this.u="volume";this.ab=[0,0,0];this.Ja=[10,10,10];this.Tc=[1,1,1];this.vn=[10,10,10];this.Wh=[1,1,1];this.cg=[];this.Pl=this.Vh=this.Ol=this.Uh=this.Nl=this.Th=0;this.xn=new Xd;this.yn=new Xd;this.zn=new Xd;this.lq=this.Ue=!1;this.Ob=-1;this.kq=[];this.t=null;this.Rh=!0;this.Xb=Infinity;this.Wb=-Infinity;this.ry=!0;this.jc=0;this._data=null;Aa(this,new gd);Aa(this,new Vd);null!=a&&this.xk(a)}w(K,Xd);
K.prototype.xk=function(a){this.ab=a.ab.slice();this.Ja=a.Ja.slice();this.Wh=a.Wh.slice();this.Th=a.Th;this.Nl=a.Nl;this.Uh=a.Uh;this.Ol=a.Ol;this.Vh=a.Vh;this.Pl=a.Pl;this.ay=a.ay.slice();this.xn=new Xd(a.xn);this.yn=new Xd(a.yn);this.zn=new Xd(a.zn);this.jc=a.jc;this._data=a._data;this.Ue=a.Ue;this.lq=a.lq;this.Ob=a.Ob;this.t=a.t;this.Rh=a.Rh;K.d.xk.call(this,a)};
K.prototype.Af=function(a){this.j.length=0;this.xn.j.length=0;this.yn.j.length=0;this.zn.j.length=0;this.j.push(this.xn);this.j.push(this.yn);this.j.push(this.zn);this.Rd=a.sf;this.gt=a.Rg;this.Qh=a.vd;this.Hl=a.Pe;this.DF=a.Qe;this.jc=a.max;this._data=a.data;this.J=!0};
K.prototype.ia=function(a){a="undefined"!==typeof a?a:!0;if(0<this.j.length){this.Ue!=this.lq&&(this.Ue||-1==this.Ob||(this.j[this.Ob].visible=!1),this.J=!0,this.lq=this.Ue);if(!this.vb)return;for(var b=0,b=0;3>b;b++){var c=this.j[b],d=0,e=0;0==b?(d=this.Th,e=this.Nl,this.Nl=this.Th):1==b?(d=this.Uh,e=this.Ol,this.Ol=this.Uh):2==b&&(d=this.Vh,e=this.Pl,this.Pl=this.Vh);if(null==this.j[b].j[parseInt(d,10)]){var h=yd();h[0]=this.e[b].K[0][0][0]+this.e[b].Xa[0]*parseInt(d,10);h[1]=this.e[b].K[0][0][1]+
this.e[b].Xa[1]*parseInt(d,10);h[2]=this.e[b].K[0][0][2]+this.e[b].Xa[2]*parseInt(d,10);if(this.ob){var k=Le(h,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,this.t.rc,this.t,this.t.ob,this.t.Sd.oe);this.t.j[b].j[parseInt(d,10)]=k;this.t.j[b].ia(!0)}h=Le(h,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,this.rc,this,!0,null);this.ob&&(h.t=h.fb,h.t=this.t.j[b].j[parseInt(d,10)].fb);c.j[parseInt(d,10)]=h;this.j[b].ia(!0)}e=c.j[parseInt(e,10)];this.Ue||(e.visible=!1);c=c.j[parseInt(d,10)];c.visible=!0;
c.gd=1;this.Ue&&(c.j[0].vb=!1,b!=this.Ob&&(c.visible=!1,c.gd=0))}this.Ue&&-1!=this.Ob&&Qe(this,this.Ob)}a&&K.d.ia.call(this)};K.prototype.__defineGetter__("dimensions",function(){return this.Ja});K.prototype.__defineSetter__("dimensions",function(a){this.Ja=a});K.prototype.__defineGetter__("spacing",function(){return this.Wh});K.prototype.__defineSetter__("spacing",function(a){this.Wh=a});K.prototype.__defineGetter__("bbox",function(){return this.Tc});K.prototype.__defineGetter__("range",function(){return this.vn});
K.prototype.__defineGetter__("dimensionsRAS",function(){return this.ay});K.prototype.__defineGetter__("volumeRendering",function(){return this.Ue});K.prototype.__defineSetter__("volumeRendering",function(a){this.Ue=a;this.ia(!1)});K.prototype.__defineGetter__("visible",function(){return this.vb});K.prototype.__defineSetter__("visible",function(a){if(a)this.vb=a,this.ia(!1);else{for(var b=this.j,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.vb=a;this.J=!0}});
K.prototype.__defineGetter__("center",function(){return this.ab});K.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center.");this.ab=a});K.prototype.__defineGetter__("volumeRenderingCache",function(){return this.kq});K.prototype.__defineSetter__("volumeRenderingCache",function(a){if(!(null!=a&&g(a)&&3>=a.length))throw Error("Invalid volumeRederingCache.");this.kq=a});K.prototype.__defineGetter__("image",function(){return this.cg});
K.prototype.__defineGetter__("labelmap",function(){this.t||(this.t=new Re(this));return this.t});K.prototype.__defineGetter__("indexX",function(){return this.Th});K.prototype.__defineSetter__("indexX",function(a){u(a)&&0<=a&&a<this.xn.j.length&&(this.Th=a,this.ia(!1))});K.prototype.__defineGetter__("indexY",function(){return this.Uh});K.prototype.__defineSetter__("indexY",function(a){u(a)&&0<=a&&a<this.yn.j.length&&(this.Uh=a,this.ia(!1))});K.prototype.__defineGetter__("indexZ",function(){return this.Vh});
K.prototype.__defineSetter__("indexZ",function(a){u(a)&&0<=a&&a<this.zn.j.length&&(this.Vh=a,this.ia(!1))});K.prototype.__defineGetter__("windowLow",function(){return this.Xb});K.prototype.__defineSetter__("windowLow",function(a){this.Xb=a});K.prototype.__defineGetter__("windowHigh",function(){return this.Wb});K.prototype.__defineSetter__("windowHigh",function(a){this.Wb=a});K.prototype.__defineGetter__("borders",function(){return this.Rh});
K.prototype.__defineSetter__("borders",function(a){this.Rh=a});K.prototype.__defineGetter__("reslicing",function(){return this.ry});K.prototype.__defineSetter__("reslicing",function(a){this.ry=a});K.prototype.__defineSetter__("xNormX",function(a){this.e[0].H[0]=a});K.prototype.__defineGetter__("xNormX",function(){return this.e[0].H[0]});K.prototype.__defineSetter__("xNormY",function(a){this.e[0].H[1]=a});K.prototype.__defineGetter__("xNormY",function(){return this.e[0].H[1]});
K.prototype.__defineSetter__("xNormZ",function(a){this.e[0].H[2]=a});K.prototype.__defineGetter__("xNormZ",function(){return this.e[0].H[2]});K.prototype.__defineSetter__("xColor",function(a){this.e[0].Oa=a});K.prototype.__defineGetter__("xColor",function(){return this.e[0].Oa});K.prototype.__defineSetter__("yNormX",function(a){this.e[1].H[0]=a});K.prototype.__defineGetter__("yNormX",function(){return this.e[1].H[0]});K.prototype.__defineSetter__("yNormY",function(a){this.e[1].H[1]=a});
K.prototype.__defineGetter__("yNormY",function(){return this.e[1].H[1]});K.prototype.__defineSetter__("yNormZ",function(a){this.e[1].H[2]=a});K.prototype.__defineGetter__("yNormZ",function(){return this.e[1].H[2]});K.prototype.__defineSetter__("yColor",function(a){this.e[1].Oa=a});K.prototype.__defineGetter__("yColor",function(){return this.e[1].Oa});K.prototype.__defineSetter__("zNormX",function(a){this.e[2].H[0]=a});K.prototype.__defineGetter__("zNormX",function(){return this.e[2].H[0]});
K.prototype.__defineSetter__("zNormY",function(a){this.e[2].H[1]=a});K.prototype.__defineGetter__("zNormY",function(){return this.e[2].H[1]});K.prototype.__defineSetter__("zNormZ",function(a){this.e[2].H[2]=a});K.prototype.__defineGetter__("zNormZ",function(){return this.e[2].H[2]});K.prototype.__defineSetter__("zColor",function(a){this.e[2].Oa=a});K.prototype.__defineGetter__("zColor",function(){return this.e[2].Oa});
K.prototype.vM=function(a){this.j[a].visible=!1;for(var b=0;b<this.j[a].j.length;b++)"undefined"!=typeof this.j[a].j[b]&&(this.ob&&(this.t.j[a].j[b].remove(),this.t.j[a].j[b]=null),this.j[a].j[b].remove(),this.j[a].j[b]=null);Ad(this.e[a].H,this.e[a].H);Ne(a,this.e[a].wn,this.e[a].H,this);this.j[a].j=[];alert("#VOLUME#",this.e[a].ga);this.j[a].j=Array(this.e[a].ga);this.ob&&(b=Le(this.e[a].wn,this.e[a].Ud,this.e[a].H,this.e[a].Oa,this.Tc,this.t.rc,this.t,this.t.ob,this.t.Sd.oe),this.t.j[a].j=[],this.t.j[a].j=
Array(this.e[a].ga),this.t.j[a].j[Math.floor(this.e[a].ga/2)]=b,this.t.j[a].ia());b=Le(this.e[a].wn,this.e[a].Ud,this.e[a].H,this.e[a].Oa,this.Tc,this.rc,this,!0,null);this.ob&&(b.t=b.fb,b.t=this.t.j[a].j[Math.floor(this.e[a].ga/2)].fb);this.j[a].j[Math.floor(this.e[a].ga/2)]=b;0==a?(this.Th=Math.floor(this.e[a].ga/2),this.Nl=Math.floor(this.e[a].ga/2)):1==a?(this.Uh=Math.floor(this.e[a].ga/2),this.Ol=Math.floor(this.e[a].ga/2)):(this.Vh=Math.floor(this.e[a].ga/2),this.Pl=Math.floor(this.e[a].ga/
2));this.j[a].ia();this.j[a].j[Math.floor(this.e[a].ga/2)].vb=!0};
function Qe(a,b){if(!a.Xp)if(!a.Ue||!a.J&&b==a.Ob)a.Ob=b;else if(-1==a.kq.indexOf(b))a.kq.push(b),a.Xp=!0,Se(a,b),setTimeout(function(){var a=null;0<=this.Ob&&(a=this.j[this.Ob],a.visible=!1);var a=this.j[b],c=a.j.length,d=Math.floor(c/4),e;for(e=0;e<1*d;e++){if(null==a.j[e]){var p=yd();p[0]=this.e[b].K[0][0][0]+this.e[b].Xa[0]*e;p[1]=this.e[b].K[0][0][1]+this.e[b].Xa[1]*e;p[2]=this.e[b].K[0][0][2]+this.e[b].Xa[2]*e;if(this.ob){var m=Le(p,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,this.t.rc,this.t,
this.t.ob,this.t.Sd.oe);this.t.j[b].j[e]=m;this.t.j[b].ia(!0)}p=Le(p,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,this.rc,this,!0,null);p.j[0].vb=!1;this.ob&&(p.t=p.fb,p.t=this.t.j[b].j[e].fb);a.j[e]=p}a.j[e].vb=!0}Te(this,.25);setTimeout(function(){for(;e<2*d;e++){if(null==a.j[e]){var m=yd();m[0]=this.e[b].K[0][0][0]+this.e[b].Xa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Xa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Xa[2]*e;if(this.ob){var p=Le(m,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,this.t.rc,
this.t,this.t.ob,this.t.Sd.oe);this.t.j[b].j[e]=p;this.t.j[b].ia(!0)}m=Le(m,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,this.rc,this,!0,null);m.j[0].vb=!1;this.ob&&(m.t=m.fb,m.t=this.t.j[b].j[e].fb);a.j[e]=m}a.j[e].vb=!0}Te(this,.5);setTimeout(function(){for(;e<3*d;e++){if(null==a.j[e]){var m=yd();m[0]=this.e[b].K[0][0][0]+this.e[b].Xa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Xa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Xa[2]*e;if(this.ob){var p=Le(m,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,
this.t.rc,this.t,this.t.ob,this.t.Sd.oe);this.t.j[b].j[e]=p;this.t.j[b].ia(!0)}m=Le(m,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,this.rc,this,!0,null);m.j[0].vb=!1;this.ob&&(m.t=m.fb,m.t=this.t.j[b].j[e].fb);a.j[e]=m}a.j[e].vb=!0}Te(this,.75);setTimeout(function(){for(e=3*d;e<c;e++){if(null==a.j[e]){var m=yd();m[0]=this.e[b].K[0][0][0]+this.e[b].Xa[0]*e;m[1]=this.e[b].K[0][0][1]+this.e[b].Xa[1]*e;m[2]=this.e[b].K[0][0][2]+this.e[b].Xa[2]*e;if(this.ob){var p=Le(m,this.e[b].Ud,this.e[b].H,this.e[b].Oa,
this.Tc,this.t.rc,this.t,this.t.ob,this.t.Sd.oe);this.t.j[b].j[e]=p;this.t.j[b].ia(!0)}m=Le(m,this.e[b].Ud,this.e[b].H,this.e[b].Oa,this.Tc,this.rc,this,!0,null);m.j[0].vb=!1;this.ob&&(m.t=m.fb,m.t=this.t.j[b].j[e].fb);a.j[e]=m}a.j[e].vb=!0}Te(this,1);setTimeout(function(){this.Xp&&this.j[b].ia(!0);this.Ob=b;this.J=!1;if(this.Xp){var a=new Ce;a.Wa=this;this.dispatchEvent(a);this.onComputingEnd(b)}this.Xp=!1}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(this),10)}.bind(a),10);else{var c=a.j[a.Ob];
c.visible=!1;var c=a.j[b],d=c.j.length,e;for(e=0;e<d;e++)c.j[e].vb=!0;a.Ob=b;a.J=!1}}function Se(a,b){var c=new Ae;c.Wa=a;a.dispatchEvent(c);a.onComputing(b)}function Te(a,b){var c=new Be;c.nk=b;a.dispatchEvent(c);a.onComputingProgress(100*b)}K.prototype.Ov=function(){};K.prototype.Qv=function(){};K.prototype.Pv=function(){};K.REORIENT_TRANSFORM_KEY="ot_"+B();v("X.volume.REORIENT_TRANSFORM_KEY",K.REORIENT_TRANSFORM_KEY);K.REORIENTED_DIMENSIONS_KEY="otd_"+B();
v("X.volume.REORIENTED_DIMENSIONS_KEY",K.REORIENTED_DIMENSIONS_KEY);K.ORIENTATION_KEY="or_"+B();v("X.volume.ORIENTATION_KEY",K.ORIENTATION_KEY);K.SINGLE_FRAME_SCAN="sf_"+B();v("X.volume.SINGLE_FRAME_SCAN",K.SINGLE_FRAME_SCAN);v("X.volume",K);v("X.volume.prototype.modified",K.prototype.ia);v("X.volume.prototype.sliceInfoChanged",K.prototype.vM);v("X.volume.prototype.onComputing",K.prototype.Ov);v("X.volume.prototype.onComputingProgress",K.prototype.Qv);v("X.volume.prototype.onComputingEnd",K.prototype.Pv);function Ue(){Ge.call(this);this.u="parserDCM"}w(Ue,Ge);
Ue.prototype.parse=function(a,b,c){b.Mh={};b.Mh.Fo=0;this.xi(c,b);if(null==b.la.length||b.ta.length==b.la.length){b.Mh.Fo=b.la.length;c=[];for(var d=0;d<b.ta.length;d++)null==b.ta[d].data&&c.push(d);for(d=0;d<c.length;d++)b.ta.splice(c[d],1);if(0==b.ta.length)throw Error("This scan does not contain imaging data that can be visualized.");var e={};c={};for(d=0;d<b.ta.length;d++)e.hasOwnProperty(b.ta[d].series_instance_uid)||(e[b.ta[d].series_instance_uid]=[],c[b.ta[d].series_instance_uid]={}),c[b.ta[d].series_instance_uid].hasOwnProperty(b.ta[d].sop_instance_uid)||
(c[b.ta[d].series_instance_uid][b.ta[d].sop_instance_uid]=!0,e[b.ta[d].series_instance_uid].push(b.ta[d]));var d=Object.keys(e)[0],h=e[d],k=h.length;c={};var l="image_position_patient";1==k?(l="image_position_patient",e[d][0].dist=0):h[0].image_position_patient[0]!=h[1].image_position_patient[0]||h[0].image_position_patient[1]!=h[1].image_position_patient[1]||h[0].image_position_patient[2]!=h[1].image_position_patient[2]?(l="image_position_patient",d=new qd(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],
h[0].image_orientation_patient[2]),e=new qd(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]),d=ud(d,e),h.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),h.sort(function(a,b){return a.dist-b.dist})):h[0].instance_number!=h[1].instance_number?(window.console.log("Ordering by instance number"),l="instance_number",h.sort(function(a,b){return a.instance_number-
b.instance_number})):window.console.log("Could not resolve the ordering mode");if("image_position_patient"==l&&5>k||void 0!=b.series_description&&-1!=b.series_description.toLowerCase().search("survey")&&20>k)if(d=0,e=function(){window.console.log('Warning: Although series was initially ordered by "image_position_patient", positional overlaps were found.\nSwitching to "instance_number" ordering as a result.');l="instance_number"},1==k)e(),b[K.SINGLE_FRAME_SCAN]=!0;else for(;d<k-1;d++).01>h[d].dist-
h[d+1].dist&&(e(),h.sort(function(a,b){return a.instance_number-b.instance_number}));for(var d=0,n=h.length;d<n;d++);isNaN(h[0].pixel_spacing[0])&&(h[0].pixel_spacing[0]=1);isNaN(h[0].pixel_spacing[1])&&(h[0].pixel_spacing[1]=1);if(1<h.length)for(var d=function(){l="instance_number";h.sort(function(a,b){return a.instance_number-b.instance_number});h.forced_instance_ordering=!0;window.console.log('Warning: Slices were found unordered after XTK "image_position_patient" sorting. Forcing "instance_number" reordering.');
for(var a=0,b=!1;a<n-1;a++)if(0==Math.abs(h[a].instance_number-h[a+1].instance_number)){b=!0;break}if(b)for(window.console.log('Warning: After forcing "instance_number" ordering overlaps were found. Rewriting "instance_number" data for every slice.'),a=0;a<n;a++)h[a].instance_number=a},p=0,n=h.length;p<n-1;p++)if(1!=Math.abs(h[p].instance_number-h[p+1].instance_number)){d();break}if(1<k)switch(l){case "image_position_patient":var e=h[0].image_position_patient,m=h[1].image_position_patient,d=m[0]-
e[0],q=m[1]-e[1],t=m[2]-e[2];h[0].pixel_spacing[2]=Math.sqrt(d*d+q*q+t*t);break;case "instance_number":var s=1;if(!0===h.forced_instance_ordering){for(var d=1,n=h.length,e=h[0].image_position_patient,z=!1;d<n;d++)if(m=h[d].image_position_patient,e[0]!=m[0]||e[1]!=m[1]||e[2]!=m[2]){z=!0;break}z&&(window.console.log('Warning: Setting pixel_spacing according to "image_position_patient" even though "forced_instance_ordering" is used.'),d=m[0]-e[0],q=m[1]-e[1],t=m[2]-e[2],s=Math.sqrt(d*d+q*q+t*t))}h[0].pixel_spacing[2]=
s;break;default:window.console.log("Unkown ordering mode - returning: "+l)}else h[0].pixel_spacing[2]=1;m=1;switch(l){case "image_position_patient":e=h[0].image_position_patient;s=h[k-1].image_position_patient;d=s[0]-e[0];q=s[1]-e[1];t=s[2]-e[2];q=Math.sqrt(d*d+q*q+t*t);m+=Math.round(q/h[0].pixel_spacing[2]);break;case "instance_number":m+=Math.abs(h[k-1].instance_number-h[0].instance_number);break;default:window.console.log("Unkown ordering mode - returning: "+l)}"false"==b.reslicing.toString()&&
(window.console.log('Forcing expexted slices to length of files because volume\'s "reslicing" property is set to false.'),window.console.log("Expected slices:",m),m=k,window.console.log("Ordering:",l));for(var e=h[0].columns*h[0].rows,y=e*m,s=!1,d=0,n=h.length,I=z=0;d<n;d++)h[d].columns>I&&(I=h[d].columns),h[d].rows>z&&(z=h[d].rows);I*z>e&&(e=I*z,y=e*m,s=!0,window.console.log("Warning: Dimensional inequalities found in image sizes."));var P=null;window.console.log(h[0].bj);switch(h[0].bj){case 8:P=
new Uint8Array(y);window.console.log("Using a Uint8Array.");break;case 16:P=new Uint16Array(y);window.console.log("Using a Uint16Array.");break;case 32:P=new Uint32Array(y),window.console.log("Using a Uint32Array.");default:window.console.log("Unknown number of bits allocated - using default: 32 bits"),P=new Uint32Array(y)}b.Wh=h[0].pixel_spacing;for(y=0;y<k;y++){var N=h[y].data,q=0;switch(l){case "image_position_patient":d=h[y].image_position_patient[0]-h[0].image_position_patient[0];q=h[y].image_position_patient[1]-
h[0].image_position_patient[1];t=h[y].image_position_patient[2]-h[0].image_position_patient[2];q=Math.sqrt(d*d+q*q+t*t)/h[0].pixel_spacing[2];break;case "instance_number":q=h[y].instance_number-h[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}if(s){for(var p=h[y].columns,d=h[y].rows,t=0,H=Rb(z*I),T=Math.round((I-p)/2),ca=p+T,p=Math.round((z-d)/2),W=d+p,d=p;d<W;d++)for(p=T;p<ca;p++)H[I*d+p]=N[t],t++;N=H}P.set(N,Math.round(q)*e)}c.data=P;b._data=P;b.Ja=[h[0].columns,
h[0].rows,m];s&&(b.Ja=[I,z,m]);c.FG=b.Ja;d=He(P);k=d[0];d=d[1];c.min=b.pe=b.Xb=k;c.max=b.jc=b.Wb=d;b.Eb!=k&&(b.Eb=k);b.Gb!=d&&(b.Gb=d);m=h[0].image_position_patient;k=Dd();if("false"==b.reslicing.toString())"image_position_patient"==l||h.forced_instance_ordering?(window.console.log('NRG modification: Running an orthogonal transform because the volume\'s "reslicing" property is set to false.'),d=new qd(h[0].image_orientation_patient[0],h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]),
e=new qd(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]),d=ud(d,e),d.x=Math.round(d.x),d.y=Math.round(d.y),d.z=Math.round(d.z),L(k,0,-Math.round(h[0].image_orientation_patient[0])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[3])*h[0].pixel_spacing[1],-d.x*h[0].pixel_spacing[2],-m[0]),L(k,1,-Math.round(h[0].image_orientation_patient[1])*h[0].pixel_spacing[0],-Math.round(h[0].image_orientation_patient[4])*h[0].pixel_spacing[1],
-d.y*h[0].pixel_spacing[2],-m[1]),L(k,2,Math.round(h[0].image_orientation_patient[2])*h[0].pixel_spacing[0],Math.round(h[0].image_orientation_patient[5])*h[0].pixel_spacing[1],d.z*h[0].pixel_spacing[2],m[2]),L(k,3,0,0,0,1),window.console.log("IJKToRAS transform:\n",k),m=Dd(),L(m,0,-Math.round(h[0].image_orientation_patient[0]),-Math.round(h[0].image_orientation_patient[3]),-d.x,0),L(m,1,-Math.round(h[0].image_orientation_patient[1]),-Math.round(h[0].image_orientation_patient[4]),-d.y,0),L(m,2,Math.round(h[0].image_orientation_patient[2]),
Math.round(h[0].image_orientation_patient[5]),d.z,0),L(m,3,0,0,0,1),b[K.REORIENT_TRANSFORM_KEY]=m,window.console.log("Orthogonal Transform:\n",m)):"instance_number"==l?(L(k,0,-1,0,0,-m[0]),L(k,1,-0,-1,-0,-m[1]),L(k,2,0,0,1,m[2]),L(k,3,0,0,0,1),m=Dd(),L(m,0,-1,0,0,0),L(m,1,-0,-1,-0,0),L(m,2,0,0,1,0),L(m,3,0,0,0,1),L(m,3,0,0,0,1),b[K.REORIENT_TRANSFORM_KEY]=m):window.console.log("Unkown ordering mode - returning: "+l);else switch(l){case "image_position_patient":d=new qd(h[0].image_orientation_patient[0],
h[0].image_orientation_patient[1],h[0].image_orientation_patient[2]);e=new qd(h[0].image_orientation_patient[3],h[0].image_orientation_patient[4],h[0].image_orientation_patient[5]);d=ud(d,e);L(k,0,-h[0].image_orientation_patient[0]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[3]*h[0].pixel_spacing[1],-d.x*h[0].pixel_spacing[2],-m[0]);L(k,1,-h[0].image_orientation_patient[1]*h[0].pixel_spacing[0],-h[0].image_orientation_patient[4]*h[0].pixel_spacing[1],-d.y*h[0].pixel_spacing[2],-m[1]);L(k,
2,h[0].image_orientation_patient[2]*h[0].pixel_spacing[0],h[0].image_orientation_patient[5]*h[0].pixel_spacing[1],d.z*h[0].pixel_spacing[2],m[2]);L(k,3,0,0,0,1);break;case "instance_number":L(k,0,-1,0,0,-m[0]);L(k,1,-0,-1,-0,-m[1]);L(k,2,0,0,1,m[2]);L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Pe=k;c.Qe=Dd();Ld(c.Pe,c.Qe);m=Cd(0,0,0,1);d=Bd();Nd(k,m,d);m=Cd(1,1,1,1);e=Bd();Nd(k,m,e);c.Rg=[e[0]-d[0],e[1]-d[1],e[2]-d[2]];k=Je(k,[b.Ja[0],b.Ja[1],b.Ja[2]]);
c.vd=[k[1]-k[0]+1,k[3]-k[2]+1,k[5]-k[4]+1];c.sf=[k[0],k[2],k[4]];"false"==b.reslicing.toString()&&(k=Cd(b.Ja[0],b.Ja[1],b.Ja[2],1),d=Bd(),Nd(b[K.REORIENT_TRANSFORM_KEY],k,d),d[0]=Math.abs(d[0]),d[1]=Math.abs(d[1]),d[2]=Math.abs(d[2]),b[K.REORIENTED_DIMENSIONS_KEY]=d,d[0]==b.Ja[2]?(b[K.ORIENTATION_KEY]="sagittal",c.vd[0]+=1*h[0].pixel_spacing[2],c.Rg[0]=c.vd[0]/(h.length+1)):d[1]==b.Ja[2]?(b[K.ORIENTATION_KEY]="coronal",c.vd[1]+=1*h[0].pixel_spacing[2],c.sf[1]-=1*h[0].pixel_spacing[2]):(b[K.ORIENTATION_KEY]=
"transverse",c.vd[2]+=2*h[0].pixel_spacing[2],c.Rg[2]=c.vd[2]/(h.length+1),c.sf[2]-=h[0].pixel_spacing[2]),window.console.log("Assessed volume orientation: "+b[K.ORIENTATION_KEY]+"\nXTK Modifications may be applied to restore acquired properties."),window.console.log("_transformedDims",d),window.console.log("RASSpacing",c.Rg),window.console.log("RASDimensions",c.vd),window.console.log("RASOrigin",c.sf));b.Af(c);b.cg=Oe(this,b)}c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};
Ue.prototype.ze=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Ue.prototype.xi=function(a,b){this._data=a;if("undefined"==typeof b.ta||null==b.ta)b.ta=[];var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=!1,m,q,t;q=[[8,4416],[9,30576],[136,512]];t=[[18,100],[35,4224],[64,629],[8,4368],[8,4384],[136,512]];for(var s,z;e<d.length;){h=d[e++];k=d[e++];l=d[e++];n=d[e++];if(65535==l&&65535==
n){if(65534==d[e]&&57344==d[e+1]){e+=4;continue}if(65534==d[e]&&57565==d[e+1]){e+=4;continue}}if(!(65534==h&&57357==k||65534==h&&57565==k)||0!=l||0!=n){"1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l);p=!1;if(void 0!==h&&void 0!==k){switch(c.transfer_syntax_uid){case "1.2.840.10008.1.2.1":m="Little Endian Explicit";s=0;for(z=q.length;s<z;s++)if(h===q[s][0]&&k===q[s][1]){p=!0;break}break;case "1.2.840.10008.1.2.2":m="Big Endian Explicit";break;case "1.2.840.10008.1.2":for(m="Little Endian Implicit",
s=0,z=t.length;s<z;s++)if(h===t[s][0]&&k===t[s][1]){p=!0;break}}if(p){n="parserDCM.js: Identified "+m+". Skipping DICOM adddress (0x"+h.toString(16)+", 0x"+k.toString(16)+")"+h+" "+k;window.console.log(n);if(8==h&&4416==k||9==h&&30576==k)for(n=0;;){_newTagGroup=d[e++];_newTagGroup.toString(16);s=parseInt(_newTagGroup.toString(16),10)-parseInt(h.toString(16),10);if(3>s&&0<s)if(_newTagElement=d[e++],_newTagGroup.toString(16),_newTagElement.toString(16),10==parseInt(_newTagElement.toString(16),10)){e--;
e--;break}else e--;n++}continue}}switch(h){case 2:switch(k){case 16:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);c.transfer_syntax_uid=l.replace(/\0/g,"");break;default:e=Ue.prototype.ze(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.bj=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=d[e];e+=n/2;break;case 48:l="";for(s=0;s<n/2;s++)k=
d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.pixel_spacing=[parseFloat(l[0]),parseFloat(l[1]),Infinity];break;default:e=Ue.prototype.ze(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(k);break;case 19:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);
c.instance_number=parseInt(l,10);break;case 50:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_position_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])];break;case 55:l="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,l+=String.fromCharCode(h),l+=String.fromCharCode(k);l=l.split("\\");c.image_orientation_patient=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]),parseFloat(l[4]),parseFloat(l[5])];
break;default:e=Ue.prototype.ze(d,e,l,n)}break;case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(k);break;case 4158:b.series_description="";for(s=0;s<n/2;s++)k=d[e++],h=k&255,k=(k&65280)>>8,b.series_description+=String.fromCharCode(h),b.series_description+=String.fromCharCode(k);break;default:e=Ue.prototype.ze(d,e,l,n)}break;
case 16:switch(k){case 8720:for(s=0;s<n/2;s++)e++;break;default:e=Ue.prototype.ze(d,e,l,n)}break;default:e=Ue.prototype.ze(d,e,l,n)}}}switch(c.bj){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Va=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.bj){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*
c.rows)}c.data=d;b.ta.push(c);return b};v("X.parserDCM",Ue);v("X.parserDCM.prototype.parse",Ue.prototype.parse);function Ve(){Ge.call(this);this.u="parserVTK"}w(Ve,Ge);
Ve.prototype.parse=function(a,b,c){A.ne(this.u+".parse");var d=b.G,e=b.ha,h=new Uint8Array(c),k="";b.G=d=new dd(c.byteLength);b.ha=e=new dd(c.byteLength);c=0;for(var l=h.length;c<l;c+=32768)k+=Ie(h,c,Math.min(c+32768,l));h=k.split("\n");k=h.length;this.Bn=this.Cn=null;this.hk=[];this.Te=Ud;this.rt=this.Ui=this.Oi=this.Vi=!1;c=0;for(l=k%8;l--;)We(this,h[c]),c++;for(l=.125*k^0;l--;)We(this,h[c]),c++,We(this,h[c]),c++,We(this,h[c]),c++,We(this,h[c]),c++,We(this,h[c]),c++,We(this,h[c]),c++,We(this,h[c]),
c++,We(this,h[c]),c++;c=this.Cn;var h=this.Bn,k=h.length,n=l=this.hk.length;do{var p=this.hk[l-n],m=p.length,q;for(q=0;q<m&&!("LINES"==this.Te&&q+1>=m);q++){var t=parseInt(p[q],10),s=c.get(t);d.add(s[0],s[1],s[2]);var z=t,y=s;"LINES"==this.Te?(z=parseInt(p[q+1],10),y=c.get(z),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.Te&&(0!=q&&q!=m-1||d.add(s[0],s[1],s[2]));t<k?(y=h.get(t),e.add(y[0],y[1],y[2]),"LINES"==this.Te?(z=h.get(z),e.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.Te&&(0!=q&&q!=m-1||e.add(y[0],
y[1],y[2]))):(z=new qd(s[0],s[1],s[2]),z.normalize(),e.add(z.x,z.y,z.z),"LINES"==this.Te?(z=new qd(y[0],y[1],y[2]),z.normalize(),e.add(z.x,z.y,z.z)):"TRIANGLE_STRIPS"==this.Te&&(0!=q&&q!=m-1||e.add(z.x,z.y,z.z)))}n--}while(0<n);b.Vd=this.Te;A.Qd(this.u+".parse");d=new Yd;d.Wa=b;d.Ba=a;this.dispatchEvent(d)};
function We(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Vi=!0;a.Oi=!1;a.Ui=!1;c=parseInt(c[1],10);a.Cn=new dd(3*c);a.Bn=new dd(3*c);return;case "VERTICES":a.Oi=!0;a.Vi=!1;a.Ui=!1;c=parseInt(c[1],10);if(3<=c)a.Te=Ud;else if(1==c)a.Te="POINTS";else throw Error("This VTK file is not supported!");a.hk=[];return;case "TRIANGLE_STRIPS":a.Oi=!0;a.Vi=!1;a.Ui=!1;a.Te="TRIANGLE_STRIPS";a.hk=[];return;case "LINES":a.Oi=!0;a.Vi=!1;a.Ui=!1;a.Te="LINES";a.hk=
[];return;case "POLYGONS":a.Oi=!0;a.Vi=!1;a.Ui=!1;a.Te="POLYGONS";a.hk=[];return;case "POINT_DATA":a.Ui=!0;a.Vi=!1;a.Oi=!1;return}if(a.Vi)if(1==d||isNaN(parseFloat(e)))a.Vi=!1;else{if(3<=d){var e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]);a.Cn.add(e,h,k)}6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.Cn.add(e,h,k));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Cn.add(d,e,c))}else a.Oi?1==d||isNaN(parseFloat(e))?a.Oi=!1:(c=c.slice(1),a.hk.push(c)):
a.Ui&&("NORMALS"==e?a.rt=!0:1==d||isNaN(parseFloat(e))?(a.Ui=!1,a.rt=!1):a.rt&&(3<=d&&(e=parseFloat(c[0]),h=parseFloat(c[1]),k=parseFloat(c[2]),a.Bn.add(e,h,k)),6<=d&&(e=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]),a.Bn.add(e,h,k)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Bn.add(d,e,c))))}v("X.parserVTK",Ve);v("X.parserVTK.prototype.parse",Ve.prototype.parse);function Xe(){Ge.call(this);this.u="parserFSM";this.cq=!1}w(Xe,Ge);
Xe.prototype.parse=function(a,b,c){A.ne(this.u+".parse");this._data=c;var d=b.G,e=b.ha;b.Sl=[];var h=b.Sl;c=0;var k;do k=this.h("uchar"),c++;while(200>c&&10!=k);this.h("uchar");e=this.h("uint");c=this.h("uint");var l=this.h("float",3*e);k=this.h("uint",3*c);var n=new Uint32Array(e),p=new Float32Array(9*c);b.G=d=new dd(9*c);b.ha=e=new dd(9*c);var m;for(m=0;m<c;m++){var q=3*m,t=k[q],s=k[q+1],z=k[q+2];h.push(t);h.push(s);h.push(z);n[t]+=1;n[s]+=1;n[z]+=1;var q=3*t,y=3*s,I=3*z,P=l[q],N=l[q+1],H=l[q+2],
s=l[y],z=l[y+1],t=l[y+2],T=l[I],ca=l[I+1],W=l[I+2];d.add(P,N,H);d.add(s,z,t);d.add(T,ca,W);P=new qd(P,N,H);T=new qd(T,ca,W);s=(new qd(s,z,t)).clone().Pc(P);z=T.clone().Pc(P);s=ud(s,z).normalize();p[q]+=s.x;p[q+1]+=s.y;p[q+2]+=s.z;p[y]+=s.x;p[y+1]+=s.y;p[y+2]+=s.z;p[I]+=s.x;p[I+1]+=s.y;p[I+2]+=s.z}for(m=0;m<c;m++)q=3*m,t=k[q],s=k[q+1],z=k[q+2],q=3*t,y=3*s,I=3*z,h=new qd(p[y],p[y+1],p[y+2]),l=new qd(p[I],p[I+1],p[I+2]),q=(new qd(p[q],p[q+1],p[q+2])).scale(1/n[t]).normalize(),h=h.scale(1/n[s]).normalize(),
l=l.scale(1/n[z]).normalize(),e.add(q.x,q.y,q.z),e.add(h.x,h.y,h.z),e.add(l.x,l.y,l.z);c=this.h("uchar",this._data.byteLength-this.Va);k=null;for(q=0;q<c.length;q++)if(99==c[q]&&114==c[q+1]&&97==c[q+2]&&115==c[q+3]){for(e=k=q+9;10!=c[q]&&q<c.length;)e++,q++;k=Ie(c.subarray(k,e)).split(" ");break}k&&(b.sc.DD(parseFloat(k[0])),b.sc.ED(parseFloat(k[1])),b.sc.FD(parseFloat(k[2])));b.Vd=Ud;A.Qd(this.u+".parse");c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};v("X.parserFSM",Xe);
v("X.parserFSM.prototype.parse",Xe.prototype.parse);var Ye={St:function(a,b,c){return Ye.update(a,0,b,c)},update:function(a,b,c,d){var e=Ye.mF,h="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(h=d&7;h--;++c)b=b>>>8^e[(b^a[c])&255];for(h=d>>3;h--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}},Ze;
Ze=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);Ye.mF=Ze;function $e(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,h,k,l,n,p,m,q,t;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;h=new Uint32Array(e);k=1;l=0;for(n=2;k<=c;){for(q=0;q<b;++q)if(a[q]===k){p=0;m=l;for(t=0;t<k;++t)p=p<<1|m&1,m>>=1;for(t=p;t<e;t+=n)h[t]=k<<16|q;++l}++k;l<<=1;n<<=1}return[h,c,d]};function af(a,b){this.Nt=[];this.Pt=32768;this.jg=this.Gn=this.qb=this.dx=0;this.input=new Uint8Array(a);this.cz=!1;this.Qt=bf;this.resize=!1;if(b||!(b={}))b.index&&(this.qb=b.index),b.bufferSize&&(this.Pt=b.bufferSize),b.bufferType&&(this.Qt=b.bufferType),b.resize&&(this.resize=b.resize);switch(this.Qt){case cf:this.Bc=32768;this.output=new Uint8Array(32768+this.Pt+258);break;case bf:this.Bc=0;this.output=new Uint8Array(this.Pt);this.Hk=this.RG;this.lz=this.tG;this.ju=this.BG;break;default:throw Error("invalid inflate mode");
}}var cf=0,bf=1;
af.prototype.lj=function(){for(;!this.cz;){var a=df(this,3);a&1&&(this.cz=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.qb,c=this.output,d=this.Bc,e=void 0,h=void 0,k=void 0,l=c.length,e=void 0;this.jg=this.Gn=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");h=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");h|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");k=
e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");k|=e<<8;if(h===~k)throw Error("invalid uncompressed block header: length verify");if(b+h>a.length)throw Error("input buffer is broken");switch(this.Qt){case cf:for(;d+h>c.length;)e=l-d,h-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.Bc=d,c=this.Hk(),d=this.Bc;break;case bf:for(;d+h>c.length;)c=this.Hk({Uz:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+h),d);d+=h;this.qb=b+=h;this.Bc=
d;this.output=c;break;case 1:this.ju(ef,ff);break;case 2:gf(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.lz()};
var hf=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),kf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),lf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),mf=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),nf=new Uint8Array(288),
of,pf;of=0;for(pf=nf.length;of<pf;++of)nf[of]=143>=of?8:255>=of?9:279>=of?7:8;var ef=$e(nf),qf=new Uint8Array(30),rf,tf;rf=0;for(tf=qf.length;rf<tf;++rf)qf[rf]=5;var ff=$e(qf);function df(a,b){for(var c=a.Gn,d=a.jg,e=a.input,h=a.qb,k;d<b;){k=e[h++];if(void 0===k)throw Error("input buffer is broken");c|=k<<d;d+=8}k=c&(1<<b)-1;a.Gn=c>>>b;a.jg=d-b;a.qb=h;return k}
function uf(a,b){for(var c=a.Gn,d=a.jg,e=a.input,h=a.qb,k=b[0],l=b[1],n;d<l;){n=e[h++];if(void 0===n)throw Error("input buffer is broken");c|=n<<d;d+=8}e=k[c&(1<<l)-1];k=e>>>16;a.Gn=c>>k;a.jg=d-k;a.qb=h;return e&65535}
function gf(a){function b(a,b,c){var d,e,h;for(h=0;h<a;)switch(d=uf(this,b),d){case 16:for(d=3+df(this,2);d--;)c[h++]=e;break;case 17:for(d=3+df(this,3);d--;)c[h++]=0;e=0;break;case 18:for(d=11+df(this,7);d--;)c[h++]=0;e=0;break;default:e=c[h++]=d}return c}var c=df(a,5)+257,d=df(a,5)+1,e=df(a,4)+4,h=new Uint8Array(hf.length),k;for(k=0;k<e;++k)h[hf[k]]=df(a,3);e=$e(h);h=new Uint8Array(c);k=new Uint8Array(d);a.ju($e(b.call(a,c,e,h)),$e(b.call(a,d,e,k)))}f=af.prototype;
f.ju=function(a,b){var c=this.output,d=this.Bc;this.Cz=a;for(var e=c.length-258,h,k,l;256!==(h=uf(this,a));)if(256>h)d>=e&&(this.Bc=d,c=this.Hk(),d=this.Bc),c[d++]=h;else for(h-=257,l=jf[h],0<kf[h]&&(l+=df(this,kf[h])),h=uf(this,b),k=lf[h],0<mf[h]&&(k+=df(this,mf[h])),d>=e&&(this.Bc=d,c=this.Hk(),d=this.Bc);l--;)c[d]=c[d++-k];for(;8<=this.jg;)this.jg-=8,this.qb--;this.Bc=d};
f.BG=function(a,b){var c=this.output,d=this.Bc;this.Cz=a;for(var e=c.length,h,k,l;256!==(h=uf(this,a));)if(256>h)d>=e&&(c=this.Hk(),e=c.length),c[d++]=h;else for(h-=257,l=jf[h],0<kf[h]&&(l+=df(this,kf[h])),h=uf(this,b),k=lf[h],0<mf[h]&&(k+=df(this,mf[h])),d+l>e&&(c=this.Hk(),e=c.length);l--;)c[d]=c[d++-k];for(;8<=this.jg;)this.jg-=8,this.qb--;this.Bc=d};
f.Hk=function(){var a=new Uint8Array(this.Bc-32768),b=this.Bc-32768,c=this.output;a.set(c.subarray(32768,a.length));this.Nt.push(a);this.dx+=a.length;c.set(c.subarray(b,b+32768));this.Bc=32768;return c};
f.RG=function(a){var b=this.input.length/this.qb+1|0,c=this.input,d=this.output;a&&("number"===typeof a.Uz&&(b=a.Uz),"number"===typeof a.ZF&&(b+=a.ZF));2>b?(a=(c.length-this.qb)/this.Cz[2],a=a/2*258|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.output=a};
f.lz=function(){var a=0,b=this.output,c=this.Nt,d,e=new Uint8Array(this.dx+(this.Bc-32768)),h,k,l,n;if(0===c.length)return this.output.subarray(32768,this.Bc);h=0;for(k=c.length;h<k;++h)for(d=c[h],l=0,n=d.length;l<n;++l)e[a++]=d[l];h=32768;for(k=this.Bc;h<k;++h)e[a++]=b[h];this.Nt=[];return this.buffer=e};f.tG=function(){var a,b=this.Bc;this.resize?(a=new Uint8Array(b),a.set(this.output.subarray(0,b))):a=this.output.subarray(0,b);return this.buffer=a};new Uint8Array(256);var vf;for(vf=0;256>vf;++vf)for(var wf=vf,xf=7,wf=wf>>>1;wf;wf>>>=1)--xf;var yf=[],zf;for(zf=0;288>zf;zf++)switch(!0){case 143>=zf:yf.push([zf+48,8]);break;case 255>=zf:yf.push([zf-144+400,9]);break;case 279>=zf:yf.push([zf-256+0,7]);break;case 287>=zf:yf.push([zf-280+192,8]);break;default:throw"invalid literal: "+zf;}
var Af=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(Af);function Bf(){};function Cf(a){this.input=a;this.qb=0;this.member=[]}
Cf.prototype.lj=function(){for(var a=this.input.length;this.qb<a;){var b=new Bf,c=void 0,d=void 0,e=void 0,h=c=e=void 0,k=void 0,c=c=void 0,l=this.input,d=this.qb;b.id1=l[d++];b.id2=l[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=l[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=l[d++];c=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=l[d++];b.os=l[d++];0<(b.flg&4)&&(b.xlen=l[d++]|l[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.name=k.join("")}if(0<(b.flg&16)){k=[];for(h=0;0<(c=l[d++]);)k[h++]=String.fromCharCode(c);b.comment=k.join("")}if(0<(b.flg&2)&&(b.crc16=Ye.St(l,0,d)&65535,b.crc16!==(l[d++]|l[d++]<<8)))throw Error("invalid header crc16");c=l[l.length-4]|l[l.length-3]<<8|l[l.length-2]<<16|l[l.length-1]<<24;l.length-d-4-4<512*c&&(e=c);d=new af(l,{index:d,bufferSize:e});b.data=e=d.lj();d=d.qb;b.crc32=c=(l[d++]|l[d++]<<8|l[d++]<<16|
l[d++]<<24)>>>0;if(Ye.St(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Ye.St(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.qb=d}a=this.member;b=e=d=0;for(l=a.length;b<l;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<l;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function Df(){Ge.call(this);this.u="parserMGZ";this.cq=!1}w(Df,Ge);
Df.prototype.parse=function(a,b,c,d){A.ne(this.u+".parse");d&&(c=(new Cf(new Uint8Array(c))).lj(),c=c.buffer);d=this.xi(c);var e=[d.Hv,d.Iv,d.Jv];b.Ja=e;var h=d.KD;b.Wh=h;c=d.min;var k=d.max;b.pe=b.Xb=c;b.jc=b.Wb=k;-Infinity==b.Eb&&(b.Eb=c);Infinity==b.Gb&&(b.Gb=k);c=Dd();L(c,0,d.ag[0][0],d.ag[1][0],d.ag[2][0],0);L(c,1,d.ag[0][1],d.ag[1][1],d.ag[2][1],0);L(c,2,d.ag[0][2],d.ag[1][2],d.ag[2][2],0);L(c,3,0,0,0,1);for(var k=e[0]/2,l=e[1]/2,n=e[2]/2,e=[0,0,0],p=0;3>p;++p)e[p]=d.ag[3][p]-(c[p+0]*h[0]*k+
c[p+4]*h[1]*l+c[p+8]*h[2]*n);h=e[1];k=e[2];c[12]=e[0];c[13]=h;c[14]=k;c[15]=1;d.Pe=c;d.Qe=Dd();Ld(d.Pe,d.Qe);e=Cd(0,0,0,1);h=Bd();Nd(c,e,h);k=Cd(1,1,1,1);e=Bd();Nd(c,k,e);c=Je(c,b.Ja);d.Rg=[e[0]-h[0],e[1]-h[1],e[2]-h[2]];d.vd=[c[1]-c[0]+1,c[3]-c[2]+1,c[5]-c[4]+1];d.sf=[c[0],c[2],c[4]];b.Af(d);A.Qd(this.u+".parse");b.cg=Oe(this,b);d=new Yd;d.Wa=b;d.Ba=a;this.dispatchEvent(d)};
Df.prototype.xi=function(a){this._data=a;a={version:0,pF:0,nF:0,ZG:0,oF:0,Hv:0,Iv:0,Jv:0,pK:0,type:0,KG:0,kC:0,jO:null,ag:null,KD:null,data:null,min:Infinity,max:-Infinity};a.version=this.h("uint");a.Hv=this.h("uint");a.Iv=this.h("uint");a.Jv=this.h("uint");a.pK=this.h("uint");a.type=this.h("uint");a.KG=this.h("uint");a.kC=this.h("ushort");if(0<a.kC){a.KD=this.h("float",3);var b=[];b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));b.push(this.h("float",3));a.ag=b}this.Va=
284;b=a.Hv*a.Iv*a.Jv;switch(a.type){case 0:a.data=this.h("uchar",b);break;case 1:a.data=this.h("uint",b);break;case 3:a.data=this.h("float",b);break;case 4:a.data=this.h("ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=He(a.data);a.min=b[0];a.max=b[1];this.Va+16<this._data.byteLength&&(a.pF=this.h("float"),a.ZG=this.h("float"),a.nF=this.h("float"),a.oF=this.h("float"));return a};v("X.parserMGZ",Df);v("X.parserMGZ.prototype.parse",Df.prototype.parse);function Ef(){Ge.call(this);this.u="parserLBL"}w(Ef,Ge);
Ef.prototype.parse=function(a,b,c){A.ne(this.u+".parse");var d=b.Sl,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this._data=c;var h=[],k=this.h("uchar",c.byteLength),l=k.length,n=!1,p=0;for(c=1;c<l;c++)10==k[c-1]?(p=c,n=!0):n&&32==k[c]&&(h.push(parseInt(Ie(k,p,c),10)),n=!1);k=b.lb.kb?b.lb.kb:new Float32Array(e);l=h.length;for(c=0;c<l;c++)k[h[c]]=1;h=new Float32Array(3*e);for(c=l=0;c<e;c++){n=d[c];if(n>e)throw Error("Could not find scalar for vertex.");n=k[n];h[l++]=
n;h[l++]=n;h[l++]=n}b.lb.kb=k;b.lb.fn=h;b.lb.J=!0;A.Qd(this.u+".parse");d=new Yd;d.Wa=b;d.Ba=a;this.dispatchEvent(d)};v("X.parserLBL",Ef);v("X.parserLBL.prototype.parse",Ef.prototype.parse);function Ff(){Ge.call(this);this.u="parserCRV";this.cq=!1}w(Ff,Ge);
Ff.prototype.parse=function(a,b,c){A.ne(this.u+".parse");var d=b.Sl;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this._data=c;this.Va=3;var e=this.h("uint");this.h("uint");this.h("uint");var h=0,k=0,l=0,n=0,p=0,m=0,q=0,t=0,s=0,z=0,y=0;c=Array(2);var I=Array(2),P=this.h("float",e),N;for(N=0;N<e;N++){var H=P[N];0==N&&(c[0]=I[0]=H);0<=H?(h++,n+=H):(k++,l+=H);s+=H;y++;I[0]=Math.max(H,I[0]);c[0]=Math.min(H,c[0]);P[N]=H}0!=h&&(p=n/h);0!=k&&(m=l/k);0!=y&&(z=s/y);for(y=s=l=n=0;y<
e;y++)H=P[y],N=0,0<=H?(N=Math.pow(H-p,2),n+=N):(N=Math.pow(H-m,2),l+=N),N=Math.pow(H-z,2),s+=N;1<h&&(q=Math.sqrt(n/(h-1)));1<k&&(t=Math.sqrt(l/(k-1)));c[1]=m-2.5*t;I[1]=p+2.5*q;e=d.length;h=new Float32Array(3*e);for(y=0;y<e;y++)k=P[d[y]],l=3*y,h[l]=k,h[l+1]=k,h[l+2]=k;b.lb.pe=c[1];b.lb.jc=I[1];-Infinity==b.lb.Eb&&(b.lb.Eb=c[1]);Infinity==b.lb.Gb&&(b.lb.Gb=I[1]);b.lb.kb=P;b.lb.fn=h;b.lb.J=!0;A.Qd(this.u+".parse");d=new Yd;d.Wa=b;d.Ba=a;this.dispatchEvent(d)};v("X.parserCRV",Ff);
v("X.parserCRV.prototype.parse",Ff.prototype.parse);function Gf(a,b){var c,d;this.input=a;this.qb=0;if(b||!(b={}))b.index&&(this.qb=b.index),b.verify&&(this.YM=b.verify);c=a[this.qb++];d=a[this.qb++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.lC=new af(a,{index:this.qb,bufferSize:b.bufferSize,bufferType:b.bufferType,resize:b.resize})}
Gf.prototype.lj=function(){var a=this.input,b;b=this.lC.lj();this.qb=this.lC.qb;if(this.YM){var a=(a[this.qb++]<<24|a[this.qb++]<<16|a[this.qb++]<<8|a[this.qb++])>>>0,c=b;if("string"===typeof c){var c=c.split(""),d,e;d=0;for(e=c.length;d<e;d++)c[d]=(c[d].charCodeAt(0)&255)>>>0}d=1;e=0;for(var h=c.length,k,l=0;0<h;){k=1024<h?1024:h;h-=k;do d+=c[l++],e+=d;while(--k);d%=65521;e%=65521}if(a!==(e<<16|d)>>>0)throw Error("invalid adler-32 checksum");}return b};function Hf(){Ge.call(this);this.u="parserRAW"}w(Hf,Ge);
Hf.prototype.parse=function(a,b,c,d){A.ne(this.u+".parse");d&&(c=(new Gf(new Uint8Array(c))).lj(),c=c.buffer);d={};d.data=new Uint8Array(c);var e=He(d.data);c=e[0];e=e[1];d.min=b.pe=b.Xb=c;d.max=b.jc=b.Wb=e;-Infinity==b.Eb&&(b.Eb=c);Infinity==b.Gb&&(b.Gb=e);e=Ed();d.Pe=e;d.Qe=Ed();var h=Cd(0,0,0,1);c=Bd();Nd(e,h,c);var k=Cd(1,1,1,1),h=Bd();Nd(e,k,h);e=Je(e,b.Ja);d.Rg=[h[0]-c[0],h[1]-c[1],h[2]-c[2]];d.vd=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];d.sf=[e[0],e[2],e[4]];b.Af(d);A.Qd(this.u+".parse");b.cg=
Oe(this,b);d=new Yd;d.Wa=b;d.Ba=a;this.dispatchEvent(d)};v("X.parserRAW",Hf);v("X.parserRAW.prototype.parse",Hf.prototype.parse);function If(){Ge.call(this);this.u="parserIMAGE"}w(If,Ge);If.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),h=e.length,k=Array(h);h--;)k[h]=String.fromCharCode(e[h]);e=window.btoa(k.join(""));h=new Image;Uc(h,"load",this.LL.bind(this,h,a,b,c,d));h.src="data:image/"+d+";base64,"+e};If.prototype.LL=function(a,b,c){b.cg=a;b.Xi=null;a=new Yd;a.Wa=c;a.Ba=b;this.dispatchEvent(a)};v("X.parserIMAGE",If);v("X.parserIMAGE.prototype.parse",If.prototype.parse);function Jf(){Ge.call(this);this.u="parserLUT"}w(Jf,Ge);
Jf.prototype.parse=function(a,b,c){A.ne(this.u+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=0,h;for(h=0;h<d;h++)if(10==c[h]){var k=Ie(c,e,h),e=h+1,k=k.replace(/^\s+|\s+$/g,"");"#"!=k[0]&&(k=k.split(" "),k=k.filter(function(a){return""!=a}),6==k.length&&(k[2]=parseInt(k[2],10)/255,k[3]=parseInt(k[3],10)/255,k[4]=parseInt(k[4],10)/255,k[5]=parseInt(k[5],10)/255,a.add(parseInt(k[0],10),k[1],k[2],k[3],k[4],k[5],10)))}A.Qd(this.u+".parse");c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};
v("X.parserLUT",Jf);v("X.parserLUT.prototype.parse",Jf.prototype.parse);function Kf(){Ge.call(this);this.u="parserMRC"}w(Kf,Ge);
Kf.prototype.parse=function(a,b,c){A.ne(this.u+".parse");c=this.xi(c);var d=c.min,e=c.max;b.Ja=[c.Io,c.Jo,c.Ko];b.Wh=[c.xlen/c.KB,c.QD/c.LB,c.SD/c.MB];b.pe=b.Xb=d;b.jc=b.Wb=e;-Infinity==b.Eb&&(b.Eb=d);Infinity==b.Gb&&(b.Gb=e);e=Dd();L(e,3,0,0,0,1);L(e,0,-1,0,0,c.Io);L(e,1,0,0,-1,c.Jo);L(e,2,0,-1,0,c.Ko);c.Pe=e;c.Qe=Dd();Ld(c.Pe,c.Qe);var h=Cd(0,0,0,1),d=Bd();Nd(e,h,d);var k=Cd(1,1,1,1),h=Bd();Nd(e,k,h);k=[c.Io,c.Jo,c.Ko];e=Je(e,k);c.Rg=[h[0]-d[0],h[1]-d[1],h[2]-d[2]];c.vd=[e[1]+e[0]+1,e[3]-e[2]+1,
e[5]-e[4]+1];c.sf=[e[0],e[2],e[4]];b.Ja=k;b.Af(c);b.cg=Oe(this,b);A.Qd(this.u+".parse");c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};
Kf.prototype.xi=function(a){this._data=a;a={Io:0,Jo:0,Ko:0,mode:0,EQ:0,FQ:0,GQ:0,KB:0,LB:0,MB:0,xlen:0,QD:0,SD:0,alpha:0,beta:0,gamma:0,WJ:0,XJ:0,YJ:0,Lt:0,rq:0,tk:0,sQ:0,next:0,zG:0,extra:null,qK:0,sK:0,extra:null,uJ:0,qQ:0,rJ:0,lens:0,nK:0,oK:0,WM:0,XM:0,OM:null,aN:0,cN:0,dN:0,bQ:0,UQ:0,$L:0,rK:0,data:null,min:Infinity,max:-Infinity,AQ:0,mD:null,TQ:null,NQ:null,orientation:null,DQ:null};this.Va=0;a.Io=this.h("sint");a.Jo=this.h("sint");a.Ko=this.h("sint");a.mode=this.h("sint");var b=a.Io*a.Jo*a.Ko;
this.Va=1024;switch(a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);}this.Va=28;a.KB=this.h("sint");a.LB=this.h("sint");a.MB=this.h("sint");a.xlen=this.h("float");a.QD=this.h("float");a.SD=this.h("float");a.alpha=this.h("float");
a.beta=this.h("float");a.gamma=this.h("float");a.WJ=this.h("sint");a.XJ=this.h("sint");a.YJ=this.h("sint");a.Lt=this.h("float");a.rq=this.h("float");a.tk=this.h("float");a.rQ=this.h("sint");a.next=this.h("sint");a.zG=this.h("short");a.qK=this.h("short");a.sK=this.h("short");a.uJ=this.h("sint");a.pQ=this.h("sint");a.rJ=this.h("short");a.lens=this.h("short");a.nK=this.h("short");a.oK=this.h("short");a.WM=this.h("short");a.XM=this.h("short");a.OM=this.h("float",6);this.Va=196;a.aN=this.h("float");a.cN=
this.h("float");a.dN=this.h("float");this.Va=216;a.$L=this.h("float");a.rK=this.h("sint");a.vQ=this.h("schar",10);if(0!=a.next)switch(this.Va=parseInt(a.next+1024,10),a.mode){case 0:a.data=this.h("schar",b);break;case 1:a.data=this.h("sshort",b);break;case 2:a.data=this.h("float",b);break;case 3:a.data=this.h("uint",b);break;case 4:a.data=this.h("double",b);break;case 6:a.data=this.h("ushort",b);break;case 16:a.data=this.h("uchar",b);break;default:throw Error("Unsupported MRC data type: "+a.mode);
}0>a.tk-(a.rq-a.tk)?(a.min=a.Lt,a.max=a.tk+(a.tk-a.Lt)):(a.min=a.tk-(a.rq-a.tk),a.max=a.rq);return a};v("X.parserMRC",Kf);v("X.parserMRC.prototype.parse",Kf.prototype.parse);function Lf(){Ge.call(this);this.u="parserNRRD"}w(Lf,Ge);
Lf.prototype.parse=function(a,b,c){A.ne(this.u+".parse");this._data=c;c=this.h("uchar",c.byteLength);var d=c.length,e=null,h=0,k;for(k=1;k<d;k++)if(10==c[k-1]&&10==c[k]){e=Ie(c,0,k-2);h=k+1;break}var l,n,p,m,d=e.split(/\r?\n/),e=0;for(k=d.length;e<k;e++)l=d[e],l.match(/NRRD\d+/)?this.HJ=!0:!l.match(/^#/)&&(m=l.match(/(.*):(.*)/))&&(n=m[1].trim(),l=m[2].trim(),(p=this.VG[n])?p.call(this,l):this[n]=l);if(!this.HJ)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==
this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");if(!this.pc&&(this.pc=[new qd(1,0,0),new qd(0,1,0),new qd(0,0,1)],this.Qw))for(d=[],m=0;2>=m;m++)d.push(isNaN(this.Qw[m])?void 0:this.pc[m].scale(this.Qw[m]));h=c.subarray(h);if("gzip"==this.encoding||"gz"==this.encoding)h=(new Cf(new Uint8Array(h))).lj();h=h.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.Ni(h);m=He(c.data);h=c.min=m[0];m=c.max=m[1];b.pe=b.Xb=h;b.jc=b.Wb=m;b.Ja=[this.Lw[0],this.Lw[1],this.Lw[2]];
d=(new qd(this.pc[0][0],this.pc[0][1],this.pc[0][2])).Ag();e=(new qd(this.pc[1][0],this.pc[1][1],this.pc[1][2])).Ag();k=(new qd(this.pc[2][0],this.pc[2][1],this.pc[2][2])).Ag();b.Wh=[d,e,k];-Infinity==b.Eb&&(b.Eb=h);Infinity==b.Gb&&(b.Gb=m);d=m=1;"left-posterior-superior"==this.mD&&(d=m=-1);h=Ed();L(h,0,m*this.pc[0][0],m*this.pc[1][0],m*this.pc[2][0],m*this.Pw[0]);L(h,1,d*this.pc[0][1],d*this.pc[1][1],d*this.pc[2][1],d*this.Pw[1]);L(h,2,1*this.pc[0][2],1*this.pc[1][2],1*this.pc[2][2],1*this.Pw[2]);
L(h,3,0,0,0,1);c.Pe=h;c.Qe=Dd();Ld(c.Pe,c.Qe);d=Cd(0,0,0,1);m=Bd();Nd(h,d,m);e=Cd(1,1,1,1);d=Bd();Nd(h,e,d);h=Je(h,b.Ja);c.Rg=[d[0]-m[0],d[1]-m[1],d[2]-m[2]];c.vd=[h[1]-h[0]+1,h[3]-h[2]+1,h[5]-h[4]+1];c.sf=[h[0],h[2],h[4]];b.Af(c);A.Qd(this.u+".parse");b.cg=Oe(this,b);c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};
Lf.prototype.VG={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Ni=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Ni=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Ni=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Ni=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Ni=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Ni=Uint32Array;break;case "float":this.Ni=Float32Array;break;case "double":this.Ni=Float64Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.jQ=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.mj=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));
return this.Lw=e},space:function(a){return this.mD=a},"space origin":function(a){return this.Pw=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.pc=function(){var a,h,k;k=[];a=0;for(h=c.length;a<h;a++)d=c[a],k.push(function(){var a,c,e,h;e=d.slice(1,-1).split(/,/);h=[];a=0;for(c=e.length;a<c;a++)b=e[a],h.push(parseFloat(b));return h}());return k}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=
b[c],e.push(parseFloat(a));return this.Qw=e}};v("X.parserNRRD",Lf);v("X.parserNRRD.prototype.parse",Lf.prototype.parse);function Mf(){Ge.call(this);this.u="parserSTL"}w(Mf,Ge);
Mf.prototype.parse=function(a,b,c){A.ne(this.u+".parse");this._data=c;var d=b.G,e=b.ha;if("solid"==Ie(this.h("uchar",5))){b.G=d=new dd(c.byteLength);b.ha=e=new dd(c.byteLength);var h=d,d=e,e=this.h("uchar",c.byteLength-5);c=e.length;var k=!1,l=!1,n=0,p;for(p=0;p<c;p++)if(10==e[p]){if(k||l){var m=Ie(e,n,p).split(" "),l=parseFloat(m[0]),q=parseFloat(m[1]),m=parseFloat(m[2]);k?(d.add(l,q,m),d.add(l,q,m),d.add(l,q,m)):h.add(l,q,m);l=k=!1}}else 32==e[p-1]&&(102==e[p]?(n=p+=13,k=!0):118==e[p]&&(n=p+=7,
l=!0))}else for(this.Va=80,h=this.h("uint"),b.G=d=new dd(9*h),b.ha=e=new dd(9*h),c=c=0;c<h;c++)k=this.h("float",12),n=k[0],p=k[1],l=k[2],e.add(n,p,l),e.add(n,p,l),e.add(n,p,l),d.add(k[3],k[4],k[5]),d.add(k[6],k[7],k[8]),d.add(k[9],k[10],k[11]),this.Va+=2;A.Qd(this.u+".parse");h=new Yd;h.Wa=b;h.Ba=a;this.dispatchEvent(h)};v("X.parserSTL",Mf);v("X.parserSTL.prototype.parse",Mf.prototype.parse);function Nf(){Ge.call(this);this.u="parserNII"}w(Nf,Ge);
Nf.prototype.parse=function(a,b,c){var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new Cf(new Uint8Array(d))).lj(),d=d.buffer);c=this.xi(d);d=c.min;e=c.max;b.pe=b.Xb=d;b.jc=b.Wb=e;-Infinity==b.Eb&&(b.Eb=d);Infinity==b.Gb&&(b.Gb=e);d=Dd();L(d,3,0,0,0,1);if(0<c.rw){var e=0,h=c.hC,k=c.iC,l=c.jC,n=1,p=1,m=1,q=c.eC,t=c.fC,s=c.gC,e=1-(h*h+k*k+l*l);1E-7>e?(e=1/Math.sqrt(h*h+k*k+l*l),h*=e,k*=e,l*=e,e=0):e=Math.sqrt(e);0<c.Dg[1]&&(n=c.Dg[1]);
0<c.Dg[2]&&(p=c.Dg[2]);0<c.Dg[2]&&(m=c.Dg[3]);0>c.Dg[0]&&(m=-m);L(d,0,(e*e+h*h-k*k-l*l)*n,2*(h*k-e*l)*p,2*(h*l+e*k)*m,q);L(d,1,2*(h*k+e*l)*n,(e*e+k*k-h*h-l*l)*p,2*(k*l-e*h)*m,t);L(d,2,2*(h*l-e*k)*n,2*(k*l+e*h)*p,(e*e+l*l-k*k-h*h)*m,s)}else 0<c.eD?(e=c.nD,h=c.oD,k=c.pD,L(d,0,e[0],e[1],e[2],e[3]),L(d,1,h[0],h[1],h[2],h[3]),L(d,2,k[0],k[1],k[2],k[3])):0==c.rw?(L(d,0,c.Dg[1],0,0,0),L(d,1,0,c.Dg[2],0,0),L(d,2,0,0,c.Dg[3],0)):window.console.log("UNKNOWN METHOD IN PARSER NII");c.Pe=d;c.Qe=Dd();Ld(c.Pe,c.Qe);
h=Cd(0,0,0,1);e=Bd();Nd(d,h,e);k=Cd(1,1,1,1);h=Bd();Nd(d,k,h);k=[c.mj[1],c.mj[2],c.mj[3]];d=Je(d,k);c.Rg=[h[0]-e[0],h[1]-e[1],h[2]-e[2]];c.vd=[d[1]-d[0]+1,d[3]-d[2]+1,d[5]-d[4]+1];c.sf=[d[0],d[2],d[4]];b.Ja=k;b.Af(c);b.cg=Oe(this,b);c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};
Nf.prototype.xi=function(a){this._data=a;a={uM:0,data_type:null,AG:null,TG:0,hM:0,RL:0,EG:null,mj:null,BJ:0,CJ:0,DJ:0,zJ:0,iu:0,nG:0,zM:0,Dg:null,MD:0,gM:0,fM:0,yM:0,wM:null,bN:null,pG:0,qG:0,xM:0,QM:0,XI:0,YI:0,CG:null,kG:null,rw:0,eD:0,hC:0,iC:0,jC:0,eC:0,fC:0,gC:0,nD:null,oD:null,pD:null,AJ:null,magic:null,data:null,min:Infinity,max:-Infinity};a.uM=this.h("uint");a.data_type=this.h("uchar",10);a.AG=this.h("uchar",18);a.TG=this.h("uint");a.hM=this.h("ushort");a.RL=this.h("uchar");a.EG=this.h("uchar");
a.mj=this.h("ushort",8);a.BJ=this.h("float");a.CJ=this.h("float");a.DJ=this.h("float");a.zJ=this.h("ushort");a.iu=this.h("ushort");a.nG=this.h("ushort");a.zM=this.h("ushort");a.Dg=this.h("float",8);a.MD=this.h("float");a.gM=this.h("float");a.fM=this.h("float");a.yM=this.h("ushort");a.wM=this.h("uchar");a.bN=this.h("uchar");a.pG=this.h("float");a.qG=this.h("float");a.xM=this.h("float");a.QM=this.h("float");a.XI=this.h("uint",1);a.YI=this.h("uint",1);a.CG=this.h("uchar",80);a.kG=this.h("uchar",24);
a.rw=this.h("ushort");a.eD=this.h("ushort");a.hC=this.h("float");a.iC=this.h("float");a.jC=this.h("float");a.eC=this.h("float");a.fC=this.h("float");a.gC=this.h("float");a.nD=this.h("float",4);a.oD=this.h("float",4);a.pD=this.h("float",4);a.AJ=this.h("uchar",16);a.magic=this.h("uchar",4);this.Va=parseInt(a.MD,10);var b=a.mj[1]*a.mj[2]*a.mj[3];switch(a.iu){case 2:a.data=this.h("uchar",b);break;case 4:a.data=this.h("sshort",b);break;case 8:a.data=this.h("sint",b);break;case 16:a.data=this.h("float",
b);break;case 32:a.data=this.h("complex",b);break;case 64:a.data=this.h("double",b);break;case 256:a.data=this.h("schar",b);break;case 512:a.data=this.h("ushort",b);break;case 768:a.data=this.h("uint",b);break;default:throw Error("Unsupported NII data type: "+a.iu);}b=He(a.data);a.min=b[0];a.max=b[1];return a};v("X.parserNII",Nf);v("X.parserNII.prototype.parse",Nf.prototype.parse);function Of(){Ge.call(this);this.u="parserTRK"}w(Of,Ge);
Of.prototype.parse=function(a,b,c){A.ne(this.u+".parse");var d=b.G,e=b.ha,h=b.Uc;this._data=c;this.h("uchar",6);this.h("ushort",3);var k=this.h("float",3);this.h("float",3);var l=this.h("ushort");this.h("uchar",200);this.h("ushort");this.h("uchar",200);c=this.h("float",16);this.h("uchar",444);this.h("uchar",4);this.h("uchar",4);this.h("float",6);this.h("uchar",2);this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");this.h("uchar");var n=this.h("uint");this.h("uint");var p=
this.h("uint"),m=[],q=[],t=Infinity,s=-Infinity,z=null,y=null,I=null,P=null,e=d=null,N=this.h("uint",(this._data.byteLength-1E3)/4);this.Va=p;for(var H=this.h("float",(this._data.byteLength-1E3)/4),T=0,p=h=0;p<n;p++){for(var ca=N[T],W=new dd(3*ca),wa=0,oa=0;oa<ca;oa++){var ya=H[T+3*oa+oa*l+1],Pa=H[T+3*oa+oa*l+2],Ja=H[T+3*oa+oa*l+3],ya=ya/k[0],Pa=Pa/k[1],Ja=Ja/k[2];W.add(ya,Pa,Ja);if(0<oa)var Qa=W.get(oa-1),wa=wa+Math.sqrt(Math.pow(ya-Qa[0],2)+Math.pow(Pa-Qa[1],2)+Math.pow(Ja-Qa[2],2));oa<ca-1&&(h+=
6)}T+=3*ca+ca*l+1;oa=W.gg;ca=W.dg;ya=W.hg;Pa=W.eg;Ja=W.ig;Qa=W.fg;if(!z||oa<z)z=oa;if(!y||ca>y)y=ca;if(!I||ya<I)I=ya;if(!P||Pa>P)P=Pa;if(!d||Ja<d)d=Ja;if(!e||Qa>e)e=Qa;m.push(W);q.push(wa)}k=(z+y)/2;I=(I+P)/2;l=(d+e)/2;P=new Float32Array(h);b.G=d=new dd(h);b.ha=e=new dd(h);b.Uc=h=new dd(h);for(p=z=0;p<n;p++)for(y=m[p],N=y.count,wa=q[p],t=Math.min(t,wa),s=Math.max(s,wa),oa=0;oa<N-1;oa++){T=y.get(oa);H=y.get(oa+1);d.add(T[0],T[1],T[2]);d.add(H[0],H[1],H[2]);var W=T[0]-k,ca=T[1]-I,ya=T[2]-l,Pa=Math.sqrt(W*
W+ca*ca+ya*ya),Ja=H[0]-k,Qa=H[1]-I,ka=H[2]-l,za=Math.sqrt(Ja*Ja+Qa*Qa+ka*ka);e.add(W/Pa,ca/Pa,ya/Pa);e.add(Ja/za,Qa/za,ka/za);H=[Math.abs(H[0]-T[0]),Math.abs(H[1]-T[1]),Math.abs(H[2]-T[2])];T=Math.sqrt(H[0]*H[0]+H[1]*H[1]+H[2]*H[2]);H[0]/=T;H[1]/=T;H[2]/=T;h.add(H[0],H[1],H[2]);h.add(H[0],H[1],H[2]);P[z++]=wa;P[z++]=wa;P[z++]=wa;P[z++]=wa;P[z++]=wa;P[z++]=wa}b.Vd="LINES";n=new Wd;n.pe=t;n.jc=s;n.Eb=t;n.Gb=s;n.fn=P;n.qy=!1;n.J=!0;b.lb=n;t=!1;for(p=0;16>p;p++)if(0!=c[p]){t=!0;break}!1==t&&(c[0]=c[5]=
c[10]=c[15]=1);A.Qd(this.u+".parse");A.v.fx(c,b.sc.Fb);c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};v("X.parserTRK",Of);v("X.parserTRK.prototype.parse",Of.prototype.parse);function Pf(){Ge.call(this);this.u="parserOBJ"}w(Pf,Ge);
Pf.prototype.parse=function(a,b,c){A.ne(this.u+".parse");this._data=c;c=c.byteLength;var d=this.h("uchar",c),e=[];b.G=new dd(c);b.ha=new dd(c);var h=b.G,k=b.ha,l=0,n;for(n=0;n<c;++n)if(10==d[n]){var p=Ie(d,l,n).replace(/\s{2,}/g," ").split(" ");if("v"==p[0])e.push([parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]);else if("f"==p[0]){var m=e[parseInt(p[1],10)-1],l=e[parseInt(p[2],10)-1],p=e[parseInt(p[3],10)-1];h.add(m[0],m[1],m[2]);h.add(l[0],l[1],l[2]);h.add(p[0],p[1],p[2]);m=new qd(m[0],m[1],
m[2]);p=new qd(p[0],p[1],p[2]);l=ud((new qd(l[0],l[1],l[2])).Pc(m),p.Pc(m));l.normalize();k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z);k.add(l.x,l.y,l.z)}l=n+1}A.Qd(this.u+".parse");c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};v("X.parserOBJ",Pf);v("X.parserOBJ.prototype.parse",Pf.prototype.parse);function Qf(){cd.call(this);this.u="loader";this.Ql=new jd;this.un=0}w(Qf,cd);function Rf(a,b){a.un+=b/a.Ql.sg()/3;a.un=Math.min(1,a.un);var c=new ze;c.nk=a.un;a.dispatchEvent(c)}function Sf(a){a=a.la.gq;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Tf))throw Error("The "+b+" file format is not supported.");return[a,b,Tf[b][0],Tf[b][1],Tf[b][2]]}
Qf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!md(this.Ql.Hb,a.xd)||this.Ql.get(a.xd)){this.Ql.set(a.xd,!1);var c=Sf(a)[0];if(null!=a.Xg)this.parse(null,a,b);else{var d=new XMLHttpRequest;G(d,"abort",this.Tz.bind(this,d,a,b));G(d,"error",this.Tz.bind(this,d,a,b));G(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
Qf.prototype.parse=function(a,b,c){Rf(this,1);setTimeout(function(){var d=Sf(b),e=d[3],d=new d[2];Uc(d,ie,this.complete.bind(this));var h=b.Xg;null==h&&(h=a.response,b.Xg=h);d.parse(b,c,h,e)}.bind(this),100)};Qf.prototype.complete=function(a){Rf(this,1);setTimeout(function(){var b=a.Ba,c=a.Wa;b.la.J=!1;b.J=!0;c.ia();this.Ql.set(b.xd,!0)}.bind(this),100)};Qf.prototype.Tz=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Tf={OBJ:[Pf,null],OFF:[Pe,null],STL:[Mf,null],VTK:[Ve,null],TRK:[Of,null],MRC:[Kf,null],ST:[Kf,null],FSM:[Xe,null],INFLATED:[Xe,null],SMOOTHWM:[Xe,null],SPHERE:[Xe,null],PIAL:[Xe,null],ORIG:[Xe,null],NRRD:[Lf,null],NII:[Nf,null],GZ:[Nf,null],DCM:[Ue,null],DICOM:[Ue,null],"":[Ue,null],CRV:[Ff,null],LABEL:[Ef,null],MGH:[Df,!1],MGZ:[Df,!0],RAW:[Hf,!1],RZ:[Hf,!0],TXT:[Jf,null],LUT:[Jf,null],PNG:[If,"png"],JPG:[If,"jpeg"],JPEG:[If,"jpeg"],GIF:[If,"gif"]};function Uf(){Ge.call(this);this.u="parserIMA"}w(Uf,Ge);
Uf.prototype.parse=function(a,b,c){b.Mh={};b.Mh.Fo=0;this.xi(c,b);if(null==b.la.length||b.ta.length==b.la.length){b.Mh.Fo=b.la.length;var d={};c={};for(var e=0;e<b.ta.length;e++)d.hasOwnProperty(b.ta[e].series_instance_uid)||(d[b.ta[e].series_instance_uid]=[],c[b.ta[e].series_instance_uid]={}),c[b.ta[e].series_instance_uid].hasOwnProperty(b.ta[e].sop_instance_uid)||(c[b.ta[e].series_instance_uid][b.ta[e].sop_instance_uid]=!0,d[b.ta[e].series_instance_uid].push(b.ta[e]));var h=Object.keys(d)[0],e=
d[h],k=e.length;c={};console.log("FIRST IMAGE",e,d,h);var l="image_position_patient";1==k?(l="image_position_patient",d[h][0].dist=0):e[0].image_position_patient[0]!=e[1].image_position_patient[0]||e[0].image_position_patient[1]!=e[1].image_position_patient[1]||e[0].image_position_patient[2]!=e[1].image_position_patient[2]?(l="image_position_patient",d=new qd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new qd(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=ud(d,h),e.map(function(a,b){b.dist=b.image_position_patient[0]*a.x+b.image_position_patient[1]*a.y+b.image_position_patient[2]*a.z;return b}.bind(null,d)),e.sort(function(a,b){return a.dist-b.dist})):e[0].instance_number!=e[1].instance_number?(l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number})):window.console.log("Could not resolve the ordering mode");console.log("SEQUENCE NAME","'"+e[0].sequence_name+
"'");-1<["fgre","memp","fse"].indexOf(e[0].sequence_name)&&(window.console.log(e[0].sequence_name,"reordering..."),l="instance_number",e.sort(function(a,b){return a.instance_number-b.instance_number}));isNaN(e[0].pixel_spacing[0])&&(e[0].pixel_spacing[0]=1);isNaN(e[0].pixel_spacing[1])&&(e[0].pixel_spacing[1]=1);if(1<k)switch(l){case "image_position_patient":var n=e[0].image_position_patient,d=e[1].image_position_patient,h=d[0]-n[0],p=d[1]-n[1],m=d[2]-n[2];e[0].pixel_spacing[2]=Math.sqrt(h*h+p*p+
m*m);break;case "instance_number":e[0].pixel_spacing[2]=1;console.log("INSTANCE NUMBER SPACING");break;default:window.console.log("Unkown ordering mode - returning: "+l)}else e[0].pixel_spacing[2]=1;d=1;switch(l){case "image_position_patient":var n=e[0].image_position_patient,q=e[k-1].image_position_patient,h=q[0]-n[0],p=q[1]-n[1],m=q[2]-n[2],h=Math.sqrt(h*h+p*p+m*m),d=d+Math.round(h/e[0].pixel_spacing[2]);break;case "instance_number":d+=Math.abs(e[k-1].instance_number-e[0].instance_number);break;
default:window.console.log("Unkown ordering mode - returning: "+l)}n=e[0].columns*e[0].rows;h=n*d;q=null;switch(e[0].bj){case 8:q=new Uint8Array(h);break;case 16:q=new Uint16Array(h);break;case 32:q=new Uint32Array(h);default:window.console.log("Unknown number of bits allocated - using default: 32 bits")}b.Wh=e[0].pixel_spacing;for(var t=0;t<k;t++){var s=e[t].data,h=0;switch(l){case "image_position_patient":h=e[t].image_position_patient[0]-e[0].image_position_patient[0];p=e[t].image_position_patient[1]-
e[0].image_position_patient[1];m=e[t].image_position_patient[2]-e[0].image_position_patient[2];h=Math.sqrt(h*h+p*p+m*m)/e[0].pixel_spacing[2];break;case "instance_number":h=e[t].instance_number-e[0].instance_number;break;default:window.console.log("Unkown ordering mode - returning: "+l)}q.set(s,h*n)}c.data=q;b._data=q;b.Ja=[e[0].columns,e[0].rows,d];c.FG=b.Ja;d=He(q);k=d[0];d=d[1];c.min=b.pe=b.Xb=k;c.max=b.jc=b.Wb=d;-Infinity==b.Eb&&(b.Eb=k);Infinity==b.Gb&&(b.Gb=d);p=e[0].image_position_patient;
k=Dd();switch(l){case "image_position_patient":console.log("ORIENTATION",e[0].image_orientation_patient);d=new qd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]);h=new qd(e[0].image_orientation_patient[3],e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]);d=ud(d,h);L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2],-p[0]);L(k,1,-e[0].image_orientation_patient[1]*
e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2],-p[1]);L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2],p[2]);L(k,3,0,0,0,1);break;case "instance_number":"memp"===e[0].sequence_name||"fse"===e[0].sequence_name?(d=new qd(e[0].image_orientation_patient[0],e[0].image_orientation_patient[1],e[0].image_orientation_patient[2]),h=new qd(e[0].image_orientation_patient[3],
e[0].image_orientation_patient[4],e[0].image_orientation_patient[5]),d=ud(d,h),L(k,0,-e[0].image_orientation_patient[0]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[3]*e[0].pixel_spacing[1],-d.x*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[0]),L(k,1,-e[0].image_orientation_patient[1]*e[0].pixel_spacing[0],-e[0].image_orientation_patient[4]*e[0].pixel_spacing[1],-d.y*e[0].pixel_spacing[2]*e[0].slice_thickness,-p[1]),L(k,2,e[0].image_orientation_patient[2]*e[0].pixel_spacing[0],e[0].image_orientation_patient[5]*
e[0].pixel_spacing[1],d.z*e[0].pixel_spacing[2]*e[0].slice_thickness,p[2])):(L(k,0,1,0,0,-p[0]),L(k,1,0,-1,-0,-p[1]),L(k,2,0,0,1,p[2]));L(k,3,0,0,0,1);break;default:window.console.log("Unkown ordering mode - returning: "+l)}c.Pe=k;c.Qe=Dd();Ld(c.Pe,c.Qe);l=Cd(0,0,0,1);e=Bd();Nd(k,l,e);l=Cd(1,1,1,1);d=Bd();Nd(k,l,d);c.Rg=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];e=Je(k,[b.Ja[0],b.Ja[1],b.Ja[2]]);c.vd=[e[1]-e[0]+1,e[3]-e[2]+1,e[5]-e[4]+1];c.sf=[e[0],e[2],e[4]];b.Af(c);b.cg=Oe(this,b)}c=new Yd;c.Wa=b;c.Ba=a;this.dispatchEvent(c)};
Uf.prototype.ze=function(a,b,c,d){switch(c){case 16975:case 20819:case 20053:case 22351:c=function(a){for(var b="",c=128;1<=c;c/=2)b+=a&c?"1":"0";return b};d=a[b++];a=a[b++];d=parseInt(c((a&65280)>>8)+c(a&255)+(c((d&65280)>>8)+c(d&255)),2);4294967295==d&&(d=0);b+=d/2;break;default:b+=d/2}return b};
Uf.prototype.xi=function(a,b){this._data=a;if("undefined"==typeof b.ta||null==b.ta)b.ta=[];for(var c={pixel_spacing:[.1,.1,Infinity],image_orientation_patient:[1,0,0,0,1,0],image_position_patient:[0,0,0],transfer_syntax_uid:"no_transfer_syntax_uid"},d=this.h("ushort",this._data.byteLength),e=66,h=null,k=null,l=null,n=null,p=[[8,4368],[8,4384]],m=!1;e<d.length;){for(var h=d[e++],k=d[e++],l=d[e++],n=d[e++],m=!1,q=0,t=p.length;q<t;q++)if(h===p[q][0]&&k===p[q][1]){m=!0;break}if(m)window.console.log("Skipping ",
"("+h.toString(16)+","+k.toString(16)+")");else switch("1.2.840.10008.1.2"==c.transfer_syntax_uid&&0==n&&(n=l),h){case 2:switch(k){case 16:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.transfer_syntax_uid=k.replace(/\0/g,"");break;default:e=Uf.prototype.ze(d,e,l,n)}break;case 40:switch(k){case 16:c.rows=d[e];e+=n/2;break;case 17:c.columns=d[e];e+=n/2;break;case 256:c.bj=d[e];e+=n/2;break;case 257:c.bits_stored=d[e];e+=n/2;break;case 2:c.number_of_images=
d[e];e+=n/2;break;case 48:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.pixel_spacing=[parseFloat(k[0]),parseFloat(k[1]),Infinity];break;default:e=Uf.prototype.ze(d,e,l,n)}break;case 32:switch(k){case 14:c.series_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.series_instance_uid+=String.fromCharCode(h),c.series_instance_uid+=String.fromCharCode(l);break;case 19:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,
l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);c.instance_number=parseInt(k,10);break;case 50:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_position_patient=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])];break;case 55:k="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,k+=String.fromCharCode(h),k+=String.fromCharCode(l);k=k.split("\\");c.image_orientation_patient=[parseFloat(k[0]),parseFloat(k[1]),
parseFloat(k[2]),parseFloat(k[3]),parseFloat(k[4]),parseFloat(k[5])];break;default:e=Uf.prototype.ze(d,e,l,n)}break;case 24:switch(k){case 36:c.sequence_name="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sequence_name+=String.fromCharCode(h),c.sequence_name+=String.fromCharCode(l);c.sequence_name=c.sequence_name.replace(/^[\s\xa0]+/,"");c.sequence_name=c.sequence_name.replace(/[\s\xa0]+$/,"");break;case 80:c.slice_thickness="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.slice_thickness+=
String.fromCharCode(h),c.slice_thickness+=String.fromCharCode(l);c.slice_thickness=parseFloat(c.slice_thickness);break;default:e=Uf.prototype.ze(d,e,l,n);break}case 65534:switch(k){default:n=0,e+=n/2}break;case 8:switch(k){case 24:c.sop_instance_uid="";for(q=0;q<n/2;q++)l=d[e++],h=l&255,l=(l&65280)>>8,c.sop_instance_uid+=String.fromCharCode(h),c.sop_instance_uid+=String.fromCharCode(l);break;default:e=Uf.prototype.ze(d,e,l,n)}break;case 16:switch(k){case 8720:for(q=0;q<n/2;q++)e++;break;default:e=
Uf.prototype.ze(d,e,l,n)}break;default:e=Uf.prototype.ze(d,e,l,n)}}switch(c.bj){case 8:c.data=new Uint8Array(c.columns*c.rows);break;case 16:c.data=new Uint16Array(c.columns*c.rows);break;case 32:c.data=new Uint32Array(c.columns*c.rows)}this.Va=this._data.byteLength-c.columns*c.rows*2;d=null;switch(c.bj){case 8:d=this.h("uchar",c.columns*c.rows);break;case 16:d=this.h("ushort",c.columns*c.rows);break;case 32:d=this.h("uint",c.columns*c.rows)}c.data=d;b.ta.push(c);return b};v("X.parserIMA",Uf);
v("X.parserIMA.prototype.parse",Uf.prototype.parse);var Vf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Wf(a){if(Xf){Xf=!1;var b=ba.location;if(b){var c=b.href;if(c&&(c=(c=Wf(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Xf=!0,Error();}}return a.match(Vf)}var Xf=jc;function Yf(a,b){ad.call(this);this.xg=a||1;this.Sm=b||ba;this.Ot=ua(this.NM,this);this.nv=xa()}w(Yf,ad);f=Yf.prototype;f.enabled=!1;f.P=null;f.setInterval=function(a){this.xg=a;this.P&&this.enabled?(this.stop(),this.start()):this.P&&this.stop()};
f.NM=function(){if(this.enabled){var a=xa()-this.nv;0<a&&a<.8*this.xg?this.P=this.Sm.setTimeout(this.Ot,this.xg-a):(this.P&&(this.Sm.clearTimeout(this.P),this.P=null),this.dispatchEvent(Zf),this.enabled&&(this.P=this.Sm.setTimeout(this.Ot,this.xg),this.nv=xa()))}};f.start=function(){this.enabled=!0;this.P||(this.P=this.Sm.setTimeout(this.Ot,this.xg),this.nv=xa())};f.stop=function(){this.enabled=!1;this.P&&(this.Sm.clearTimeout(this.P),this.P=null)};f.f=function(){Yf.d.f.call(this);this.stop();delete this.Sm};
var Zf="tick";function $f(a,b,c){if(la(a))c&&(a=ua(a,c));else if(a&&"function"==typeof a.handleEvent)a=ua(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ba.setTimeout(a,b||0)};function ag(a){return"function"==typeof a.sg?a.sg():ia(a)||r(a)?a.length:ob(a)}function bg(a){if("function"==typeof a.li)return a.li();if(r(a))return a.split("");if(ia(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return pb(a)}function cg(a){if("function"==typeof a.co)return a.co();if("function"!=typeof a.li){if(ia(a)||r(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return qb(a)}}
function dg(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ia(a)||r(a))E(a,b,void 0);else for(var c=cg(a),d=bg(a),e=d.length,h=0;h<e;h++)b.call(void 0,d[h],c&&c[h],a)}function eg(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ia(a)||r(a))return Gb(a,b,void 0);for(var c=cg(a),d=bg(a),e=d.length,h=0;h<e;h++)if(!b.call(void 0,d[h],c&&c[h],a))return!1;return!0};function fg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function gg(){}gg.prototype.fz=null;function hg(a){var b;(b=a.fz)||(b={},ig(a)&&(b[0]=!0,b[1]=!0),b=a.fz=b);return b};var jg;function kg(){}w(kg,gg);function lg(a){return(a=ig(a))?new ActiveXObject(a):new XMLHttpRequest}function ig(a){if(!a.eB&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.eB=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.eB}jg=new kg;function mg(a){this.Hb=new jd;a&&this.Et(a)}function ng(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+na(a):b.substr(0,1)+a}f=mg.prototype;f.sg=function(){return this.Hb.sg()};f.add=function(a){this.Hb.set(ng(a),a)};f.Et=function(a){a=bg(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.Gg=function(a){a=bg(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.Hb.remove(ng(a))};f.clear=function(){this.Hb.clear()};f.Bm=function(){return this.Hb.Bm()};
f.contains=function(a){a=ng(a);return md(this.Hb.Hb,a)};f.kB=function(a){var b=new mg;a=bg(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};f.li=function(){return this.Hb.li()};f.clone=function(){return new mg(this)};f.km=function(a){return this.sg()==ag(a)&&og(this,a)};
function og(a,b){var c=ag(b);if(a.sg()>c)return!1;!(b instanceof mg)&&5<c&&(b=new mg(b));return eg(a,function(a){var c=b;return"function"==typeof c.contains?c.contains(a):"function"==typeof c.au?c.au(a):ia(c)||r(c)?Jb(c,a):rb(c,a)})};function pg(a){var b;b||(b=qg(a||arguments.callee.caller,[]));return b}
function qg(a,b){var c=[];if(Jb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(rg(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var h;h=d[e];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=rg(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");c.push(h)}b.push(a);c.push(")\n");try{c.push(qg(a.caller,b))}catch(k){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function rg(a){if(sg[a])return sg[a];a=String(a);if(!sg[a]){var b=/function ([^\(]+)/.exec(a);sg[a]=b?b[1]:"[Anonymous]"}return sg[a]}var sg={};function tg(a,b,c,d,e){this.reset(a,b,c,d,e)}tg.prototype.Rz=null;tg.prototype.Qz=null;var ug=0;tg.prototype.reset=function(a,b,c,d,e){"number"==typeof e||ug++;d||xa();this.Co=a;this.mK=b;delete this.Rz;delete this.Qz};tg.prototype.GC=function(a){this.Co=a};function vg(a){this.al=a;this.YA=this.Vc=this.Co=this.$a=null}function wg(a,b){this.name=a;this.value=b}wg.prototype.toString=function(){return this.name};var xg=new wg("SEVERE",1E3),yg=new wg("CONFIG",700),zg=new wg("FINE",500);f=vg.prototype;f.getName=function(){return this.al};f.getParent=function(){return this.$a};f.Bu=function(){this.Vc||(this.Vc={});return this.Vc};f.GC=function(a){this.Co=a};
function Ag(a){if(a.Co)return a.Co;if(a.$a)return Ag(a.$a);gb("Root logger has no level set.");return null}f.log=function(a,b,c){if(a.value>=Ag(this).value)for(la(b)&&(b=b()),a=this.sA(a,b,c,vg.prototype.log),b="log:"+a.mK,ba.console&&(ba.console.timeStamp?ba.console.timeStamp(b):ba.console.markTimeline&&ba.console.markTimeline(b)),ba.msWriteProfilerMark&&ba.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.YA)for(var e=0,h=void 0;h=c.YA[e];e++)h(d);b=b.getParent()}};
f.sA=function(a,b,c,d){a=new tg(a,String(b),this.al);if(c){a.Rz=c;var e;d=d||vg.prototype.sA;try{var h;var k=ea("window.location.href");if(r(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,n;b=!1;try{l=c.lineNumber||c.yQ||"Not available"}catch(p){l="Not available",b=!0}try{n=c.fileName||c.filename||c.sourceURL||ba.$googDebugFname||k}catch(m){n="Not available",b=!0}h=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:n,stack:c.stack||"Not available"}}e="Message: "+Ma(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Ma(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ma(pg(d)+"-> ")}catch(q){e="Exception trying to expose exception! You win, we lose. "+q}a.Qz=e}return a};f.lp=function(a){this.$a=a};var Bg={},Cg=null;
function Dg(a){Cg||(Cg=new vg(""),Bg[""]=Cg,Cg.GC(yg));var b;if(!(b=Bg[a])){b=new vg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Dg(a.substr(0,c));c.Bu()[d]=b;b.lp(c);Bg[a]=b}return b};function Eg(a,b){a&&a.log(zg,b,void 0)};function Fg(a){ad.call(this);this.headers=new jd;this.Rs=a||null;this.Zi=!1;this.Qs=this.Fa=null;this.Ao=this.qB=this.Cr="";this.Tk=this.$u=this.lr=this.vu=!1;this.Fp=0;this.Hs=null;this.sC=Gg;this.Ms=this.$M=!1}w(Fg,ad);var Gg="",Hg=Fg.prototype,Ig=Dg("goog.net.XhrIo");Hg.Kf=Ig;var Jg=/^https?$/i,Kg=["POST","PUT"],Lg=[];function Mg(a,b){var c=new Fg;Lg.push(c);b&&c.D("complete",b);c.sv("ready",c.sG);c.send(a,void 0,void 0,void 0)}f=Fg.prototype;f.sG=function(){this.g();Mb(Lg,this)};
f.send=function(a,b,c,d){if(this.Fa)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Cr+"; newUri="+a);b=b?b.toUpperCase():"GET";this.Cr=a;this.Ao="";this.qB=b;this.vu=!1;this.Zi=!0;this.Fa=this.Rs?lg(this.Rs):lg(jg);this.Qs=this.Rs?hg(this.Rs):hg(jg);this.Fa.onreadystatechange=ua(this.VB,this);try{Eg(this.Kf,Ng(this,"Opening Xhr")),this.$u=!0,this.Fa.open(b,String(a),!0),this.$u=!1}catch(e){Eg(this.Kf,Ng(this,"Error opening Xhr: "+e.message));Og(this,e);return}a=c||"";var h=
this.headers.clone();d&&dg(d,function(a,b){h.set(b,a)});d=Hb(h.co());c=ba.FormData&&a instanceof ba.FormData;!Jb(Kg,b)||d||c||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");h.forEach(function(a,b){this.Fa.setRequestHeader(b,a)},this);this.sC&&(this.Fa.responseType=this.sC);"withCredentials"in this.Fa&&(this.Fa.withCredentials=this.$M);try{Pg(this),0<this.Fp&&(this.Ms=Qg(this.Fa),Eg(this.Kf,Ng(this,"Will abort after "+this.Fp+"ms if incomplete, xhr2 "+this.Ms)),this.Ms?(this.Fa.timeout=
this.Fp,this.Fa.ontimeout=ua(this.zD,this)):this.Hs=$f(this.zD,this.Fp,this)),Eg(this.Kf,Ng(this,"Sending request")),this.lr=!0,this.Fa.send(a),this.lr=!1}catch(k){Eg(this.Kf,Ng(this,"Send error: "+k.message)),Og(this,k)}};function Qg(a){return F&&qc(9)&&u(a.timeout)&&da(a.ontimeout)}function Ib(a){return"content-type"==a.toLowerCase()}f.zD=function(){"undefined"!=typeof aa&&this.Fa&&(this.Ao="Timed out after "+this.Fp+"ms, aborting",Eg(this.Kf,Ng(this,this.Ao)),this.dispatchEvent("timeout"),this.abort(8))};
function Og(a,b){a.Zi=!1;a.Fa&&(a.Tk=!0,a.Fa.abort(),a.Tk=!1);a.Ao=b;Rg(a);Sg(a)}function Rg(a){a.vu||(a.vu=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}f.abort=function(){this.Fa&&this.Zi&&(Eg(this.Kf,Ng(this,"Aborting")),this.Zi=!1,this.Tk=!0,this.Fa.abort(),this.Tk=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Sg(this))};f.f=function(){this.Fa&&(this.Zi&&(this.Zi=!1,this.Tk=!0,this.Fa.abort(),this.Tk=!1),Sg(this,!0));Fg.d.f.call(this)};
f.VB=function(){this.Bk||(this.$u||this.lr||this.Tk?Tg(this):this.aL())};f.aL=function(){Tg(this)};
function Tg(a){if(a.Zi&&"undefined"!=typeof aa)if(a.Qs[1]&&4==Ug(a)&&2==Vg(a))Eg(a.Kf,Ng(a,"Local request error detected and ignored"));else if(a.lr&&4==Ug(a))$f(a.VB,0,a);else if(a.dispatchEvent("readystatechange"),4==Ug(a)){Eg(a.Kf,Ng(a,"Request complete"));a.Zi=!1;try{var b=Vg(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var h=Wf(String(a.Cr))[1]||null;if(!h&&self.location)var k=self.location.protocol,
h=k.substr(0,k.length-1);e=!Jg.test(h?h.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{var l;try{l=2<Ug(a)?a.Fa.statusText:""}catch(n){Eg(a.Kf,"Can not get status: "+n.message),l=""}a.Ao=l+" ["+Vg(a)+"]";Rg(a)}}finally{Sg(a)}}}
function Sg(a,b){if(a.Fa){Pg(a);var c=a.Fa,d=a.Qs[0]?fa:null;a.Fa=null;a.Qs=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.Kf)&&c.log(xg,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Pg(a){a.Fa&&a.Ms&&(a.Fa.ontimeout=null);u(a.Hs)&&(ba.clearTimeout(a.Hs),a.Hs=null)}f.oh=function(){return!!this.Fa};function Ug(a){return a.Fa?a.Fa.readyState:0}function Vg(a){try{return 2<Ug(a)?a.Fa.status:-1}catch(b){return-1}}
function Ng(a,b){return b+" ["+a.qB+" "+a.Cr+" "+Vg(a)+"]"};/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function M(){}v("gxnat",M);M.JPEG_CONVERT_SUFFIX="?format=image/jpeg";M.$G={projects:"proj",subjects:"subj",experiments:"expt",scans:"scans"};M.Wx="?format=zip";M.qh=function(a,b,c){var d=a+(-1<a.indexOf("?")?"&":"?")+"format=json";null!=c&&("&"!==c[0]&&(c="&"+c),d+=c);window.console.log("Getting XNAT json: '"+d+"'",a);M.get(d,b,"json")};
M.get=function(a,b,c){Mg(a,function(a){a=a.target;switch(c){case void 0:b(a);break;case "json":var e;e=a.Fa?fg(a.Fa.responseText):void 0;e.hasOwnProperty("ResultSet")?b(e.ResultSet.Result):b(e);break;case "text":try{e=a.Fa?a.Fa.responseText:""}catch(h){Eg(a.Kf,"Can not get responseText: "+h.message),e=""}b(e)}})};
M.Nr=function(a,b){var c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,d=/(^[ ]*|[ ]*$)/g,e=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,k=/^0/,l=(M.Nr.yJ&&(""+a).toLowerCase()||""+a).replace(d,"")||"",n=(M.Nr.yJ&&(""+b).toLowerCase()||""+b).replace(d,"")||"",d=l.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),c=n.replace(c,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,
"").split("\x00"),l=parseInt(l.match(h))||1!=d.length&&l.match(e)&&Date.parse(l);if(e=parseInt(n.match(h))||l&&n.match(e)&&Date.parse(n)||null){if(l<e)return-1;if(l>e)return 1}l=0;for(n=Math.max(d.length,c.length);l<n;l++){e=!(d[l]||"").match(k)&&parseFloat(d[l])||d[l]||0;h=!(c[l]||"").match(k)&&parseFloat(c[l])||c[l]||0;if(isNaN(e)!==isNaN(h))return isNaN(e)?1:-1;typeof e!==typeof h&&(e+="",h+="");if(e<h)return-1;if(e>h)return 1}return 0};
M.BM=function(a,b){var c=[],d={},e=[],h={};E(a,function(a){h=a;E(b,function(a){h=h[a]});h=h.toLowerCase();c.push(h);d[h]=a});c=c.sort(M.CQ);E(c,function(a){e.push(d[a])});return e};v("gxnat.JPEG_CONVERT_SUFFIX",M.JPEG_CONVERT_SUFFIX);v("gxnat.folderAbbrev",M.$G);v("gxnat.ZIP_SUFFIX",M.Wx);v("gxnat.jsonGet",M.qh);v("gxnat.get",M.get);v("gxnat.naturalSort",M.Nr);v("gxnat.sortXnatPropertiesArray",M.BM);function Wg(a){this.originalUrl=a;this.files=this.reconstructions=this.resources=this.scans=this.experiments=this.subjects=this.projects=this.prefix=null;a=a.split("/");for(var b=!0,c=0,b=0,d=a.length,c=0;c<d;c++)if(b=this.hasOwnProperty(a[c])&&a[c+1]){if("projects"===a[c]&&0!==c)for(this.prefix="",b=0;b<c;b++)this.prefix+=a[b],this.prefix=b<c-1?this.prefix+"/":this.prefix;this[a[c]]=a[c+1];c++}Xg(this)}w(Wg,xc);v("gxnat.Path",Wg);
function Yg(a){a+="/REST";0<a.length&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1));return a}function Zg(a){for(var b=0,c=$g.length,b=0;b<c;b++)a($g[b],b)}function ah(a,b,c){if(-1==a.indexOf(c))throw Error("Graft folder",c,"not in prefix:",a);if(-1==b.indexOf(c))throw Error("Graft folder",c,"not in suffix:",b);return a.split(c+"/")[0]+c+b.split(c)[1]}var $g=["projects","subjects","experiments",["scans","resources","reconstructions"],"files"];
function Xg(a){var b,c,d,e=!1;Zg(function(a,k){if(g(a))for(b=0,c=a.length;b<c;b++)d=a[b],null!=this[d]||e||(this.ku=$g[k-1],e=!0);else null!=this[a]||e||(this.ku=$g[k-1],e=!0)}.bind(a))}Wg.prototype.Sq=function(){null!=this.ku||Xg(this);return this.ku};
Wg.prototype.yi=function(a){if(!this.hasOwnProperty(a))throw Error("Invalid level: ",a);for(var b=this.prefix,c="",d=0,e=0,h=$g.length,k=0,d=0;d<h;d++){c=$g[d];if(g(c))for(k=c.length,e=0;e<k;e++)currSubLevel=c[d][e],this[currSubLevel]&&(b+=currSubLevel+"/"+this[currSubLevel]);else b+="/"+c+"/"+this[c];if(a===c||-1<c.indexOf(a))return b}};Wg.prototype.g=function(){Wg.d.g.call(this);D(this)};v("gxnat.Path.getQueryPrefix",Yg);v("gxnat.Path.forEachXnatLevel",Zg);
v("gxnat.Path.getDeepestSharedXnatLevel",function(a,b){var c=new Wg(a),d=new Wg(b),e=void 0;Zg(function(a){c[a]&&c[a]===d[a]&&(e=a)});return e});v("gxnat.Path.graftUrl",ah);v("gxnat.Path.xnatLevelOrder",$g);v("gxnat.Path.prototype.getDeepestLevel",Wg.prototype.Sq);v("gxnat.Path.prototype.pathByLevel",Wg.prototype.yi);v("gxnat.Path.prototype.dispose",Wg.prototype.g);function bh(a){this.Tp=new JSZip(a)}w(bh,xc);v("gxnat.Zip",bh);function ch(a,b,c,d){if(!Fa(a,".zip")){if(!Fa(a,"/files"))throw Error("filesUrl must end in '/files'!");a+=M.Wx}var e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.addEventListener("load",function(){b(new bh(e.response))});null!=c&&e.addEventListener("progress",c);null!=d&&e.addEventListener("error",function(a){window.console.log("DOWNLOAD ERROR: ",a);d(e,a)});e.send()}bh.prototype.va=function(){return this.Tp.files};
bh.prototype.xv=function(a,b){var c=0,d=this.va(),e=ob(d);C(d,function(d){d.asArrayBuffer();a(d.name,d.asArrayBuffer());c==e-1&&null!=b&&b();c++}.bind(this))};bh.prototype.g=function(){bh.d.g.call(this);this.xv(function(a){this.Tp.remove(a)}.bind(this));D(this.Tp);delete this.Tp};v("gxnat.Zip.prototype.getFiles",bh.prototype.va);v("gxnat.Zip.prototype.loopFiles",bh.prototype.xv);v("gxnat.Zip.getFilesAsZip",ch);v("gxnat.Zip.prototype.dispose",bh.prototype.g);v("gxnat.slicerNode",function(){});
function dh(a){a=a.getAttribute("displayNodeRef").split(" ");for(var b=[],c="",d=0,e=a.length;d<e;d++){c=a[d].replace("vtkMRML","").split("Node")[0];switch(c){case "ScalarVolumeDisplay":c="VolumeDisplay";break;case "DiffusionTensorVolumeDisplay":c="DiffusionTensorVolumeDisplay";break;case "NCIRayCastVolumeRenderingDisplay":c="NCIRayCastVolumeRendering";break;case "GPURayCastVolumeRenderingDisplay":c="GPURayCastVolumeRendering";break;case "FiberBundleTubeDisplay":c="FiberBundleTubeDisplayNode";break;
case "FiberBundleLineDisplay":c="FiberBundleLineDisplayNode";break;case "FiberBundleGlyphDisplay":c="FiberBundleGlyphDisplayNode"}b.push(c)}return b}function eh(a){if(null!=a)return a.split(" ").map(function(a){return parseFloat(a)})}v("gxnat.slicerNode.getDisplayNodeTypes",dh);v("gxnat.slicerNode.toFloatArray",eh);function fh(){na(this)}v("gxnat.slicerNode.Node",fh);function gh(a,b){na(this);var c=b.getAttribute("displayNodeRef").split(" "),d=[],e=null;E(dh(b),function(b){E(a.getElementsByTagName(b),function(a){d.push(a)})});for(var h=0,k=d.length;h<k;h++)if(-1<c.indexOf(d[h].getAttribute("id"))){e=d[h];break}this.Sn=e;this.opacity=parseFloat(e.getAttribute("opacity"),10);this.color=eh(e.getAttribute("color"));this.visible="true"===e.getAttribute("visibility");this.origin=eh(a.getAttribute("origin"));e.getAttribute("colorMode");a.getAttribute("ijkToRASDirections")}
w(gh,fh);v("gxnat.slicerNode.Display",gh);function hh(a,b){gh.call(this,a,b)}w(hh,gh);v("gxnat.slicerNode.Mesh",hh);function ih(a,b){this.width=a;this.height=b}function jh(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}f=ih.prototype;f.clone=function(){return new ih(this.width,this.height)};f.toString=function(){return"("+this.width+" x "+this.height+")"};f.Bm=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.scale=function(a,b){var c=u(b)?b:a;this.width*=a;this.height*=c;return this};function kh(a,b){if(a instanceof kh)this.Ad=a.ax();else{var c;if(c=ia(a))a:{for(var d=c=0;d<a.length;d++){if(!ia(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!u(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.Ad=Ob(a);else if(a instanceof ih)this.Ad=lh(a.height,a.width);else if(u(a)&&u(b)&&0<a&&0<b)this.Ad=lh(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.Ld=new ih(this.Ad[0].length,this.Ad.length)}
function mh(a,b,c){for(var d=0;d<a.xj().height;d++)for(var e=0;e<a.xj().width;e++)b.call(c,a.Ad[d][e],d,e,a)}function nh(a,b){var c=new kh(a.xj());mh(a,function(d,e,h){c.Ad[e][h]=b.call(void 0,d,e,h,a)});return c}function lh(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}f=kh.prototype;f.add=function(a){if(!jh(this.Ld,a.xj()))throw Error("Matrix summation is only supported on arrays of equal size");return nh(this,function(b,c,d){return b+a.Ad[c][d]})};
f.km=function(a,b){if(this.Ld.width!=a.Ld.width||this.Ld.height!=a.Ld.height)return!1;for(var c=b||0,d=0;d<this.Ld.height;d++)for(var e=0;e<this.Ld.width;e++)if(!(Math.abs(this.Ad[d][e]-a.Ad[d][e])<=(c||1E-6)))return!1;return!0};f.xj=function(){return this.Ld};
f.multiply=function(a){if(a instanceof kh){if(this.Ld.width!=a.xj().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return oh(this,a)}if(u(a))return ph(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};f.Pc=function(a){if(!jh(this.Ld,a.xj()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return nh(this,function(b,c,d){return b-a.Ad[c][d]})};
f.ax=function(){return this.Ad};f.toString=function(){var a=0;mh(this,function(b){b=String(b).length;b>a&&(a=b)});var b=[];E(this.Ad,function(c){b.push("[ ");E(c,function(c){c=String(c);b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};function qh(a,b,c){return 0<=b&&b<a.Ld.height&&0<=c&&c<a.Ld.width}
function oh(a,b){var c=new kh(a.Ld.height,b.xj().width);mh(c,function(a,e,h){for(var k=a=0;k<this.Ld.width;k++)a+=(qh(this,e,k)?this.Ad[e][k]:0)*(qh(b,k,h)?b.Ad[k][h]:0);if(!qh(c,e,h))throw Error("Index out of bounds when setting matrix value, ("+e+","+h+") in size ("+c.Ld.height+","+c.Ld.width+")");c.Ad[e][h]=a},a);return c}function ph(a,b){return nh(a,function(a){return a*b})};function rh(a,b,c){gh.call(this,a,b);for(var d=0,e,h,k,l;3>d;d++)switch(e=a.getElementsByTagName("Slice")[d].getAttribute("sliceToRAS").split(" ").map(parseFloat),sliceToRASMatrix=nh(new kh(4,4),function(a,b,c){return e[4*b+c]}),d){case 0:h=sliceToRASMatrix;break;case 1:k=sliceToRASMatrix;break;case 2:l=sliceToRASMatrix}this.Mw=new sh(k,l,h);b=c!==b.getAttribute("id")?!1:!0;c=!1;if(b)for(a=a.getElementsByTagName("Slice"),d=0,h=a.length;d<h&&!(c="true"===a[d].getAttribute("sliceVisibility")||!1);d++);
this.wr=b;this.Ls=this.Sn?parseInt(this.Sn.getAttribute("upperThreshold")):null;this.Fr=this.Sn?parseInt(this.Sn.getAttribute("lowerThreshold")):null;this.visible=c}w(rh,gh);v("gxnat.slicerNode.Volume",rh);function sh(a,b,c){var d=new kh([[0],[0],[0],[1]]);E([a,b,c],function(a,b){var c=a.multiply(d).ax(),c=[c[0][0],c[1][0],c[2][0]];switch(b){case 0:this.bM=c;break;case 1:this.vG=c;break;case 2:this.lG=c}}.bind(this))}v("gxnat.slicerNode.Volume.sliceToRAS",sh);v("nrg.string",function(){});function th(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/.*\//,"")}function uh(a){if(void 0!=a)return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}function vh(a){if(null!=a)return a="array"==ha(a)?a[0]:a,a=a.slice(a.lastIndexOf(".")+1),"gz"==a&&(a="nii."+a),a.toLowerCase()}function wh(a){return a.replace(/\W/g,"")}function xh(a,b){var c=a.toLowerCase().replace(/\.|_/g,"-");null!=b&&(c+="-"+b.toLowerCase().replace(/\.|_/g,"-"));return c}
function yh(a){return"rgb("+a.split(" ").map(function(a){return Math.round(255*parseFloat(a))}).toString()+")"}v("nrg.string.basename",th);v("nrg.string.dirname",uh);v("nrg.string.getFileExtension",vh);v("nrg.string.fileNameMatch",function(a,b){return th(a)===th(b)});v("nrg.string.stripNonAlphanumeric",wh);v("nrg.string.stripIllegal",function(a){return a.replace(/[|&;$%@"<>()+,]/g,"")});v("nrg.string.getLettersOnly",function(a){return wh(a).replace(/[0-9]/g,"")});
v("nrg.string.replaceIllegal",function(a,b){if("string"!==typeof a)throw Error("Illegal value "+typeof a+" in argument of nrg.string.replaceIllegal .");void 0===b&&(b="");var c=a.replace(/\/./g,b);return c=c.replace(/[|&;$%@"<>()+,]/g,b)});v("nrg.string.truncateString",function(a,b){b=void 0===b?30:b;return a.length>b?a.substring(0,b-3)+"...":a});v("nrg.string.makeCssName",xh);v("nrg.string.mrmlColorToRgb",yh);function zh(a,b){na(this);this.backgroundColor=yh(a);this.az=yh(b)}w(zh,fh);v("gxnat.slicerNode.BackgroundColor",zh);function Ah(a,b,c,d,e,h,k,l){na(this);this.element=a;this.vq=b;this.backgroundColor=c;this.rB=d;this.En=e;this.ZM=h;this.dK=k;this.UG=l}w(Ah,fh);v("gxnat.slicerNode.SceneView",Ah);M.cd={};function Bh(a){xc.call(this);a instanceof Ah?(this.En=a.En,this.vq=a.vq,this.backgroundColor=a.backgroundColor,this.rB=a.rB):a instanceof rh?(this.origin=a.origin||[0,0,0],this.Ls=a.Ls||1E4,this.Fr=a.Fr||-1E4,this.nx=a.nx||!1,this.wr=a.wr||!1,this.Mw=a.Mw||null,a.sh&&(this.oB=a.labelMapFile,this.NJ=a.colorTableFile)):a instanceof hh&&(this.color=a.color||[.5,.5,.5],this.opacity=a.opacity||1)}w(Bh,xc);v("gxnat.vis.RenderProperties",Bh);Bh.prototype.g=function(){Bh.d.g.call(this);D(this)};
v("gxnat.vis.RenderProperties.prototype.dispose",Bh.prototype.g);M.cd.ed=function(){xc.call(this)};w(M.cd.ed,xc);v("gxnat.vis.VisNode",M.cd.ed);f=M.cd.ed.prototype;f.yf="Generic";f.Lj=function(a){this.yf=a};f.fH=function(){return this.yf};f.pl="";f.Jg=function(a){this.pl=a};f.GI=function(){return this.pl};f.Tb=null;f.oc=function(a){this.Tb=a};f.xb=function(){return this.Tb};f.vp=null;f.zs=function(a){this.vp=a};f.xI=function(){return this.vp};
f.g=function(){M.cd.ed.d.g.call(this);this.yf&&delete this.yf;this.pl&&delete this.pl;this.Tb&&delete this.Tb;this.vp&&delete this.vp};v("gxnat.vis.VisNode.prototype.setCategory",M.cd.ed.prototype.Lj);v("gxnat.vis.VisNode.prototype.getCategory",M.cd.ed.prototype.fH);v("gxnat.vis.VisNode.prototype.setThumbnailUrl",M.cd.ed.prototype.Jg);v("gxnat.vis.VisNode.prototype.getThumbnailUrl",M.cd.ed.prototype.GI);v("gxnat.vis.VisNode.prototype.setTitle",M.cd.ed.prototype.oc);
v("gxnat.vis.VisNode.prototype.getTitle",M.cd.ed.prototype.xb);v("gxnat.vis.VisNode.prototype.setSourceInfo",M.cd.ed.prototype.zs);v("gxnat.vis.VisNode.prototype.getSourceInfo",M.cd.ed.prototype.xI);v("gxnat.vis.VisNode.prototype.dispose",M.cd.ed.prototype.g);function Ch(a){M.cd.ed.call(this);this.Pd=a||null}w(Ch,M.cd.ed);v("gxnat.vis.Renderable",Ch);Ch.prototype.Gw=function(a){this.Pd=a instanceof Bh?a:new Bh(a)};Ch.prototype.qI=function(){return this.Pd};Ch.prototype.g=function(){Ch.d.g.call(this);this.Pd&&(this.Pd.g(),delete this.Pd)};v("gxnat.vis.Renderable.prototype.setRenderProperties",Ch.prototype.Gw);v("gxnat.vis.Renderable.prototype.getRenderProperties",Ch.prototype.qI);v("gxnat.vis.Renderable.prototype.dispose",Ch.prototype.g);function Dh(a,b){Ch.call(this,b);this.vj=a||[];null!=b&&this.Gw(b)}w(Dh,Ch);v("gxnat.vis.Viewable",Dh);f=Dh.prototype;f.hi=null;f.wH=function(){return this.hi};f.kM=function(a){return this.hi=a};
f.BC=function(a,b,c){null!=this.hi&&D(this.hi);this.hi={};var d=this.va();E(d,function(a){this.hi[a]=null}.bind(this));var e,h,k;a.xv(function(a,b){p=0;for(m=d.length;p<m;p++)if(k=a.split("/"),h=k[k.length-1],"."!=h[0]&&(e=d[p],Fa(e,h)))if(null!=c)for(var p=0,m=c.length;p<m;p++)Fa(e,c[p])&&(this.hi[e]=b,p=m);else{this.hi[e]=b;break}}.bind(this),b);a.g()};f.va=function(){return this.vj};f.TL=function(a){window.cQ.log("REMOVING FILE",a);Mb(this.vj,a)};
f.zd=function(a,b){null==this.vj&&(this.vj=[]);g(a)||(a=[a]);E(a,function(a){null!=b&&null==b(a)||this.vj.push(a)}.bind(this))};f.g=function(){Dh.d.g.call(this);this.vj&&(Kb(this.vj),delete this.vj)};v("gxnat.vis.Viewable.prototype.getFileData",Dh.prototype.wH);v("gxnat.vis.Viewable.prototype.setFileData",Dh.prototype.kM);v("gxnat.vis.Viewable.prototype.setFileDataFromZip",Dh.prototype.BC);v("gxnat.vis.Viewable.prototype.getFiles",Dh.prototype.va);v("gxnat.vis.Viewable.prototype.removeFile",Dh.prototype.TL);
v("gxnat.vis.Viewable.prototype.addFiles",Dh.prototype.zd);v("gxnat.vis.Viewable.prototype.dispose",Dh.prototype.g);function Eh(a){Ch.call(this);null!=a?g(a)||(a=[a]):a=[];this.$=a}w(Eh,Ch);v("gxnat.vis.ViewableGroup",Eh);Eh.prototype.oq=function(a){return this.$.push(a)};Eh.prototype.aH=function(){var a=[];E(this.$,function(b){a=Nb(a,b.va())});return a};Eh.prototype.KA=function(){return this.$};Eh.prototype.g=function(){Eh.d.g.call(this);E(this.$,function(a){g(a)?E(a,function(a){a.g()}):a instanceof Dh&&a.g()});delete this.$};v("gxnat.vis.ViewableGroup.prototype.addViewable",Eh.prototype.oq);
v("gxnat.vis.ViewableGroup.prototype.getAllViewableFiles",Eh.prototype.aH);v("gxnat.vis.ViewableGroup.prototype.getViewables",Eh.prototype.KA);v("gxnat.vis.ViewableGroup.prototype.dispose",Eh.prototype.g);function Fh(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function O(a,b){var c=Fh(a),d=Qb(arguments,1),e=c.length+d.length;Gh(c,d);a.className=c.join(" ");return c.length==e}function Hh(a,b){var c=Fh(a),d=Qb(arguments,1),e=Ih(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Gh(a,b){for(var c=0;c<b.length;c++)Jb(a,b[c])||a.push(b[c])}function Ih(a,b){return Db(a,function(a){return!Jb(b,a)})}
function Jh(a,b,c){var d=Fh(a);r(b)?Mb(d,b):g(b)&&(d=Ih(d,b));r(c)&&!Jb(d,c)?d.push(c):g(c)&&Gh(d,c);a.className=d.join(" ")}function Kh(a){var b=Lh.CSS.Us;return Jb(Fh(a),b)};var Mh=!F||rc(9),Nh=!ic&&!F||F&&rc(9)||ic&&qc("1.9.1"),Oh=F&&!qc("9");function Ph(a,b){this.x=da(a)?a:0;this.y=da(b)?b:0}f=Ph.prototype;f.clone=function(){return new Ph(this.x,this.y)};f.toString=function(){return"("+this.x+", "+this.y+")"};function Qh(a,b){return new Ph(a.x-b.x,a.y-b.y)}f.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};f.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};f.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
f.translate=function(a,b){a instanceof Ph?(this.x+=a.x,this.y+=a.y):(this.x+=a,u(b)&&(this.y+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.x*=a;this.y*=c;return this};function Rh(a){return a?new Sh(Th(a)):Ca||(Ca=new Sh)}function Vh(a){return r(a)?document.getElementById(a):a}function Wh(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Xh(document,"*",a,b)}function Yh(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Xh(document,"*",a,b)[0])||null}
function Xh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,h=0,k;k=a[h];h++)b==k.nodeName&&(d[e++]=k);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(h=e=0;k=a[h];h++)b=k.className,"function"==typeof b.split&&Jb(b.split(/\s+/),c)&&(d[e++]=k);d.length=e;return d}return a}
function Zh(a,b){C(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in $h?a.setAttribute($h[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var $h={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function ai(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new ih(a.clientWidth,a.clientHeight)}function bi(a){return jc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function ci(a){return a?a.parentWindow||a.defaultView:window}function Q(a,b,c){return di(document,arguments)}
function di(a,b){var c=b[0],d=b[1];if(!Mh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ma(d.name),'"');if(d.type){c.push(' type="',Ma(d.type),'"');var e={};yb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(r(d)?c.className=d:g(d)?c.className=d.join(" "):Zh(c,d));2<b.length&&ei(a,c,b,2);return c}function ei(a,b,c,d){function e(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var h=c[d];!ia(h)||ma(h)&&0<h.nodeType?e(h):E(fi(h)?Ob(h):h,e)}}
function R(a,b){ei(Th(a),a,arguments,1)}function gi(a){for(var b;b=a.firstChild;)a.removeChild(b)}function hi(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function ii(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function S(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function ji(a){return Nh&&void 0!=a.children?a.children:Db(a.childNodes,function(a){return 1==a.nodeType})}function ki(a){return void 0!=a.firstElementChild?a.firstElementChild:li(a.firstChild)}
function mi(a){return void 0!=a.nextElementSibling?a.nextElementSibling:li(a.nextSibling)}function li(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function ni(a){return ma(a)&&1==a.nodeType}function oi(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Th(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function pi(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else gi(a),a.appendChild(Th(a).createTextNode(String(b)))}var qi={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ri={IMG:" ",BR:"\n"};function si(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function ti(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function ui(a){a=a.tabIndex;return u(a)&&0<=a&&32768>a}function vi(a){if(Oh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];wi(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Oh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function xi(a){var b=[];wi(a,b,!1);return b.join("")}
function wi(a,b,c){if(!(a.nodeName in qi))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ri)b.push(ri[a.nodeName]);else for(a=a.firstChild;a;)wi(a,b,c),a=a.nextSibling}function fi(a){if(a&&"number"==typeof a.length){if(ma(a))return"function"==typeof a.item||"string"==typeof a.item;if(la(a))return"function"==typeof a.item}return!1}
function yi(a){var b=zi.dd;return Ai(a,function(a){return"DIV"==a.nodeName&&(!b||r(a.className)&&Jb(a.className.split(/\s+/),b))})}function Ai(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Sh(a){this.na=a||ba.document||document}f=Sh.prototype;f.O=Rh;function Bi(a){return a.na}f.a=function(a){return r(a)?this.na.getElementById(a):a};f.TD=Sh.prototype.a;f.B=function(a,b,c){return di(this.na,arguments)};f.createElement=function(a){return this.na.createElement(a)};
f.createTextNode=function(a){return this.na.createTextNode(String(a))};function Ci(a){return"CSS1Compat"==a.na.compatMode}function Di(a){a=a.na;return a.parentWindow||a.defaultView}function Ei(a){var b=a.na;a=bi(b);b=b.parentWindow||b.defaultView;return F&&qc("10")&&b.pageYOffset!=a.scrollTop?new Ph(a.scrollLeft,a.scrollTop):new Ph(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}f.appendChild=function(a,b){a.appendChild(b)};f.dv=hi;f.removeNode=S;f.Bu=ji;f.jA=ki;f.contains=oi;
f.pi=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!ti(a)||ui(a)):ti(a)&&ui(a))&&F?(a=la(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};function Fi(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=new ActiveXObject("MSXML2.DOMDocument");if(b){b.resolveExternals=!1;b.validateOnParse=!1;try{b.setProperty("ProhibitDTD",!0),b.setProperty("MaxXMLSize",2048),b.setProperty("MaxElementDepth",256)}catch(c){}}b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");};function Gi(){M.cd.ed.call(this);this.Ia=[]}w(Gi,M.cd.ed);v("gxnat.vis.ViewableTree",Gi);function Hi(a,b,c){this.QL=a;this.EM=b;this.SG=c}v("gxnat.vis.ViewableTree.metadataCollection",Hi);f=Gi.prototype;f.ds=null;f.Pm=null;f.nm=null;f.orientation=null;f.ac=function(){return this.orientation};f.mp=function(a){this.ds=a};f.op=function(a){this.Pm=a};f.ip=function(a){this.nm=a};f.SI=function(){return this.Ia};
f.g=function(){Gi.d.g.call(this);null!=this.ds&&(D(this.ds),delete this.LQ);null!=this.Pm&&(D(this.Pm),delete this.WQ);null!=this.nm&&(D(this.nm),delete this.kQ);null!=this.Ia&&(E(this.Ia,function(a){a.g()}),delete this.Ia);null!=this.yD&&Kb(this.yD);delete this.yD;delete this.orientation};v("gxnat.vis.ViewableTree.metadataCollection",Hi);v("gxnat.vis.ViewableTree.prototype.projectMetadata",Gi.prototype.ds);v("gxnat.vis.ViewableTree.prototype.subjectMetadata",Gi.prototype.Pm);
v("gxnat.vis.ViewableTree.prototype.experimentMetadata",Gi.prototype.nm);v("gxnat.vis.ViewableTree.prototype.orientation",Gi.prototype.orientation);v("gxnat.vis.ViewableTree.prototype.getOrientation",Gi.prototype.ac);v("gxnat.vis.ViewableTree.prototype.setProjectMetadata",Gi.prototype.mp);v("gxnat.vis.ViewableTree.prototype.setSubjectMetadata",Gi.prototype.op);v("gxnat.vis.ViewableTree.prototype.setExperimentMetadata",Gi.prototype.ip);v("gxnat.vis.ViewableTree.prototype.getViewableGroups",Gi.prototype.SI);
v("gxnat.vis.ViewableTree.prototype.dispose",Gi.prototype.g);function Ii(a,b,c){Gi.call(this);this.Lj(a);null!=c&&null!=b&&(this.tj=c,this.vh="ExperimentResources"!=a?ah(this.tj,b.URI,"experiments"):this.tj+"/resources/"+b.xnat_abstractresource_id,this.Bl=new Wg(this.vh));this.xo=b;this.Kb={}}w(Ii,Gi);v("gxnat.vis.AjaxViewableTree",Ii);var Ji={ID:"Scan ID",Name:"Name",type:"Scan Type",series_description:"Series Description"},Ki={yob:"Year of Birth",acquisition_site:"Acq. Site",date:"Date",scanner:"Scanner",label:"Subject"},Li={label:"Session"};
function Mi(a,b,c){M.qh(a,function(a){g(a);E(a,function(a){b(a)});c&&c()})}f=Ii.prototype;f.jh=null;f.Ze=!1;f.zw=function(a,b){null==this.jh&&(this.jh={});this.jh[a]=b};f.GA=function(){var a=0;C(this.jh,function(b,c){a+=this.iA(c)}.bind(this));return a};f.iA=function(a){return parseInt(this.jh[a].Size,10)};f.xH=function(){return this.jh};f.zH=function(){return this.Ze};f.CC=function(a){this.Ze=a};f.tH=function(){return this.tj};f.pI=function(){return this.vh};f.uI=function(){return this.Kb};
f.Mu=function(){var a="";C(this.Kb,function(b,c){null!=b&&0<b.length&&(a+=c+": "+b+"<br>")});return a};f.TC=function(a){this.Kb=a};f.Ge=function(){C(Ji,function(a,b){null!=this.xo[b]&&(this.Kb[a]=this.xo[b])}.bind(this))};f.mp=function(a){Ii.d.mp.call(this,a)};f.op=function(a){Ii.d.op.call(this,a);C(Ki,function(a,c){null!=this.Pm[c]&&(this.Kb[a]=this.Pm[c])}.bind(this))};f.ip=function(a){Ii.d.ip.call(this,a);C(Li,function(a,c){null!=this.nm[c]&&(this.Kb[a]=this.nm[c])}.bind(this))};f.AH=function(){return this.ji};
f.si=function(a){a=a[this.rg];if(!Ea(a,"/"))return this.vh+"!"+a};f.Df=function(a){if(this.Ze)a();else{var b=0,c=0,d="",e;M.qh(this.vh+this.ii,function(h){for(c=h.length;b<c;b++)if(e=h[b],d=this.si(e))this.zw(d,e),this.zd(d,this.od);a();this.Ze=!0}.bind(this))}};f.od=function(a){return-1<a.indexOf("_MACOSX")?null:a};f.Mk=function(){};function Ni(a,b,c,d){var e=new Wg(a);Mi(a+"/"+b.prototype.ji,function(a){new b(a,e.yi("experiments"),c)},d)}
f.g=function(){Ii.d.g.call(this);null!=this.jh&&(D(this.jh),delete this.jh);delete this.Ze;D(this.Kb);delete this.Kb;null!=this.xo&&(D(this.xo),delete this.xo);null!=this.Bl&&(this.Bl.g(),delete this.Bl);delete this.tj;delete this.vh};v("gxnat.vis.AjaxViewableTree.VIEWABLE_KEY_MAP",Ji);v("gxnat.vis.AjaxViewableTree.SUBJECT_KEY_MAP",Ki);v("gxnat.vis.AjaxViewableTree.EXPERIMENT_KEY_MAP",Li);v("gxnat.vis.AjaxViewableTree.FILE_SIZE_KEY","Size");v("gxnat.vis.AjaxViewableTree.loopFolderContents",Mi);
v("gxnat.vis.AjaxViewableTree.getViewableTrees",Ni);v("gxnat.vis.AjaxViewableTree.prototype.filesGotten",Ii.prototype.Ze);v("gxnat.vis.AjaxViewableTree.prototype.setFileMetadata",Ii.prototype.zw);v("gxnat.vis.AjaxViewableTree.prototype.getTotalSize",Ii.prototype.GA);v("gxnat.vis.AjaxViewableTree.prototype.getFileSize",Ii.prototype.iA);v("gxnat.vis.AjaxViewableTree.prototype.getFileMetadata",Ii.prototype.xH);v("gxnat.vis.AjaxViewableTree.prototype.getFilesGotten",Ii.prototype.zH);
v("gxnat.vis.AjaxViewableTree.prototype.setFilesGotten",Ii.prototype.CC);v("gxnat.vis.AjaxViewableTree.prototype.getExperimentUrl",Ii.prototype.tH);v("gxnat.vis.AjaxViewableTree.prototype.getQueryUrl",Ii.prototype.pI);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfo",Ii.prototype.uI);v("gxnat.vis.AjaxViewableTree.prototype.getSessionInfoAsHtml",Ii.prototype.Mu);v("gxnat.vis.AjaxViewableTree.prototype.setSessionInfo",Ii.prototype.TC);
v("gxnat.vis.AjaxViewableTree.prototype.setViewableMetadata",Ii.prototype.Ge);v("gxnat.vis.AjaxViewableTree.prototype.setProjectMetadata",Ii.prototype.mp);v("gxnat.vis.AjaxViewableTree.prototype.setSubjectMetadata",Ii.prototype.op);v("gxnat.vis.AjaxViewableTree.prototype.setExperimentMetadata",Ii.prototype.ip);v("gxnat.vis.AjaxViewableTree.prototype.getFolderQuerySuffix",Ii.prototype.AH);v("gxnat.vis.AjaxViewableTree.prototype.makeFileUrl",Ii.prototype.si);
v("gxnat.vis.AjaxViewableTree.prototype.getFileList",Ii.prototype.Df);v("gxnat.vis.AjaxViewableTree.prototype.fileFilter",Ii.prototype.od);v("gxnat.vis.AjaxViewableTree.prototype.getThumbnailImage",Ii.prototype.Mk);v("gxnat.vis.AjaxViewableTree.prototype.dispose",Ii.prototype.g);function Oi(a,b,c){Ii.call(this,"ExperimentResources",a,b);this.Kb.Name=a.label;this.Pq=eval("(function(fileName) { "+this.Hu()+"})");this.Jg(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png");c&&c(this)}w(Oi,Ii);v("gxnat.vis.ExperimentResource",Oi);var Pi=["dcm","dicom","nii.gz","nii"];f=Oi.prototype;f.ji="resources";f.ii="/files";f.rg="URI";f.Ge=function(){Oi.d.Ge.call(this)};
f.Hu=function(){var a=projNode.experimentResourceFilters;if(null!=a){var b="if (",c;for(c in a){var d=eval("(function(name){return name.match("+c+')})("'+this.Kb.Name+'")');if(a.hasOwnProperty(c)&&d&&d==this.Kb.Name)for(d=0;d<a[c].length;d++)4<b.length&&(b+=" || "),b+="(fileName.match(",b+=a[c][d],b+="))"}b+=") return fileName;";if(0<=b.indexOf("(fileName.match("))return b}return"return null;"};
f.Df=function(a){this.Ze?a():(M.get(this.Bl.originalUrl+"?format=xml",function(b){try{var c=Fi(b),d=c.getElementsByTagName("entry");if(null==d||1>d.length)if(d=c.getElementsByTagName("cat:entry"),null==d||1>d.length){this.Ze=!0;return}for(b=0;b<d.length;b++){var e=d[b].getAttribute("URI"),h=this.Bl.originalUrl+"/files/"+e;null!=h&&this.zd(h,this.od)}this.Ze=!0;a()}catch(k){console.log(k)}}.bind(this),"text"),this.Ge())};
f.od=function(a){a=Oi.d.od.call(this,a);if(null!=a){for(var b=0,c=Pi.length;b<c;b++)if(Fa(a,"."+Pi[b]))return this.Pq(a),this.Pq(a);return null}};
f.bo=function(a){a=a.split("/");for(var b=0;b<a.length;b++)if("files"==a[b]){var c="";if(Ya(a[a.length-1],"nii"))for(b+=1;b<a.length;b++)c=""!=c?c+"/"+a[b]:a[b];break}void 0==c&&(c="experimentResource");for(b=0;b<this.Ia.length;b++)if(this.Ia[b].xb()==c)return this.Ia[b];a=new Eh;a.zs(this.Kb.Name);a.oc(c);a.Lj("experimentResources");a.Jg("NONE");this.Ia.push(a);return a};
f.zd=function(a){this.Lj("Experiment Resources");E(a.split(","),function(b){b=this.od(b);null!=b&&(b=this.bo(b),0==b.$.length&&b.oq(new Dh),b.$[0].zd(a))},this);this.Ia.sort(function(a,c){var d=!1,e=!1,h=!1,k=!1;0<a.$.length&&0<a.$[0].va().length&&(0<=a.$[0].va()[0].toLowerCase().indexOf(".dcm")||0<=a.$[0].va()[0].toLowerCase().indexOf(".dcm")?d=!0:0<=a.$[0].va()[0].toLowerCase().indexOf(".nii")&&(e=!0));0<c.$.length&&0<c.$[0].va().length&&(0<=c.$[0].va()[0].toLowerCase().indexOf(".dcm")||0<=c.$[0].va()[0].toLowerCase().indexOf(".dcm")?
h=!0:0<=c.$[0].va()[0].toLowerCase().indexOf(".nii")&&(k=!0));d=(d?9:0)+(e?5:0)+(a.xb()<c.xb()?1:-1);return(h?9:0)+(k?5:0)-d})};f.si=function(a){return ah(this.tj,a[this.rg],"experiments")};f.g=function(){Oi.d.g.call(this);null!=this.fe&&D(this.fe);delete this.fe};v("gxnat.vis.ExperimentResource.acceptableFileTypes",Pi);v("gxnat.vis.ExperimentResource.prototype.folderQuerySuffix",Oi.prototype.ji);v("gxnat.vis.ExperimentResource.prototype.fileQuerySuffix",Oi.prototype.ii);
v("gxnat.vis.ExperimentResource.prototype.fileContentsKey",Oi.prototype.rg);v("gxnat.vis.ExperimentResource.prototype.setViewableMetadata",Oi.prototype.Ge);v("gxnat.vis.ExperimentResource.prototype.getFileList",Oi.prototype.Df);v("gxnat.vis.ExperimentResource.prototype.fileFilter",Oi.prototype.od);v("gxnat.vis.ExperimentResource.prototype.addFiles",Oi.prototype.zd);v("gxnat.vis.ExperimentResource.prototype.makeFileUrl",Oi.prototype.si);v("gxnat.vis.ExperimentResource.prototype.dispose",Oi.prototype.g);function Qi(a){this.ce=new Wg(a);this.projects=[];this[Ri]={};this[Si]={};this[Ti]={}}w(Qi,xc);v("gxnat.ProjectTree",Qi);function Ui(a){this[Vi]=r(a)?new Wg(a):a;this[Wi]=this[Vi].Sq();a=$g.indexOf(this[Vi].Sq())+1;-1!=a&&(this[Xi]=$g[a],r(this[Xi])&&(this[Yi]=this[Vi].originalUrl+"/"+this[Xi],this[this[Xi]]=[]))}w(Ui,xc);v("gxnat.ProjectTree.TreeNode",Ui);Ui.prototype.oc=function(a){this.Tb=a};Ui.prototype.xb=function(){return this.Tb};
Ui.prototype.g=function(){Ui.d.g.call(this);null!=this[Vi]&&this[Vi].g();D(this)};var Wi=B(),Yi=B(),Zi=B(),Vi=B(),Xi=B(),$i=B(),aj=B(),bj=B(),Ri=B(),Si=B(),Ti=B(),cj=["ID","description","name","URI"],dj=["gender","handedness","label","URI"],ej=["label","URI"];function fj(a,b){return La(a.xb(),b.xb())}function gj(a){var b="&columns=";E(a,function(c,d){separator=",";d==a.length-1&&(separator="");b+=c+separator});return b}f=Qi.prototype;
f.$z=function(a){var b=[];C(this.Yn(a),function(a,d){"projects"==d?void 0!=a[bj].ID?b.push(a[bj].ID):b.push(a[bj].id):b.push(a[bj].label)});return b};f.aA=function(a){var b=[];C(this.Yn(a),function(a){b.push(a[Vi].originalUrl)});return b};f.Yn=function(a){branch={projects:this.Rc};"experiments"==a[Xi]?branch.subjects=a:g(a[Xi])&&(branch.subjects=this[Si][a[Vi].yi("subjects")],branch.experiments=a);return branch};f.vB=function(a,b){this.Eo(this.ce,a,b)};
f.Eo=function(a,b,c){var d=r(a)?new Wg(a):a,e;if(null!=this.Rc){a={projects:this.Rc};if(null!=d.subjects){e=d.yi("subjects");if(null==this[Si][e]){this.vv(e,function(a){this.xB(a,function(){null!=b&&b(a);this.Eo(d,b,c)}.bind(this))}.bind(this));return}a.subjects=this[Si][e]}if(null!=d.experiments){e=d.yi("experiments");if(null==this[Ti][e]){this.uv(e,function(a){null!=b&&b(a);this.Eo(d,b,c)}.bind(this));return}a.experiments=this[Ti][e]}null!=c&&c(a)}else this.wB(function(a){null!=b&&b(a);this.Eo(d,
b,c);hj(this);ij(this)}.bind(this))};function hj(a){M.get(a.Rc[Vi].originalUrl+"/config/XImgView/experimentResources/filters?contents=true",function(a){this.Rc.experimentResourceFilters=a}.bind(a),"json")}function ij(a){M.get(a.Rc[Vi].originalUrl+"/config/XImgView/experimentReconstructions/filters?contents=true",function(a){this.Rc.experimentReconstructionFilters=a}.bind(a),"json")}
f.wB=function(a){if(null==this.Rc){var b=gj(cj),c=this.ce.prefix+"/projects/"+this.ce.projects,d;M.qh(this.ce.prefix+"/projects",function(b){d=new Ui(c);this.projects.push(d);projNode=this.Rc=d;this[Ri][d[Vi].originalUrl]=d;d[bj]=b[0];d.oc(d[bj].name);a(d)}.bind(this),"&ID="+this.ce.projects+b)}};f.fo=function(a){return this[Si][a]};f.pm=function(a){return this[Ti][a]};
f.xB=function(a,b){var c=a;r(a)?c=this.fo(a):a instanceof Wg&&(c=this.fo(a.originalUrl));if(null!=c[bj])b(c);else{var d=this.ce.prefix+"/subjects",e=gj(dj),e="&ID="+c[Vi].subjects+e;M.qh(d,function(a){c[bj]=a[0];c.oc(c[bj].label);b(c)}.bind(this),e)}};
f.yB=function(a,b){if(null==this.Rc[$i]||!0!=this.Rc[$i]){var c=this.Rc[Vi].originalUrl+"/subjects",d=gj(dj);window.console.log("load subjects",c,d);var e,h;M.qh(c,function(c){E(c,function(d){h=this.Rc[Vi].prefix+"/projects/"+this.Rc[Vi].projects+"/subjects/"+d.ID;e=this.vv(h);null==e[bj]&&(e[bj]=d,e.oc(e[bj].label));null!=a&&a(e);this.Rc.subjects.length==c.length&&(this.Rc[$i]=!0,null!=b&&(d=this.Rc.subjects,d.sort(fj),b(d)))}.bind(this))}.bind(this),d)}};
f.vv=function(a,b){if(null!=this[Si][a])return this[Si][a];subjNode=new Ui(a);this.Rc.subjects.push(subjNode);this[Si][a]=subjNode;null!=b&&b(subjNode);return subjNode};f.tB=function(a,b){var c=a;r(a)?c=this.pm(a):a instanceof Wg&&(c=this.pm(a.originalUrl));var d=this.ce.prefix+"/experiments",e=gj(ej),e="&ID="+c[Vi].experiments+e;M.qh(d,function(a){c[bj]=a[0];c.oc(c[bj].label);b(c)}.bind(this),e)};
f.uB=function(a,b,c){var d=a;r(a)?d=this.fo(a):a instanceof Wg&&(d=this.fo(a.originalUrl));if(null!=d[$i]&&!0==d[$i])window.console.log("Don't need to reload the experiments of "+d[Vi].originalUrl);else{var e=d[Vi].originalUrl+"/experiments";M.qh(e+"?xsiType=xnat:imageSessionData",function(a){E(a,function(k){this.uv(e+"/"+k.ID,function(e){null!=b&&b(e);d.experiments.length==a.length&&(d[$i]=!0,null!=c&&(e=d.experiments,e.sort(fj),c(e)))}.bind(this))}.bind(this))}.bind(this))}};
f.uv=function(a,b){null==this[Ti][a]&&(exptNode=new Ui(a),this.tB(exptNode,function(c){this[Si][c[Vi].yi("subjects")].experiments.push(c);this[Ti][a]=c;null!=b&&b(c)}.bind(this)))};f.g=function(){Qi.d.g.call(this);delete this.Rc;this.ce.g();delete this.ce;E(this.projects,function(a){null!=a.subjects&&E(a.subjects,function(a){null!=a.experiments&&E(a.experiments,function(a){a.g()});a.g()});a.g()});D(this)};v("gxnat.ProjectTree.TreeNode",Ui);v("gxnat.ProjectTree.LEVEL_KEY",Wi);
v("gxnat.ProjectTree.NEXTLEVELQUERY_KEY",Yi);v("gxnat.ProjectTree.NEXTLEVELJSON_KEY",Zi);v("gxnat.ProjectTree.PATH_KEY",Vi);v("gxnat.ProjectTree.NEXTLEVEL_KEY",Xi);v("gxnat.ProjectTree.NEXTLEVELLOADED_KEY",$i);v("gxnat.ProjectTree.ISLOADING_KEY",aj);v("gxnat.ProjectTree.METADATA_KEY",bj);v("gxnat.ProjectTree.PROJ_DIRECT",Ri);v("gxnat.ProjectTree.SUBJ_DIRECT",Si);v("gxnat.ProjectTree.EXPT_DIRECT",Ti);v("gxnat.ProjectTree.PROJECT_METADATA",cj);v("gxnat.ProjectTree.SUBJECT_METADATA",dj);
v("gxnat.ProjectTree.EXPERIMENT_METADATA",ej);v("gxnat.ProjectTree.compareNodeTitles",fj);v("gxnat.ProjectTree.getColumnQuery",gj);v("gxnat.ProjectTree.prototype.getBranchTitles",Qi.prototype.$z);v("gxnat.ProjectTree.prototype.getBranchUris",Qi.prototype.aA);v("gxnat.ProjectTree.prototype.getBranchFromEndNode",Qi.prototype.Yn);v("gxnat.ProjectTree.prototype.loadInitBranch",Qi.prototype.vB);v("gxnat.ProjectTree.prototype.loadBranch",Qi.prototype.Eo);v("gxnat.ProjectTree.prototype.loadProject",Qi.prototype.wB);
v("gxnat.ProjectTree.prototype.getSubjectNodeByUri",Qi.prototype.fo);v("gxnat.ProjectTree.prototype.getExperimentNodeByUri",Qi.prototype.pm);v("gxnat.ProjectTree.prototype.loadSubjectMetadata",Qi.prototype.xB);v("gxnat.ProjectTree.prototype.loadSubjects",Qi.prototype.yB);v("gxnat.ProjectTree.prototype.loadSubject",Qi.prototype.vv);v("gxnat.ProjectTree.prototype.loadExperimentMetadata",Qi.prototype.tB);v("gxnat.ProjectTree.prototype.loadExperiments",Qi.prototype.uB);
v("gxnat.ProjectTree.prototype.loadExperiment",Qi.prototype.uv);v("gxnat.ProjectTree.prototype.dispose",Qi.prototype.g);function jj(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}f=jj.prototype;f.clone=function(){return new jj(this.top,this.right,this.bottom,this.left)};f.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};f.contains=function(a){return this&&a?a instanceof jj?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
f.translate=function(a,b){a instanceof Ph?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,u(b)&&(this.top+=b,this.bottom+=b));return this};f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function kj(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}f=kj.prototype;f.clone=function(){return new kj(this.left,this.top,this.width,this.height)};f.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
f.kB=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};f.contains=function(a){return a instanceof kj?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
function lj(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),d=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+d*d}f.su=function(a){return Math.sqrt(lj(this,a))};f.xj=function(){return new ih(this.width,this.height)};f.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
f.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};f.translate=function(a,b){a instanceof Ph?(this.left+=a.x,this.top+=a.y):(this.left+=a,u(b)&&(this.top+=b));return this};
f.scale=function(a,b){var c=u(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function mj(){return jc?"Webkit":ic?"Moz":F?"ms":hc?"O":null}function nj(a,b){if(b&&a in b)return a;var c=mj();return c?(c=c.toLowerCase(),c+=eb(a),!da(b)||c in b?c:null):null};function oj(a,b,c){r(b)?pj(a,c,b):C(b,va(pj,a))}function pj(a,b,c){a:if(c=cb(c),void 0===a.style[c]){var d=mj()+eb(c);if(void 0!==a.style[d]){c=d;break a}}c&&(a.style[c]=b)}function qj(a,b){var c=Th(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function rj(a,b){return qj(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function sj(a){return rj(a,"position")}
function tj(a,b,c){var d,e=ic&&(dc||mc)&&qc("1.9");b instanceof Ph?(d=b.x,b=b.y):(d=b,b=c);a.style.left=uj(d,e);a.style.top=uj(b,e)}function vj(a){return new Ph(a.offsetLeft,a.offsetTop)}function wj(a){a=a?Th(a):document;return!F||rc(9)||Ci(Rh(a))?a.documentElement:a.body}
function xj(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}F&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function yj(a){if(F&&!rc(8))return a.offsetParent;var b=Th(a),c=rj(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=rj(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function zj(a){for(var b=new jj(0,Infinity,Infinity,0),c=Rh(a),d=c.na.body,e=c.na.documentElement,h=bi(c.na);a=yj(a);)if(!(F&&0==a.clientWidth||jc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=rj(a,"overflow")){var k=Aj(a),l;l=a;if(ic&&!qc("1.9")){var n=parseFloat(qj(l,"borderLeftWidth"));if(Bj(l))var p=l.offsetWidth-l.clientWidth-n-parseFloat(qj(l,"borderRightWidth")),n=n+p;l=new Ph(n,parseFloat(qj(l,"borderTopWidth")))}else l=new Ph(l.clientLeft,l.clientTop);k.x+=l.x;k.y+=l.y;b.top=Math.max(b.top,
k.y);b.right=Math.min(b.right,k.x+a.clientWidth);b.bottom=Math.min(b.bottom,k.y+a.clientHeight);b.left=Math.max(b.left,k.x)}d=h.scrollLeft;h=h.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,h);c=ai(Di(c)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,h+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Aj(a){var b,c=Th(a),d=rj(a,"position"),e=ic&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),h=new Ph(0,0),k=wj(c);if(a==k)return h;if(a.getBoundingClientRect)b=xj(a),a=Ei(Rh(c)),h.x=b.left+a.x,h.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(k),h.x=b.screenX-a.screenX,h.y=b.screenY-a.screenY;else{b=a;do{h.x+=b.offsetLeft;h.y+=b.offsetTop;b!=a&&(h.x+=b.clientLeft||0,h.y+=b.clientTop||0);
if(jc&&"fixed"==sj(b)){h.x+=c.body.scrollLeft;h.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(hc||jc&&"absolute"==d)h.y-=c.body.offsetTop;for(b=a;(b=yj(b))&&b!=c.body&&b!=k;)h.x-=b.scrollLeft,hc&&"TR"==b.tagName||(h.y-=b.scrollTop)}return h}function Cj(a,b){var c=Dj(a),d=Dj(b);return new Ph(c.x-d.x,c.y-d.y)}
function Ej(a){var b;if(a.getBoundingClientRect)b=xj(a),b=new Ph(b.left,b.top);else{b=Ei(Rh(a));var c=Aj(a);b=new Ph(c.x-b.x,c.y-b.y)}if(ic&&!qc(12)){b:{c=cb("transform");if(void 0===a.style[c]&&(c=mj()+eb(c),void 0!==a.style[c])){c=(jc?"-webkit":ic?"-moz":F?"-ms":hc?"-o":null)+"-transform";break b}c="transform"}a=(a=rj(a,c)||rj(a,"transform"))?(a=a.match(Fj))?new Ph(parseFloat(a[1]),parseFloat(a[2])):new Ph(0,0):new Ph(0,0);a=new Ph(b.x+a.x,b.y+a.y)}else a=b;return a}
function Dj(a){if(1==a.nodeType)return Ej(a);var b=la(a.bH),c=a;a.targetTouches?c=a.targetTouches[0]:b&&a.Yc.targetTouches&&(c=a.Yc.targetTouches[0]);return new Ph(c.clientX,c.clientY)}function Gj(a,b,c){if(b instanceof ih)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");Hj(a,b);Ij(a,c)}function uj(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Ij(a,b){a.style.height=uj(b,!0)}function Hj(a,b){a.style.width=uj(b,!0)}
function U(a){var b=Jj;if("none"!=rj(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=h;c.visibility=e;return a}function Jj(a){var b=a.offsetWidth,c=a.offsetHeight,d=jc&&!b&&!c;return da(b)&&!d||!a.getBoundingClientRect?new ih(b,c):(a=xj(a),new ih(a.right-a.left,a.bottom-a.top))}function Kj(a){var b=Aj(a);a=U(a);return new kj(b.x,b.y,a.width,a.height)}
function Lj(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Mj(a,b){a.style.display=b?"":"none"}function Nj(a){F&&da(a.cssText)?a.cssText=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }":a.innerHTML=".goog-tabpane-clear { clear: both; height: 0px; overflow: hidden }"}function Bj(a){return"rtl"==rj(a,"direction")}var Oj=ic?"MozUserSelect":jc?"WebkitUserSelect":null;
function Pj(a,b,c){c=c?null:a.getElementsByTagName("*");if(Oj){if(b=b?"none":"",a.style[Oj]=b,c){a=0;for(var d;d=c[a];a++)d.style[Oj]=b}}else if(F||hc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Qj(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Rj(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Qj(a,c):0}function Sj(a,b){if(F){var c=Rj(a,b+"Left"),d=Rj(a,b+"Right"),e=Rj(a,b+"Top"),h=Rj(a,b+"Bottom");return new jj(e,d,h,c)}c=qj(a,b+"Left");d=qj(a,b+"Right");e=qj(a,b+"Top");h=qj(a,b+"Bottom");return new jj(parseFloat(e),parseFloat(d),parseFloat(h),parseFloat(c))}var Tj={thin:2,medium:4,thick:6};
function Uj(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Tj?Tj[c]:Qj(a,c)}function Vj(a){if(F&&!rc(9)){var b=Uj(a,"borderLeft"),c=Uj(a,"borderRight"),d=Uj(a,"borderTop");a=Uj(a,"borderBottom");return new jj(d,c,a,b)}b=qj(a,"borderLeftWidth");c=qj(a,"borderRightWidth");d=qj(a,"borderTopWidth");a=qj(a,"borderBottomWidth");return new jj(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Fj=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Wj(a){xc.call(this);this.pd=a;this.rb={}}w(Wj,xc);var Xj=[];f=Wj.prototype;f.D=function(a,b,c,d){g(b)||(b&&(Xj[0]=b.toString()),b=Xj);for(var e=0;e<b.length;e++){var h=G(a,b[e],c||this.handleEvent,d||!1,this.pd||this);if(!h)break;this.rb[h.key]=h}return this};f.sv=function(a,b,c,d){return Yj(this,a,b,c,d)};function Yj(a,b,c,d,e,h){if(g(c))for(var k=0;k<c.length;k++)Yj(a,b,c[k],d,e,h);else{b=Uc(b,c,d||a.handleEvent,e,h||a.pd||a);if(!b)return a;a.rb[b.key]=b}return a}
f.Bb=function(a,b,c,d,e){if(g(b))for(var h=0;h<b.length;h++)this.Bb(a,b[h],c,d,e);else c=c||this.handleEvent,e=e||this.pd||this,c=Oc(c),d=!!d,b=ib(a)?a.eo(b,c,d,e):a?(a=Qc(a))?a.eo(b,c,d,e):null:null,b&&(Wc(b),delete this.rb[b.key]);return this};f.Gg=function(){C(this.rb,Wc);this.rb={}};f.f=function(){Wj.d.f.call(this);this.Gg()};f.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Zj(){}ga(Zj);Zj.prototype.OB=0;function ak(a){ad.call(this);this.wb=a||Rh();this.zh=bk;this.Gf=null;this.oa=!1;this.q=null;this.yj=void 0;this.lg=this.Vc=this.$a=this.Cv=null;this.ND=!1}w(ak,ad);ak.prototype.qJ=Zj.ye();var bk=null;
function ck(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function dk(a){return a.Gf||(a.Gf=":"+(a.qJ.OB++).toString(36))}function ek(a,b){a.$a&&a.$a.lg&&(ub(a.$a.lg,a.Gf),vb(a.$a.lg,b,a));a.Gf=b}f=ak.prototype;f.a=function(){return this.q};
f.nb=function(){this.yj||(this.yj=new Wj(this));return this.yj};f.kp=function(a){if(this==a)throw Error("Unable to set parent component");if(a&&this.$a&&this.Gf&&fk(this.$a,this.Gf)&&this.$a!=a)throw Error("Unable to set parent component");this.$a=a;ak.d.Ew.call(this,a)};f.getParent=function(){return this.$a};f.Ew=function(a){if(this.$a&&this.$a!=a)throw Error("Method not supported");ak.d.Ew.call(this,a)};f.O=function(){return this.wb};f.B=function(){this.q=this.wb.createElement("div")};f.k=function(a){this.yh(a)};
f.yh=function(a,b){if(this.oa)throw Error("Component already rendered");this.q||this.B();a?a.insertBefore(this.q,b||null):this.wb.na.body.appendChild(this.q);this.$a&&!this.$a.oa||this.mb()};f.Pb=function(a){if(this.oa)throw Error("Component already rendered");if(a&&this.We(a)){this.ND=!0;var b=Th(a);this.wb&&this.wb.na==b||(this.wb=Rh(a));this.ue(a);this.mb()}else throw Error("Invalid element to decorate");};f.We=function(){return!0};f.ue=function(a){this.q=a};
f.mb=function(){this.oa=!0;gk(this,function(a){!a.oa&&a.a()&&a.mb()})};f.Lc=function(){gk(this,function(a){a.oa&&a.Lc()});this.yj&&this.yj.Gg();this.oa=!1};f.f=function(){this.oa&&this.Lc();this.yj&&(this.yj.g(),delete this.yj);gk(this,function(a){a.g()});!this.ND&&this.q&&S(this.q);this.$a=this.Cv=this.q=this.lg=this.Vc=null;ak.d.f.call(this)};f.Dn=function(a,b){this.Ft(a,hk(this),b)};
f.Ft=function(a,b,c){if(a.oa&&(c||!this.oa))throw Error("Component already rendered");if(0>b||b>hk(this))throw Error("Child component index out of bounds");this.lg&&this.Vc||(this.lg={},this.Vc=[]);if(a.getParent()==this){var d=dk(a);this.lg[d]=a;Mb(this.Vc,a)}else vb(this.lg,dk(a),a);a.kp(this);Pb(this.Vc,b,0,a);a.oa&&this.oa&&a.getParent()==this?(c=this.La(),c.insertBefore(a.a(),c.childNodes[b]||null)):c?(this.q||this.B(),b=ik(this,b+1),a.yh(this.La(),b?b.q:null)):this.oa&&!a.oa&&a.q&&a.q.parentNode&&
1==a.q.parentNode.nodeType&&a.mb()};f.La=function(){return this.q};f.bf=function(){null==this.zh&&(this.zh=Bj(this.oa?this.q:this.wb.na.body));return this.zh};f.Nm=function(a){if(this.oa)throw Error("Component already rendered");this.zh=a};function hk(a){return a.Vc?a.Vc.length:0}function fk(a,b){var c;a.lg&&b?(c=a.lg,c=(b in c?c[b]:void 0)||null):c=null;return c}function ik(a,b){return a.Vc?a.Vc[b]||null:null}function gk(a,b,c){a.Vc&&E(a.Vc,b,c)}function jk(a,b){return a.Vc&&b?Bb(a.Vc,b):-1}
f.removeChild=function(a,b){if(a){var c=r(a)?a:dk(a);a=fk(this,c);c&&a&&(ub(this.lg,c),Mb(this.Vc,a),b&&(a.Lc(),a.q&&S(a.q)),a.kp(null))}if(!a)throw Error("Child is not in parent component");return a};function kk(a,b,c){xc.call(this);this.tv=a;this.xg=b||0;this.pd=c;this.rG=ua(this.IG,this)}w(kk,xc);f=kk.prototype;f.Gf=0;f.f=function(){kk.d.f.call(this);this.stop();delete this.tv;delete this.pd};f.start=function(a){this.stop();this.Gf=$f(this.rG,da(a)?a:this.xg)};f.stop=function(){this.oh()&&ba.clearTimeout(this.Gf);this.Gf=0};f.oh=function(){return 0!=this.Gf};f.IG=function(){this.Gf=0;this.tv&&this.tv.call(this.pd)};var tb={},lk=null;function mk(a){a=na(a);delete tb[a];sb()&&lk&&lk.stop()}function nk(){lk||(lk=new kk(function(){ok()},20));var a=lk;a.oh()||a.start()}function ok(){var a=xa();C(tb,function(b){pk(b,a)});sb()||nk()};function qk(){ad.call(this);this.U=rk;this.endTime=this.startTime=null}w(qk,ad);var rk=0;qk.prototype.If=function(){return 1==this.U};qk.prototype.vi=function(){this.wc("begin")};qk.prototype.onEnd=function(){this.wc("end")};qk.prototype.wc=function(a){this.dispatchEvent(a)};function sk(a,b,c,d){qk.call(this);if(!g(a)||!g(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.xp=a;this.PG=b;this.duration=c;this.ty=d;this.coords=[];this.rl=!1}w(sk,qk);f=sk.prototype;f.qj=function(a){this.rl=a};f.Nf=0;
f.play=function(a){if(a||this.U==rk)this.Nf=0,this.coords=this.xp;else if(this.If())return!1;mk(this);this.startTime=a=xa();-1==this.U&&(this.startTime-=this.duration*this.Nf);this.endTime=this.startTime+this.duration;this.Nf||this.vi();this.wc("play");-1==this.U&&this.wc("resume");this.U=1;var b=na(this);b in tb||(tb[b]=this);nk();pk(this,a);return!0};f.stop=function(a){mk(this);this.U=rk;a&&(this.Nf=1);tk(this,this.Nf);this.wc("stop");this.onEnd()};
f.pause=function(){this.If()&&(mk(this),this.U=-1,this.wc("pause"))};f.f=function(){this.U==rk||this.stop(!1);this.wc("destroy");sk.d.f.call(this)};f.ve=function(){this.g()};function pk(a,b){a.Nf=(b-a.startTime)/(a.endTime-a.startTime);1<=a.Nf&&(a.Nf=1);tk(a,a.Nf);1==a.Nf?(a.U=rk,mk(a),a.wc("finish"),a.onEnd()):a.If()&&a.Kv()}function tk(a,b){la(a.ty)&&(b=a.ty(b));a.coords=Array(a.xp.length);for(var c=0;c<a.xp.length;c++)a.coords[c]=(a.PG[c]-a.xp[c])*b+a.xp[c]}f.Kv=function(){this.wc("animate")};
f.wc=function(a){this.dispatchEvent(new uk(a,this))};function uk(a,b){Dc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.Nf=b.Nf;this.state=b.U}w(uk,Dc);var vk={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function wk(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(xk.test(c))return b.zj=yk(c),b.type="hex",b;a:{var d=a.match(zk);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.zj=Ak(c),b.type="rgb",b;if(vk&&(c=vk[a.toLowerCase()]))return b.zj=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Bk=/#(.)(.)(.)/;
function yk(a){if(!xk.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Bk,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Ck(a){a=yk(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}
function Ak(a){var b=a[0],c=a[1];a=a[2];b=Number(b);c=Number(c);a=Number(a);if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(a)||0>a||255<a)throw Error('"('+b+","+c+","+a+'") is not a valid RGB color');b=Dk(b.toString(16));c=Dk(c.toString(16));a=Dk(a.toString(16));return"#"+b+c+a}var xk=/^#(?:[0-9a-f]{3}){1,2}$/i,zk=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Dk(a){return 1==a.length?"0"+a:a}
function Ek(a,b,c){var d=0,e=0,h=0;if(0==b)h=e=d=c;else{var k=Math.floor(a/60),l=a/60-k;a=c*(1-b);var n=c*(1-b*l);b=c*(1-b*(1-l));switch(k){case 1:d=n;e=c;h=a;break;case 2:d=a;e=c;h=b;break;case 3:d=a;e=n;h=c;break;case 4:d=b;e=a;h=c;break;case 5:d=c;e=a;h=n;break;case 6:case 0:d=c,e=b,h=a}}return Ak([Math.floor(d),Math.floor(e),Math.floor(h)])};function Fk(a){var b=a.offsetLeft,c=a.offsetParent;c||"fixed"!=sj(a)||(c=Th(a).documentElement);if(!c)return b;if(ic)var d=Vj(c),b=b+d.left;else rc(8)&&(d=Vj(c),b-=d.left);return Bj(c)?c.clientWidth-(b+a.offsetWidth):b};function Gk(a,b,c,d,e){sk.call(this,b,c,d,e);this.element=a}w(Gk,sk);f=Gk.prototype;f.o=fa;f.bf=function(){da(this.zh)||(this.zh=Bj(this.element));return this.zh};f.Kv=function(){this.o();Gk.d.Kv.call(this)};f.onEnd=function(){this.o();Gk.d.onEnd.call(this)};f.vi=function(){this.o();Gk.d.vi.call(this)};function Hk(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Gk.apply(this,arguments)}w(Hk,Gk);
Hk.prototype.o=function(){var a=this.rl&&this.bf()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};function Ik(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Gk.apply(this,arguments)}w(Ik,Gk);Ik.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};
function Jk(a,b,c,d,e){Gk.call(this,a,[b],[c],d,e)}w(Jk,Gk);Jk.prototype.o=function(){this.element.style.width=Math.round(this.coords[0])+"px"};function Kk(a,b,c,d,e){Gk.call(this,a,[b],[c],d,e)}w(Kk,Gk);Kk.prototype.o=function(){this.element.style.height=Math.round(this.coords[0])+"px"};function Lk(a,b,c,d,e){u(b)&&(b=[b]);u(c)&&(c=[c]);Gk.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");}w(Lk,Gk);Lk.prototype.o=function(){Lj(this.element,this.coords[0])};
Lk.prototype.show=function(){this.element.style.display=""};Lk.prototype.vm=function(){this.element.style.display="none"};function Mk(a,b,c){Lk.call(this,a,1,0,b,c)}w(Mk,Lk);function Nk(a,b,c){Lk.call(this,a,0,1,b,c)}w(Nk,Lk);function Ok(a,b,c){Lk.call(this,a,1,0,b,c)}w(Ok,Lk);Ok.prototype.vi=function(){this.show();Ok.d.vi.call(this)};Ok.prototype.onEnd=function(){this.vm();Ok.d.onEnd.call(this)};function Pk(a,b,c){Lk.call(this,a,0,1,b,c)}w(Pk,Lk);Pk.prototype.vi=function(){this.show();Pk.d.vi.call(this)};
function Qk(a,b,c,d,e){if(3!=b.length||3!=c.length)throw Error("Start and end points must be 3D");Gk.apply(this,arguments)}w(Qk,Gk);Qk.prototype.us=function(){for(var a=[],b=0;b<this.coords.length;b++)a[b]=Math.round(this.coords[b]);this.element.style.backgroundColor="rgb("+a.join(",")+")"};Qk.prototype.o=function(){this.us()};function Rk(){qk.call(this);this.dc=[]}w(Rk,qk);Rk.prototype.add=function(a){Jb(this.dc,a)||(this.dc.push(a),G(a,"finish",this.Lv,!1,this))};Rk.prototype.remove=function(a){Mb(this.dc,a)&&Vc(a,"finish",this.Lv,!1,this)};Rk.prototype.f=function(){E(this.dc,function(a){a.g()});this.dc.length=0;Rk.d.f.call(this)};function Sk(){Rk.call(this);this.xu=0}w(Sk,Rk);
Sk.prototype.play=function(a){if(0==this.dc.length)return!1;if(a||this.U==rk)this.xu=0,this.vi();else if(this.If())return!1;this.wc("play");-1==this.U&&this.wc("resume");var b=-1==this.U&&!a;this.startTime=xa();this.endTime=null;this.U=1;E(this.dc,function(c){b&&-1!=c.U||c.play(a)});return!0};Sk.prototype.pause=function(){this.If()&&(E(this.dc,function(a){a.If()&&a.pause()}),this.U=-1,this.wc("pause"))};
Sk.prototype.stop=function(a){E(this.dc,function(b){b.U==rk||b.stop(a)});this.U=rk;this.endTime=xa();this.wc("stop");this.onEnd()};Sk.prototype.Lv=function(){this.xu++;this.xu==this.dc.length&&(this.endTime=xa(),this.U=rk,this.wc("finish"),this.onEnd())};function Tk(){Rk.call(this);this.Bf=0}w(Tk,Rk);
Tk.prototype.play=function(a){if(0==this.dc.length)return!1;if(a||this.U==rk)this.Bf<this.dc.length&&this.dc[this.Bf].U!=rk&&this.dc[this.Bf].stop(!1),this.Bf=0,this.vi();else if(this.If())return!1;this.wc("play");-1==this.U&&this.wc("resume");this.startTime=xa();this.endTime=null;this.U=1;this.dc[this.Bf].play(a);return!0};Tk.prototype.pause=function(){this.If()&&(this.dc[this.Bf].pause(),this.U=-1,this.wc("pause"))};
Tk.prototype.stop=function(a){this.U=rk;this.endTime=xa();if(a)for(a=this.Bf;a<this.dc.length;++a){var b=this.dc[a];b.U==rk&&b.play();b.U==rk||b.stop(!0)}else this.Bf<this.dc.length&&this.dc[this.Bf].stop(!1);this.wc("stop");this.onEnd()};Tk.prototype.Lv=function(){this.If()&&(this.Bf++,this.Bf<this.dc.length?this.dc[this.Bf].play():(this.endTime=xa(),this.U=rk,this.wc("finish"),this.onEnd()))};v("nrg.convert",function(){});function Uk(a){if(!g(a)&&!u(a))throw new TypeError("Array or number expected!",a);if(a instanceof Array)return a.map(function(a){return a.toString()+"px"});switch(typeof a){case "number":return a.toString()+"px"}}
function Vk(a,b,c){if(b[0]===b[1]||c[0]===c[1])throw"Remap: initial domain is equal!";b=b.sort();c=c.sort();if(a<=b[0])return a=b[0],{remappedVal:c[0],oldValue:a};if(a>=b[1])return a=b[1],{remappedVal:c[1],oldValue:a};b=Math.round(a/(b[1]-b[0])*(c[1]-c[0]));b<c[0]?b=c[0]:b>c[1]&&(b=c[1]);return{remappedVal:b,oldValue:a}}function Wk(a){var b={};C(a,function(a,d){isNaN(a)?r(a)&&(b[d]=a):b[d]=a});return b}function Xk(a){var b={};C(a,function(a,d){r(a)?0<a.length&&(b[d]=a):b[d]=a});return b}
v("nrg.convert.pct",function(a){if(!u(a))throw new TypeError("Number expected!",a);if(1<a||0>a)throw Error("Value must be between 0 and 1!");return(100*a).toString()+"%"});v("nrg.convert.px",Uk);v("nrg.convert.remap1D",Vk);v("nrg.convert.toInt",function(a){if(!r(a)&&!u(a))throw new TypeError("Number or string expected!",a);return parseInt(a,10)});
v("nrg.convert.toFloatArray",function(a){if(!r(a))throw new TypeError("String expected!",a);var b=[];a=a.split(" ");E(a,function(a,d){b[d]=parseFloat(a,10)});return b});v("nrg.convert.objectToArray",function(a){if(!ma(a))throw new TypeError("Object expected!",a);var b=[],c="";for(c in a)b=b.concat(a[c]);return b});v("nrg.convert.rgbToArray",function(a){if(!r(a))throw new TypeError("String expected!",a);a=a.match(/\d+/g);var b=0,b=0;for(len=a.length;b<len;b++)a[b]=parseInt(a[b],10);return a});
v("nrg.convert.arrayToRgb",function(a,b){if(!g(a))throw new TypeError("Array expected!",a);var c="rgb(";b=void 0===b?1:b;E(a,function(a){c+=parseInt(a*b,10).toString()+","});return c=c.substring(0,c.length-1)+")"});v("nrg.convert.filterNaN",Wk);v("nrg.convert.filterZeroLengthStrings",Xk);v("nrg.style",function(){});var Yk="azimuth background-attachment background-color background-image background-position background-repeat background border-collapse border-color border-spacing border-style border-top border-right border-bottom border-left border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style border-top-width border-right-width border-bottom-width border-left-width border-width border bottom caption-side clear clip color content counter-increment counter-reset cue-after cue-before cue cursor direction display elevation empty-cells float font-family font-size font-style font-variant font-weight font height left letter-spacing line-height list-style-image list-style-position list-style-type list-style margin-right margin-left margin-top margin-bottom margin max-height max-width min-height min-width orphans outline-color outline-style outline-width outline overflow padding-top padding-right padding-bottom padding-left padding page-break-after page-break-before page-break-inside pause-after pause-before pause pitch-range pitch play-during position quotes richness right speak-header speak-numeral speak-punctuation speak speech-rate stress table-layout text-align text-decoration text-indent text-transform top unicode-bidi vertical-align visibility voice-family volume white-space widows width word-spacing z-index".split(" ");
function Zk(a){return a.getBoundingClientRect()}function $k(a){var b=vj(a);a=U(a);this.Ee=b;this.size=a;this.left=this.x=b.x;this.width=a.width;this.right=b.x+a.width;this.top=this.y=b.y;this.height=a.height;this.bottom=b.y+a.height}
function al(a){var b="height width left top border-width borderWidth borderRadius border-radius fontSize fontSize margin margin-top marginTop marginLeft margin-left".split(" "),c=0,d=0;for(key in a)for(c=0,d=b.length;c<d;c++)key===b[c]&&(a[key]=parseInt(a[key],10));return a}function bl(a,b){a&&b&&(a.style||(a.style={}),oj(a,b),E("top left height width fontSize borderWidth borderRadius".split(" "),function(c){b[c]&&!Ea(b[c],"%")&&(a.style[c]=Uk(b[c]))}))}var cl="is_hovered_"+B();
function dl(a,b,c,d,e,h){function k(){a[cl]=!1;Hh(a,b);null!=h&&h()}function l(){a[cl]=!0;O(a,b);null!=e&&e()}G(a,"mouseenter",l);G(a,"mouseleave",k);c&&(c=void 0!==d?c.bind(d):c,c(l,k))}function el(a,b,c){var d=new $k(a);d.right>c&&(d.left=c-d.width);d.left<b&&(d.left=b);a.style.left=d.left.toString()+"px";return new $k(a)}v("nrg.style.cssProperties",Yk);
v("nrg.style.removeClassesThatContain",function(a,b){var c=Fh(a),d=[],e=0;b=b.toLowerCase();e=0;for(len=c.length;e<len;e++)-1<c[e].toLowerCase().indexOf(b)&&d.push(c[e]);e=0;for(len=d.length;e<len;e++)Hh(a,d[e])});v("nrg.style.absolutePosition",Zk);v("nrg.style.dims",$k);v("nrg.style.getStyleSheet",function(a){for(var b=0;b<document.styleSheets.length;b++){var c=document.styleSheets[b];if(c.title==a)return c}});
v("nrg.style.getComputedStyle",function(a,b){if(b&&r(b))return window.getComputedStyle(a,null).getPropertyValue(b);void 0===b&&(b=Yk);for(var c={},d=window.getComputedStyle(a,null),e=0,h=b.length,e=0;e<h;e++)c[b[e]]=d.getPropertyValue(b[e]);return al(c)});v("nrg.style.parseIntNumericalProperties",al);v("nrg.style.setStyle",bl);v("nrg.style.constrainHorizontally",el);v("nrg.style.IS_HOVERED",cl);v("nrg.style.setHoverClass",dl);
v("nrg.style.getPositionRelativeToAncestor",function(a,b){var c=0,d=0;if(a.offsetParent){for(var e=a;e!==b;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;return{left:c,top:d}}});function fl(a){return 1-Math.pow(1-a,3)};function gl(){}v("nrg.fx",gl);function hl(a,b,c){void 0===b&&(b=500);il(a,b,1,c)}function jl(a,b,c){void 0===b&&(b=500);il(a,0,0,function(){il(a,b,1,c)})}function kl(a,b,c){void 0===b&&(b=500);il(a,b,0,c)}function il(a,b,c,d,e){e||(null!=a.style?e=a.style.opacity?parseInt(a.style.opacity,10):1:a.style.opacity=1);var h=new Lk(a,e,c,b);d&&h.addEventListener("end",function(a){d(a);J(h);delete h});h.play()}
function ll(a,b,c){E(a,function(a){a.style.opacity=0});b=u(b)?b:500;c=u(c)?c:250;var d=new Yf(0);d.addEventListener(Zf,function(){elt=a[0];hl(elt,b);1==a.length?(d.stop(),d.g()):(a=Qb(a,1),d.setInterval(c))});d.start()}gl.animGenStyles="left top width height opacity background-color color z-index".split(" ");function ml(a,b,c,d){if(("left"in b||"left"in c||"top"in b||"top"in c)&&!(isNaN(b.top)||isNaN(c.top)||isNaN(b.left)||isNaN(c.left)))return new Hk(a,[b.left,b.top],[c.left,c.top],d,fl)}
function nl(a,b,c,d){if(("height"in b||"height"in c||"width"in b||"width"in c)&&!(isNaN(b.height)||isNaN(c.height)||isNaN(b.width)||isNaN(c.width)))return new Ik(a,[b.width,b.height],[c.width,c.height],d,fl)}function ol(a,b,c,d){if("opacity"in b||"opacity"in c)if(E([b,c],function(a){"opacity"in a||(a.opacity=1);u(a.opacity)||(a.opacity=parseInt(a.opacity,10))}),b.opacity!==c.opacity)return new Lk(a,b.opacity,c.opacity,d)}
function pl(a,b,c,d){if("visibility"in b||"visibility"in c)if(E([b,c],function(a){"visibility"in a||(a.visibility="visible")}),b.visibility!==c.visibility)return"hidden"===b.visibility?new Pk(a,d):new Ok(a,d)}
function ql(a,b,c,d){if("background-color"in b||"background-color"in c){E([b,c],function(a){"background-color"in a||(a["background-color"]="rgb(255,255,255)")});try{var e=wk(b["background-color"]),h=wk(c["background-color"]);if(e.zj!==h.zj)return new Qk(a,Ck(e.zj),Ck(h.zj),d,fl)}catch(k){window.console.log("Skipping color transition anim: ",k.message)}}}function rl(a,b){this.iG=a;this.PM=b}function sl(a){return Xk(Wk(a))}
function tl(a){var b=U(a),c=vj(a);return{left:c.x,top:c.y,width:b.width,height:b.height,opacity:parseInt(a.style.opacity,10),"background-color":a.style.backgroundColor,background:a.style.background,color:a.style.color,"z-index":parseInt(a.style.zIndex,10)}}function ul(a,b){var c=tl(a),c=sl(c),d=tl(b),e=sl(d);C(c,function(a,b){null!=e[b]||(e[b]=a)});return new rl(c,e)}
function vl(a,b,c,d){var e=[];E(gl.animGenStyles,function(h){if(null!=b&&null!=c)switch(h){case "left":e.push(ml(a,b,c,d));break;case "height":e.push(nl(a,b,c,d));break;case "opacity":e.push(ol(a,b,c,d));break;case "visibility":e.push(pl(a,b,c,d));break;case "background-color":e.push(ql(a,b,c,d))}});var h=[];E(e,function(a){null!=a&&h.push(a)});delete e;return h}
function wl(a,b,c,d){var e=new Sk;E(a,function(a){c&&G(a,"animate",c);e.add(a)});b&&G(e,"begin",b);G(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()}function xl(a,b,c){function d(){bl(a,{opacity:c})}b=void 0===b?1:b;c=void 0===c?.5:c;G(a,"mouseover",function(){bl(a,{opacity:b})});G(a,"mouseout",d);d()}
function yl(a,b,c,d,e,h,k){if(!g(b)){var l=[];E(a,function(){l.push(b)});b=l}g(c)||(l=[],E(a,function(){l.push(c)}),c=l);d=u(d)?d:500;var n=[];E(a,function(a,e){n.push(ol(a,{opacity:b[e]},{opacity:c[e]},d))});wl(n,e,h,k)}v("nrg.fx.fadeIn",hl);v("nrg.fx.fadeInFromZero",jl);v("nrg.fx.fadeOut",kl);v("nrg.fx.fadeOutAndRemove",function(a,b,c){void 0===b&&(b=500);il(a,b,0,function(){a.parentNode.removeChild(a);c&&c()})});v("nrg.fx.fadeTo",il);v("nrg.fx.animGenStyles",gl.animGenStyles);
v("nrg.fx.generateAnim_Slide",ml);v("nrg.fx.generateAnim_Resize",nl);v("nrg.fx.generateAnim_Fade",ol);v("nrg.fx.generateAnim_RemoveAddFade",pl);v("nrg.fx.generateAnim_BgColorTrans",ql);v("nrg.fx.TransitionDims",rl);v("nrg.fx.filterTransitionStyles",sl);v("nrg.fx.getTransitionStyles",tl);v("nrg.fx.generateTransitionDims",ul);v("nrg.fx.getAnimationDims",function(a){var b=U(a),c=vj(a);return{"background-color":rj(a,"backgroundColor"),width:b.width,left:c.x,top:c.y,height:b.height}});
v("nrg.fx.generateAnimations",vl);v("nrg.fx.parallelAnimate",wl);v("nrg.fx.serialAnimate",function(a,b,c,d){var e=new Tk;E(a,function(a){c&&G(a,"animate",c);e.add(a)});b&&G(e,"begin",b);G(e,"end",function(){d&&d();e.g();e=null;delete e});e.play()});v("nrg.fx.setBasicHoverStates",xl);v("nrg.fx.sequentialFadeIn",ll);v("nrg.fx.parallelFade",yl);function zl(a){return a.slice(a.lastIndexOf("/")+1)}function Al(a){for(var b=arguments[0],c=1;c<arguments.length;c++)var d=arguments[c],b=0==d.lastIndexOf("/",0)?d:""==b||Ea(b,"/")?b+d:b+("/"+d);return b};function Bl(){}v("nrg.dom",Bl);function Cl(a,b,c){if(!g(a))throw new TypeError("Array expected!",a);if(b&&!r(b))throw new TypeError("String expected!",b);if(c&&!r(c))throw new TypeError("String expected!",c);var d={};c=c?c:"png";var e="",h=0,h=0;for(len=a.length;h<len;h++)e=a[h],d[e]=Dl(e,{src:b?Al(b,db(e)+"."+c):""});return d}function El(a,b){var c=Q("img",{src:b});c.style.VP="contain";c.style.maxWidth="100%";c.style.maxHeight="100%";R(a,c);c.onclick=c.parentNode.onclick}
function Dl(a,b,c,d){if(!r(a))throw new TypeError("String expected!");if(b&&!ma(b))throw new TypeError("Object expected!");if(null!=c&&!u(c))throw new TypeError("Number expected!");if(null!=d&&!u(d))throw new TypeError("Number expected!");a=Fl("div",a,b?b:{});b&&b.src&&El(a,b.src);xl(a,void 0===c?1:c,void 0===d?.5:d);return a}
function Fl(a,b,c){if(!r(a))throw new TypeError("String expected!",a);if(!r(b))throw new TypeError("String expected!",b);if(c&&!ma(c))throw new TypeError("Object expected!");c=c&&ma(c)?c:{};c.id=c.id?c.id:b+"_"+B();c["class"]=c["class"]?c["class"]:db(b.replace(/\./g,"-").toLowerCase());return Q(a,c)}v("nrg.dom.createBasicHoverButtonSet",Cl);v("nrg.dom.createDivChildImage",El);v("nrg.dom.createBasicHoverButton",Dl);v("nrg.dom.createUniqueDom",Fl);
v("nrg.dom.stopPropagation",function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()});v("nrg.dom.checkForExtraneousArgs",function(a,b){for(var c in b)if(c in a)"[object Object]"===b[c].toString()&&Bl.ZQ(originString,a[c],b[c]);else throw"Invalid arguments detected in args: '"+c+"' ";});
v("nrg.dom.readCSS",function(a){for(var b=document.styleSheets[0].rules||document.styleSheets[0].cssRules,c=0,c=0;c<b.length;c++)b[c].selectorText==a&&(b[c].cssText?alert(b[c].cssText):alert(b[c].style.cssText));return b});function V(a){ak.call(this,a);this.mx();this.q=Fl("div",this.constructor.ID_PREFIX,a);this.Bq();Gl(this);serverRoot+=""}w(V,ak);v("nrg.ui.Component",V);f=V.prototype;
f.mx=function(){if(this instanceof V){this.constructor.d&&this.constructor.d instanceof V&&V.prototype.mx.bind(this.constructor.d)();if(!this.constructor.ID_PREFIX)throw Error("nrg.ui.Component subclass should have the property 'ID_PREFIX' .",this);da(this.constructor.Pp)||(this.constructor.Pp=Hl(this.constructor.ID_PREFIX),this.constructor.dd=this.constructor.Pp)}};function Hl(a){return a.toLowerCase().replace(/\./g,"-")}
f.Bq=function(){if(null!=this.constructor.d)for(var a=this.constructor.d;null!=a.constructor.ID_PREFIX;)V.prototype.Bq.bind(a)(),a=a.constructor.d;da(this.constructor.CSS_SUFFIX)&&!da(this.constructor.CSS)&&(this.constructor.CSS=wb(this.constructor.CSS_SUFFIX),C(this.constructor.CSS,function(a,c){this.constructor.CSS[c]=xh(this.constructor.ID_PREFIX,a)}.bind(this)))};
function Gl(a){for(var b=[],c=a,d;null!=c.constructor.ID_PREFIX;)d=Hl(c.constructor.ID_PREFIX),Lb(b,d),c=c.constructor.d;E(b,function(a){null!=this.a()&&O(this.a(),a)}.bind(a))}f.oi="";f.FC=function(a){this.oi=a};f.KH=function(){return this.oi};f.$F=function(a){null==this.zp&&(this.zp=[]);this.zp.push(a)};
f.ai=function(){if(null==this.sa)this.sa=U(this.a());else if(this.sa.height!==this.A.height||this.sa.width!==this.A.width)this.sa=this.A;if(null==this.To)this.To=vj(this.a());else if(this.To.x!==this.Dq.x||this.To.y!==this.Dq.y)this.To=this.Dq;this.A=U(this.a());this.Dq=vj(this.a())};f.o=function(){this.ai()};f.k=function(a){this.oa&&this.a().parentNode!==a&&null!=a?a.appendChild(this.a()):V.d.k.call(this,a)};f.Kz=!1;f.GG=function(){return this.Kz};
f.f=function(){V.d.f.call(this);null!=this.zp&&(E(this.zp,function(a){J(a);a.g()}),Kb(this.zp));J(this);J(this.a());S(this.a());this.oi=null;null!=this.jl&&delete this.jl;this.To=this.sa=this.Dq=this.A=null;this.Kz=!0};f.qu=function(a){null!=a&&(a=g(a)?a:[a],E(a,function(a){J(a);a.g()}),Kb(a))};f.Iq=function(a){null!=a&&(J(a),a.g())};f.Jq=function(a){C(a,function(b,c){J(b);S(b);delete a[c]});D(a)};f.Tn=function(a){C(a,function(b,c){J(b);b.g();delete a[c]});D(a)};
v("nrg.ui.Component.animationLengths",{BN:150,eO:300,UO:600});v("nrg.ui.Component.idPrefixToCssClass",Hl);v("nrg.ui.Component.prototype.validateIdPrefix",V.prototype.mx);v("nrg.ui.Component.prototype.imagePrefix",V.prototype.oi);v("nrg.ui.Component.prototype.createCssMap",V.prototype.Bq);v("nrg.ui.Component.prototype.setImagePrefix",V.prototype.FC);v("nrg.ui.Component.prototype.getImagePrefix",V.prototype.KH);v("nrg.ui.Component.prototype.addSubComponent",V.prototype.$F);
v("nrg.ui.Component.prototype.calcDims",V.prototype.ai);v("nrg.ui.Component.prototype.updateStyle",V.prototype.o);v("nrg.ui.Component.prototype.render",V.prototype.k);v("nrg.ui.Component.prototype.disposeInternalCalled",V.prototype.GG);v("nrg.ui.Component.prototype.disposeAnimations",V.prototype.qu);v("nrg.ui.Component.prototype.disposeAnimationQueue",V.prototype.Iq);v("nrg.ui.Component.prototype.disposeElementMap",V.prototype.Jq);v("nrg.ui.Component.prototype.disposeComponentMap",V.prototype.Tn);
v("nrg.ui.Component.prototype.disposeInternal",V.prototype.f);var Il;function Jl(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Kl(a,b,c){ia(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Il||(Il={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Il,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function Ll(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Ml(a){if(a.classList)return a.classList;a=a.className;return r(a)&&a.match(/\S+/g)||[]}function Nl(a,b){return a.classList?a.classList.contains(b):Jb(Ml(a),b)}function Ol(a,b){a.classList?a.classList.add(b):Nl(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Pl(a,b){if(a.classList)E(b,function(b){Ol(a,b)});else{var c={};E(Ml(a),function(a){c[a]=!0});E(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function Ql(a,b){a.classList?a.classList.remove(b):Nl(a,b)&&(a.className=Db(Ml(a),function(a){return a!=b}).join(" "))}function Rl(a,b){a.classList?E(b,function(b){Ql(a,b)}):a.className=Db(Ml(a),function(a){return!Jb(b,a)}).join(" ")}function Sl(a,b,c){c?Ol(a,b):Ql(a,b)};function Tl(a){if(a.altKey&&!a.ctrlKey||a.metaKey||112<=a.keyCode&&123>=a.keyCode)return!1;switch(a.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 224:case 92:return!1;case 0:return!ic;default:return 166>a.keyCode||183<a.keyCode}}
function Ul(a,b,c,d,e){if(!(F||jc&&qc("525")))return!0;if(dc&&e)return Vl(a);if(e&&!d)return!1;u(b)&&(b=Wl(b));if(!c&&(17==b||18==b||dc&&91==b))return!1;if(jc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(F&&d&&b==a)return!1;switch(a){case 13:return!(F&&rc(9));case 27:return!jc}return Vl(a)}
function Vl(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||jc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Wl(a){if(ic)a=Xl(a);else if(dc&&jc)a:switch(a){case 93:a=91;break a}return a}
function Xl(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Yl(a,b,c,d,e){function h(a){a&&(a.tabIndex=0,Jl(a,k.kh()),Ol(a,"goog-zippy-header"),Zl(k,a),a&&k.nB.D(a,"keydown",k.Qr))}ad.call(this);this.wb=e||Rh();this.Ek=this.wb.a(a)||null;this.Nq=this.wb.a(d||null);this.xc=(this.qv=la(b)?b:null)||!b?null:this.wb.a(b);this.og=!0==c;this.nB=new Wj(this);this.Dv=new Wj(this);var k=this;h(this.Ek);h(this.Nq);this.mc(this.og)}w(Yl,ad);var $l={px:"action",Tx:"toggle"};f=Yl.prototype;f.Qk=!0;f.f=function(){Yl.d.f.call(this);Bc(this.nB);Bc(this.Dv)};
f.kh=function(){return"tab"};f.La=function(){return this.xc};f.toggle=function(){this.mc(!this.og)};f.mc=function(a){this.xc?Mj(this.xc,a):a&&this.qv&&(this.xc=this.qv());this.xc&&Ol(this.xc,"goog-zippy-content");this.Nq?(Mj(this.Ek,!a),Mj(this.Nq,a)):am(this,a);this.og=a;this.dispatchEvent(new bm($l.Tx,this))};function am(a,b){a.Ek&&(Sl(a.Ek,"goog-zippy-expanded",b),Sl(a.Ek,"goog-zippy-collapsed",!b),Kl(a.Ek,"expanded",b))}
f.jp=function(a){this.Qk!=a&&((this.Qk=a)?(Zl(this,this.Ek),Zl(this,this.Nq)):this.Dv.Gg())};function Zl(a,b){b&&a.Dv.D(b,"click",a.Pr)}f.Qr=function(a){if(13==a.keyCode||32==a.keyCode)this.toggle(),this.dispatchEvent(new Dc($l.px,this)),a.preventDefault(),a.stopPropagation()};f.Pr=function(){this.toggle();this.dispatchEvent(new Dc($l.px,this))};function bm(a,b){Dc.call(this,a,b)}w(bm,Dc);function cm(a,b,c,d){d=d||Rh();var e=d.B("div",{style:"overflow:hidden"});b=d.a(b);b.parentNode.replaceChild(e,b);e.appendChild(b);this.Oq=e;this.xf=null;Yl.call(this,a,b,c,void 0,d);a=this.og;this.Oq.style.display=a?"":"none";am(this,a)}w(cm,Yl);f=cm.prototype;f.$i=500;f.fG=fl;
f.mc=function(a){if(this.og!=a||this.xf){"none"==this.Oq.style.display&&(this.Oq.style.display="");var b=this.La().offsetHeight,c=0;this.xf?(a=this.og,J(this.xf),this.xf.stop(!1),c=parseInt(this.La().style.marginTop,10),c=b-Math.abs(c)):c=a?0:b;am(this,a);this.xf=new sk([0,c],[0,a?b:0],this.$i,this.fG);G(this.xf,["begin","animate","end"],this.uK,!1,this);G(this.xf,"end",ua(this.vK,this,a));this.xf.play(!1)}};f.uK=function(a){var b=this.La();b.style.marginTop=a.y-b.offsetHeight+"px"};
f.vK=function(a){a&&(this.La().style.marginTop="0");J(this.xf);this.og=a;this.xf=null;a||(this.Oq.style.display="none");this.dispatchEvent(new bm($l.Tx,this))};function dm(a,b,c,d){V.call(this);this.Tb=a;this.pb=Q("div",{id:"ZippyHeader_"+a+"_"+B(),"class":dm.CSS.yl});this.pb[em]=a.toLowerCase();null!=d?d(b,this.pb):b.appendChild(this.pb);this.jo=Q("div",{id:"ZippyHeaderLabel_"+a+"_"+B(),"class":dm.CSS.nE});this.GD();this.pb.appendChild(this.jo);this.ih=Q("div",{id:"ZippyExpandIcon_"+a+"_"+B(),"class":dm.CSS.kE},"+");this.pb.appendChild(this.ih);this.zf=Q("div",{id:"ZippyContent_"+a+"_"+B(),"class":dm.CSS.Jh});b.appendChild(this.zf);this.ic=new this.RD(this.pb,
this.zf,null!=c?c:!1);this.ic instanceof cm&&(this.ic.$i=500);this.DM=na(this);this.da={};G(this.pb,"mouseover",this.HL.bind(this));G(this.pb,"mouseout",this.GL.bind(this));fm(this)}w(dm,V);v("nrg.ui.ZippyNode",dm);dm.ID_PREFIX="nrg.ui.ZippyNode";var gm={yN:"a",mN:"b",aE:"c"};dm.CSS_SUFFIX={yl:"header",Cx:"header-mouseover",nE:"header-label",kE:"expandicon",ux:"expandicon-mouseover",Jh:"content",Jh:"content-sub",CE:"loading-holder",Gx:"loading-text",DE:"loading-image"};
function hm(a,b,c){var d=a[0];r(d)&&null!=b&&(d=b.da[d]);d.ic.$i=200;1<a.length&&!d.ic.og&&Uc(d,"a",function(){d.ic.$i=500;hm(Qb(a,1),d,c)});d.mc(!0);null!=c&&c(d,a)}var em=B();f=dm.prototype;f.RD=cm;f.GD=function(a){a=null!=a?a:45;var b=this.jo,c=this.Tb.replace(/<(?:.|\n)*?>/gm,"").replace("&nbsp"," ");b.innerHTML=c.length<this.Tb?Xa(this.Tb,a+60):c.length==this.Tb.length?Xa(this.Tb,a):this.Tb;return b};f.Hd=null;f.Sk=function(){return null!=this.Hd};f.Em=!1;f.TJ=function(){return this.Em};
f.Go=!1;f.SJ=function(){return this.Go};f.Wo=function(a,b){var c=function(){S(this.Hd);this.Hd=null}.bind(this);a?(this.Em=!0,il(this.Hd,500,0,function(){c();null!=b&&b()},1)):c()};f.Dw=function(){this.Go=!0;setTimeout(function(){gi(this.Hd);var a=Q("div");O(a,dm.CSS.Gx);a.innerHTML='<span style="margin:-50px">No image files found for this experiment.</span>';R(this.Hd,a)}.bind(this),2500)};
f.Cy=function(){if(null==this.Hd){this.Hd=Q("div",{id:"LoadingHolder_"+B()});O(this.Hd,dm.CSS.CE);var a=Q("div");O(a,dm.CSS.Gx);a.innerHTML="Loading...";var b=Q("img");O(b,dm.CSS.DE);b.src=serverRoot+"/images/viewer/xiv/ui/other/loading.gif";R(this.Hd,a);R(this.Hd,b);R(this.zf,this.Hd);this.Hd.style.opacity=0;hl(this.Hd,300);this.Go=this.Em=!1}};f.xb=function(){return this.Tb};f.dI=function(){return this.da};f.iD=function(a){this.ih.style.visibility=!0==a?"visible":"hidden"};f.EH=function(){return this.pb};
f.lH=function(){return this.zf};f.FH=function(){return this.jo};f.VI=function(){return this.ic};f.mc=function(a){this.ic.mc(a)};f.iM=function(a){this.RD=!0===a?cm:Yl};function fm(a){G(a.ic,pb($l),function(a){null!=this.ic.xf?this.dispatchEvent({type:"c"}):a.target.og?this.hw():(this.ih.innerHTML="+",bl(this.ih,{"margin-left":"-1.1em"}),this.dispatchEvent({type:"b"}))}.bind(a))}f.hw=function(){this.ih.innerHTML="-";bl(this.ih,{"margin-left":"-1em"});this.dispatchEvent({type:"a"})};
f.HL=function(){O(this.pb,dm.CSS.Cx);O(this.ih,dm.CSS.ux)};f.GL=function(){Hh(this.pb,dm.CSS.Cx);Hh(this.ih,dm.CSS.ux)};f.f=function(){dm.d.f.call(this);S(this.jo);delete this.jo;S(this.ih);delete this.ih;J(this.pb);S(this.pb);delete this.pb;S(this.zf);delete this.zf;null!=this.ic&&(this.ic.g(),J(this.ic),delete this.ic);null!=this.Hd&&(this.Wo(),delete this.Hd);this.Tn(this.da);delete this.da;delete this.DM;delete this.Tb};v("nrg.ui.ZippyNode.ID_PREFIX",dm.ID_PREFIX);
v("nrg.ui.ZippyNode.EventType",gm);v("nrg.ui.ZippyNode.CSS_SUFFIX",dm.CSS_SUFFIX);v("nrg.ui.ZippyNode.NODE_STORT_TAG",em);v("nrg.ui.ZippyNode.serialExpand",hm);v("nrg.ui.ZippyNode.prototype.truncateHeaderLabel",dm.prototype.GD);v("nrg.ui.ZippyNode.prototype.getTitle",dm.prototype.xb);v("nrg.ui.ZippyNode.prototype.addLoadingImage",dm.prototype.UP);v("nrg.ui.ZippyNode.prototype.getNodes",dm.prototype.dI);v("nrg.ui.ZippyNode.prototype.getHeader",dm.prototype.EH);
v("nrg.ui.ZippyNode.prototype.getContentHolder",dm.prototype.lH);v("nrg.ui.ZippyNode.prototype.getHeaderLabel",dm.prototype.FH);v("nrg.ui.ZippyNode.prototype.showExpandIcon",dm.prototype.iD);v("nrg.ui.ZippyNode.prototype.getZippy",dm.prototype.VI);v("nrg.ui.ZippyNode.prototype.setExpanded",dm.prototype.mc);v("nrg.ui.ZippyNode.prototype.setAnimated",dm.prototype.iM);v("nrg.ui.ZippyNode.prototype.hasLoadingIndicator",dm.prototype.Sk);v("nrg.ui.ZippyNode.prototype.addLoadingIndicator",dm.prototype.Cy);
v("nrg.ui.ZippyNode.prototype.removeLoadingIndicator",dm.prototype.Wo);v("nrg.ui.ZippyNode.prototype.loadingIndicatorRemoving",dm.prototype.TJ);v("nrg.ui.ZippyNode.prototype.setLoadingIndicatorNoFiles",dm.prototype.Dw);v("nrg.ui.ZippyNode.prototype.loadingIndicatorNoFiles",dm.prototype.SJ);v("nrg.ui.ZippyNode.prototype.disposeInternal",dm.prototype.f);function im(a,b,c){Ii.call(this,"ExperimentReconstructions",a,b);this.Kb.Name=a.ID;this.Pq=eval("(function(fileName) { "+this.Hu()+"})");this.Jg(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png");c&&c(this)}w(im,Ii);v("gxnat.vis.ExperimentReconstruction",im);var jm=["nii.gz","nii"];f=im.prototype;f.ji="reconstructions";f.ii="/files";f.rg="URI";f.Ge=function(){im.d.Ge.call(this)};
f.Hu=function(){var a=projNode.experimentReconstructionFilters;if(null!=a){var b="if (",c;for(c in a){var d=eval("(function(name){return name.match("+c+')})("'+this.Kb.Name+'")');if(a.hasOwnProperty(c)&&d&&d==this.Kb.Name)for(d=0;d<a[c].length;d++)4<b.length&&(b+=" || "),b+="(fileName.match(",b+=a[c][d],b+="))"}b+=") return fileName;";if(0<=b.indexOf("(fileName.match("))return b}return"return null;"};
f.Df=function(a){if(this.Ze)a();else{var b=0,c="",d;M.qh(this.vh+this.ii,function(e){b=e.length;for(var h=0;h<b;h++)if(d=e[h],c=this.si(d))this.zw(c,d),this.zd(c,this.od);a();this.Ze=!0}.bind(this));this.Ge()}};f.od=function(a){a=im.d.od.call(this,a);if(null!=a){for(var b=0,c=jm.length;b<c;b++)if(Fa(a,"."+jm[b]))return this.Pq(a);return null}};
f.bo=function(a){for(var b=a.split("/"),c=0;c<b.length;c++)if("files"==b[c]){var d=this.jh[a].collection;if(Ya(b[b.length-1],"nii"))for(a=c+1;a<b.length;a++)d=""!=d?d+"/"+b[a]:b[a];break}void 0==d&&(d="experimentReconstruction");for(c=0;c<this.Ia.length;c++)if(this.Ia[c].xb()==d)return this.Ia[c];b=new Eh;b.zs(this.Kb.Name);b.oc(d);b.Lj("experimentReconstructions");b.Jg("NONE");this.Ia.push(b);return b};
f.zd=function(a){this.Lj("Experiment Reconstructions");E(a.split(","),function(b){b=this.od(b);null!=b&&(b=this.bo(b),0==b.$.length&&b.oq(new Dh),b.$[0].zd(a))},this);this.Ia.sort(function(a,c){var d=!1,e=!1,h=!1,k=!1;0<a.$.length&&0<a.$[0].va().length&&(0<=a.$[0].va()[0].toLowerCase().indexOf(".dcm")||0<=a.$[0].va()[0].toLowerCase().indexOf(".dcm")?d=!0:0<=a.$[0].va()[0].toLowerCase().indexOf(".nii")&&(e=!0));0<c.$.length&&0<c.$[0].va().length&&(0<=c.$[0].va()[0].toLowerCase().indexOf(".dcm")||0<=
c.$[0].va()[0].toLowerCase().indexOf(".dcm")?h=!0:0<=c.$[0].va()[0].toLowerCase().indexOf(".nii")&&(k=!0));d=(d?9:0)+(e?5:0)+(a.xb()<c.xb()?1:-1);return(h?9:0)+(k?5:0)-d})};f.si=function(a){return ah(this.tj,a[this.rg],"experiments")};f.g=function(){im.d.g.call(this);null!=this.fe&&D(this.fe);delete this.fe};v("gxnat.vis.ExperimentReconstruction.acceptableFileTypes",jm);v("gxnat.vis.ExperimentReconstruction.prototype.folderQuerySuffix",im.prototype.ji);
v("gxnat.vis.ExperimentReconstruction.prototype.fileQuerySuffix",im.prototype.ii);v("gxnat.vis.ExperimentReconstruction.prototype.fileContentsKey",im.prototype.rg);v("gxnat.vis.ExperimentReconstruction.prototype.setViewableMetadata",im.prototype.Ge);v("gxnat.vis.ExperimentReconstruction.prototype.getFileList",im.prototype.Df);v("gxnat.vis.ExperimentReconstruction.prototype.fileFilter",im.prototype.od);v("gxnat.vis.ExperimentReconstruction.prototype.addFiles",im.prototype.zd);
v("gxnat.vis.ExperimentReconstruction.prototype.makeFileUrl",im.prototype.si);v("gxnat.vis.ExperimentReconstruction.prototype.dispose",im.prototype.g);function km(a,b,c,d){this.files=a;this.eK=b;this.Zw=c;this.Au=d}v("xiv.sampleData.Sample",km);function lm(){xc.call(this);this.Tg=[]}w(lm,xc);v("xiv.sampleData.SampleCollection",lm);lm.prototype.rI=function(){return this.Tg};lm.prototype.g=function(){lm.d.g.call(this);E(this.Tg,function(a){D(a)});delete this.Tg};v("xiv.sampleData.SampleCollection.Samples",lm.Tg);v("xiv.sampleData.SampleCollection.getSamples",lm.rI);v("xiv.sampleData.SampleCollection.dispose",lm.g);function mm(){lm.call(this);this.Tg.push(this.uw)}w(mm,lm);v("xiv.sampleData.SlicerScenes",mm);
mm.prototype.uw=new km("src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/oneView_brain_2.mrml;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm.nrrd.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/5%3a%20t1_mpr_1mm_p2_pos50-label.nrrd;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/F.fcsv;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/brain.vtk;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/BrainMesh_Underside.png;src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Data/Top.png".split(";"),{Name:"Example Slicer Scene",
Type:"Slicer Scene"},"src/main/scripts/viewer/xiv/sample-data/slicer-scenes/SampleScene3/Slicer Data Bundle Scene View_4.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function nm(){}v("xiv",nm);nm.MODE="live";v("xiv.SAMPLE_DATA_PATH","xiv/sample-data");v("xiv.SAMPLE_SCAN_PREFIX","xiv/sample-data/scans/");function om(a,b,c){Ii.call(this,"Scans",a,b);this.Kb["Total Frames"]=0;c&&c(this)}w(om,Ii);v("gxnat.vis.Scan",om);var pm=["dcm","dicom","nii.gz","nii"];f=om.prototype;f.ji="scans";f.ii="/files";f.rg="URI";
f.Ge=function(){om.d.Ge.call(this);null!=this.fe.frames&&(this.Kb["Total Frames"]=this.fe.frames);if(null!=this.fe["parameters/orientation"]){var a;a:{switch(this.fe["parameters/orientation"]){case "Sag":a="Sagittal";break a;case "Cor":a="Coronal";break a;case "Tra":a="Transverse";break a}a=void 0}this.Kb.Orientation=a;this.orientation=this.Kb.Orientation}null!=this.fe["parameters/acqType"]&&(this.Kb["Acq. Type"]=this.fe["parameters/acqType"])};
f.Df=function(a){this.Ze?a():M.qh(this.Bl.originalUrl,function(b){this.fe=b.items[0].data_fields;this.Ge();om.d.Df.call(this,function(){this.Mk();a()}.bind(this))}.bind(this))};f.od=function(a){a=om.d.od.call(this,a);if(null!=a){for(var b=0,c=pm.length;b<c;b++)if(Fa(a,"."+pm[b]))return a;return null}};
f.bo=function(a){for(var b=a.split("/"),c=0;c<b.length;c++)if("resources"==b[c]){var d=b[c+1];Ya(b[b.length-1],"nii")&&(d=d+" - "+b[b.length-1]);break}void 0==d&&(d="scan");for(c=0;c<this.Ia.length;c++)if(this.Ia[c].vp==d)return this.Ia[c];var e=new Eh;e.zs(d);e.oc(d);e.Lj("scans");M.get(a.replace(/\/files\/.*$/,"?format=xml"),function(a){try{var b=Fi(a),c=b.getElementsByTagName("Catalog"),n=b.getElementsByTagName("DCMCatalog");if((void 0==c||1>c.length)&&(void 0==n||1>n.length))if(0<=a.indexOf("DCMCatalog"))e.oc("DICOM"+
(0<d.indexOf("-")?d.substring(d.indexOf("-")-1):""));else{if(0<=a.indexOf("Catalog ID=")){var p=a.replace(/(\r\n|\n|\r)/gm,"").replace(/^.*Catalog ID=\\*"/,"").replace(/\\*".*$/,"");0<p.length&&0>p.indexOf("<")&&e.oc(p+(0<d.indexOf("-")?d.substring(d.indexOf("-")-1):""))}}else 0<n.length?e.oc("DICOM"+(0<d.indexOf("-")?d.substring(d.indexOf("-")-1):"")):0<c.length&&(p=c[0].attributes.getNamedItem("ID").nodeValue,e.oc(p+(0<d.indexOf("-")?d.substring(d.indexOf("-")-1):"")))}catch(m){e.oc(d)}},"text");
this.Ia.push(e);return e};
f.zd=function(a){this.Lj("Scans");E(a.split(","),function(b){b=this.od(b);null!=b&&(b=this.bo(b),0==b.$.length&&b.oq(new Dh),b.$[0].zd(a,this.od))},this);0==this.Kb["Total Frames"]&&(this.Kb["Total Frames"]=0<this.Ia.length?this.Ia[0].$[0].va().length:0);this.Ia.sort(function(a,c){var d=!1,e=!1,h=!1,k=!1;0<a.$.length&&0<a.$[0].va().length&&(0<=a.$[0].va()[0].toLowerCase().indexOf(".dcm")||0<=a.$[0].va()[0].toLowerCase().indexOf(".dcm")?d=!0:0<=a.$[0].va()[0].toLowerCase().indexOf(".nii")&&(e=!0));
0<c.$.length&&0<c.$[0].va().length&&(0<=c.$[0].va()[0].toLowerCase().indexOf(".dcm")||0<=c.$[0].va()[0].toLowerCase().indexOf(".dcm")?h=!0:0<=c.$[0].va()[0].toLowerCase().indexOf(".nii")&&(k=!0));d=(d?9:0)+(e?5:0)+(a.xb()<c.xb()?1:-1);return(h?9:0)+(k?5:0)-d})};f.si=function(a){return ah(this.tj,a[this.rg],"experiments")};
f.Mk=function(a){if(this.Ia&&this.Ia[0]){for(var b=0;b<this.Ia.length;b++){var c=this.Ia[b].$[0].va().sort(M.Nr);0<=c[0].toLowerCase().indexOf(".nii")?this.Ia[b].Jg(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png"):this.Ia[b].Jg(c[Math.floor(c.length/2)]+M.JPEG_CONVERT_SUFFIX);0==b&&this.Jg(this.Ia[0].pl)}null!=a&&a(this)}};f.g=function(){om.d.g.call(this);null!=this.fe&&D(this.fe);delete this.fe};v("gxnat.vis.Scan.acceptableFileTypes",pm);
v("gxnat.vis.Scan.prototype.folderQuerySuffix",om.prototype.ji);v("gxnat.vis.Scan.prototype.fileQuerySuffix",om.prototype.ii);v("gxnat.vis.Scan.prototype.fileContentsKey",om.prototype.rg);v("gxnat.vis.Scan.prototype.setViewableMetadata",om.prototype.Ge);v("gxnat.vis.Scan.prototype.getFileList",om.prototype.Df);v("gxnat.vis.Scan.prototype.fileFilter",om.prototype.od);v("gxnat.vis.Scan.prototype.addFiles",om.prototype.zd);v("gxnat.vis.Scan.prototype.makeFileUrl",om.prototype.si);
v("gxnat.vis.Scan.prototype.getThumbnailImage",om.prototype.Mk);v("gxnat.vis.Scan.prototype.dispose",om.prototype.g);function qm(a,b,c){ad.call(this);this.target=a;this.handle=b||a;this.Do=c||new kj(NaN,NaN,NaN,NaN);this.na=Th(a);this.Kc=new Wj(this);Ac(this,va(Bc,this.Kc));G(this.handle,["touchstart","mousedown"],this.wp,!1,this)}w(qm,ad);var rm=F||ic&&qc("1.9.3");f=qm.prototype;f.clientX=0;f.clientY=0;f.screenX=0;f.screenY=0;f.Sw=0;f.Tw=0;f.ei=0;f.Zd=0;f.Zb=!0;f.oj=!1;f.dB=0;f.Lr=0;f.sJ=!1;f.rl=!1;f.qj=function(a){this.rl=a};f.nb=function(){return this.Kc};function sm(a,b){a.Do=b||new kj(NaN,NaN,NaN,NaN)}
f.QC=function(a){this.ns=a};f.Rb=function(a){this.Zb=a};f.f=function(){qm.d.f.call(this);Vc(this.handle,["touchstart","mousedown"],this.wp,!1,this);this.Kc.Gg();rm&&this.na.releaseCapture();this.handle=this.target=null};function tm(a){da(a.zh)||(a.zh=Bj(a.target));return a.zh}
f.wp=function(a){var b="mousedown"==a.type;if(!this.Zb||this.oj||b&&!Kc(a))this.dispatchEvent("earlycancel");else{um(a);if(0==this.dB)if(this.dispatchEvent(new vm("start",this,a.clientX,a.clientY)))this.oj=!0,a.preventDefault();else return;else a.preventDefault();var b=this.na,c=b.documentElement,d=!rm;this.Kc.D(b,["touchmove","mousemove"],this.hJ,d);this.Kc.D(b,["touchend","mouseup"],this.rj,d);rm?(c.setCapture(!1),this.Kc.D(c,"losecapture",this.rj)):this.Kc.D(ci(b),"blur",this.rj);F&&this.sJ&&this.Kc.D(b,
"dragstart",Ec);this.ns&&this.Kc.D(this.ns,"scroll",this.Hj,d);this.clientX=this.Sw=a.clientX;this.clientY=this.Tw=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.ei=this.rl?Fk(this.target):this.target.offsetLeft;this.Zd=this.target.offsetTop;this.jw=Ei(Rh(this.na));this.Lr=xa()}};
f.rj=function(a,b){this.Kc.Gg();rm&&this.na.releaseCapture();if(this.oj){um(a);this.oj=!1;var c=wm(this,this.ei),d=xm(this,this.Zd);this.dispatchEvent(new vm("end",this,a.clientX,a.clientY,0,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel")};function um(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.xa(a.Yc.targetTouches[0],a.currentTarget):"touchend"!=b&&"touchcancel"!=b||a.xa(a.Yc.changedTouches[0],a.currentTarget)}
f.hJ=function(a){if(this.Zb){um(a);var b=(this.rl&&tm(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.oj){var d=this.Sw-this.clientX,e=this.Tw-this.clientY;if(d*d+e*e>this.dB)if(this.dispatchEvent(new vm("start",this,a.clientX,a.clientY)))this.oj=!0;else{this.Bk||this.rj(a);return}}c=ym(this,b,c);b=c.x;c=c.y;this.oj&&this.dispatchEvent(new vm("beforedrag",this,a.clientX,a.clientY,0,b,
c))&&(zm(this,a,b,c),a.preventDefault())}};function ym(a,b,c){var d=Ei(Rh(a.na));b+=d.x-a.jw.x;c+=d.y-a.jw.y;a.jw=d;a.ei+=b;a.Zd+=c;b=wm(a,a.ei);a=xm(a,a.Zd);return new Ph(b,a)}f.Hj=function(a){var b=ym(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;zm(this,a,b.x,b.y)};function zm(a,b,c,d){a.lu(c,d);a.dispatchEvent(new vm("drag",a,b.clientX,b.clientY,0,c,d))}
function wm(a,b){var c=a.Do,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function xm(a,b){var c=a.Do,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}f.lu=function(a,b){this.rl&&tm(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};f.yg=function(){return this.oj};
function vm(a,b,c,d,e,h,k,l){Dc.call(this,a);this.clientX=c;this.clientY=d;this.left=da(h)?h:b.ei;this.top=da(k)?k:b.Zd;this.uu=b;this.LG=!!l}w(vm,Dc);zb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function Am(){this.pw="";this.bF=Bm;this.Iz=null}Am.prototype.fA=function(){return this.Iz};Am.prototype.toString=function(){return"SafeHtml{"+this.pw+"}"};function Cm(a){if(a instanceof Am&&a.constructor===Am&&a.bF===Bm)return a.pw;gb("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}zb("action","cite","data","formaction","href","manifest","poster","src");zb("link","script","style");var Bm={};function Dm(a,b){var c=new Am;c.pw=a;c.Iz=b;return c}var Em=Dm("",0);function Fm(a,b){ad.call(this);this.pd=new Wj(this);this.xw(a||null);b&&(this.Vm=b)}w(Fm,ad);f=Fm.prototype;f.q=null;f.jG=!0;f.Zy=null;f.$y=null;f.Dm=!1;f.sM=!1;f.mv=-1;f.mJ=!1;f.NG=!0;f.Vm="toggle_display";f.a=function(){return this.q};f.xw=function(a){if(this.Dm)throw Error("Can not change this state of the popup while showing.");this.q=a};f.XC=function(a,b){this.Om=a;this.wm=b};f.nb=function(){return this.pd};f.ya=function(){return this.Dm};
f.ea=function(a){this.Om&&this.Om.stop();this.wm&&this.wm.stop();a?this.Kw():this.xm()};f.Fe=fa;
f.Kw=function(){if(!this.Dm&&this.Mv()){if(!this.q)throw Error("Caller must call setElement before trying to show the popup");this.Fe();var a=Th(this.q);this.mJ&&this.pd.D(a,"keydown",this.AK,!0);if(this.jG)if(this.pd.D(a,"mousedown",this.SB,!0),F){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}this.pd.D(a,"mousedown",this.SB,!0);this.pd.D(a,"deactivate",this.RB)}else this.pd.D(a,"blur",
this.RB);"toggle_display"==this.Vm?(this.q.style.visibility="visible",Mj(this.q,!0)):"move_offscreen"==this.Vm&&this.Fe();this.Dm=!0;this.mv=xa();this.Om?(Uc(this.Om,"end",this.ZB,!1,this),this.Om.play()):this.ZB()}};f.xm=function(a){if(!this.Dm||!this.dispatchEvent({type:"beforehide",target:a}))return!1;this.pd&&this.pd.Gg();this.Dm=!1;xa();this.wm?(Uc(this.wm,"end",va(this.oz,a),!1,this),this.wm.play()):this.oz(a);return!0};
f.oz=function(a){"toggle_display"==this.Vm?this.sM?$f(this.cB,0,this):this.cB():"move_offscreen"==this.Vm&&(this.q.style.top="-10000px");this.Vv(a)};f.cB=function(){this.q.style.visibility="hidden";Mj(this.q,!1)};f.Mv=function(){return this.dispatchEvent("beforeshow")};f.ZB=function(){this.dispatchEvent("show")};f.Vv=function(a){this.dispatchEvent({type:"hide",target:a})};f.SB=function(a){a=a.target;oi(this.q,a)||Gm(this,a)||this.$y&&!oi(this.$y,a)||150>xa()-this.mv||this.xm(a)};
f.AK=function(a){27==a.keyCode&&this.xm(a.target)&&(a.preventDefault(),a.stopPropagation())};f.RB=function(a){if(this.NG){var b=Th(this.q);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||oi(this.q,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>xa()-this.mv||this.xm()}};function Gm(a,b){return Fb(a.Zy||[],function(a){return b===a||oi(a,b)})}f.f=function(){Fm.d.f.call(this);this.pd.g();Bc(this.Om);Bc(this.wm);delete this.q;delete this.pd;delete this.Zy};function Hm(a){ad.call(this);this.q=a;a=F?"focusout":"blur";this.PJ=G(this.q,F?"focusin":"focus",this,!F);this.QJ=G(this.q,a,this,!F)}w(Hm,ad);Hm.prototype.handleEvent=function(a){var b=new Hc(a.Yc);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};Hm.prototype.f=function(){Hm.d.f.call(this);Wc(this.PJ);Wc(this.QJ);delete this.q};function Im(a,b){ak.call(this,b);this.VM=!!a;this.Bo=null}w(Im,ak);f=Im.prototype;f.yu=null;f.Qc=!1;f.Ve=null;f.Bd=null;f.Mg=null;f.Mt=!1;f.ba=function(){return"goog-modalpopup"};f.ki=function(){return this.Ve};f.B=function(){Im.d.B.call(this);var a=this.a(),b=Ia(this.ba()).split(" ");Pl(a,b);si(a,!0);Mj(a,!1);Jm(this);Km(this)};
function Jm(a){if(a.VM&&!a.Bd){var b;b=a.O().B("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.Bd=b;a.Bd.className=a.ba()+"-bg";Mj(a.Bd,!1);Lj(a.Bd,0)}a.Ve||(a.Ve=a.O().B("div",a.ba()+"-bg"),Mj(a.Ve,!1))}function Km(a){a.Mg||(a.Mg=a.O().createElement("span"),Mj(a.Mg,!1),si(a.Mg,!0),a.Mg.style.position="absolute")}f.qC=function(){this.Mt=!1};f.We=function(a){return!!a&&"DIV"==a.tagName};
f.ue=function(a){Im.d.ue.call(this,a);a=Ia(this.ba()).split(" ");Pl(this.a(),a);Jm(this);Km(this);Mj(this.a(),!1)};f.mb=function(){this.Bd&&hi(this.Bd,this.a());hi(this.Ve,this.a());Im.d.mb.call(this);var a=this.a();a.parentNode&&a.parentNode.insertBefore(this.Mg,a.nextSibling);this.yu=new Hm(Bi(this.O()));this.nb().D(this.yu,"focusin",this.FK);Lm(this,!1)};f.Lc=function(){this.ya()&&this.ea(!1);Bc(this.yu);Im.d.Lc.call(this);S(this.Bd);S(this.Ve);S(this.Mg)};
f.ea=function(a){a!=this.Qc&&(this.gl&&this.gl.stop(),this.dm&&this.dm.stop(),this.fl&&this.fl.stop(),this.bm&&this.bm.stop(),this.oa&&Lm(this,a),a?this.Kw():this.xm())};function Lm(a,b){if(b){a.um||(a.um=[]);for(var c=a.O(),c=c.Bu(c.na.body),d=0;d<c.length;d++){var e=c[d];e==a.q||Ll(e,"hidden")||(Kl(e,"hidden",!0),a.um.push(e))}}else if(a.um){for(d=0;d<a.um.length;d++)a.um[d].removeAttribute("aria-hidden");a.um=null}}f.XC=function(a,b,c,d){this.gl=a;this.fl=b;this.dm=c;this.bm=d};
f.Kw=function(){if(this.dispatchEvent("beforeshow")){try{this.Bo=Bi(this.O()).activeElement}catch(a){}this.tw();this.Fe();this.nb().D(Di(this.O()),"resize",this.tw);Mm(this,!0);this.focus();this.Qc=!0;this.gl&&this.dm?(Uc(this.gl,"end",this.Wr,!1,this),this.dm.play(),this.gl.play()):this.Wr()}};
f.xm=function(){if(this.dispatchEvent("beforehide")){this.nb().Bb(Di(this.O()),"resize",this.tw);this.Qc=!1;this.fl&&this.bm?(Uc(this.fl,"end",this.Mo,!1,this),this.bm.play(),this.fl.play()):this.Mo();try{var a=Bi(this.O()).body,b=Bi(this.O()).activeElement||a;this.Bo&&b==a&&this.Bo!=a&&this.Bo.focus()}catch(c){}this.Bo=null}};function Mm(a,b){a.Bd&&Mj(a.Bd,b);a.Ve&&Mj(a.Ve,b);Mj(a.a(),b);Mj(a.Mg,b)}f.Wr=function(){this.dispatchEvent("show")};f.Mo=function(){Mm(this,!1);this.dispatchEvent("hide")};
f.ya=function(){return this.Qc};f.focus=function(){this.Vz()};f.tw=function(){this.Bd&&Mj(this.Bd,!1);this.Ve&&Mj(this.Ve,!1);var a=Bi(this.O()),b=ai(ci(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.Bd&&(Mj(this.Bd,!0),Gj(this.Bd,c,a));this.Ve&&(Mj(this.Ve,!0),Gj(this.Ve,c,a))};
f.Fe=function(){var a=Bi(this.O()),b=ci(a)||window;if("fixed"==sj(this.a()))var c=a=0;else c=Ei(this.O()),a=c.x,c=c.y;var d=U(this.a()),b=ai(b||window),a=Math.max(a+b.width/2-d.width/2,0),c=Math.max(c+b.height/2-d.height/2,0);tj(this.a(),a,c);tj(this.Mg,a,c)};f.FK=function(a){this.Mt?this.qC():a.target==this.Mg&&$f(this.Vz,0,this)};f.Vz=function(){try{F&&Bi(this.O()).body.focus(),this.a().focus()}catch(a){}};
f.f=function(){Bc(this.gl);this.gl=null;Bc(this.fl);this.fl=null;Bc(this.dm);this.dm=null;Bc(this.bm);this.bm=null;Im.d.f.call(this)};function Nm(a,b,c){Im.call(this,b,c);this.Yd=a||"modal-dialog";this.ca=Om(Om(new Pm,Qm,!0),Rm,!1,!0)}w(Nm,Im);f=Nm.prototype;f.Oz=!0;f.Xu=!0;f.Bv=!0;f.Lq=!0;f.sq=.5;f.Tb="";f.Wc=null;f.Qa=null;f.ru=!1;f.Md=null;f.he=null;f.Is=null;f.Je=null;f.ng=null;f.ld=null;f.ow="dialog";f.ba=function(){return this.Yd};f.oc=function(a){this.Tb=a;this.he&&pi(this.he,a)};f.xb=function(){return this.Tb};f.ll=function(a){this.Wc=a=Dm(a,null);this.ng&&(this.ng.innerHTML=Cm(a))};
f.getContent=function(){return null!=this.Wc?Cm(this.Wc):""};f.wj=function(){return this.ow};f.La=function(){this.a()||this.k();return this.ng};f.ar=function(){this.a()||this.k();return this.Md};f.ki=function(){this.a()||this.k();return Nm.d.ki.call(this)};function Sm(a,b){a.sq=b;if(a.a()){var c=a.ki();c&&Lj(c,a.sq)}}function Tm(a,b){b!=a.Bv&&Um(a,b)}function Um(a,b){a.Bv=b;if(a.oa){var c=a.O(),d=a.ki(),e=a.Bd;b?(e&&c.dv(e,a.a()),c.dv(d,a.a())):(c.removeNode(e),c.removeNode(d))}a.ya()&&Lm(a,b)}
f.vs=function(a){this.Lq=a;this.hp(a&&this.oa)};f.hp=function(a){var b=Ia(this.Yd+"-title-draggable").split(" ");this.a()&&(a?Pl(this.Md,b):Rl(this.Md,b));a&&!this.Qa?(this.Qa=new qm(this.a(),this.Md),Pl(this.Md,b),G(this.Qa,"start",this.ws,!1,this)):!a&&this.Qa&&(this.Qa.g(),this.Qa=null)};
f.B=function(){Nm.d.B.call(this);var a=this.a(),b=this.O();this.Md=b.B("div",this.Yd+"-title",this.he=b.B("span",{className:this.Yd+"-title-text",id:dk(this)},this.Tb),this.Je=b.B("span",this.Yd+"-title-close"));R(a,this.Md,this.ng=b.B("div",this.Yd+"-content"),this.ld=b.B("div",this.Yd+"-buttons"));Jl(this.he,"heading");Jl(this.Je,"button");si(this.Je,!0);Kl(this.Je,"label",Vm);this.Is=this.he.id;Jl(a,this.wj());Kl(a,"labelledby",this.Is||"");this.Wc&&(this.ng.innerHTML=Cm(this.Wc));Mj(this.Je,this.Xu);
this.ca&&(a=this.ca,a.q=this.ld,a.k());Mj(this.ld,!!this.ca);Sm(this,this.sq)};
f.ue=function(a){Nm.d.ue.call(this,a);a=this.a();var b=this.Yd+"-content";this.ng=Xh(document,null,b,a)[0];this.ng||(this.ng=this.O().B("div",b),this.Wc&&(this.ng.innerHTML=Cm(this.Wc)),a.appendChild(this.ng));var b=this.Yd+"-title",c=this.Yd+"-title-text",d=this.Yd+"-title-close";(this.Md=Xh(document,null,b,a)[0])?(this.he=Xh(document,null,c,this.Md)[0],this.Je=Xh(document,null,d,this.Md)[0]):(this.Md=this.O().B("div",b),a.insertBefore(this.Md,this.ng));this.he?(this.Tb=vi(this.he),this.he.id||(this.he.id=
dk(this))):(this.he=Q("span",{className:c,id:dk(this)}),this.Md.appendChild(this.he));this.Is=this.he.id;Kl(a,"labelledby",this.Is||"");this.Je||(this.Je=this.O().B("span",d),this.Md.appendChild(this.Je));Mj(this.Je,this.Xu);b=this.Yd+"-buttons";(this.ld=Xh(document,null,b,a)[0])?(this.ca=new Pm(this.O()),this.ca.Pb(this.ld)):(this.ld=this.O().B("div",b),a.appendChild(this.ld),this.ca&&(a=this.ca,a.q=this.ld,a.k()),Mj(this.ld,!!this.ca));Sm(this,this.sq)};
f.mb=function(){Nm.d.mb.call(this);this.nb().D(this.a(),"keydown",this.wi).D(this.a(),"keypress",this.wi);this.nb().D(this.ld,"click",this.xK);this.hp(this.Lq);this.nb().D(this.Je,"click",this.rL);var a=this.a();Jl(a,this.wj());""!==this.he.id&&Kl(a,"labelledby",this.he.id);this.Bv||Um(this,!1)};f.Lc=function(){this.ya()&&this.ea(!1);this.hp(!1);Nm.d.Lc.call(this)};f.ea=function(a){a!=this.ya()&&(this.oa||this.k(),Nm.d.ea.call(this,a))};f.Wr=function(){Nm.d.Wr.call(this);this.dispatchEvent(Wm)};
f.Mo=function(){Nm.d.Mo.call(this);this.dispatchEvent(Xm);this.ru&&this.g()};f.ws=function(){var a=Bi(this.O()),b=ai(ci(a)||window||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d=U(this.a());"fixed"==sj(this.a())?sm(this.Qa,new kj(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):sm(this.Qa,new kj(0,0,c-d.width,a-d.height))};f.rL=function(){Ym(this)};
function Ym(a){if(a.Xu){var b=a.ca,c=b&&b.Tt;c?(b=b.get(c),a.dispatchEvent(new Zm(c,b))&&a.ea(!1)):a.ea(!1)}}f.f=function(){this.ld=this.Je=null;Nm.d.f.call(this)};function $m(a,b){a.ca=b;if(a.ld){if(a.ca){var c=a.ca;c.q=a.ld;c.k()}else a.ld.innerHTML=Cm(Em);Mj(a.ld,!!a.ca)}}f.xK=function(a){a:{for(a=a.target;null!=a&&a!=this.ld;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.ca.get(a);this.dispatchEvent(new Zm(a,b))&&this.ea(!1)}};
f.wi=function(a){var b=!1,c=!1,d=this.ca,e=a.target;if("keydown"==a.type)if(this.Oz&&27==a.keyCode){var h=d&&d.Tt,e="SELECT"==e.tagName&&!e.disabled;h&&!e?(c=!0,b=d.get(h),b=this.dispatchEvent(new Zm(h,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.a()){this.Mt=!0;try{this.Mg.focus()}catch(k){}$f(this.qC,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)h=e.name;else if(e==this.Je)Ym(this);else if(d){var l=d.mu,n;if(n=l)a:{n=d.q.getElementsByTagName("BUTTON");for(var p=
0,m;m=n[p];p++)if(m.name==l||m.id==l){n=m;break a}n=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!n||n.disabled||e||(h=l)}h&&d&&(c=!0,b=this.dispatchEvent(new Zm(h,String(d.get(h)))))}else e==this.Je&&32==a.keyCode&&Ym(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.ea(!1)};function Zm(a,b){this.type=an;this.key=a;this.caption=b}w(Zm,Dc);var an="dialogselect",Xm="afterhide",Wm="aftershow";function Pm(a){this.wb=a||Rh();jd.call(this)}var bn,cn;
w(Pm,jd);f=Pm.prototype;f.Yd="goog-buttonset";f.mu=null;f.q=null;f.Tt=null;f.set=function(a,b,c,d){jd.prototype.set.call(this,a,b);c&&(this.mu=a);d&&(this.Tt=a);return this};function Om(a,b,c,d){return a.set(b.key,b.caption,c,d)}f.k=function(){if(this.q){this.q.innerHTML=Cm(Em);var a=Rh(this.q);this.forEach(function(b,c){var d=a.B("button",{name:c},b);c==this.mu&&(d.className=this.Yd+"-default");this.q.appendChild(d)},this)}};
f.Pb=function(a){if(a&&1==a.nodeType){this.q=a;a=this.q.getElementsByTagName("button");for(var b=0,c,d,e;c=a[b];b++)if(d=c.name||c.id,e=vi(c)||c.value,d){var h=0==b;this.set(d,e,h,c.name==dn);h&&Ol(c,this.Yd+"-default")}}};f.a=function(){return this.q};f.O=function(){return this.wb};var dn="cancel",Vm="Close",Qm={key:"ok",caption:"OK"},Rm={key:dn,caption:"Cancel"},en={key:"yes",caption:"Yes"},fn={key:"no",caption:"No"},gn={key:"save",caption:"Save"},kn={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(bn=Om(new Pm,Qm,!0,!0),Om(Om(new Pm,Qm,!0),Rm,!1,!0),cn=Om(Om(new Pm,en,!0),fn,!1,!0),Om(Om(Om(new Pm,en),fn,!0),Rm,!1,!0),Om(Om(Om(new Pm,kn),gn),Rm,!0,!0));function ln(){try{this.jl=serverRoot}catch(a){this.jl=""}Nm.call(this);this.Oz=!1}w(ln,Nm);v("nrg.ui.Dialog",ln);ln.ID_PREFIX="nrg.ui.Dialog";ln.CSS={Nx:"nrg-ui-dialog-overlay",Op:"nrg-ui-dialog-background",Wj:"nrg-ui-dialog-closebutton",dE:"nrg-ui-dialog-closebutton-image",iF:"nrg-ui-dialog-subtext",ck:"nrg-ui-dialog-text",TITLE:"nrg-ui-dialog-title",Jh:"nrg-ui-dialog-content",XD:"nrg-ui-dialog-buttons"};f=ln.prototype;f.xl={x:20,y:20};f.Lq=!0;f.Qa=null;f.hl=null;f.Im=null;
f.Ly=function(a){O(this.$w,a)};f.XF=function(a){O(this.Wc,a)};f.VF=function(a){O(this.vk.parentNode,a)};f.WF=function(a){O(this.vk,a)};f.wy=function(a){O(this.yq,a)};f.UF=function(a){O(this.Rt,a)};
function mn(a){a.yq=Wh("modal-dialog-title-close",a.a())[0];O(a.yq,ln.CSS.Wj);a.vk=Q("img",{id:a.constructor.ID_PREFIX+"_CloseButton_"+B(),"class":ln.CSS.dE});a.vk.src=a.jl+"/images/viewer/xiv/ui/Modal/close.png";a.yq.appendChild(a.vk);G(a.vk,"click",function(a){this.ea(!this.ya());this.dispatchEvent({type:"f"});a.stopPropagation()}.bind(a))}f.gG=function(){var a=this.a(),b=Nk(a,600),c=Mk(a,600),d=Nk(a,600),a=Mk(a,600);this.XC(b,c,d,a)};
f.Mr=function(a,b,c,d){var e=this.a(),h=U(e.parentNode),k=U(e);c=null!=c?c:0;"left"==a?e.style.left=(0+c).toString()+"px":"right"==a&&(e.style.left=h.width-k.width+c+"px");"top"==b&&(e.style.top=(0+(null!=d?d:0)).toString()+"px")};
f.Xd=function(){var a=this.a(),b=U(this.a().parentNode);if(null!=this.ki()){var c=this.ki();0==c.opacity?S(c):bl(c,{width:b.width,height:b.height,"z-index":199})}var c=U(a),d=0,e=0;c.width<=b.width&&(d=b.width/2-c.width/2);c.height<=b.height&&(e=b.height/2-c.height/2);tj(a,d,e)};f.vs=function(a){this.Lq=a;this.hp(a&&this.oa)};
f.hp=function(a){var b=Ia(this.ba()+"-title-draggable").split(" "),c=this.ar();this.a()&&(a?Pl(c,b):Rl(c,b));a&&!this.Qa?(this.Qa=new qm(this.a(),this.Md),Pl(c,b),G(this.Qa,"start",this.ws,!1,this)):!a&&this.Qa&&(this.Qa.g(),this.Qa=null)};f.ix=function(){this.ws()};f.mI=function(){return this.Im};f.gA=function(){return null!=this.Qa?this.Qa.Do:null};
f.ws=function(){var a=Bi(this.O()),b=ci(a)||window;null!=this.a()&&(a=U(this.a().parentNode),b=ai(b||window),U(this.a()),this.Im=this.Qa.Do.clone(),"fixed"==sj(this.a())?sm(this.Qa,new kj(0,0,Math.max(0,b.width-this.xl.x),Math.max(0,b.height-this.xl.y))):sm(this.Qa,new kj(-1*this.xl.x,-1*this.xl.y,a.width+this.xl.x,a.height+this.xl.y)))};
f.yy=function(a){var b=Q("img",{id:this.constructor.ID_PREFIX+"_Image_"+B(),"class":ln.CSS.Lh});null==this.po&&(this.po=[]);this.po.push(b);this.La().appendChild(b);null!=a&&(b.src=a);return b};f.rk=function(a){var b=Q("div",{id:this.constructor.ID_PREFIX+"_Text_"+B(),"class":ln.CSS.ck},a);null==this.Eh&&(this.Eh=[]);this.Eh.push(b);b.innerHTML=a||"";this.La().appendChild(b);return b};f.Gt=function(a){var b=Q("div",{id:"ErrorSub_"+B(),"class":ln.CSS.iF});b.innerHTML=a;this.La().appendChild(b);return b};
f.eI=function(){return this.a()};f.k=function(a){if(!this.oa)ln.d.k.call(this,a);else if(null!=a&&this.a().parentNode!=a){R(a,this.a());return}O(this.a(),"nrg-ui-dialog");this.$w=Wh("modal-dialog-title",this.a())[0];this.Wc=Wh("modal-dialog-content",this.a())[0];this.Rt=Wh("modal-dialog-buttons",this.a())[0];this.vk=null;mn(this);O(this.Rt,ln.CSS.XD);O(this.$w,ln.CSS.TITLE);O(this.Wc,ln.CSS.Jh);ln.d.vs.call(this,!1);this.vs(!0)};
f.ea=function(a,b){!0==b&&ln.d.ea.call(this,a);null!=this.a()&&(null==this.hl&&(this.hl=vj(this.a())),this.ya()&&!1==a?(this.hl=vj(this.a()),kl(this.a(),200,function(){this.ea(a,!0)}.bind(this))):this.ya()||!0!=a||(ln.d.ea.call(this,a),tj(this.a(),this.hl),this.a().style.opacity=0,hl(this.a(),200)))};
f.is=function(){var a=this.a(),b=this.La(),c=0,d=0,e=0,h=0,k=a.style.overflow;a.style.overflow="visible";var l=this.a().style.opacity,n=this.a().style.visibility;this.a().style.opacity=1;null!=this.Eh&&E(this.Eh,function(a){e=a.scrollWidth;h=a.scrollHeight;c=e>c?e:c;d=h>d?h:d;Gj(a,e,h)});null!=k?a.style.overflow=k:a.style.removeProperty("overflow");var p=U(b),k=c>p.width?c:p.width,p=d>p.height?d:p.height;Gj(b,k,p);Gj(a,k+20,p+20);this.a().style.opacity=l;this.a().style.visibility=n};f.BI=function(){return this.Eh};
f.nJ=function(){};f.f=function(){ln.d.f.call(this);delete this.Rt;delete this.$w;delete this.Wc;delete this.vk;delete this.yq;null!=this.jl&&delete this.jl;null!=this.bC&&(S(this.bC),delete this.bC);null!=this.Eh&&(E(this.Eh,function(a){S(a);delete a}),delete this.Eh);null!=this.po&&(E(this.po,function(a){S(a);delete a}),delete this.po);null!=this.hl&&(D(this.hl),delete this.hl);null!=this.Im&&(D(this.Im),delete this.Im)};v("nrg.ui.Dialog.ID_PREFIX",ln.ID_PREFIX);
v("nrg.ui.Dialog.EventType",{pO:"d",CLOSED:"e",lN:"f"});v("nrg.ui.Dialog.prototype.addTitleClass",ln.prototype.Ly);v("nrg.ui.Dialog.prototype.addContentClass",ln.prototype.XF);v("nrg.ui.Dialog.prototype.addCloseButtonClass",ln.prototype.VF);v("nrg.ui.Dialog.prototype.addCloseButtonImageClass",ln.prototype.WF);v("nrg.ui.Dialog.prototype.addCloseSpanClass",ln.prototype.wy);v("nrg.ui.Dialog.prototype.addButtonsClass",ln.prototype.UF);v("nrg.ui.Dialog.prototype.applyFadeTransitions",ln.prototype.gG);
v("nrg.ui.Dialog.prototype.moveToCorner",ln.prototype.Mr);v("nrg.ui.Dialog.prototype.center",ln.prototype.Xd);v("nrg.ui.Dialog.prototype.hideWindowOnHover",ln.prototype.nJ);v("nrg.ui.Dialog.prototype.setDraggable",ln.prototype.vs);v("nrg.ui.Dialog.prototype.updateLimits",ln.prototype.ix);v("nrg.ui.Dialog.prototype.addImage",ln.prototype.yy);v("nrg.ui.Dialog.prototype.addText",ln.prototype.rk);v("nrg.ui.Dialog.prototype.addSubText",ln.prototype.Gt);v("nrg.ui.Dialog.prototype.getOverlay",ln.prototype.eI);
v("nrg.ui.Dialog.prototype.render",ln.prototype.k);v("nrg.ui.Dialog.prototype.setVisible",ln.prototype.ea);v("nrg.ui.Dialog.prototype.getTextElements",ln.prototype.BI);v("nrg.ui.Dialog.prototype.resizeToContents",ln.prototype.is);v("nrg.ui.Dialog.prototype.getPreviousDraggerLimits",ln.prototype.mI);v("nrg.ui.Dialog.prototype.getDraggerLimits",ln.prototype.gA);v("nrg.ui.Dialog.prototype.disposeInternal",ln.prototype.f);function nn(){ln.call(this);$m(this,null)}w(nn,ln);v("nrg.ui.ErrorDialog",nn);nn.ID_PREFIX="nrg.ui.ErrorDialog";nn.CSS={Nx:"nrg-ui-errordialog",Lh:"nrg-ui-errordialog-image",ck:"nrg-ui-errordialog-text"};nn.prototype.lm=null;nn.prototype.rk=function(a){nn.d.rk.call(this,a);a=this.Eh;O(a[a.length-1],nn.CSS.ck)};nn.prototype.k=function(a){nn.d.k.call(this,a);O(this.a(),nn.CSS.Nx);null==this.lm&&(this.lm=this.yy(this.jl+"/images/viewer/xiv/ui/Overlay/sadbrain-white.png"),O(this.lm,nn.CSS.Lh),this.Xd())};
nn.prototype.f=function(){nn.d.f.call(this);null!=this.lm.parentNode&&S(this.lm);delete this.lm};v("nrg.ui.ErrorDialog.ID_PREFIX",nn.ID_PREFIX);v("nrg.ui.ErrorDialog.CSS",nn.CSS);v("nrg.ui.ErrorDialog.prototype.addText",nn.prototype.rk);v("nrg.ui.ErrorDialog.prototype.disposeInternal",nn.prototype.f);function on(a,b,c,d){na(this);this.url=a;this.document=b;this.files=d}w(on,fh);v("gxnat.slicerNode.Mrml",on);function pn(a,b){na(this);this.file=a;this.De=b}w(pn,fh);v("gxnat.slicerNode.Displayable",pn);function qn(a,b,c){na(this);this.position=a;this.UM=b;this.focus=c}w(qn,fh);v("gxnat.slicerNode.Camera",qn);function rn(a,b,c,d,e,h){na(this);this.position=a;this.color=b;this.name=h}w(rn,fh);v("gxnat.slicerNode.Annotations",rn);function sn(){na(this)}w(sn,fh);v("gxnat.slicerNode.Layout",sn);M.I={};v("gxnat.slicerUtils",M.I);M.I.vx="/scripts/viewer/xiv/vis/GenericColorTable.txt";M.I.Sz=function(a){for(var b=[],c=0,d=a.length;c<d;c++)Fa(a[c],".mrml")&&b.push(a[c]);return b};M.I.Lu=function(a,b){M.get(a,function(a){b(new Fi(a))},"text")};M.I.wA=function(a,b,c){a=g(a)?a:[a];var d=M.I.Sz(a),e=[],h=0;E(d,function(b){M.I.Lu(b,function(l){h++;e.push(new on(b,l,0,a));h==d.length&&c(e)})})};
M.I.wz=function(a,b,c){M.I.Yz(a,b,function(b){c(new Ah(a,M.I.bA(a),M.I.Zz(a),M.I.qA(a),b,M.I.NA(a),M.I.vA(a),null))})};M.I.AA=function(a,b){var c=[],d=[],e=0;E(a,function(a){c=M.I.BA(a.document);E(c,function(k){M.I.wz(k,a,function(a){e++;d.push(a);e==c.length&&b(d)})})})};M.I.hA=function(a,b){a=r(a)?M.I.Lu(a):a;var c=[];E(a.getElementsByTagName(b),function(a){c.push(a)});return c};M.I.BA=function(a){return M.I.hA(a,"SceneView")};
M.I.bA=function(a){var b=a.getElementsByTagName("Camera").length-1,c=a.getElementsByTagName("Camera")[b].getAttribute("position"),d=a.getElementsByTagName("Camera")[b].getAttribute("viewUp");a=a.getElementsByTagName("Camera")[b].getAttribute("focalPoint");return new qn(eh(c),eh(d),eh(a))};M.I.FA=function(a,b){for(var c=a.getAttribute("storageNodeRef"),d=b.getElementsByTagName("SceneViewStorage"),e=0,h=d.length;e<h;e++)if(d[e].getAttribute("id")===c)return d[e].getAttribute("fileName")};
M.I.Zz=function(a){return new zh(a.getElementsByTagName("View")[0].getAttribute("backgroundColor"),a.getElementsByTagName("View")[0].getAttribute("backgroundColor2"))};M.I.qA=function(a){return new sn(a.getElementsByTagName("Layout")[0].getAttribute("currentViewArrangement"))};
M.I.Fm=function(a,b){if(null!=a)for(var c=0,d=b.length,e="",h="";c<d;c++)if(e=decodeURIComponent(b[c].toLowerCase()),h=decodeURIComponent(a.toLowerCase()),-1<h.indexOf("%")&&(h=decodeURIComponent(h)),e.indexOf(h)==e.length-h.length)return b[c].replace(/%/g,"%25")};M.I.yH=function(a,b){var c=a.slice(0,a.lastIndexOf("/")+1);/^\/+$/.test(c)||(c=c.replace(/\/+$/,""));return Za(b,"!",zl(c),"/",zl(a))};
M.I.Yz=function(a,b,c){var d=a.getElementsByTagName("MarkupsDisplay"),e=a.getElementsByTagName("MarkupsFiducial");a=a.getElementsByTagName("MarkupsFiducialStorage");var h=[],k=[],l=0,n,p,m="rgb(255,0,0)",q="",t="",s="",z=0,y,I;0==a.length?c(null):(E(a,function(a){k.push(M.I.Fm(a.getAttribute("fileName"),b.files))}),0==k.length?c(null):E(k,function(a){M.get(a,function(a){l++;E(a.split(/\n/),function(a){if(-1==a.indexOf("#")&&(n=a.split(/,/),1!=n.length)){p=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])];
s=n[11];m=[1,0,0];t=q="";z=0;for(len=e.length;z<len;z++)if(y=e[z],q=y.getAttribute("id"),q===n[0].replace("_","")){t=y.getAttribute("displayNodeRef");break}len=d.length;for(z=0;z<len;z++)if(I=d[z],q=I.getAttribute("id"),q===t){m=eh(I.getAttribute("color")).map(function(a){return parseFloat(a)});break}h.push(new rn(p,m,0,0,0,s))}});l==k.length&&c(h)},"text")}))};
M.I.Gu=function(a,b,c){var d=[],e=a.getElementsByTagName(c),h=null,k=0,l=e.length;E(a.getElementsByTagName(b),function(a){for(k=0;k<l;k++)if(h=e[k],h.getAttribute("id")===a.getAttribute("storageNodeRef")){d.push(new pn(h.getAttribute("fileName"),a));break}});return d};M.I.vH=function(){return null};
M.I.NA=function(a){var b=a.getElementsByTagName("Selection")[0].getAttribute("activeVolumeID"),c=M.I.Gu(a,"Volume","VolumeArchetypeStorage"),d=a.getElementsByTagName("LabelMapVolumeDisplay"),e=[],h=[],k="";E(c,function(a){k=a.De.getAttribute("displayNodeRef");1<k.indexOf("LabelMap")?(E(d,function(b){b.getAttribute("id")==k&&(a.Sn=b,-1!=b.getAttribute("colorNodeID").indexOf("vtkMRMLColorTableNodeFileGeneric")?a.Yt=serverRoot+M.I.vx:window.console.log("Custom color table: ",b.getAttribute("colorNodeID")))}),
e.push(a)):h.push(a)});var l="";E(e,function(a){l=a.De.getAttribute("attributes").split(";");E(l,function(b){-1!=b.indexOf("AssociatedNodeID")&&(refVol=b.split(":")[1],E(h,function(b){b.De.getAttribute("id")==refVol&&(b.sh=a)}.bind(this)))}.bind(this))});E(h,function(c){c.Fg=new rh(a,c.De,b);c.sh&&(c.Fg.sh=c.sh,delete c.sh)});return h};M.I.vA=function(a){var b=M.I.Gu(a,"Model","ModelStorage");E(b,function(b){b.Fg=new hh(a,b.De)});return b};v("gxnat.slicerUtils.GENERIC_COLORTABLE_FILE",M.I.vx);
v("gxnat.slicerUtils.extractMrmls",M.I.Sz);v("gxnat.slicerUtils.getMrmlAsXml",M.I.Lu);v("gxnat.slicerUtils.getMrmlNodes",M.I.wA);v("gxnat.slicerUtils.createSceneViewProperties",M.I.wz);v("gxnat.slicerUtils.getSceneViewNodes",M.I.AA);v("gxnat.slicerUtils.getElementsFromMrml",M.I.hA);v("gxnat.slicerUtils.getSceneViewsFromMrml",M.I.BA);v("gxnat.slicerUtils.getCameraFromSceneView",M.I.bA);v("gxnat.slicerUtils.getThumbnail",M.I.FA);v("gxnat.slicerUtils.mrmlColorToRgb",M.I.BQ);
v("gxnat.slicerUtils.getBackgroundColorFromSceneView",M.I.Zz);v("gxnat.slicerUtils.getLayoutFromSceneView",M.I.qA);v("gxnat.slicerUtils.matchFileToSet",M.I.Fm);v("gxnat.slicerUtils.getFileUrlRelativeToMrbUrl",M.I.yH);v("gxnat.slicerUtils.getAnnotations",M.I.Yz);v("gxnat.slicerUtils.getDisplayables",M.I.Gu);v("gxnat.slicerUtils.getFibers",M.I.vH);v("gxnat.slicerUtils.getVolumes",M.I.NA);v("gxnat.slicerUtils.getMeshes",M.I.vA);function tn(a,b,c){this.ui=[];Ii.call(this,"Slicer Scenes",a,b);c&&c(this)}w(tn,Ii);v("gxnat.vis.Slicer",tn);var un=["jpeg","jpg","png","gif"];f=tn.prototype;f.ji="resources/Slicer/files";f.ii="?listContents=true";f.rg="File Name";f.Df=function(a){this.Ze?vn(this,a):om.d.Df.call(this,function(){this.Mk(function(){this.Ge();vn(this,a)}.bind(this))}.bind(this))};function vn(a,b){M.I.wA(a.ui,0,function(a){M.I.AA(a,function(d){this.qz(d,a,b)}.bind(this))}.bind(a))}
f.qz=function(a,b,c){this.lK=b;this.eM=a;var d,e,h,k;E(this.eM,function(a){d=[a.ZM||[],a.dK||[],a.UG||[]];e=[];E(d,function(a){E(a,function(a){h=M.I.Fm(zl(a.file),this.ui);a.Fg instanceof rh&&a.Fg.sh&&(a.Fg.labelMapFile=M.I.Fm(a.Fg.sh.file,this.ui),null!=a.Fg.sh.Yt&&null==M.I.Fm(a.Fg.sh.Yt,this.ui)&&(a.Fg.colorTableFile=a.Fg.sh.Yt));e.push(new Dh(h,a.Fg))}.bind(this))}.bind(this));k=new Eh(e);k.Jg(M.I.Fm(M.I.FA(a.element,this.lK[0].document),this.ui));k.oc(a.element.getAttribute("name"));k.Gw(a);
this.Ia.push(k)}.bind(this));c&&c(this)};f.Mk=function(a){var b="",c=0,d=this.ui.length;for(this.thumbnailFiles=[];c<d;c++)b=vh(this.ui[c]),-1!=un.indexOf(b)&&this.thumbnailFiles.push(this.ui[c]);E(this.thumbnailFiles,function(a,b){-1!=a.indexOf("%20")&&(this.thumbnailFiles[b]=a.replace(/%20/g,"%2520"))}.bind(this));d=this.thumbnailFiles.length;for(c=0;c<d;c++)if("Data"!=th(uh(this.thumbnailFiles[c]))){this.Jg(this.thumbnailFiles[c]);break}a&&a(this)};f.zd=function(a){g(a)||(a=[a]);E(a,function(a){this.ui.push(a)}.bind(this))};
v("gxnat.vis.Slicer.thumbnailExtensions",un);v("gxnat.vis.Slicer.prototype.folderQuerySuffix",tn.prototype.ji);v("gxnat.vis.Slicer.prototype.fileQuerySuffix",tn.prototype.ii);v("gxnat.vis.Slicer.prototype.fileContentsKey",tn.prototype.rg);v("gxnat.vis.Slicer.prototype.getFileList",tn.prototype.Df);v("gxnat.vis.Slicer.prototype.convertToViewableGroups",tn.prototype.qz);v("gxnat.vis.Slicer.prototype.getThumbnailImage",tn.prototype.Mk);v("gxnat.vis.Slicer.prototype.addFiles",tn.prototype.zd);function wn(){lm.call(this);this.Tg.push(this.uw);this.Tg.push(this.cM);this.Tg.push(this.dM)}w(wn,lm);v("xiv.sampleData.Scans",wn);
wn.prototype.uw=new km("src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample1/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-4-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 1","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample1/Sample1.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
wn.prototype.cM=new km("src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample2/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-5-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 2","Total Frames":176,Type:"t1_mpr_1mm_p2_pos50"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample2/Sample2.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);
wn.prototype.dM=new km("src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-1-sks45b.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-10-sktbhh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-100-slumyn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-101-slumzo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-102-slun0p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-103-slun1q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-104-slun2r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-105-slun3s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-106-slun4t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-107-slun5u.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-108-slun6v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-109-slun7w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-11-sktbii.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-110-slunui.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-111-slunvj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-112-slunwk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-113-slunxl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-114-slunym.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-115-slunzn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-116-sluo0o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-117-sluo1p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-118-sluo2q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-119-sluo3r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-12-sktbjj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-120-sluoqd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-121-sluore.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-122-sluosf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-123-sluotg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-124-sluouh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-125-sluovi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-126-sluowj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-127-sluoxk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-128-sluoyl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-129-sluozm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-13-sktbkk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-130-slupm8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-131-slupn9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-132-slupoa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-133-sluppb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-134-slupqc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-135-sluprd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-136-slupse.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-137-sluptf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-138-slupug.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-139-slupvh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-14-sktbll.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-140-sluqi3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-141-sluqj4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-142-sluqk5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-143-sluql6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-144-sluqm7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-145-sluqn8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-146-sluqo9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-147-sluqpa.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-148-sluqqb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-149-sluqrc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-15-sktbmm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-150-slurdy.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-151-slurez.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-152-slurg0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-153-slurh1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-154-sluri2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-155-slurj3.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-156-slurk4.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-157-slurl5.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-158-slurm6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-159-slurn7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-16-sktbnn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-160-slus9t.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-161-slusau.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-162-slusbv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-163-sluscw.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-164-slusdx.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-165-slusey.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-166-slusfz.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-167-slush0.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-168-slusi1.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-169-slusj2.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-17-sktboo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-170-slut5o.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-171-slut6p.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-172-slut7q.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-173-slut8r.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-174-slut9s.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-175-slutat.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-176-slutbu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-18-sktbpp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-19-sktbqq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-2-sks46c.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-20-sktcdc.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-21-sktced.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-22-sktcfe.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-23-sktcgf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-24-sktchg.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-25-sktcih.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-26-sktcji.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-27-sktckj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-28-sktclk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-29-sktcml.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-3-sks47d.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-30-sktd97.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-31-sktda8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-32-sktdb9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-33-sktdca.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-34-sktddb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-35-sktdec.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-36-sktdfd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-37-sktdge.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-38-sktdhf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-39-sktdig.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-4-sks48e.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-40-skte52.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-41-skte63.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-42-skte74.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-43-skte85.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-44-skte96.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-45-sktea7.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-46-skteb8.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-47-sktec9.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-48-skteda.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-49-skteeb.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-5-sks49f.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-50-sktf0x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-51-sktf1y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-52-sktf2z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-53-sktf40.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-54-sktf51.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-55-sktf62.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-56-sktf73.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-57-sktf84.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-58-sktf95.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-59-sktfa6.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-6-sks4ag.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-60-sktfws.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-61-sktfxt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-62-sktfyu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-63-sktfzv.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-64-sktg0w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-65-sktg1x.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-66-sktg2y.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-67-sktg3z.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-68-sktg50.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-69-sktg61.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-7-sks4bh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-70-sktgsn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-71-sktgto.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-72-sktgup.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-73-sktgvq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-74-sktgwr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-75-sktgxs.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-76-sktgyt.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-77-sktgzu.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-78-skth0v.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-79-skth1w.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-8-sks4ci.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-80-skthoi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-81-skthpj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-82-skthqk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-83-skthrl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-84-skthsm.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-85-skthtn.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-86-skthuo.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-87-skthvp.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-88-skthwq.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-89-skthxr.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-9-sks4dj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-90-sktikd.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-91-sktile.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-92-sktimf.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-93-skting.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-94-sktioh.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-95-sktipi.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-96-sktiqj.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-97-sktirk.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-98-sktisl.dcm src/main/scripts/viewer/xiv/sample-data/scans/Sample3/DICOM/1.3.12.2.1107.5.2.32.35177.30000006121218324675000000034-6-99-sktitm.dcm".split(" "),{"Acq. Type":"3D",
Orientation:"Sagittal","Scan ID":"Sample Scan 3","Total Frames":176,Type:"t2_spc_1mm_p2"},"src/main/scripts/viewer/xiv/sample-data/scans/Sample3/Sample3.png",["Test Project 1-P","Test Subject 1-S","Test Experiment 1-E"]);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
 @author herrickr@mir.wustl.edu (Rick Herrick)
*/
function xn(a,b,c,d){xc.call(this);yn();zn();this.El={h:om,mQ:Oi,lQ:im,AM:tn};this.nd=null!=a?a:xn.States.Xj;this.gK=b;this.tC=d;this.fs=Yg(d);this.eh=this.eh?this.eh:[];a="/"!==c[0]?"/"+c:c;-1===this.eh.indexOf(this.fs+a)&&this.eh.push(-1===a.indexOf(this.fs)?this.fs+a:a);1==this.eh.length&&(this.ce=new Wg(this.eh[0]))}w(xn,xc);v("xiv.start",xn);xn.ModalStates={Oe:"fullscreen",rf:"popup",Vs:"fullscreen-popup",Vg:"windowed",Xj:"demo",hE:"demp-fullscreen"};xn.States={Xj:"demo",dO:"live"};
function yn(){Tf.IMA=[Uf,null]}function zn(){document.body.style.overflow="hidden"}f=xn.prototype;f.Ts=B();f.Uy=300;f.EJ=1E3;f.mr=!1;f.pr=!1;f.SC=function(){};f.bz=function(){An(this);this.show();this.nd==xn.States.Xj?(nm.MODE="demo",S(this.eb.ca.rf),S(this.eb.ca.wl),Bn(this)):(this.eb.Cc(this.gK),Cn(this))};f.pM=function(a){this.hK=a};function An(a){a.eb=new a.hK;a.eb.FC(serverRoot);G(a.eb,"g",a.OK.bind(a));window.onresize=function(){null!=this.eb&&this.eb.o()}.bind(a)}
f.OK=function(){this.le.yB(null,function(a){E(a,function(a){Dn(this,a);this.eb.aa.$c()}.bind(this))}.bind(this))};f.show=function(){this.eb.a().style.opacity=0;this.eb.k();this.nd!==xn.States.Xj&&this.eb.vy();G(this.eb.aa.qa,"a",this.hw.bind(this));G(this.eb.ca.rf,"click",this.xG.bind(this));G(this.eb.ca.wl,"click",this.g.bind(this));this.eb.Nb.mc(!0,0,this.EJ);jl(this.eb.a(),this.Uy)};
function Bn(a){var b=a.eb.aa,c={slicer:(new mm).Tg,scan:(new wn).Tg},d,e=null;C(c,function(a,b){E(a,function(a){d="scan"==b?new this.El.h:new this.El.AM;d.zd(a.files);d.CC(!0);d.TC(a.eK);d.Jg(a.Zw);En(this,d,a.Au);null==e&&(e=a.Au);E(a.Au,function(a){Jb(e,a)||e.push(a)})}.bind(this))}.bind(a));a=b.qa.ao(e);var h=[];E(a,function(a){null!=a&&(a.ic.$i=0,a.mc(!0),a=a.zf,a.style.opacity=0,h.push(a))});b.qa.a().style.opacity=1;Pb(h,void 0,0,b.qa.a());ll(h,400,200)}
function Cn(a){var b=a.eb.aa.qa,c=0;a.eb.aa&&G(a.eb.aa.qa,Fn,a.FL.bind(a));a.le=new Qi(a.eh[0]);a.le.vB(function(a){var e=Dn(this,a);0==c&&(this.vJ=a,this.av=b.da[e[0]],b.dp(e[0]));1==c&&(this.pr=!0,this.wJ=a,this.qr=this.av.da[e[1]]);2==c&&(this.mr=!0,this.nr=a,this.hB=this.qr.da[e[2]],hm([this.av,this.qr,this.hB]));c++}.bind(a))}
function Gn(a,b){var c=a.le.Yn(b),d=a.le.$z(b),e=0;C(c,function(a,b){var c=d[e];25<c.length&&(c=Xa(c,25));d[e]=b.toUpperCase()+":&nbsp&nbsp&nbsp&nbsp&nbsp"+c;e++});return d}function Dn(a,b){var c=a.le.aA(b),d=Gn(a,b);Hn(a,d,c);return d}function In(a,b){a.le.uB(b.originalUrl,null,function(a){if(b.yi("subjects")==this.ce.yi("subjects")&&this.pr){var d=this.ce.yi("experiments");this.nr=this.le.pm(d);Mb(a,this.nr);Pb(a,0,0,this.nr);this.pr=!1}E(a,function(a){Dn(this,a)}.bind(this))}.bind(a))}
f.hw=function(a){if(null!=a.De[this.Ts])switch(a=new Wg(a.De[this.Ts]),a.Sq()){case "subjects":In(this,a);break;case "experiments":Jn(this,a.originalUrl)}};f.vm=function(a){kl(this.eb.a(),this.Uy,a)};f.g=function(){this.vm(this.HG.bind(this))};
function Jn(a,b){if(null==a.wv)a.wv=[];else if(-1<a.wv.indexOf(b)){window.console.log("don't need to reload",b);return}var c=a.le.Yn(a.le.pm(b)),c=new Hi(c.projects[bj],c.subjects[bj],c.experiments[bj]);Kn(a,b,function(){this.wv.push(b);this.mr&&(this.mr=!1,C(this.qr.da,function(){}.bind(this)))}.bind(a),c)}f.FL=function(a){var b=a.De.ic.$i;a.De.ic.$i=0;a.De.ic.$i=b};
f.xG=function(){var a=open(this.tC+"/scripts/viewer/xiv/popup.html?"+this.eh[0],"XImgView","width=1200,height=800");a.focus();var b=this.eh[0];a.onload=function(){a.wQ(b,xn.ModalStates.rf,serverRoot)}.bind(this);this.g()};function Kn(a,b,c,d){Ln(a,b,function(a){var b=a.vh;Mn(this,a,b,function(a){En(this,a)}.bind(this));null!=d&&(this.Ua[b].mp(d.QL),this.Ua[b].op(d.EM),this.Ua[b].ip(d.SG))}.bind(a),c)}
function Hn(a,b,c){var d=a.eb.aa.qa;d.On(b);zippyNodes=d.ao(b);E(zippyNodes,function(a,b){-1<a.xb().toLowerCase().indexOf("experiments")&&!a.Sk()&&Uc(a,"a",function(){a.Cy()});null==c||null==c[b]||null==a[this.Ts]&&(a[this.Ts]=c[b])}.bind(a))}
function En(a,b,c){var d=a.eb.aa;null!=d&&(null==c&&null!=a.le&&(c=Gn(a,a.le.pm(b.tj))),("experimentResource"in a.El||"experimentReconstruction"in a.El||"Scans"!=b.yf)&&c.push(b.yf),b.Df(function(){if(0<b.Ia.length){d.ij(b,c).Aw(b.pl);var a=d.qa.ao(c);0<c.length&&1<a.length&&d.mc(c[c.length-1],a[a.length-2])}else if(a=this.eb.aa.qa,null!=c)for(var h=a.ao(c),k=h.length;0<=k;k--)void 0!=h[k]&&a.HC(h[h.length-k],null)}.bind(a)))}
function Mn(a,b,c,d){a.Ua=a.Ua?a.Ua:{};null==a.Ua[c]&&(a.Ua[c]=b,d(b))}
f.HG=function(){xn.d.g.call(this);document.body.style.overflow="visible";C(this.Ua,function(a,b){a.g();delete this.Ua[b]}.bind(this));delete this.Ua;this.le&&(this.le.g(),delete this.le);delete this.eh;delete this.tC;delete this.fs;delete this.oQ;null!=this.ce&&(this.ce.g(),delete this.ce);delete this.mr;delete this.pr;delete this.vJ;delete this.wJ;delete this.nr;delete this.av;delete this.qr;delete this.hB;J(this.eb);this.eb.g();S(this.eb.a());delete this.eb};
function Ln(a,b,c,d){var e=ob(a.El),h=0;C(a.El,function(a){Ni(b,a,c,function(){h++;h===e&&null!=d&&d()})})}v("xiv.start.States",xn.States);v("xiv.start.loadCustomExtensions",yn);v("xiv.start.adjustDocumentStyle",zn);v("xiv.start.ModalStates",xn.ModalStates);v("xiv.start.checkForWebGL",xn.checkForWebGL);v("xiv.start.isCompatible",xn.FJ);v("xiv.start.prototype.setServerRoot",xn.prototype.SC);v("xiv.start.prototype.setModalType",xn.prototype.pM);v("xiv.start.prototype.begin",xn.prototype.bz);
v("xiv.start.prototype.show",xn.prototype.show);v("xiv.start.prototype.hide",xn.prototype.vm);v("xiv.start.prototype.dispose",xn.prototype.g);window["xiv.start.isCompatible"]=xn.FJ;window["xiv.start.checkForWebGL"]=xn.checkForWebGL;window["xiv.start.ModalStates"]=xn.ModalStates;xn.prototype.setServerRoot=xn.prototype.SC;xn.prototype.begin=xn.prototype.bz;function Nn(){ad.call(this);this.wo=[];this.wD=[];this.ap=[]}w(Nn,ad);f=Nn.prototype;f.hv=!1;f.iv=!1;f.Fj=!1;f.mB=function(){return this.Fj};function On(a,b){a.wD.push(b);b.iv=!0;a.hv=!0}f.QC=function(a){this.ns=a};f.xa=function(){if(!this.Fj){for(var a,b=0;a=this.wo[b];b++)Pn(this,a);this.Fj=!0}};function Pn(a,b){a.hv&&(G(b.element,"mousedown",b.Cg,!1,b),a.Ow&&Ol(b.element,a.Ow));a.iv&&a.Yw&&Ol(b.element,a.Yw)}
function Qn(a){for(var b,c=0;b=a.wo[c];c++){var d=a;d.hv&&(Vc(b.element,"mousedown",b.Cg,!1,b),d.Ow&&Ql(b.element,d.Ow));d.iv&&d.Yw&&Ql(b.element,d.Yw);b.g()}a.wo.length=0}
f.wp=function(a,b){if(!this.Cf)if(this.Cf=b,!1==this.dispatchEvent(new Rn("dragstart",0,this.Cf)))this.Cf=null;else{var c=b.kj;this.Dk=this.du(c);var d=Th(c);d.body.appendChild(this.Dk);var e=this.Dk,h=Aj(c),c=Sj(c,"margin");h.x-=2*(c.left||0);h.y-=2*(c.top||0);e.style.position="absolute";e.style.left=h.x+"px";e.style.top=h.y+"px";this.Qa=new qm(e);this.Qa.QC(this.ns);G(this.Qa,"drag",this.IB,!1,this);G(this.Qa,"end",this.rj,!1,this);G(d.body,"selectstart",this.tD);this.Rm=[];for(e=0;d=this.wD[e];e++)for(var k,
h=0;k=d.wo[h];h++)for(var c=d,l=[k.element],n=this.Rm,p=0;p<l.length;p++){var m=l[p],q,t=m;q=Aj(t);t=U(t);q=new jj(q.y,q.x+t.width,q.y+t.height,q.x);n.push(new Sn(q,c,k,m));Tn(this,q)}this.Fi||(this.Fi=new jj(0,0,0,0));for(e=0;d=this.ap[e];e++)d.$t=[],d.uC=d.q.scrollLeft,d.vC=d.q.scrollTop,h=Aj(d.q),c=U(d.q),d.Hc=new jj(h.y,h.x+c.width,h.y+c.height,h.x);for(e=0;c=this.Rm[e];e++)for(h=0;d=this.ap[h];h++)oi(d.q,c.q)&&(d.$t.push(c),c.$o=d);this.pk=null;for(e=0;d=this.ap[e];e++)G(d.q,"scroll",this.mz,
!1,this);this.Qa.wp(a);a.preventDefault()}};
f.rj=function(a){var b=a.LG?null:this.pk;if(b&&b.ml){var c=a.clientX;a=a.clientY;var d=Ei(Rh(this.Dk)),e=c+d.x,d=a+d.y,h;this.Ap&&(h=this.Ap(b.qi,b.Hc,e,d));this.dispatchEvent(new Rn("drag",0,this.Cf,0,b.qi,0,c,a));b.ml.dispatchEvent(new Rn("drop",0,this.Cf,0,b.qi,0,c,a,0,0,h))}this.dispatchEvent(new Rn("dragend",0,this.Cf));Vc(this.Qa,"drag",this.IB,!1,this);Vc(this.Qa,"end",this.rj,!1,this);Vc(Th(this.Cf.kj).body,"selectstart",this.tD);for(b=0;c=this.ap[b];b++)Vc(c.q,"scroll",this.mz,!1,this),c.$t=
[];this.Qa.g();S(this.Dk);delete this.Cf;delete this.Dk;delete this.Qa;delete this.Rm;delete this.pk};
f.IB=function(a){var b,c=Ei(Rh(this.Dk));b=new Ph(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.pk,h;if(e){this.Ap&&e.ml&&(h=this.Ap(e.qi,e.Hc,c,d));if(e.Hc.contains(b)&&h==this.uy)return;e.ml&&(this.dispatchEvent(new Rn("dragout",0,this.Cf,0,e.qi)),e.ml.dispatchEvent(new Rn("dragout",0,this.Cf,0,e.qi,0,void 0,void 0,0,0,this.uy)));this.uy=h;this.pk=null}if(this.Fi.contains(b)){a:{for(var k=0;e=this.Rm[k];k++)if(e.Hc.contains(b))if(e.$o){if(e.$o.Hc.contains(b)){b=e;break a}}else{b=e;break a}b=
null}if((e=this.pk=b)&&e.ml)this.Ap&&(h=this.Ap(e.qi,e.Hc,c,d)),c=new Rn("dragover",0,this.Cf,0,e.qi),c.FM=h,this.dispatchEvent(c),e.ml.dispatchEvent(new Rn("dragover",0,this.Cf,0,e.qi,0,a.clientX,a.clientY,0,0,h));else if(!e){this.Xe||(this.Xe=new Sn(this.Fi.clone()));a=this.Xe.Hc;a.top=this.Fi.top;a.right=this.Fi.right;a.bottom=this.Fi.bottom;a.left=this.Fi.left;for(h=0;e=this.Rm[h];h++)b=e.Hc,e.$o&&(e=e.$o.Hc,b=new jj(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,e.bottom),
Math.max(b.left,e.left))),e=null,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),k=null,d>=b.bottom?k=b.bottom>a.top?b.bottom:a.top:d<b.top&&(k=b.top<a.bottom?b.top:a.bottom),null===e||null===k||(Math.abs(e-c)>Math.abs(k-d)?k=null:e=null),null!==e?e<=c?a.left=e:a.right=e:null!==k&&(k<=d?a.top=k:a.bottom=k);this.pk=10<=(a.right-a.left)*(a.bottom-a.top)?this.Xe:null}}};f.tD=function(){return!1};
f.mz=function(a){for(var b=0,c;c=this.ap[b];b++)if(a.target==c.q){var d=c.vC-c.q.scrollTop,e=c.uC-c.q.scrollLeft;c.vC=c.q.scrollTop;c.uC=c.q.scrollLeft;this.Xe&&this.pk==this.Xe&&(0<d?this.Xe.Hc.top+=d:this.Xe.Hc.bottom+=d,0<e?this.Xe.Hc.left+=e:this.Xe.Hc.right+=e);for(var h=0,k;k=c.$t[h];h++)k=k.Hc,k.top+=d,k.left+=e,k.bottom+=d,k.right+=e,Tn(this,k)}this.Qa.Hj(a)};
f.du=function(a){a:{for(var b=a.cloneNode(!0),c=a.getElementsByTagName("textarea"),d=b.getElementsByTagName("textarea"),e=0;e<c.length;e++)d[e].value=c[e].value;switch(a.tagName.toLowerCase()){case "tr":a=Q("table",null,Q("tbody",null,b));break a;case "td":case "th":a=Q("table",null,Q("tbody",null,Q("tr",null,b)));break a;case "textarea":b.value=a.value;default:a=b}}this.MG&&Ol(a,this.MG);return a};f.Tq=function(){return this.Qa};
function Tn(a,b){if(1==a.Rm.length)a.Fi=new jj(b.top,b.right,b.bottom,b.left);else{var c=a.Fi;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}f.f=function(){Nn.d.f.call(this);Qn(this)};function Rn(a,b,c,d,e,h,k,l,n,p,m){Dc.call(this,a);this.Kq=c;this.im=e;this.clientX=k;this.clientY=l;this.FM=m}w(Rn,Dc);Rn.prototype.f=function(){};
function Un(a,b){ad.call(this);this.element=Vh(a);this.data=b;this.$a=null;this.Kc=new Wj(this);Ac(this,va(Bc,this.Kc));if(!this.element)throw Error("Invalid argument");}w(Un,ad);f=Un.prototype;f.kj=null;f.Cg=function(a){if(Kc(a)){var b=a.target;b&&(this.Kc.D(b,"mousemove",this.FB,!1).D(b,"mouseout",this.FB,!1),this.Kc.D(Th(b),"mouseup",this.jK,!0),this.kj=b,this.Rw=new Ph(a.clientX,a.clientY),a.preventDefault())}};f.kp=function(a){this.$a=a};
f.FB=function(a){var b=this.kj,b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.Rw.x)+Math.abs(a.clientY-this.Rw.y)||b)this.Kc.Gg(),this.$a.wp(a,this)};f.jK=function(){this.Kc.Gg();delete this.Rw;this.kj=null};function Sn(a,b,c,d){this.Hc=a;this.ml=b;this.qi=c;this.q=d}Sn.prototype.$o=null;function Vn(a,b){this.type=a;this.currentTarget=this.target=b||null}f=Vn.prototype;f.Eg=!1;f.defaultPrevented=!1;f.Yo=!0;f.stopPropagation=function(){this.Eg=!0};f.preventDefault=function(){this.defaultPrevented=!0;this.Yo=!1};
function Wn(a){a=new Vn("click",a);a.button=0;var b=void 0;if(!b&&a.target&&1==a.target.nodeType)try{b=Dj(a.target)}catch(c){}a.clientX=b?b.x:0;a.clientY=b?b.y:0;a.screenX=a.clientX;a.screenY=a.clientY;a.Yo=!0;for(var b=[],d=a.target;d;d=d.parentNode)b.push(d);for(d=b.length-1;0<=d&&!a.Eg;d--){var e=b[d],h=a.type,k=new Hc(a,b[d]);ib(e)?bd(e,h,!0,k):Yc(e,h,!0,k)}for(d=0;d<b.length&&!a.Eg;d++)e=b[d],h=a.type,k=new Hc(a,b[d]),ib(e)?bd(e,h,!1,k):Yc(e,h,!1,k)};function Xn(a,b){if(!a)throw Error("Invalid class name "+a);if(!la(b))throw Error("Invalid decorator function "+b);Yn[a]=b}var Zn={},Yn={};function $n(){}var ao;ga($n);var bo={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=$n.prototype;f.kh=function(){};f.B=function(a){var b=a.O().B("div",this.Jk(a).join(" "),a.getContent());co(this,a,b);return b};f.La=function(a){return a};f.Gk=function(a,b,c){if(a=a.a?a.a():a){var d=[b];F&&!qc("7")&&(d=eo(Ml(a),b),d.push(b));(c?Pl:Rl)(a,d)}};f.We=function(){return!0};
f.Pb=function(a,b){b.id&&ek(a,b.id);var c=this.La(b);c&&c.firstChild?fo(a,c.firstChild.nextSibling?Ob(c.childNodes):c.firstChild):a.Wc=null;var d=0,e=this.ba(),h=this.ba(),k=!1,l=!1,c=!1,n=Ob(Ml(b));E(n,function(a){k||a!=e?l||a!=h?d|=this.Nu(a):l=!0:(k=!0,h==e&&(l=!0))},this);a.U=d;k||(n.push(e),h==e&&(l=!0));l||n.push(h);var p=a.qg;p&&n.push.apply(n,p);if(F&&!qc("7")){var m=eo(n);0<m.length&&(n.push.apply(n,m),c=!0)}if(!k||!l||p||c)b.className=n.join(" ");co(this,a,b);return b};
f.Am=function(a){a.bf()&&this.Nm(a.a(),!0);a.isEnabled()&&this.Nj(a,a.ya())};function go(a,b,c){if(a=c||a.kh())c=b.getAttribute("role")||null,a!=c&&Jl(b,a)}function co(a,b,c){b.ya()||Kl(c,"hidden",!b.ya());b.isEnabled()||a.Gh(c,1,!b.isEnabled());ho(b,8)&&a.Gh(c,8,!!(b.U&8));ho(b,16)&&a.Gh(c,16,b.ph());ho(b,64)&&a.Gh(c,64,!!(b.U&64))}f.cp=function(a,b){Pj(a,!b,!F&&!hc)};f.Nm=function(a,b){this.Gk(a,this.ba()+"-rtl",b)};f.pi=function(a){var b;return ho(a,32)&&(b=a.zc())?ti(b)&&ui(b):!1};
f.Nj=function(a,b){var c;if(ho(a,32)&&(c=a.zc())){if(!b&&a.U&32){try{c.blur()}catch(d){}a.U&32&&a.Ok(null)}(ti(c)&&ui(c))!=b&&si(c,b)}};f.ea=function(a,b){Mj(a,b);a&&Kl(a,"hidden",!b)};f.Cc=function(a,b,c){var d=a.a();if(d){var e=this.Zn(b);e&&this.Gk(a,e,c);this.Gh(d,b,c)}};f.Gh=function(a,b,c){ao||(ao={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=ao[b];var d=a.getAttribute("role")||null;d&&(d=bo[d]||b,b="checked"==b||"selected"==b?d:b);b&&Kl(a,b,c)};
f.ll=function(a,b){var c=this.La(a);if(c&&(gi(c),b))if(r(b))pi(c,b);else{var d=function(a){if(a){var b=Th(c);c.appendChild(r(a)?b.createTextNode(a):a)}};g(b)?E(b,d):!ia(b)||"nodeType"in b?d(b):E(Ob(b),d)}};f.zc=function(a){return a.a()};f.ba=function(){return"goog-control"};f.Jk=function(a){var b=this.ba(),c=[b],d=this.ba();d!=b&&c.push(d);b=a.rm();for(d=[];b;){var e=b&-b;d.push(this.Zn(e));b&=~e}c.push.apply(c,d);(a=a.qg)&&c.push.apply(c,a);F&&!qc("7")&&c.push.apply(c,eo(c));return c};
function eo(a,b){var c=[];b&&(a=a.concat([b]));E([],function(d){!Gb(d,va(Jb,a))||b&&!Jb(d,b)||c.push(d.join("_"))});return c}f.Zn=function(a){this.xq||io(this);return this.xq[a]};f.Nu=function(a){if(!this.qD){this.xq||io(this);var b=this.xq,c={},d;for(d in b)c[b[d]]=d;this.qD=c}a=parseInt(this.qD[a],10);return isNaN(a)?0:a};function io(a){var b=a.ba();b.replace(/\xa0|\s/g," ");a.xq={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function jo(a,b){ad.call(this);a&&this.am(a,b)}w(jo,ad);f=jo.prototype;f.q=null;f.yr=null;f.jv=null;f.zr=null;f.cf=-1;f.Gj=-1;f.Kt=!1;
var ko={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},lo={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},mo=F||jc&&qc("525"),no=dc&&ic;f=jo.prototype;
f.dr=function(a){jc&&(17==this.cf&&!a.ctrlKey||18==this.cf&&!a.altKey||dc&&91==this.cf&&!a.metaKey)&&(this.Gj=this.cf=-1);-1==this.cf&&(a.ctrlKey&&17!=a.keyCode?this.cf=17:a.altKey&&18!=a.keyCode?this.cf=18:a.metaKey&&91!=a.keyCode&&(this.cf=91));mo&&!Ul(a.keyCode,this.cf,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Gj=Wl(a.keyCode),no&&(this.Kt=a.altKey))};f.eJ=function(a){this.Gj=this.cf=-1;this.Kt=a.altKey};
f.handleEvent=function(a){var b=a.Yc,c,d,e=b.altKey;F&&"keypress"==a.type?(c=this.Gj,d=13!=c&&27!=c?b.keyCode:0):jc&&"keypress"==a.type?(c=this.Gj,d=0<=b.charCode&&63232>b.charCode&&Vl(c)?b.charCode:0):hc?(c=this.Gj,d=Vl(c)?b.keyCode:0):(c=b.keyCode||this.Gj,d=b.charCode||0,no&&(e=this.Kt),dc&&63==d&&224==c&&(c=191));var h=c=Wl(c),k=b.keyIdentifier;c?63232<=c&&c in ko?h=ko[c]:25==c&&a.shiftKey&&(h=9):k&&k in lo&&(h=lo[k]);a=h==this.cf;this.cf=h;b=new oo(h,d,a,b);b.altKey=e;this.dispatchEvent(b)};
f.a=function(){return this.q};f.am=function(a,b){this.zr&&this.detach();this.q=a;this.yr=G(this.q,"keypress",this,b);this.jv=G(this.q,"keydown",this.dr,b,this);this.zr=G(this.q,"keyup",this.eJ,b,this)};f.detach=function(){this.yr&&(Wc(this.yr),Wc(this.jv),Wc(this.zr),this.zr=this.jv=this.yr=null);this.q=null;this.Gj=this.cf=-1};f.f=function(){jo.d.f.call(this);this.detach()};function oo(a,b,c,d){Hc.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}w(oo,Hc);function po(a,b,c){ak.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=na(b);if(d=Zn[d])break;b=b.d?b.d.constructor:null}b=d?la(d.ye)?d.ye():new d:null}this.za=b;this.Wc=da(a)?a:null}w(po,ak);f=po.prototype;f.Wc=null;f.U=0;f.Bp=39;f.Fn=255;f.yp=0;f.Qc=!0;f.qg=null;f.Qk=!0;f.qq=!1;f.ow=null;f.jp=function(a){this.oa&&a!=this.Qk&&qo(this,a);this.Qk=a};f.zc=function(){return this.za.zc(this)};f.Wq=function(){return this.yb||(this.yb=new jo)};f.Ya=function(){return this.za};
f.Gk=function(a,b){b?a&&(this.qg?Jb(this.qg,a)||this.qg.push(a):this.qg=[a],this.za.Gk(this,a,!0)):a&&this.qg&&Mb(this.qg,a)&&(0==this.qg.length&&(this.qg=null),this.za.Gk(this,a,!1))};f.B=function(){var a=this.za.B(this);this.q=a;go(this.za,a,this.wj());this.qq||this.za.cp(a,!1);this.ya()||this.za.ea(a,!1)};f.wj=function(){return this.ow};f.La=function(){return this.za.La(this.a())};f.We=function(a){return this.za.We(a)};
f.ue=function(a){this.q=a=this.za.Pb(this,a);go(this.za,a,this.wj());this.qq||this.za.cp(a,!1);this.Qc="none"!=a.style.display};f.mb=function(){po.d.mb.call(this);this.za.Am(this);if(this.Bp&-2&&(this.Qk&&qo(this,!0),ho(this,32))){var a=this.zc();if(a){var b=this.Wq();b.am(a);this.nb().D(b,"key",this.mh).D(a,"focus",this.Pk).D(a,"blur",this.Ok)}}};
function qo(a,b){var c=a.nb(),d=a.a();b?(c.D(d,"mouseover",a.Rk).D(d,"mousedown",a.nh).D(d,"mouseup",a.vg).D(d,"mouseout",a.fr),a.io!=fa&&c.D(d,"contextmenu",a.io),F&&c.D(d,"dblclick",a.PA)):(c.Bb(d,"mouseover",a.Rk).Bb(d,"mousedown",a.nh).Bb(d,"mouseup",a.vg).Bb(d,"mouseout",a.fr),a.io!=fa&&c.Bb(d,"contextmenu",a.io),F&&c.Bb(d,"dblclick",a.PA))}f.Lc=function(){po.d.Lc.call(this);this.yb&&this.yb.detach();this.ya()&&this.isEnabled()&&this.za.Nj(this,!1)};
f.f=function(){po.d.f.call(this);this.yb&&(this.yb.g(),delete this.yb);delete this.za;this.qg=this.Wc=null};f.getContent=function(){return this.Wc};f.ll=function(a){this.za.ll(this.a(),a);this.Wc=a};function fo(a,b){a.Wc=b}f.Rq=function(){var a=this.getContent();if(!a)return"";a=r(a)?a:g(a)?Eb(a,xi).join(""):vi(a);return Ha(a)};f.Nm=function(a){po.d.Nm.call(this,a);var b=this.a();b&&this.za.Nm(b,a)};f.cp=function(a){this.qq=a;var b=this.a();b&&this.za.cp(b,a)};f.ya=function(){return this.Qc};
f.ea=function(a,b){if(b||this.Qc!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.za.ea(c,a);this.isEnabled()&&this.za.Nj(this,a);this.Qc=a;return!0}return!1};f.isEnabled=function(){return!(this.U&1)};f.Rb=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!ro(this,1,!a)||(a||(this.setActive(!1),this.Ig(!1)),this.ya()&&this.za.Nj(this,a),this.Cc(1,!a))};f.Ig=function(a){ro(this,2,a)&&this.Cc(2,a)};f.oh=function(){return!!(this.U&4)};
f.setActive=function(a){ro(this,4,a)&&this.Cc(4,a)};f.np=function(a){ro(this,8,a)&&this.Cc(8,a)};f.ph=function(){return!!(this.U&16)};f.Kd=function(a){ro(this,16,a)&&this.Cc(16,a)};f.nc=function(a){ro(this,64,a)&&this.Cc(64,a)};f.rm=function(){return this.U};f.Cc=function(a,b){ho(this,a)&&b!=!!(this.U&a)&&(this.za.Cc(this,a,b),this.U=b?this.U|a:this.U&~a)};function ho(a,b){return!!(a.Bp&b)}
f.td=function(a,b){if(this.oa&&this.U&a&&!b)throw Error("Component already rendered");!b&&this.U&a&&this.Cc(a,!1);this.Bp=b?this.Bp|a:this.Bp&~a};function so(a,b){return!!(a.Fn&b)&&ho(a,b)}function ro(a,b,c){return ho(a,b)&&!!(a.U&b)!=c&&(!(a.yp&b)||a.dispatchEvent(ck(b,c)))&&!a.Bk}f.Rk=function(a){(!a.relatedTarget||!oi(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&so(this,2)&&this.Ig(!0)};
f.fr=function(a){a.relatedTarget&&oi(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(so(this,4)&&this.setActive(!1),so(this,2)&&this.Ig(!1))};f.io=fa;f.nh=function(a){this.isEnabled()&&(so(this,2)&&this.Ig(!0),Kc(a)&&(so(this,4)&&this.setActive(!0),this.za.pi(this)&&this.zc().focus()));!this.qq&&Kc(a)&&a.preventDefault()};f.vg=function(a){this.isEnabled()&&(so(this,2)&&this.Ig(!0),this.oh()&&this.el(a)&&so(this,4)&&this.setActive(!1))};f.PA=function(a){this.isEnabled()&&this.el(a)};
f.el=function(a){so(this,16)&&this.Kd(!this.ph());so(this,8)&&this.np(!0);so(this,64)&&this.nc(!(this.U&64));var b=new Dc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.lw=a.lw);return this.dispatchEvent(b)};f.Pk=function(){so(this,32)&&ro(this,32,!0)&&this.Cc(32,!0)};f.Ok=function(){so(this,4)&&this.setActive(!1);so(this,32)&&ro(this,32,!1)&&this.Cc(32,!1)};
f.mh=function(a){return this.ya()&&this.isEnabled()&&this.ug(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.ug=function(a){return 13==a.keyCode&&this.el(a)};if(!la(po))throw Error("Invalid component class "+po);if(!la($n))throw Error("Invalid renderer class "+$n);var to=na(po);Zn[to]=$n;Xn("goog-control",function(){return new po(null)});function uo(){this.iz=[]}w(uo,$n);ga(uo);function vo(a,b){var c=a.iz[b];if(!c){switch(b){case 0:c=a.ba()+"-highlight";break;case 1:c=a.ba()+"-checkbox";break;case 2:c=a.ba()+"-content"}a.iz[b]=c}return c}f=uo.prototype;f.kh=function(){return"menuitem"};f.B=function(a){var b=a.O().B("div",this.Jk(a).join(" "),wo(this,a.getContent(),a.O()));xo(this,a,b,ho(a,8)||ho(a,16));return b};f.La=function(a){return a&&a.firstChild};
f.Pb=function(a,b){var c=ki(b),d=vo(this,2);c&&Nl(c,d)||b.appendChild(wo(this,b.childNodes,a.O()));Nl(b,"goog-option")&&(a.ts(!0),this.ts(a,b,!0));return uo.d.Pb.call(this,a,b)};f.ll=function(a,b){var c=this.La(a),d=yo(this,a)?c.firstChild:null;uo.d.ll.call(this,a,b);d&&!yo(this,a)&&c.insertBefore(d,c.firstChild||null)};function wo(a,b,c){a=vo(a,2);return c.B("div",a,b)}f.RC=function(a,b,c){a&&b&&xo(this,a,b,c)};f.ts=function(a,b,c){a&&b&&xo(this,a,b,c)};
function yo(a,b){var c=a.La(b);if(c){var c=c.firstChild,d=vo(a,1);return!!c&&ni(c)&&Nl(c,d)}return!1}function xo(a,b,c,d){go(a,c,b.wj());co(a,b,c);d!=yo(a,c)&&(Sl(c,"goog-option",d),c=a.La(c),d?(a=vo(a,1),c.insertBefore(b.O().B("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}f.Zn=function(a){switch(a){case 2:return vo(this,0);case 16:case 8:return"goog-option-selected";default:return uo.d.Zn.call(this,a)}};
f.Nu=function(a){var b=vo(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return uo.d.Nu.call(this,a)}};f.ba=function(){return"goog-menuitem"};function zo(a,b,c,d){po.call(this,a,d||uo.ye(),c);this.C(b)}w(zo,po);f=zo.prototype;f.w=function(){var a=this.Cv;return null!=a?a:this.Rq()};f.C=function(a){this.Cv=a};f.td=function(a,b){zo.d.td.call(this,a,b);switch(a){case 8:this.ph()&&!b&&this.Kd(!1);var c=this.a();c&&this.Ya().RC(this,c,b);break;case 16:(c=this.a())&&this.Ya().ts(this,c,b)}};f.RC=function(a){this.td(8,a)};f.ts=function(a){this.td(16,a)};
f.Rq=function(){var a=this.getContent();return g(a)?(a=Eb(a,function(a){return ni(a)&&(Nl(a,"goog-menuitem-accel")||Nl(a,"goog-menuitem-mnemonic-separator"))?"":xi(a)}).join(""),Ha(a)):zo.d.Rq.call(this)};f.vg=function(a){var b=this.getParent();if(b){var c=b.aC;b.aC=null;if(b=c&&u(a.clientX))b=new Ph(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}zo.d.vg.call(this,a)};f.ug=function(a){return a.keyCode==this.EB&&this.el(a)?!0:zo.d.ug.call(this,a)};f.bI=function(){return this.EB};
Xn("goog-menuitem",function(){return new zo(null)});zo.prototype.wj=function(){return ho(this,16)?"menuitemcheckbox":ho(this,8)?"menuitemradio":zo.d.wj.call(this)};function Ao(a){this.Yy=a}ga(Ao);f=Ao.prototype;f.kh=function(){return this.Yy};function Bo(a,b){a&&(a.tabIndex=b?0:-1)}f.B=function(a){return a.O().B("div",this.Jk(a).join(" "))};f.La=function(a){return a};f.We=function(a){return"DIV"==a.tagName};f.Pb=function(a,b){b.id&&ek(a,b.id);var c=this.ba(),d=!1,e=Ml(b);e&&E(e,function(b){b==c?d=!0:b&&(b==c+"-disabled"?a.Rb(!1):b==c+"-horizontal"?a.Ci(Co):b==c+"-vertical"&&a.Ci(Do))},this);d||Ol(b,c);Eo(this,a,this.La(b));return b};
function Eo(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var h=a.Fu(d);h&&(h.q=d,b.isEnabled()||h.Rb(!1),b.Dn(h),h.Pb(d))}else d.nodeValue&&""!=Ia(d.nodeValue)||c.removeChild(d);d=e}}f.Fu=function(a){a:{var b;a=Ml(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Yn?Yn[b]():null){a=b;break a}a=null}return a};f.Am=function(a){a=a.a();Pj(a,!0,ic);F&&(a.hideFocus=!0);var b=this.kh();b&&Jl(a,b)};f.zc=function(a){return a.a()};f.ba=function(){return"goog-container"};
f.Jk=function(a){var b=this.ba(),c=[b,a.ac()==Co?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};function Fo(){}w(Fo,$n);ga(Fo);Fo.prototype.B=function(a){return a.O().B("div",this.ba())};Fo.prototype.Pb=function(a,b){b.id&&ek(a,b.id);if("HR"==b.tagName){var c=b;b=this.B(a);hi(b,c);S(c)}else Ol(b,this.ba());return b};Fo.prototype.ll=function(){};Fo.prototype.ba=function(){return"goog-menuseparator"};function Go(a,b){po.call(this,null,a||Fo.ye(),b);this.td(1,!1);this.td(2,!1);this.td(4,!1);this.td(32,!1);this.U=1}w(Go,po);Go.prototype.mb=function(){Go.d.mb.call(this);Jl(this.a(),"separator")};Xn("goog-menuseparator",function(){return new Go});function Ho(a){this.Yy=a||"menu"}w(Ho,Ao);ga(Ho);f=Ho.prototype;f.We=function(a){return"UL"==a.tagName||Ho.d.We.call(this,a)};f.Fu=function(a){return"HR"==a.tagName?new Go:Ho.d.Fu.call(this,a)};f.wk=function(a,b){return oi(a.a(),b)};f.ba=function(){return"goog-menu"};f.Am=function(a){Ho.d.Am.call(this,a);Kl(a.a(),"haspopup","true")};function Io(a,b,c,d,e,h,k,l,n){var p,m;if(p=c.offsetParent){var q="HTML"==p.tagName||"BODY"==p.tagName;q&&"static"==sj(p)||(m=Aj(p),q||(q=(q=Bj(p))&&ic?-p.scrollLeft:!q||F&&qc("8")||"visible"==rj(p,"overflowX")?p.scrollLeft:p.scrollWidth-p.clientWidth-p.scrollLeft,m=Qh(m,new Ph(q,p.scrollTop))))}p=m||new Ph;m=Kj(a);(q=zj(a))&&m.kB(new kj(q.left,q.top,q.right-q.left,q.bottom-q.top));var q=Rh(a),t=Rh(c);if(q.na!=t.na){var s=q.na.body,t=Di(t),z=new Ph(0,0),y=ci(Th(s)),I=s;do{var P=y==t?Aj(I):Ej(I);z.x+=
P.x;z.y+=P.y}while(y&&y!=t&&(I=y.frameElement)&&(y=y.parent));s=Qh(z,Aj(s));F&&!Ci(q)&&(s=Qh(s,Ei(q)));m.left+=s.x;m.top+=s.y}a=Jo(a,b);b=new Ph(a&2?m.left+m.width:m.left,a&1?m.top+m.height:m.top);b=Qh(b,p);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var N;if(k)if(n)N=n;else if(N=zj(c))N.top-=p.y,N.right-=p.x,N.bottom-=p.y,N.left-=p.x;return Ko(b,c,d,h,N,k,l)}
function Ko(a,b,c,d,e,h,k){a=a.clone();var l=0,n=Jo(b,c);c=U(b);k=k?k.clone():c.clone();if(d||0!=n)n&2?a.x-=k.width+(d?d.right:0):d&&(a.x+=d.left),n&1?a.y-=k.height+(d?d.bottom:0):d&&(a.y+=d.top);if(h&&(e?(l=a,d=0,65==(h&65)&&(l.x<e.left||l.x>=e.right)&&(h&=-2),132==(h&132)&&(l.y<e.top||l.y>=e.bottom)&&(h&=-5),l.x<e.left&&h&1&&(l.x=e.left,d|=1),l.x<e.left&&l.x+k.width>e.right&&h&16&&(k.width=Math.max(k.width-(l.x+k.width-e.right),0),d|=4),l.x+k.width>e.right&&h&1&&(l.x=Math.max(e.right-k.width,e.left),
d|=1),h&2&&(d=d|(l.x<e.left?16:0)|(l.x+k.width>e.right?32:0)),l.y<e.top&&h&4&&(l.y=e.top,d|=2),l.y<=e.top&&l.y+k.height<e.bottom&&h&32&&(k.height=Math.max(k.height-(e.top-l.y),0),l.y=e.top,d|=8),l.y>=e.top&&l.y+k.height>e.bottom&&h&32&&(k.height=Math.max(k.height-(l.y+k.height-e.bottom),0),d|=8),l.y+k.height>e.bottom&&h&4&&(l.y=Math.max(e.bottom-k.height,e.top),d|=2),h&8&&(d=d|(l.y<e.top?64:0)|(l.y+k.height>e.bottom?128:0)),l=d):l=256,l&496))return l;tj(b,a);jh(c,k)||(e=Ci(Rh(Th(b))),!F||e&&qc("8")?
(b=b.style,ic?b.MozBoxSizing="border-box":jc?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(k.width,0)+"px",b.height=Math.max(k.height,0)+"px"):(a=b.style,e?(e=Sj(b,"padding"),b=Vj(b),a.pixelWidth=k.width-b.left-e.left-e.right-b.right,a.pixelHeight=k.height-b.top-e.top-e.bottom-b.bottom):(a.pixelWidth=k.width,a.pixelHeight=k.height)));return l}function Jo(a,b){return(b&4&&Bj(a)?b^2:b)&-5};var Lo,Mo;Mo=Lo=!1;var No=Vb;No&&(-1!=No.indexOf("Firefox")||-1!=No.indexOf("Camino")||(-1!=No.indexOf("iPhone")||-1!=No.indexOf("iPod")?Lo=!0:-1!=No.indexOf("iPad")&&(Mo=!0)));var Oo=Lo,Po=Mo;Xn("goog-menuseparator",function(){return new Go});function Qo(a,b,c){ak.call(this,c);this.za=b||Ao.ye();this.Na=a||Do}w(Qo,ak);var Co="horizontal",Do="vertical";f=Qo.prototype;f.kv=null;f.yb=null;f.za=null;f.Na=null;f.Qc=!0;f.Zb=!0;f.zu=!0;f.af=-1;f.Nc=null;f.ti=!1;f.bG=!1;f.JL=!0;f.ci=null;f.zc=function(){return this.kv||this.za.zc(this)};f.Wq=function(){return this.yb||(this.yb=new jo(this.zc()))};f.Ya=function(){return this.za};f.B=function(){this.q=this.za.B(this)};f.La=function(){return this.za.La(this.a())};f.We=function(a){return this.za.We(a)};
f.ue=function(a){this.q=this.za.Pb(this,a);"none"==a.style.display&&(this.Qc=!1)};f.mb=function(){Qo.d.mb.call(this);gk(this,function(a){a.oa&&Ro(this,a)},this);var a=this.a();this.za.Am(this);this.ea(this.Qc,!0);this.nb().D(this,"enter",this.Uu).D(this,"highlight",this.Vu).D(this,"unhighlight",this.Wu).D(this,"open",this.iJ).D(this,"close",this.$I).D(a,"mousedown",this.nh).D(Th(a),"mouseup",this.bJ).D(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.ZI);this.pi()&&So(this,!0)};
function So(a,b){var c=a.nb(),d=a.zc();b?c.D(d,"focus",a.Pk).D(d,"blur",a.Ok).D(a.Wq(),"key",a.mh):c.Bb(d,"focus",a.Pk).Bb(d,"blur",a.Ok).Bb(a.Wq(),"key",a.mh)}f.Lc=function(){this.Bh(-1);this.Nc&&this.Nc.nc(!1);this.ti=!1;Qo.d.Lc.call(this)};f.f=function(){Qo.d.f.call(this);this.yb&&(this.yb.g(),this.yb=null);this.za=this.Nc=this.ci=this.kv=null};f.Uu=function(){return!0};
f.Vu=function(a){var b=jk(this,a.target);if(-1<b&&b!=this.af){var c=To(this);c&&c.Ig(!1);this.af=b;c=To(this);this.ti&&c.setActive(!0);this.JL&&this.Nc&&c!=this.Nc&&(ho(c,64)?c.nc(!0):this.Nc.nc(!1))}b=this.a();null!=a.target.a()&&Kl(b,"activedescendant",a.target.a().id)};f.Wu=function(a){a.target==To(this)&&(this.af=-1);this.a().removeAttribute("aria-activedescendant")};f.iJ=function(a){(a=a.target)&&a!=this.Nc&&a.getParent()==this&&(this.Nc&&this.Nc.nc(!1),this.Nc=a)};
f.$I=function(a){a.target==this.Nc&&(this.Nc=null)};f.nh=function(a){this.Zb&&(this.ti=!0);var b=this.zc();b&&ti(b)&&ui(b)?b.focus():a.preventDefault()};f.bJ=function(){this.ti=!1};f.ZI=function(a){var b;a:{b=a.target;if(this.ci)for(var c=this.a();b&&b!==c;){var d=b.id;if(d in this.ci){b=this.ci[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.nh(a);break;case "mouseup":b.vg(a);break;case "mouseover":b.Rk(a);break;case "mouseout":b.fr(a);break;case "contextmenu":b.io(a)}};
f.Pk=function(){};f.Ok=function(){this.Bh(-1);this.ti=!1;this.Nc&&this.Nc.nc(!1)};f.mh=function(a){return this.isEnabled()&&this.ya()&&(0!=hk(this)||this.kv)&&this.ug(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
f.ug=function(a){var b=To(this);if(b&&"function"==typeof b.mh&&b.mh(a)||this.Nc&&this.Nc!=b&&"function"==typeof this.Nc.mh&&this.Nc.mh(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.pi())this.zc().blur();else return!1;break;case 36:Uo(this);break;case 35:Vo(this);break;case 38:if(this.Na==Do)Wo(this);else return!1;break;case 37:if(this.Na==Co)this.bf()?Xo(this):Wo(this);else return!1;break;case 40:if(this.Na==Do)Xo(this);else return!1;break;case 39:if(this.Na==
Co)this.bf()?Wo(this):Xo(this);else return!1;break;default:return!1}return!0};function Ro(a,b){var c=b.a(),c=c.id||(c.id=dk(b));a.ci||(a.ci={});a.ci[c]=b}f.Dn=function(a,b){Qo.d.Dn.call(this,a,b)};f.Ft=function(a,b,c){a.yp|=2;a.yp|=64;!this.pi()&&this.bG||a.td(32,!1);a.jp(!1);Qo.d.Ft.call(this,a,b,c);a.oa&&this.oa&&Ro(this,a);b<=this.af&&this.af++};
f.removeChild=function(a,b){if(a=r(a)?fk(this,a):a){var c=jk(this,a);-1!=c&&(c==this.af?(a.Ig(!1),this.af=-1):c<this.af&&this.af--);(c=a.a())&&c.id&&this.ci&&ub(this.ci,c.id)}a=Qo.d.removeChild.call(this,a,b);a.jp(!0);return a};f.ac=function(){return this.Na};f.Ci=function(a){if(this.a())throw Error("Component already rendered");this.Na=a};f.ya=function(){return this.Qc};
f.ea=function(a,b){if(b||this.Qc!=a&&this.dispatchEvent(a?"show":"hide")){this.Qc=a;var c=this.a();c&&(Mj(c,a),this.pi()&&Bo(this.zc(),this.Zb&&this.Qc),b||this.dispatchEvent(this.Qc?"aftershow":"afterhide"));return!0}return!1};f.isEnabled=function(){return this.Zb};
f.Rb=function(a){this.Zb!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Zb=!0,gk(this,function(a){a.OD?delete a.OD:a.Rb(!0)})):(gk(this,function(a){a.isEnabled()?a.Rb(!1):a.OD=!0}),this.ti=this.Zb=!1),this.pi()&&Bo(this.zc(),a&&this.Qc))};f.pi=function(){return this.zu};f.Nj=function(a){a!=this.zu&&this.oa&&So(this,a);this.zu=a;this.Zb&&this.Qc&&Bo(this.zc(),a)};f.Bh=function(a){(a=ik(this,a))?a.Ig(!0):-1<this.af&&To(this).Ig(!1)};f.Ig=function(a){this.Bh(jk(this,a))};
function To(a){return ik(a,a.af)}function Uo(a){Yo(a,function(a,c){return(a+1)%c},hk(a)-1)}function Vo(a){Yo(a,function(a,c){a--;return 0>a?c-1:a},0)}function Xo(a){Yo(a,function(a,c){return(a+1)%c},a.af)}function Wo(a){Yo(a,function(a,c){a--;return 0>a?c-1:a},a.af)}function Yo(a,b,c){c=0>c?jk(a,a.Nc):c;var d=hk(a);c=b.call(a,c,d);for(var e=0;e<=d;){var h=ik(a,c);if(h&&a.gz(h)){a.Bh(c);break}e++;c=b.call(a,c,d)}}f.gz=function(a){return a.ya()&&a.isEnabled()&&ho(a,2)};function Zo(){}w(Zo,$n);ga(Zo);Zo.prototype.ba=function(){return"goog-menuheader"};function $o(a,b,c){po.call(this,a,c||Zo.ye(),b);this.td(1,!1);this.td(2,!1);this.td(4,!1);this.td(32,!1);this.U=1}w($o,po);Xn("goog-menuheader",function(){return new $o(null)});function ap(a,b){Qo.call(this,Do,b||Ho.ye(),a);this.Nj(!1)}w(ap,Qo);f=ap.prototype;f.Jt=!0;f.cG=!1;f.ba=function(){return this.Ya().ba()};f.wk=function(a){if(this.Ya().wk(this,a))return!0;for(var b=0,c=hk(this);b<c;b++){var d=ik(this,b);if("function"==typeof d.wk&&d.wk(a))return!0}return!1};f.qk=function(a){this.Dn(a,!0)};
f.Fw=function(a,b){var c=this.ya();c||Mj(this.a(),!0);var d=this.a(),e=a,h=b,k=Aj(d);e instanceof Ph&&(h=e.y,e=e.x);tj(d,d.offsetLeft+(e-k.x),d.offsetTop+(h-k.y));c||Mj(this.a(),!1)};f.ea=function(a,b,c){(b=ap.d.ea.call(this,a,b))&&a&&this.oa&&this.Jt&&this.zc().focus();this.aC=a&&c&&u(c.clientX)?new Ph(c.clientX,c.clientY):null;return b};f.Uu=function(a){this.Jt&&this.zc().focus();return ap.d.Uu.call(this,a)};f.gz=function(a){return(this.cG||a.isEnabled())&&a.ya()&&ho(a,2)};
f.ue=function(a){var b=this.Ya(),c;c=this.O();c=Xh(c.na,"div",b.ba()+"-content",a);for(var d=c.length,e=0;e<d;e++)Eo(b,this,c[e]);ap.d.ue.call(this,a)};f.ug=function(a){var b=ap.d.ug.call(this,a);b||gk(this,function(c){!b&&c.bI&&c.EB==a.keyCode&&(this.isEnabled()&&this.Ig(c),b=c.mh(a))},this);return b};
f.Bh=function(a){ap.d.Bh.call(this,a);var b=ik(this,a);if(b){a=this.a();var b=b.a(),c=Aj(b),d=Aj(a),e=Vj(a),h=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,k=a.scrollTop,e=e+Math.min(h,Math.max(h-(a.clientWidth-b.offsetWidth),0)),k=k+Math.min(c,Math.max(c-d,0)),b=new Ph(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function bp(){}bp.prototype.Fe=function(){};function cp(a,b,c){this.element=a;this.Nn=b;this.KL=c}w(cp,bp);cp.prototype.Fe=function(a,b,c){Io(this.element,this.Nn,a,b,void 0,c,this.KL)};function dp(a,b,c,d){cp.call(this,a,b);this.Br=c?5:0;this.iw=d||void 0}w(dp,cp);dp.prototype.OH=function(){return this.Br};dp.prototype.Fe=function(a,b,c,d){var e=Io(this.element,this.Nn,a,b,null,c,10,d,this.iw);if(e&496){var h=ep(e,this.Nn);b=ep(e,b);e=Io(this.element,h,a,b,null,c,10,d,this.iw);e&496&&(h=ep(e,h),b=ep(e,b),Io(this.element,h,a,b,null,c,this.Br,d,this.iw))}};function ep(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function fp(a,b,c,d){dp.call(this,a,b,c||d);if(c||d)this.Br=65|(d?32:132)}w(fp,dp);function gp(){}w(gp,$n);ga(gp);f=gp.prototype;f.kh=function(){return"button"};f.Gh=function(a,b,c){switch(b){case 8:case 16:Kl(a,"pressed",c);break;default:case 64:case 1:gp.d.Gh.call(this,a,b,c)}};f.B=function(a){var b=gp.d.B.call(this,a);this.As(b,a.ho());var c=a.w();c&&this.C(b,c);ho(a,16)&&this.Gh(b,16,a.ph());return b};f.Pb=function(a,b){b=gp.d.Pb.call(this,a,b);var c=this.w(b);a.bd=c;a.cx=this.ho(b);ho(a,16)&&this.Gh(b,16,a.ph());return b};f.w=fa;f.C=fa;f.ho=function(a){return a.title};
f.As=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.dp=function(a,b){var c=a.bf(),d=this.ba()+"-collapse-left",e=this.ba()+"-collapse-right";a.Gk(c?e:d,!!(b&1));a.Gk(c?d:e,!!(b&2))};f.ba=function(){return"goog-button"};function hp(){}w(hp,gp);ga(hp);f=hp.prototype;f.kh=function(){};f.B=function(a){a.jp(!1);a.Fn&=-256;a.td(32,!1);return a.O().B("button",{"class":this.Jk(a).join(" "),disabled:!a.isEnabled(),title:a.ho()||"",value:a.w()||""},a.Rq()||"")};f.We=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.Pb=function(a,b){a.jp(!1);a.Fn&=-256;a.td(32,!1);if(b.disabled){var c=this.Zn(1);Ol(b,c)}return hp.d.Pb.call(this,a,b)};
f.Am=function(a){a.nb().D(a.a(),"click",a.el)};f.cp=fa;f.Nm=fa;f.pi=function(a){return a.isEnabled()};f.Nj=fa;f.Cc=function(a,b,c){hp.d.Cc.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.w=function(a){return a.value};f.C=function(a,b){a&&(a.value=b)};f.Gh=fa;function ip(a,b,c){po.call(this,a,b||hp.ye(),c)}w(ip,po);f=ip.prototype;f.w=function(){return this.bd};f.C=function(a){this.bd=a;this.Ya().C(this.a(),a)};f.ho=function(){return this.cx};f.As=function(a){this.cx=a;this.Ya().As(this.a(),a)};f.dp=function(a){this.Ya().dp(this,a)};f.f=function(){ip.d.f.call(this);delete this.bd;delete this.cx};f.mb=function(){ip.d.mb.call(this);if(ho(this,32)){var a=this.zc();a&&this.nb().D(a,"keyup",this.ug)}};
f.ug=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.el(a):32==a.keyCode};Xn("goog-button",function(){return new ip(null)});function jp(){}w(jp,gp);ga(jp);f=jp.prototype;f.B=function(a){var b={"class":"goog-inline-block "+this.Jk(a).join(" ")},b=a.O().B("div",b,this.Aq(a.getContent(),a.O()));this.As(b,a.ho());co(this,a,b);return b};f.kh=function(){return"button"};f.La=function(a){return a&&a.firstChild.firstChild};f.Aq=function(a,b){return b.B("div","goog-inline-block "+(this.ba()+"-outer-box"),b.B("div","goog-inline-block "+(this.ba()+"-inner-box"),a))};f.We=function(a){return"DIV"==a.tagName};
f.Pb=function(a,b){kp(b,!0);kp(b,!1);var c;a:{c=a.O().jA(b);var d=this.ba()+"-outer-box";if(c&&Nl(c,d)&&(c=a.O().jA(c),d=this.ba()+"-inner-box",c&&Nl(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.Aq(b.childNodes,a.O()));Pl(b,["goog-inline-block",this.ba()]);return jp.d.Pb.call(this,a,b)};f.ba=function(){return"goog-custom-button"};
function kp(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ia(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function lp(){}w(lp,jp);ga(lp);f=lp.prototype;f.La=function(a){return lp.d.La.call(this,a&&a.firstChild)};f.Pb=function(a,b){var c=Xh(document,"*","goog-menu",b)[0];if(c){Mj(c,!1);Th(c).body.appendChild(c);var d=new ap;d.Pb(c);mp(a,d)}return lp.d.Pb.call(this,a,b)};f.Aq=function(a,b){return lp.d.Aq.call(this,[this.createCaption(a,b),b.B("div","goog-inline-block "+(this.ba()+"-dropdown"),"\u00a0")],b)};f.createCaption=function(a,b){return b.B("div","goog-inline-block "+(this.ba()+"-caption"),a)};
f.ba=function(){return"goog-menu-button"};function np(a,b,c,d,e){ip.call(this,a,c||lp.ye(),d);this.td(64,!0);this.Hr=new fp(null,5);b&&mp(this,b);this.bK=null;this.P=new Yf(500);!Oo&&!Po||qc("533.17.9")||(this.tr=!0);this.cK=e||Ho.ye()}w(np,ip);f=np.prototype;f.tr=!1;f.XL=!1;f.mb=function(){np.d.mb.call(this);op(this,!0);this.W&&pp(this,this.W,!0);Kl(this.q,"haspopup",!!this.W)};f.Lc=function(){np.d.Lc.call(this);op(this,!1);if(this.W){this.nc(!1);this.W.Lc();pp(this,this.W,!1);var a=this.W.a();a&&S(a)}};
f.f=function(){np.d.f.call(this);this.W&&(this.W.g(),delete this.W);delete this.PL;this.P.g()};f.nh=function(a){np.d.nh.call(this,a);this.oh()&&(this.nc(!(this.U&64),a),this.W&&(this.W.ti=!!(this.U&64)))};f.vg=function(a){np.d.vg.call(this,a);this.W&&!this.oh()&&(this.W.ti=!1)};f.el=function(){this.setActive(!1);return!0};f.aJ=function(a){this.W&&this.W.ya()&&!this.wk(a.target)&&this.nc(!1)};f.wk=function(a){return a&&oi(this.a(),a)||this.W&&this.W.wk(a)||!1};
f.ug=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.W&&this.W.ya()){var b=this.W.mh(a);return 27==a.keyCode?(this.nc(!1),!0):b}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.nc(!0,a),!0):!1};f.fJ=function(){this.nc(!1)};f.gJ=function(){this.oh()||this.nc(!1)};f.Ok=function(a){this.tr||this.nc(!1);np.d.Ok.call(this,a)};f.Ku=function(){this.W||mp(this,new ap(this.O(),this.cK));return this.W||null};
function mp(a,b){var c=a.W;b!=c&&(c&&(a.nc(!1),a.oa&&pp(a,c,!1),delete a.W),a.oa&&Kl(a.q,"haspopup",!!b),b&&(a.W=b,b.kp(a),b.ea(!1),c=a.tr,(b.Jt=c)&&b.Nj(!0),a.oa&&pp(a,b,!0)))}f.qk=function(a){this.Ku().Dn(a,!0)};f.ea=function(a,b){var c=np.d.ea.call(this,a,b);c&&!this.ya()&&this.nc(!1);return c};f.Rb=function(a){np.d.Rb.call(this,a);this.isEnabled()||this.nc(!1)};f.Hw=function(){this.nc(!0)};f.ko=function(){this.nc(!1)};
f.nc=function(a,b){np.d.nc.call(this,a);if(this.W&&!!(this.U&64)==a){if(a){if(!this.W.oa)if(this.XL){var c=mi(this.a());c?this.W.yh(c.parentNode,c):this.W.k(this.a().parentNode)}else this.W.k();this.LD=zj(this.a());this.ez=Kj(this.a());qp(this);this.W.Bh(!b||40!=b.keyCode&&38!=b.keyCode?-1:0)}else{this.setActive(!1);this.W.ti=!1;if(c=this.a())Kl(c,"activedescendant",""),Kl(c,"owns","");null!=this.Yr&&(this.Yr=void 0,(c=this.W.a())&&Gj(c,"",""))}this.W.ea(a,!1,b);if(!this.Bk){var c=this.nb(),d=a?c.D:
c.Bb;d.call(c,Bi(this.O()),"mousedown",this.aJ,!0);this.tr&&d.call(c,this.W,"blur",this.gJ);d.call(c,this.P,Zf,this.qL);a?this.P.start():this.P.stop()}}};function qp(a){if(a.W.oa){var b=a.Hr;a.Hr.element=a.PL||a.a();var c=a.W.a();a.W.ya()||(c.style.visibility="hidden",Mj(c,!0));!a.Yr&&a.Hr.OH&&a.Hr.Br&32&&(a.Yr=U(c));b.Fe(c,b.Nn^1,a.bK,a.Yr);a.W.ya()||(Mj(c,!1),c.style.visibility="visible")}}
f.qL=function(){var a=Kj(this.a()),b=zj(this.a()),c=this.ez;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.LD,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.ez=a,this.LD=b,qp(this))};function pp(a,b,c){var d=a.nb();c=c?d.D:d.Bb;c.call(d,b,"action",a.fJ);c.call(d,b,"highlight",a.Vu);c.call(d,b,"unhighlight",a.Wu)}function op(a,b){var c=a.nb();(b?c.D:c.Bb).call(c,a.a(),"keydown",a.dJ)}
f.Vu=function(a){var b=this.a();if(a=a.target.a()){var c=Ll(a,"activedescendant");a=Th(a).getElementById(c)||a;a.id||(c=Zj.ye(),a.id=":"+(c.OB++).toString(36));c="";a&&(c=a.id);Kl(b,"activedescendant",c);Kl(b,"owns",a.id)}};f.dJ=function(a){ho(this,32)&&this.zc()&&this.W&&this.W.ya()&&a.stopPropagation()};f.Wu=function(){if(!To(this.W)){var a=this.a();Kl(a,"activedescendant","");Kl(a,"owns","")}};Xn("goog-menu-button",function(){return new np(null)});function rp(){V.call(this);this.Ae=Q("div",{id:this.constructor.ID_PREFIX+"_Holder_"+B(),"class":rp.CSS.HE});R(this.a(),this.Ae);this.Dj=Q("img",{id:this.constructor.ID_PREFIX+"_Icon_"+B(),"class":rp.CSS.tb});R(this.a(),this.Dj);this.W=new ap;this.kd=new Sk;this.Wd=[];sp(this);this.ko(void 0,0);this.W.k(this.Ae);O(this.W.a(),rp.CSS.GE)}w(rp,V);v("nrg.ui.SlideInMenu",rp);rp.ID_PREFIX="nrg.ui.SlideInMenu";
rp.CSS_SUFFIX={tb:"icon",KN:"icon-hovered",GE:"menu",HE:"menuholder",JE:"menuitem",Kx:"menuitem-highlight",KE:"menuitem-icon"};var tp={Xs:null,Jh:null,tb:null};function up(a,b,c,d){d=da(d)?d:200;return[new Nk(a,d),new Hk(a,b,c,d,fl)]}function vp(a,b,c,d){d=da(d)?d:200;return[new Mk(a,d),new Hk(a,b,c,d,fl)]}f=rp.prototype;f.Ac=null;f.dC=null;f.Rn=null;f.Gm=!1;f.lo=[-100,-100];f.sp=[0,0];f.zv=!0;f.Av=!1;f.EC=function(a,b){return this.lo=[a,b]};f.UC=function(a,b){return this.sp=[a,b]};f.GH=function(){return this.lo};
f.vI=function(){return this.sp};f.Ku=function(){return this.W};f.XH=function(){return this.Ae};f.YH=function(){return this.Dj};f.JC=function(a){this.Dj.src=a};f.mM=function(a,b){this.Ac[a].tb.src=b};f.nA=function(a){return qb(this.Ac).indexOf(a)};f.Pu=function(a){return qb(this.Ac)[a]};f.Iu=function(a){return this.Ac[qb(this.Ac)[a]]};f.AB=function(a){return this.zv=a};f.ZJ=function(a){return this.Av=a};f.tI=function(){return this.Rn};
function wp(a){null!=a.kd&&(a.kd.stop(),E(a.Wd,function(a){this.kd.remove(a);a.g()}.bind(a)),Kb(a.Wd))}function xp(a,b,c){wp(a);E(g(b)?b:[b],function(a){this.kd.add(a);this.Wd.push(a)}.bind(a));a.Ae.style.visibility="visible";Uc(a.kd,"end",function(){c&&c()}.bind(a));a.kd.play()}f.om=null;f.Gq=null;f.yC=function(a){this.Gq=a;this.a().title=a};function yp(a){null!=a.om&&(ba.clearTimeout(a.om),a.om=null);a.om=$f(function(){this.om=null;this.Gm&&(!this.Ev&&this.Gm?this.ko():yp(this))}.bind(a),450)}
f.Bh=function(a){O(this.Ac[this.Pu(a)].Jh,rp.CSS.Kx);this.zv&&(this.Dj.src=this.Ac[this.Pu(a)].tb.src);this.Av?this.a().title=this.Iu(a).Xs.getContent():null!=this.Gq&&(this.a().title=this.Gq)};f.Fz=function(){C(this.Ac,function(a){Hh(a.Jh,rp.CSS.Kx)}.bind(this))};
f.Dy=function(a,b){null==this.Ac&&(this.Ac={});a=r(a)?[a]:a;b=b||[];b=g(b)?b:[b];var c=null,d=null,e=null;E(a,function(a,k){if(this.Ac[a])throw Error(a+" is already in use!");c=new zo(a);this.W.qk(c);d=c.La();O(d,rp.CSS.JE);d.title=a;e=Q("img",{id:rp.ID_PREFIX+"_MenuItemIcon_"+B(),"class":rp.CSS.KE});e.src=k<=b.length-1?b[k]:null;R(d,e);this.Ac[a]=wb(tp);this.Ac[a].Xs=c;this.Ac[a].Jh=d;this.Ac[a].tb=e}.bind(this))};
f.np=function(a,b){var c=a?a:5;if(r(c)){if(!this.Ac[c])throw Error(c+" does not exist!");c=this.nA(c)}this.dC=this.Rn?this.Rn:a;this.Rn=a;da(b)&&!b||this.Fz();this.Bh(c);this.dispatchEvent({type:"item_selected",index:c,title:this.Iu(c).Xs.getContent()})};f.Hw=function(a,b){xp(this,up(this.Ae,this.lo,this.sp,b),function(){this.Gm=!0;null!=a&&a()}.bind(this))};f.ko=function(a,b){xp(this,vp(this.Ae,this.sp,this.lo,b),function(){this.Gm=!1;this.Ae.style.visibility="hidden";da(a)&&a()}.bind(this))};
function sp(a){G(a.a(),"click",function(){this.Gm?this.ko():this.Hw()}.bind(a));G(a.W,"action",function(a){this.np(a.target.getContent())}.bind(a));G(a.Ae,"mouseover",function(){this.Ev=!0}.bind(a));G(a.Ae,"mouseout",function(){this.Ev=!1;yp(this)}.bind(a))}
f.f=function(){rp.d.f.call(this);delete this.Ev;delete this.om;wp(this);Kb(this.Wd);delete this.Wd;C(this.Ac,function(a,b){J(a);S(a);delete this.Ac[b]}.bind(this));D(this.Ac);delete this.Ac;S(this.Ae);delete this.Ae;S(this.Dj);delete this.Dj;J(this.W);this.W.g();this.Iq(this.kd);delete this.kd;delete this.Gq;delete this.dC;delete this.Rn;delete this.Gm;delete this.lo;delete this.sp;delete this.zv;delete this.Av};v("nrg.ui.SlideInMenu.ID_PREFIX",rp.ID_PREFIX);v("nrg.ui.SlideInMenu.EventType",{PN:"item_selected"});
v("nrg.ui.SlideInMenu.CSS_SUFFIX",rp.CSS_SUFFIX);v("nrg.ui.SlideInMenu.menuItemCollection",tp);v("nrg.ui.SlideInMenu.FADE_OUT_COUNTDOWN",450);v("nrg.ui.SlideInMenu.ANIM_LEN_IN",200);v("nrg.ui.SlideInMenu.ANIM_LEN_OUT",200);v("nrg.ui.SlideInMenu.MOUSEOUT_HIDE",1E3);v("nrg.ui.SlideInMenu.prototype.setHidePosition",rp.prototype.EC);v("nrg.ui.SlideInMenu.prototype.setShowPosition",rp.prototype.UC);v("nrg.ui.SlideInMenu.prototype.getHidePosition",rp.prototype.GH);
v("nrg.ui.SlideInMenu.prototype.getShowPosition",rp.prototype.vI);v("nrg.ui.SlideInMenu.prototype.getMenu",rp.prototype.Ku);v("nrg.ui.SlideInMenu.prototype.getMenuHolder",rp.prototype.XH);v("nrg.ui.SlideInMenu.prototype.getMenuIcon",rp.prototype.YH);v("nrg.ui.SlideInMenu.prototype.setMenuIconSrc",rp.prototype.JC);v("nrg.ui.SlideInMenu.prototype.setMenuItemIconSrc",rp.prototype.mM);v("nrg.ui.SlideInMenu.prototype.getIndexFromTitle",rp.prototype.nA);
v("nrg.ui.SlideInMenu.prototype.getTitleFromIndex",rp.prototype.Pu);v("nrg.ui.SlideInMenu.prototype.getItemCollectionFromIndex",rp.prototype.Iu);v("nrg.ui.SlideInMenu.prototype.matchMenuIconToSelected",rp.prototype.AB);v("nrg.ui.SlideInMenu.prototype.matchMenuTitleToSelected",rp.prototype.ZJ);v("nrg.ui.SlideInMenu.prototype.getSelectedMenuItem",rp.prototype.tI);v("nrg.ui.SlideInMenu.prototype.setHighlightedIndex",rp.prototype.Bh);v("nrg.ui.SlideInMenu.prototype.deselectAll",rp.prototype.Fz);
v("nrg.ui.SlideInMenu.prototype.addMenuItem",rp.prototype.Dy);v("nrg.ui.SlideInMenu.prototype.setSelected",rp.prototype.np);v("nrg.ui.SlideInMenu.prototype.showMenu",rp.prototype.Hw);v("nrg.ui.SlideInMenu.prototype.hideMenu",rp.prototype.ko);v("nrg.ui.SlideInMenu.prototype.setDefaultTitle",rp.prototype.yC);v("nrg.ui.SlideInMenu.prototype.disposeInternal",rp.prototype.f);function zp(){V.call(this)}w(zp,V);v("nrg.ui.HoverInput",zp);zp.ID_PREFIX="nrg.ui.HoverInput";zp.CSS_SUFFIX={xE:"inputbox",ON:"inputbox-hovered",tx:"display"};f=zp.prototype;f.Jc=null;f.fa=null;f.xJ=!1;f.Zb=!0;f.pu="";f.Rb=function(a){this.Zb=a};f.C=function(a){null!=this.fa&&(this.fa.value=a,this.Og())};f.w=function(){if(null!=this.fa)return parseInt(this.fa.value)};f.Lb=function(a){null!=this.fa&&(this.fa.max=a,this.Og())};f.T=function(){if(null!=this.fa)return this.fa.max};
f.Sb=function(a){null!=this.fa&&(this.fa.min=a,this.Og())};f.ja=function(){if(null!=this.fa)return this.fa.min};f.Oc=function(a){null!=this.fa&&(this.fa.step=a,this.Og())};f.Gd=function(){if(null!=this.fa)return this.fa.step};f.LH=function(){return this.fa};f.sH=function(){return this.Jc};f.Ty="right";f.AC=function(a){a=a.toLowerCase();if("right"==a||"left"==a)this.Ty=a;else throw Error("Invalid alignment: "+a);};
f.pq=function(){this.Jc.style.left="right"==this.Ty?"calc(100% - "+U(this.Jc).width.toString()+"px)":"0px"};f.Og=function(){this.Jc.innerHTML=this.fa.value.toString()+this.pu;this.pq()};f.TB=function(a){this.Zb&&(this.fa.value=parseInt(a.target.value),this.dispatchEvent({type:"h",value:this.fa.value}),this.Og())};
f.k=function(a){zp.d.k.call(this,a);this.Jc=Q("div");this.a().appendChild(this.Jc);O(this.Jc,zp.CSS.tx);this.fa=Q("input");this.fa.type="number";this.fa.step=1;this.fa.min=0;this.fa.max=100;this.fa.value=100;this.a().appendChild(this.fa);O(this.fa,zp.CSS.xE);G(this.fa,"input",this.TB.bind(this));this.Og()};f.gp=function(a){this.pu=a};f.f=function(){zp.d.f.call(this);delete this.xJ;delete this.Zb;delete this.pu;this.fa&&(J(this.fa),S(this.fa),delete this.fa);this.Jc&&(J(this.Jc),S(this.Jc),delete this.Jc)};
v("nrg.ui.HoverInput.EventType",{NN:"h",tx:"i"});v("nrg.ui.HoverInput.ID_PREFIX",zp.ID_PREFIX);v("nrg.ui.HoverInput.CSS_SUFFIX",zp.CSS_SUFFIX);v("nrg.ui.HoverInput.prototype.displayElt",zp.prototype.Jc);v("nrg.ui.HoverInput.prototype.inputBox",zp.prototype.fa);v("nrg.ui.HoverInput.prototype.alignDisplayElement",zp.prototype.pq);v("nrg.ui.HoverInput.prototype.setDisplayAlignment",zp.prototype.AC);v("nrg.ui.HoverInput.prototype.getValue",zp.prototype.w);v("nrg.ui.HoverInput.prototype.setValue",zp.prototype.C);
v("nrg.ui.HoverInput.prototype.setStep",zp.prototype.Oc);v("nrg.ui.HoverInput.prototype.getStep",zp.prototype.Gd);v("nrg.ui.HoverInput.prototype.setMaximum",zp.prototype.Lb);v("nrg.ui.HoverInput.prototype.getMaximum",zp.prototype.T);v("nrg.ui.HoverInput.prototype.setMinimum",zp.prototype.Sb);v("nrg.ui.HoverInput.prototype.getMinimum",zp.prototype.ja);v("nrg.ui.HoverInput.prototype.updateValue",zp.prototype.Og);v("nrg.ui.HoverInput.prototype.onInput",zp.prototype.TB);
v("nrg.ui.HoverInput.prototype.getInputElement",zp.prototype.LH);v("nrg.ui.HoverInput.prototype.getDisplayElement",zp.prototype.sH);v("nrg.ui.HoverInput.prototype.setDisplaySuffix",zp.prototype.gp);v("nrg.ui.HoverInput.prototype.render",zp.prototype.k);v("nrg.ui.HoverInput.prototype.disposeInternal",zp.prototype.f);function Ap(a,b){ad.call(this);this.q=a;var c=ni(this.q)?this.q:this.q?this.q.body:null;this.JJ=!!c&&Bj(c);this.sB=G(this.q,ic?"DOMMouseScroll":"mousewheel",this,b)}w(Ap,ad);
Ap.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Yc;if("mousewheel"==a.type){c=1;if(F||jc&&(ec||qc("532.0")))c=40;d=Bp(-a.wheelDelta,c);da(a.wheelDeltaX)?(b=Bp(-a.wheelDeltaX,c),c=Bp(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),da(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;u(this.BB)&&(b=id(b,-this.BB,this.BB));u(this.CB)&&(c=id(c,-this.CB,this.CB));this.JJ&&(b=-b);b=new Cp(d,a,b,c);this.dispatchEvent(b)};function Bp(a,b){return jc&&(dc||fc)&&0!=a%b?a:a/b}
Ap.prototype.f=function(){Ap.d.f.call(this);Wc(this.sB);this.sB=null};function Cp(a,b,c,d){Hc.call(this,b);this.type="mousewheel";this.detail=a;this.ei=c;this.Zd=d}w(Cp,Hc);function Dp(a){cd.call(this);this.u="interactor";this.Se=a;this.qt=this.ky=this.jy=this.ly=this.iy=this.my=null;this.eq=!0;this.Yi=this.Si=this.Zg=!1;this.fd=[0,0];this.kt=new A.S(0,0,0);this.gn=new A.S(0,0,0);this.pB=0;this.sy=this.aq=null;this.zt=!1;this.Cb={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}w(Dp,cd);Dp.prototype.__defineGetter__("config",function(){return this.Cb});
Dp.prototype.__defineGetter__("leftButtonDown",function(){return this.Zg});Dp.prototype.__defineGetter__("middleButtonDown",function(){return this.Si});Dp.prototype.__defineGetter__("rightButtonDown",function(){return this.Yi});
Dp.prototype.xa=function(){this.Cb.MOUSEWHEEL_ENABLED?(this.qt=new Ap(this.Se),this.my=G(this.qt,"mousewheel",this.No.bind(this))):(Wc(this.my),this.qt=null);this.Cb.MOUSECLICKS_ENABLED?(this.iy=G(this.Se,"mousedown",this.$v.bind(this)),this.ly=G(this.Se,"mouseup",this.aw.bind(this))):(Wc(this.iy),Wc(this.ly));this.Se.oncontextmenu=this.Cb.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.Cb.KEYBOARD_ENABLED?this.wi.bind(this):null;this.Cb.TOUCH_ENABLED?(this.Cb.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.QF=G(this.Se,"touchstart",this.zL.bind(this)),this.PF=G(this.Se,"touchmove",this.xL.bind(this)),this.OF=G(this.Se,"touchend",this.tL.bind(this))):(Wc(this.QF),Wc(this.PF),Wc(this.OF));Wc(this.jy);Wc(this.ky);this.jy=G(this.Se,"mousemove",this.UK.bind(this));this.ky=G(this.Se,"mouseout",this.VK.bind(this))};
Dp.prototype.$v=function(a){0==a.button?this.Zg=!0:1==a.button?this.Si=!0:2==a.button&&(this.Yi=!0);eval("this.onMouseDown("+this.Zg+","+this.Si+","+this.Yi+")");Ep(this);a.preventDefault()};Dp.prototype.RK=function(){};Dp.prototype.aw=function(a){0==a.button?this.Zg=!1:1==a.button?this.Si=!1:2==a.button&&(this.Yi=!1);eval("this.onMouseUp("+this.Zg+","+this.Si+","+this.Yi+")");Ep(this);a.preventDefault()};Dp.prototype.__defineGetter__("mousePosition",function(){return this.fd});f=Dp.prototype;
f.XK=function(){};f.VK=function(a){this.eq=!1;this.Cb.KEYBOARD_ENABLED&&(window.onkeydown=null);this.Yi=this.Si=this.Zg=!1;Ep(this);this.kt=new A.S(0,0,0);a.preventDefault()};f.TK=function(){};f.zL=function(a){a.preventDefault();a.xa(a.Yc.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.gn=new A.S(a.clientX,a.clientY,0);this.sy=setTimeout(this.vL.bind(this,a),500)};f.yL=function(){};
f.vL=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new te;a.Yg=!0;a.bg=this instanceof Fp;this.dispatchEvent(a);this.iq=!0};f.uL=function(){};function Gp(a){clearTimeout(a.sy);if(a.iq){var b=new te;b.Yg=!1;b.bg=a instanceof Fp;a.dispatchEvent(b)}a.iq=!1}f.tL=function(a){a.preventDefault();eval("this.onTouchEnd()");Gp(this)};f.sL=function(){};
f.xL=function(a){a.preventDefault();this.iq||Gp(this);this.touchmoveEvent=a=a.Yc;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new A.S(c[0],c[1],0);var b=c[0]>3*this.Se.clientWidth/4,d=c[0]<this.Se.clientWidth/4,e=c[1]<this.Se.clientHeight/4,c=c[1]>3*this.Se.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.gn.Pc(a);this.gn=a.clone();if(this.iq)a=new re,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.wd=e,this.dispatchEvent(a);
else if(this instanceof Hp&&(b||d))a=new ue,a.lc=0>e.y,this.dispatchEvent(a);else if(this instanceof Fp||c)e.scale(3),a=new se,a.wd=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new A.S(a[0],a[1],0),b=new A.S(b[0],b[1],0),e=sd(a,b),b=e-this.pB,this.pB=e,this.gn.Pc(a),this.gn=a.clone(),10<Math.abs(b)&&(a=new te,a.Yg=0<b,a.bg=this instanceof Fp,this.dispatchEvent(a)))};f.wL=function(){};
f.UK=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.eq=!0;this.Cb.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.wi.bind(this));a.preventDefault();var b=a.shiftKey;this.zt=b;this.fd=[a.offsetX,a.offsetY];var c=new A.S(this.fd[0],this.fd[1],0);a=this.kt.Pc(c);this.kt=c.clone();this.Cb.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Si||this.Zg||this.Yi)&&Ep(this),this.aq=setTimeout(function(){Ep(this);var a=new we;a.mq=c.x;a.nq=
c.y;this.dispatchEvent(a);this.aq=null}.bind(this),300));0!=a.Ag()&&(this.Zg&&!b?(b=new se,a.scale(3),b.wd=a,this.dispatchEvent(b)):this.Si||this.Zg&&b?(b=new re,b.wd=a,this.dispatchEvent(b)):this.Yi&&(b=new te,b.Yg=0<a.y,b.bg=!1,this.dispatchEvent(b)))};function Ep(a){a.aq&&clearTimeout(a.aq);a.dispatchEvent(new xe)}f.YK=function(){};f.No=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");Ep(this);a.preventDefault()};f.JK=function(){};
f.wi=function(a){if(this.eq){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");Ep(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,h=a.keyCode;82!=h||b||c||d||e?37<=h&&40>=h&&(a.preventDefault(),e?a=new re:b?a=new te:(a=new se,this instanceof Hp&&(a=new ue)),a&&(c=new A.S(0,0,0),37==h?(c.x=5,a.lc=!1,b&&(a.lc=!0,a.Yg=!0,a.bg=!1)):39==h?(c.x=-5,a.lc=!0,b&&(a.Yg=!1,a.bg=!1)):38==h?(c.y=5,a.lc=!0,b&&(a.Yg=!0,a.bg=!0)):40==h&&(c.y=-5,a.lc=!1,b&&(a.Yg=!1,a.bg=!0)),a.wd=c,this.dispatchEvent(a))):
(a.preventDefault(),a=new ye,this.dispatchEvent(a))}};v("X.interactor",Dp);v("X.interactor.prototype.init",Dp.prototype.xa);v("X.interactor.prototype.onMouseDown",Dp.prototype.RK);v("X.interactor.prototype.onMouseUp",Dp.prototype.XK);v("X.interactor.prototype.onMouseMove",Dp.prototype.TK);v("X.interactor.prototype.onMouseWheel",Dp.prototype.YK);v("X.interactor.prototype.onKey",Dp.prototype.JK);v("X.interactor.prototype.onTouchStart",Dp.prototype.yL);v("X.interactor.prototype.onTouchMove",Dp.prototype.wL);
v("X.interactor.prototype.onTouchEnd",Dp.prototype.sL);v("X.interactor.prototype.onTouchHover",Dp.prototype.uL);function Hp(a){Dp.call(this,a);this.u="interactor2D"}w(Hp,Dp);Hp.prototype.No=function(a){Hp.d.No.call(this,a);var b=new ue;null==a.Zd&&(a.Zd=0);b.lc=0>a.Zd;this.dispatchEvent(b)};function Ip(a,b){if(!u(a)||!u(b))throw Error("A camera needs valid width and height values.");cd.call(this);this.u="camera";this.ik=new A.S(0,100,0);this.Ll=new A.S(0,0,0);this.lc=new A.S(0,0,1);this.gb=a;this.Pa=b;this.Q=this.Er(this.ik,this.Ll)}w(Ip,cd);Ip.prototype.observe=function(a){if(!(null!=a&&a instanceof Dp))throw Error("Could not observe the interactor.");G(a,de,this.gL.bind(this));G(a,be,this.$K.bind(this));G(a,ee,this.IL.bind(this))};
Ip.prototype.gL=function(a){if(!(a instanceof se))throw Error("Received no valid rotate event.");this.rotate(a.wd)};Ip.prototype.IL=function(a){if(!(a instanceof te))throw Error("Received no valid zoom event.");a.Yg?this.Xm(a.bg):this.Ym(a.bg)};Ip.prototype.$K=function(a){if(!(a instanceof re))throw Error("Received no valid pan event.");this.Zr(a.wd)};Ip.prototype.__defineGetter__("view",function(){return this.Q});
Ip.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Float32Array))throw Error("Invalid view matrix.");this.Q=a});Ip.prototype.__defineGetter__("position",function(){return[this.ik.x,this.ik.y,this.ik.z]});Ip.prototype.__defineSetter__("position",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid position.");this.ik=new A.S(a[0],a[1],a[2]);this.reset()});Ip.prototype.__defineGetter__("focus",function(){return[this.Ll.x,this.Ll.y,this.Ll.z]});
Ip.prototype.__defineSetter__("focus",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid focus");this.Ll=new A.S(a[0],a[1],a[2]);this.reset()});Ip.prototype.__defineGetter__("up",function(){return[this.lc.x,this.lc.y,this.lc.z]});Ip.prototype.__defineSetter__("up",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid up vector.");this.lc=new A.S(a[0],a[1],a[2]);this.reset()});f=Ip.prototype;f.reset=function(){this.Q=this.Er(this.ik,this.Ll)};
f.rotate=function(a){if(g(a)&&2==a.length)a=new A.S(a[0],a[1],0);else if(!(a instanceof A.S))throw Error("Invalid distance vector for rotate operation.");return a};f.Zr=function(a){if(g(a)&&2==a.length)a=new A.S(a[0],a[1],0);else if(!(a instanceof A.S))throw Error("Invalid distance vector for pan operation.");this.Q[12]-=a.x;this.Q[13]+=a.y};f.Xm=function(a){var b=20;null!=a&&!a&&(b=1);this.Q[14]+=b};f.Ym=function(a){var b=20;null!=a&&!a&&(b=1);this.Q[14]-=b};
f.Er=function(a,b){if(!(a instanceof A.S&&b instanceof A.S))throw Error("3D vectors required for calculating the view.");return A.v.oo()};v("X.camera",Ip);v("X.camera.prototype.pan",Ip.prototype.Zr);v("X.camera.prototype.rotate",Ip.prototype.rotate);v("X.camera.prototype.zoomIn",Ip.prototype.Xm);v("X.camera.prototype.zoomOut",Ip.prototype.Ym);function Jp(a,b,c){this.of=this.nf=this.mf=0;3==arguments.length?(this.mf=Number(a),this.nf=Number(b),this.of=Number(c)):a instanceof Jp?(this.mf=Number(a.x()),this.nf=Number(a.y()),this.of=Number(a.z())):(this.mf=Number(a[0]),this.nf=Number(a[1]),this.of=Number(a[2]))}
Jp.prototype={clone:function(){return new Jp(this.mf,this.nf,this.of)},nj:function(a){return this.mf*a.x()+this.nf*a.y()+this.of*a.z()},Dr:function(a,b){return Kp(this,Lp(Mp(a,this),b))},length:function(){return Math.sqrt(this.nj(this))},zk:function(a){return new Jp(this.nf*a.z()-this.of*a.y(),this.of*a.x()-this.mf*a.z(),this.mf*a.y()-this.nf*a.x())},x:function(){return this.mf},y:function(){return this.nf},z:function(){return this.of}};
function Np(a){var b=a.length();return new Jp(a.mf/b,a.nf/b,a.of/b)}function Lp(a,b){return new Jp(a.mf*b,a.nf*b,a.of*b)}function Mp(a,b){return new Jp(a.mf-b.x(),a.nf-b.y(),a.of-b.z())}function Kp(a,b){return new Jp(a.mf+b.x(),a.nf+b.y(),a.of+b.z())}function Op(a){return new Jp(-a.mf,-a.nf,-a.of)};function Pp(a,b){this.mw=new Jp(a);this.sd=new Jp(b)}Pp.prototype={clone:function(){return new Pp(this.mw.clone(),this.sd.clone())},Ik:function(){this.sd=Op(this.sd)},Ee:function(){return this.mw}};function Qp(a,b){this.sd=a;this.Np=b}Qp.prototype={clone:function(){return new Qp(this.sd.clone(),this.Np)},Ik:function(){this.sd=Op(this.sd);this.Np=-this.Np}};function Rp(a,b){this.Hi=a;this.Bs=b;var c=a[0].Ee(),d=a[1].Ee(),e=a[2].Ee(),d=Np(Mp(d,c).zk(Mp(e,c)));this.hf=new Qp(d,d.nj(c))}Rp.prototype={clone:function(){var a=this.Hi.map(function(a){return a.clone()});return new Rp(a,this.Bs)},Ik:function(){this.Hi.reverse().map(function(a){a.Ik()});this.hf.Ik()}};
function Sp(a,b,c,d,e,h){for(var k=0,l=[],n=0;n<a.Hi.length;n++){var p=b.sd.nj(a.Hi[n].Ee())-b.Np,p=-1E-5>p?2:1E-5<p?1:0,k=k|p;l.push(p)}switch(k){case 0:(0<b.sd.nj(a.hf.sd)?c:d).push(a);break;case 1:e.push(a);break;case 2:h.push(a);break;case 3:c=[];d=[];for(n=0;n<a.Hi.length;n++){var m=(n+1)%a.Hi.length,p=l[n],q=l[m],k=a.Hi[n],m=a.Hi[m];2!=p&&c.push(k);1!=p&&d.push(2!=p?k.clone():k);3==(p|q)&&(p=(b.Np-b.sd.nj(k.Ee()))/b.sd.nj(Mp(m.Ee(),k.Ee())),p=new Pp(k.mw.Dr(m.Ee(),p),k.sd.Dr(m.sd,p)),c.push(p),
d.push(p.clone()))}3<=c.length&&e.push(new Rp(c,a.Bs));3<=d.length&&h.push(new Rp(d,a.Bs))}};function Tp(a){this.hb=this.bb=this.hf=null;this.Qb=[];a&&Up(this,a)}Tp.prototype={clone:function(){var a=new Tp;Vp(a,this.hf&&this.hf.clone());Wp(a,this.bb&&this.bb.clone());Xp(a,this.hb&&this.hb.clone());a.xs(this.Qb.map(function(a){return a.clone()}));return a},Ib:function(){for(var a=0;a<this.Qb.length;a++)this.Qb[a].Ik();this.hf.Ik();this.bb&&this.bb.Ib();this.hb&&this.hb.Ib();a=this.bb;this.bb=this.hb;this.hb=a},xs:function(a){this.Qb=a}};function Xp(a,b){a.hb=b}function Wp(a,b){a.bb=b}
function Vp(a,b){a.hf=b}function Up(a,b){if(b.length){a.hf||(a.hf=b[0].hf.clone());for(var c=[],d=[],e=0;e<b.length;e++)Sp(b[e],a.hf,a.Qb,a.Qb,c,d);c.length&&(a.bb||(a.bb=new Tp),Up(a.bb,c));d.length&&(a.hb||(a.hb=new Tp),Up(a.hb,d))}}function Yp(a){var b=a.Qb.slice();a.bb&&(b=b.concat(Yp(a.bb)));a.hb&&(b=b.concat(Yp(a.hb)));return b}function Zp(a,b){a.Qb=$p(b,a.Qb);a.bb&&Zp(a.bb,b);a.hb&&Zp(a.hb,b)}
function $p(a,b){if(!a.hf)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Sp(b[e],a.hf,c,d,c,d);a.bb&&(c=$p(a.bb,c));d=a.hb?$p(a.hb,d):[];return c.concat(d)};function aq(){this.Qb=[]}function bq(a){var b=new aq;b.xs(a);return b}
aq.prototype={clone:function(){var a=new aq;a.xs(this.Qb.map(function(a){return a.clone()}));return a},gx:function(a){var b=new Tp(this.clone().Qb);a=new Tp(a.clone().Qb);Zp(b,a);Zp(a,b);a.Ib();Zp(a,b);a.Ib();Up(b,Yp(a));return bq(Yp(b))},Pc:function(a){var b=new Tp(this.clone().Qb);a=new Tp(a.clone().Qb);b.Ib();Zp(b,a);Zp(a,b);a.Ib();Zp(a,b);a.Ib();Up(b,Yp(a));b.Ib();return bq(Yp(b))},ev:function(a){var b=new Tp(this.clone().Qb);a=new Tp(a.clone().Qb);b.Ib();Zp(a,b);a.Ib();Zp(b,a);Zp(a,b);Up(b,Yp(a));
b.Ib();return bq(Yp(b))},inverse:function(){var a=this.clone();a.Qb.map(function(a){a.Ik()});return a},xs:function(a){this.Qb=a}};function cq(){}function dq(a){for(var b=a.G.count,c=[],d=0,d=0;d<b;d+=3){var e=a.G.get(d),h=a.G.get(d+1),k=a.G.get(d+2),l=a.ha.get(d),n=a.ha.get(d+1),p=a.ha.get(d+2),m=a.Oa;a.Uc&&0<a.Uc.length&&(m=a.Uc.get(d));var q=[];q.push(new Pp(e,l));q.push(new Pp(h,n));q.push(new Pp(k,p));c.push(new Rp(q,m))}return bq(c)}
function eq(a,b){if(!(null!=b&&b instanceof aq))throw Error("Invalid CSG object.");var c=new ed,d=[];Eb(b.Qb,function(a){var b=[],k=a.Bs,b=Eb(a.Hi,function(a){a.color=k;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.IF=Eb(c.unique(),function(a){return[a.Ee().x(),a.Ee().y(),a.Ee().z()]});a.HF=Eb(c.unique(),function(a){return[a.sd.x(),a.sd.y(),a.sd.z()]});a.GF=Eb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.G=new dd(9*d.length);
a.ha=new dd(9*d.length);a.Uc=new dd(9*d.length);Eb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.IF,n=this.HF,p=this.GF;this.G.add(d[b][0],d[b][1],d[b][2]);this.G.add(d[c][0],d[c][1],d[c][2]);this.G.add(d[a][0],d[a][1],d[a][2]);this.ha.add(n[b][0],n[b][1],n[b][2]);this.ha.add(n[c][0],n[c][1],n[c][2]);this.ha.add(n[a][0],n[a][1],n[a][2]);p[b]&&this.Uc.add(p[b][0],p[b][1],p[b][2]);p[c]&&this.Uc.add(p[c][0],p[c][1],p[c][2]);p[a]&&this.Uc.add(p[a][0],p[a][1],p[a][2])}.bind(a));0==a.Uc.Va&&(a.Uc=null);
a.Vd=Ud}cq.prototype.gx=function(a){if(null==a||!(a instanceof aq||a instanceof Xd))throw Error("Invalid object.");var b=a;a instanceof Xd&&(b=dq(b));a=new Xd;Aa(a,new cq);eq(a,dq(this).gx(b));return a};cq.prototype.Pc=function(a){if(null==a||!(a instanceof aq||a instanceof Xd))throw Error("Invalid object.");var b=a;a instanceof Xd&&(b=dq(b));a=new Xd;Aa(a,new cq);eq(a,dq(this).Pc(b));return a};
cq.prototype.ev=function(a){if(null==a||!(a instanceof aq||a instanceof Xd))throw Error("Invalid object.");var b=a;a instanceof Xd&&(b=dq(b));a=new Xd;Aa(a,new cq);eq(a,dq(this).ev(b));return a};cq.prototype.inverse=function(){var a=new Xd;Aa(a,new cq);eq(a,dq(this).inverse());return a};v("X.constructable",cq);v("X.constructable.prototype.intersect",cq.prototype.ev);v("X.constructable.prototype.inverse",cq.prototype.inverse);v("X.constructable.prototype.subtract",cq.prototype.Pc);
v("X.constructable.prototype.union",cq.prototype.gx);function fq(a){function b(a,b,d){b=b*Math.PI*2;b=Kp(Lp(n,Math.cos(b)),Lp(p,Math.sin(b)));a=Kp(Kp(c,Lp(e,a)),Lp(b,h));d=Kp(Lp(b,1-Math.abs(d)),Lp(k,d));return new Pp(a,d)}this.Qb=[];a=a||{};var c=new Jp(a.start||[0,-1,0]),d=new Jp(a.end||[0,1,0]),e=Mp(d,c),h=a.wh||1;a=a.ta||16;for(var k=Np(e),l=.5<Math.abs(k.y()),n=Np((new Jp(l,!l,0)).zk(k)),p=Np(n.zk(k)),l=new Pp(c,Op(k)),d=new Pp(d,Np(k)),m=[],q=0;q<a;q++){var t=q/a,s=(q+1)/a;m.push(new Rp([l,b(0,t,-1),b(0,s,-1)]));m.push(new Rp([b(0,s,0),b(0,t,
0),b(1,t,0),b(1,s,0)]));m.push(new Rp([d,b(1,s,1),b(1,t,1)]))}return bq(m)}w(fq,aq);function gq(){Xd.call(this);this.u="cylinder";this.Bt=[-10,-10,-10];this.it=[10,10,10];this.jk=10;this.jd=32;Aa(this,new cq)}w(gq,Xd);gq.prototype.__defineGetter__("start",function(){return this.Bt});gq.prototype.__defineSetter__("start",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid start");this.Bt=a});gq.prototype.__defineGetter__("end",function(){return this.it});gq.prototype.__defineSetter__("end",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid end");this.it=a});
gq.prototype.__defineGetter__("radius",function(){return this.jk});gq.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.jk=a});gq.prototype.ia=function(){eq(this,new fq({start:this.Bt,end:this.it,wh:this.jk,ta:this.jd}));gq.d.ia.call(this)};v("X.cylinder",gq);v("X.cylinder.prototype.modified",gq.prototype.ia);function hq(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new Jp(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));k.push(new Pp(Kp(c,Lp(e,d)),e))}this.Qb=[];a=a||{};var c=new Jp(a.Xd||[0,0,0]),d=a.wh||1,e=a.ta||16;a=a.CM||8;for(var h=[],k=[],l=0;l<e;l++)for(var n=0;n<a;n++)k=[],b(l/e,n/a),0<n&&b((l+1)/e,n/a),n<a-1&&b((l+1)/e,(n+1)/a),b(l/e,(n+1)/a),h.push(new Rp(k));return bq(h)}w(hq,aq);function iq(){Xd.call(this);this.u="sphere";this.ab=[0,0,0];this.jk=5;this.jd=32;this.NF=16;Aa(this,new cq)}w(iq,Xd);iq.prototype.__defineGetter__("center",function(){return this.ab});iq.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.ab=a});iq.prototype.__defineGetter__("radius",function(){return this.jk});iq.prototype.__defineSetter__("radius",function(a){if(!u(a))throw Error("Invalid radius.");this.jk=a});
iq.prototype.ia=function(){eq(this,new hq({Xd:this.ab,wh:this.jk,ta:this.jd,CM:this.NF}));iq.d.ia.call(this)};v("X.sphere",iq);v("X.sphere.prototype.modified",iq.prototype.ia);function Re(a){K.call(this);this.u="labelmap";this.Yh=a;this.At=new Float32Array([-255,-255,-255,-255])}w(Re,K);Re.prototype.ia=function(){var a=new Yd;a.Wa=this;this.dispatchEvent(a);this.Yh.ia()};Re.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];if(null!=a)if(g(a)&&4==a.length)b=a;else{if(!this.Sd)throw Error("No colortable assigned.");b=this.Sd.oe.get(a).slice(1,5)}this.At=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
v("X.labelmap",Re);function jq(a){this.Qb=[];a=a||{};var b=new Jp(a.Xd||[0,0,0]),c=a.wh?a.wh.length?a.wh:[a.wh,a.wh,a.wh]:[1,1,1];return bq([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Rp(a[0].map(function(e){e=new Jp(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new Pp(e,new Jp(a[1]))}))}))}w(jq,aq);function kq(){Xd.call(this);this.u="cube";this.ab=[0,0,0];this.nt=this.mt=this.lt=20;this.Xl=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Aa(this,new cq)}w(kq,Xd);kq.prototype.__defineGetter__("center",function(){return this.ab});kq.prototype.__defineSetter__("center",function(a){if(null==a||!g(a)||3!=a.length)throw Error("Invalid center");this.ab=a});kq.prototype.__defineGetter__("lengthX",function(){return this.lt});
kq.prototype.__defineSetter__("lengthX",function(a){if(!u(a))throw Error("Invalid lengthX.");this.lt=a});kq.prototype.__defineGetter__("lengthY",function(){return this.mt});kq.prototype.__defineSetter__("lengthY",function(a){if(!u(a))throw Error("Invalid lengthY.");this.mt=a});kq.prototype.__defineGetter__("lengthZ",function(){return this.nt});kq.prototype.__defineSetter__("lengthZ",function(a){if(!u(a))throw Error("Invalid lengthZ.");this.nt=a});
kq.prototype.ia=function(){eq(this,new jq({Xd:this.ab,wh:[this.lt/2,this.mt/2,this.nt/2]}));kq.d.ia.call(this)};v("X.cube",kq);v("X.cube.prototype.modified",kq.prototype.ia);function Fp(a){Dp.call(this,a);this.u="interactor3D"}w(Fp,Dp);Fp.prototype.No=function(a){Fp.d.No.call(this,a);var b=new te;null==a.Zd&&(a.Zd=0);b.Yg=0>a.Zd;b.bg=!0;this.dispatchEvent(b)};function lq(a){cd.call(this);this.u="array";this.kb=[];this.Zx=a}w(lq,cd);function mq(a,b,c){for(var d=0;4>d;d++)if(a[d+0]!==b[d+c])return!1;return!0}lq.prototype.add=function(a){this.kb.push(a);return!0};lq.prototype.remove=function(a){a=this.kb.indexOf(a);-1<a&&this.kb.splice(a,1);return!0};lq.prototype.clear=function(){this.kb.length=0};
function nq(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),nq(a,b,d),nq(a,d,c);b<d;++b)if(0<a.Zx(a.kb[b],a.kb[d])){var e=a.kb[b];a.kb[b]=a.kb[d];for(var h=a,k=d,l=c;k+1<l&&0>h.Zx(h.kb[k+1],e);){var n=h,p=k+1,m=n.kb[k];n.kb[k]=n.kb[p];n.kb[p]=m;++k}h.kb[k]=e}}lq.prototype.sort=function(){nq(this,0,this.kb.length)};function oq(a,b){Ip.call(this,a,b);this.u="camera2D"}w(oq,Ip);oq.prototype.rotate=function(a){a=oq.d.rotate.call(this,a);var b=new qe;0<a.x?b.Dt--:0>a.x&&b.Dt++;0<a.y?b.pt++:0>a.y&&b.pt--;this.dispatchEvent(b)};oq.prototype.Xm=function(a){var b=20;null!=a&&!a&&(b=.02);this.Q[14]+=b};oq.prototype.Ym=function(a){var b=20;null!=a&&!a&&(b=.02);this.Q[14]-=b};
oq.prototype.Zr=function(a){if(g(a)&&2==a.length)a=new A.S(a[0],a[1],0);else if(!(a instanceof A.S))throw Error("Invalid distance vector for pan operation.");this.Q[12]-=a.x/this.Q[14];this.Q[13]+=a.y/this.Q[14]};function pq(a,b){Ip.call(this,a,b);this.u="camera3D";this.by=45;this.ut=A.v.yv(A.v.oo(),this.by,a/b,1,1E4)}w(pq,Ip);pq.prototype.rotate=function(a){a=pq.d.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new A.S(this.Q[1],this.Q[5],this.Q[9]),d=new A.S(this.Q[0],this.Q[4],this.Q[8]);c.normalize();d.normalize();A.v.rotate(this.Q,b,c.x,c.y,c.z);A.v.rotate(this.Q,a,d.x,d.y,d.z)};pq.prototype.Er=function(a,b){var c=pq.d.Er.call(this,a,b);A.v.zB(c,a,b,this.lc);return c};
function qq(a,b,c,d){var e=new Float32Array(4),h=new Float32Array(4),k=new Float32Array(16),l=new Float32Array(16);new Float32Array(16);A.v.multiply(a.ut,a.Q,l);A.v.Ib(l,k);e[0]=b;e[1]=c;e[2]=2*d-1;e[3]=1;A.v.JB(k,e,h);h[3]=1/h[3];h[0]*=h[3];h[1]*=h[3];h[2]*=h[3];return h}v("X.camera3D",pq);function rq(){ad.call(this)}w(rq,ad);f=rq.prototype;f.bd=0;f.Bg=0;f.Lf=100;f.Ye=0;f.Di=1;f.Be=!1;f.$k=!1;f.C=function(a){a=sq(this,a);this.bd!=a&&(this.bd=a+this.Ye>this.Lf?this.Lf-this.Ye:a<this.Bg?this.Bg:a,this.Be||this.$k||this.dispatchEvent("change"))};f.w=function(){return sq(this,this.bd)};f.Of=function(a){a=sq(this,a);this.Ye!=a&&(this.Ye=0>a?0:this.bd+a>this.Lf?this.Lf-this.bd:a,this.Be||this.$k||this.dispatchEvent("change"))};
f.Ed=function(){var a=this.Ye;return null==this.Di?a:Math.round(a/this.Di)*this.Di};f.Sb=function(a){if(this.Bg!=a){var b=this.Be;this.Be=!0;this.Bg=a;a+this.Ye>this.Lf&&(this.Ye=this.Lf-this.Bg);a>this.bd&&this.C(a);a>this.Lf&&(this.Ye=0,this.Lb(a),this.C(a));(this.Be=b)||this.$k||this.dispatchEvent("change")}};f.ja=function(){return sq(this,this.Bg)};
f.Lb=function(a){a=sq(this,a);if(this.Lf!=a){var b=this.Be;this.Be=!0;this.Lf=a;a<this.bd+this.Ye&&this.C(a-this.Ye);a<this.Bg&&(this.Ye=0,this.Sb(a),this.C(this.Lf));a<this.Bg+this.Ye&&(this.Ye=this.Lf-this.Bg);(this.Be=b)||this.$k||this.dispatchEvent("change")}};f.T=function(){return sq(this,this.Lf)};f.Gd=function(){return this.Di};f.Oc=function(a){this.Di!=a&&(this.Di=a,a=this.Be,this.Be=!0,this.Lb(this.T()),this.Of(this.Ed()),this.C(this.w()),(this.Be=a)||this.$k||this.dispatchEvent("change"))};
function sq(a,b){return null==a.Di?b:a.Bg+Math.round((b-a.Bg)/a.Di)*a.Di};function tq(a){ak.call(this,a);this.xh=new rq;G(this.xh,"change",this.Su,!1,this)}w(tq,ak);var uq={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};f=tq.prototype;f.B=function(){this.kf=this.yk();var a=uq[this.Na];this.q=this.O().B("div",a,this.kf);vq(this);wq(this);xq(this)};f.mb=function(){tq.d.mb.call(this);F&&7>oc&&G(this.a(),"resize",this.Hh,!1,this);this.Hh();var a=this.a();Jl(a,"progressbar");Kl(a,"live","polite")};f.Lc=function(){tq.d.Lc.call(this);yq(this)};
f.yk=function(){return this.O().B("div","progress-bar-thumb")};function yq(a){F&&7>oc&&Vc(a.a(),"resize",a.Hh,!1,a)}f.ue=function(a){tq.d.ue.call(this,a);Ol(this.a(),uq[this.Na]);a=Xh(document,null,"progress-bar-thumb",this.a())[0];a||(a=this.yk(),this.a().appendChild(a));this.kf=a};f.w=function(){return this.xh.w()};f.C=function(a){this.xh.C(a);this.a()&&vq(this)};function vq(a){Kl(a.a(),"valuenow",a.w())}f.ja=function(){return this.xh.ja()};f.Sb=function(a){this.xh.Sb(a);this.a()&&wq(this)};
function wq(a){Kl(a.a(),"valuemin",a.ja())}f.T=function(){return this.xh.T()};f.Lb=function(a){this.xh.Lb(a);this.a()&&xq(this)};function xq(a){Kl(a.a(),"valuemax",a.T())}f.Na="horizontal";f.Su=function(){this.Hh();this.dispatchEvent("change")};
f.Hh=function(){if(this.kf){var a=this.ja(),b=this.T(),a=(this.w()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Na?F&&7>oc?(this.kf.style.top=0,this.kf.style.height="100%",b=this.kf.offsetHeight,a=Math.round(a*b),this.kf.style.top=b-a+"px",this.kf.style.height=a+"px"):(this.kf.style.top=100-b+"%",this.kf.style.height=b+"%"):this.kf.style.width=b+"%"}};
f.Ci=function(a){if(this.Na!=a){var b=uq[this.Na],c=uq[a];this.Na=a;if(a=this.a())Nl(a,b)&&(Ql(a,b),Ol(a,c)),b=this.kf.style,"vertical"==this.Na?(b.left=0,b.width="100%"):(b.top=b.left=0,b.height="100%"),this.Hh()}};f.ac=function(){return this.Na};f.f=function(){yq(this);tq.d.f.call(this);this.kf=null;this.xh.g()};f.Gd=function(){return this.xh.Gd()};f.Oc=function(a){this.xh.Oc(a)};function zq(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");tq.call(this);this.u="progressbar";this.vf=a;this.tt="";this.Yp=this.Xh=null;this.gk=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.gk=[c,d,e];this.C(b);this.bv()}w(zq,tq);
zq.prototype.bv=function(){var a=qj(this.vf,"position");if("static"==a||""==a)this.tt=this.vf.style.position,this.vf.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Q("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.gk[0])),d=document.createTextNode(String(this.gk[1])),e=document.createTextNode(String(this.gk[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Xh=b;this.k(this.vf);a=this.a();a.style.position=
"absolute";a.style.top=(this.vf.clientHeight-5)/2+"px";a.style.left=(this.vf.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};zq.prototype.done=function(){var a=this.a().style.top,b=this.a().style.left;S(this.a());var c=new zq(this.vf,100),d=c.a();d.style.position="absolute";d.style.top=a;d.style.left=b;d.classList.add("xtk-progress-bar");ki(d).classList.add("progress-bar-thumb-done");this.Yp=c};
zq.prototype.yo=function(){this.Xh&&S(this.Xh);this.a()&&S(this.a());this.Yp&&S(this.Yp.a());this.Yp=this.Xh=null;this.tt&&(this.vf.style.position=this.tt)};function Aq(){cd.call(this);this.u="renderer";this.Ba=window.document.body;this.gb=this.Ba.clientWidth;this.Pa=this.Ba.clientHeight;this.Ka=this.ra=this.Gc=null;this.$g=new lq($d);this.yd=[];this.Vb=null;this.fq=this.hn=this.dq=!1;this.b=this.Wi=this.re=null;this.Cb={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1,SLICENAVIGATORS:!0};this.ft=-1;window.console.log("XTK release 10 -- ###TIMESTAMP### -- http://www.goXTK.com -- @goXTK")}w(Aq,cd);f=Aq.prototype;
f.Ov=function(){window.cancelAnimationFrame(this.ft);this.Cb.PROGRESSBAR_ENABLED&&(this.Wi=new zq(this.Ba,3))};f.Pv=function(){this.Cb.PROGRESSBAR_ENABLED&&this.Wi&&(this.Wi.done(),this.Vp=$f(function(){this.Vp=null;this.Wi&&(this.Wi.yo(),this.Wi=null);this.hn=this.fq=!0;this.k()}.bind(this),700))};f.Qv=function(a){this.Wi&&this.Wi.C(100*a.nk)};f.cl=function(a){this.re&&this.re.C(100*a.nk)};f.QK=function(a){null!=a&&a instanceof Yd&&a.Wa&&this.Ih(a.Wa)};
f.bL=function(a){null!=a&&a instanceof Zd&&a.Wa&&this.remove(a.Wa)};f.Wv=function(a){if(!(null!=a&&a instanceof we))throw Error("Invalid hover event.");};f.dl=function(){var a=Vh(this.Ba);this.gb=a.clientWidth;this.Pa=a.clientHeight;a=Vh(this.Gc);null!=a&&(a.width=this.gb,a.height=this.Pa,"renderer3D"==this.u&&(this.b.viewport(0,0,this.gb,this.Pa),this.ra.ut=A.v.yv(A.v.oo(),this.ra.by,this.Gc.width/this.Gc.height,1,1E4)))};
f.Hj=function(a){if(!(null!=a&&a instanceof ue))throw Error("Invalid scroll event.");};Aq.prototype.__defineGetter__("config",function(){return this.Cb});Aq.prototype.__defineGetter__("interactor",function(){return this.Ka});Aq.prototype.__defineGetter__("camera",function(){return this.ra});Aq.prototype.__defineGetter__("loadingCompleted",function(){return this.hn});Aq.prototype.__defineGetter__("container",function(){return this.Ba});
Aq.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;r(b)&&(b=Vh(a));if(!ni(b))throw Error("Could not find the given container.");this.Ba=b});f=Aq.prototype;f.Xo=function(){this.ra.reset()};function Bq(a){a.Cb.PROGRESSBAR_ENABLED&&a.re&&!a.Vp&&(a.re.done(),a.Vp=$f(function(){this.Vp=null;this.re&&(this.re.yo(),this.re=null);this.k()}.bind(a),700))}
f.xa=function(a){var b=Q("canvas");this.Ba.appendChild(b);this.gb=this.Ba.clientWidth;this.Pa=this.Ba.clientHeight;b.width=this.gb;b.height=this.Pa;try{var c=b.getContext(a);if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.Ba.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.Vb=new Qf;G(this.Vb,ke,this.cl.bind(this));this.Gc=b;this.b=c;b=new Fp(this.Gc);"2d"==a&&(b=new Hp(this.Gc));b.xa();G(b,ge,this.Xo.bind(this));G(b,le,this.Wv.bind(this));G(b,fe,this.Hj.bind(this));this.Ka=b;b=new pq(this.gb,this.Pa);"2d"==a&&(b=new oq(this.gb,this.Pa));b.observe(this.Ka);this.ra=b;G(window,"resize",this.dl,!1,this)};f.add=function(a){(a instanceof kq||a instanceof iq||a instanceof gq)&&a.ia();this.yd.push(a);this.Ih(a)};
f.remove=function(a){if(!this.Gc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&J(a);return!1};f.Ih=function(a){if(!this.Gc||!this.b)throw Error("The renderer was not initialized properly.");null!=a&&(Xc(a,ie)||G(a,ie,this.QK.bind(this)),Xc(a,je)||G(a,je,this.bL.bind(this)),Xc(a,ne)||G(a,ne,this.Ov.bind(this)),Xc(a,pe)||G(a,pe,this.Qv.bind(this)),Xc(a,oe)||G(a,oe,this.Pv.bind(this)))};
f.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.$g.kb,c=b.length,d=0,d=0;d<c;d++)if(b[d].xd==a)return b[d];return null};
f.k=function(){if(!this.Gc||!this.b)throw Error("The renderer was not initialized properly.");if(null==this.py){if(this.Vb.Ql.au(!1)){if(this.Cb.PROGRESSBAR_ENABLED&&!this.re&&(this.re=new zq(this.Ba,3)),this.fq=this.hn=!1,this.py=$f(function(){this.py=null;this.k()}.bind(this),100),!this.Cb.INTERMEDIATE_RENDERING)return}else if(this.hn||this.fq||(this.fq=!0,eval("this.onShowtime()"),this.hn=!0),this.re){Bq(this);return}this.ft=window.requestAnimationFrame(this.k.bind(this));eval("this.onRender()");
this.yh(!1,!0)}};f.$B=function(){};f.WB=function(){};f.yh=function(){};f.ve=function(){window.cancelAnimationFrame(this.ft);this.Vb&&(delete this.Vb,this.Vb=null);this.re&&(this.re.yo(),delete this.re,this.re=null);this.$g.clear();delete this.$g;this.yd.length=0;delete this.yd;delete this.Vb;this.Vb=null;delete this.ra;this.ra=null;delete this.Ka;this.Ka=null;delete this.b;this.b=null;S(this.Gc);delete this.Gc;this.Gc=null};function Cq(){Aq.call(this);this.u="renderer2D";this.hd=null;this.Td=-1;this.qe=[];this.gy=this.bq=this.cy=this.$p=null;this.Ul=this.Wl=this.kk=this.lk=0;this.Wb=this.Xb=this.Gb=this.Eb=this.$x=-1;this.hy=new Float32Array([-255,-255,-255,-255]);this.oy=!0}w(Cq,Aq);Cq.prototype.dw=function(){};Cq.prototype.CL=function(){};Cq.prototype.Hj=function(a){Cq.d.Hj.call(this,a);var b=this.yd[0];if(b){var c="",c=0==this.Td?"indexX":1==this.Td?"indexY":"indexZ";b[c]=a.lc?b[c]+1:b[c]-1;eval("this.onScroll();")}};
Cq.prototype.DL=function(a){var b=this.yd[0];if(b){var c=b.Wb-b.Xb,d=c/2,e=parseInt(c+c/15*-a.Dt,10);a=parseInt(d+d/15*a.pt,10);c==e&&e++;d==a&&a++;b.Xb-=parseInt(d-a,10);b.Xb-=parseInt(c-e,10);b.Xb=Math.max(b.Xb,b.pe);b.Wb-=parseInt(d-a,10);b.Wb+=parseInt(c-e,10);b.Wb=Math.min(b.Wb,b.jc);eval("this.onWindowLevel();")}};Cq.prototype.__defineGetter__("orientation",function(){return this.hd});
Cq.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.Td=2):"SAGITTAL"==a?(a="X",this.Td=0):"CORONAL"==a&&(a="Y",this.Td=1);if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.hd=a});Cq.prototype.__defineGetter__("radiological",function(){return this.oy});Cq.prototype.__defineSetter__("radiological",function(a){this.oy=a});f=Cq.prototype;
f.xa=function(){if(!this.hd)throw Error("No 2D orientation set.");Cq.d.xa.call(this,"2d");this.b.fillStyle="rgba(50,50,50,0)";this.b.fillRect(0,0,this.Gc.width,this.Gc.height);this.$p=Q("canvas");this.bq=Q("canvas");G(this.ra,he,this.DL.bind(this))};f.dl=function(){Cq.d.dl.call(this);Dq(this)};f.Xo=function(){Cq.d.Xo.call(this);Dq(this);var a=this.yd[0];a&&(a.Wb=a.jc,a.Xb=a.pe)};
f.Ih=function(a){Cq.d.Ih.call(this,a);var b=!1;this.get(a.xd)&&(b=!0);if(a instanceof K){var c=a.la,d=a.t,e=a.Sd;if(null!=d&&null!=d.la&&d.la.J)this.Ih(d);else if(null!=e&&null!=e.la&&e.la.J)this.Vb.load(e,a);else{if(null!=c&&g(c))if(null!=a.Mh){if(a.Mh.Fo!=c.length||b&&!a.J)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.Vb.load(c[b],a);return}else if(null!=c&&c.J){this.Vb.load(a,a);return}c=this.hd;this.Td="X"==c?0:"Y"==c?1:2;this.jd=a.j[this.Td].j;e=null;e=0==this.Td?a.indexX:1==this.Td?a.indexY:
a.indexZ;c=a.j[this.Td].j[e].fy;d=a.j[this.Td].j[e].ey;this.Wl=a.j[this.Td].j[e].Zh;this.Ul=a.j[this.Td].j[e].Sh;this.lk=c;this.kk=d;e=this.$p;e.width=c;e.height=d;var h=this.bq;h.width=c;h.height=d;this.cy=e.getContext("2d");this.gy=h.getContext("2d");b||(this.$g.add(a),Dq(this))}}};function Dq(a){var b=Math.min(a.gb/(a.lk*a.Wl),a.Pa/(a.kk*a.Ul));null!=a.ra&&(a.ra.Q[14]=b)}f.Xr=function(){};
f.PD=function(a,b){var c=this.yd[0],d=this.ra.Q,e=null,h=this.lk,k=this.kk,l=null,n=null;if("Y"==this.hd)e=this.jd[parseInt(c.indexY,10)],l=e.Zh,n=e.Sh,this.qe[0]="red",this.qe[1]="blue";else if("Z"==this.hd)e=this.jd[parseInt(c.indexZ,10)],l=e.Zh,n=e.Sh,this.qe[0]="red",this.qe[1]="green";else{e=this.jd[parseInt(c.indexX,10)];l=e.Sh;n=e.Zh;this.qe[0]="green";this.qe[1]="blue";var p=h,h=k,k=p}var m=1*d[12],q=-1*d[13],p=Math.max(d[14],.6),d=[this.gb/2,this.Pa/2],l=h*l*p,n=k*n*p,t=d[0]-l/2,d=d[1]-n/
2,t=t+m*p,d=d+q*p;return a>t&&a<t+l&&b>d&&b<d+n?(m=(a-t)/l*h,q=(b-d)/n*k,n=e.SF[4],"X"==this.hd?(p=h-m,m=q,q=p):"Y"==this.hd?m=h-m:"Z"==this.hd&&(m=h-m,q=k-q),m=e.RF+m*e.Zh,q=e.LF+q*e.Sh,m=Cd(m,q,n,1),h=Dd(),Nd(e.EF,m,h),k=Dd(),Nd(e.FF,m,k),e=Math.round((c.e[0].H[0]*k[0]+c.e[0].H[1]*k[1]+c.e[0].H[2]*k[2]+c.e[0].st)/c.e[0].Vl),e>=c.e[0].ga?e=c.e[0].ga-1:0>e&&(e=0),m=Math.round((c.e[1].H[0]*k[0]+c.e[1].H[1]*k[1]+c.e[1].H[2]*k[2]+c.e[1].st)/c.e[1].Vl),m>=c.e[1].ga?m=c.e[1].ga-1:0>m&&(m=0),q=Math.round((c.e[2].H[0]*
k[0]+c.e[2].H[1]*k[1]+c.e[2].H[2]*k[2]+c.e[2].st)/c.e[2].Vl),q>=c.e[2].ga?q=c.e[2].ga-1:0>q&&(q=0),[[e,m,q],[h[0],h[1],h[2]],[k[0],k[1],k[2]]]):null};
f.yh=function(a,b){Cq.d.yh.call(this,a,b);if(0!=this.$g.kb.length){var c=this.yd[0],d=null,d=0==this.Td?c.indexX:1==this.Td?c.indexY:c.indexZ,e=this.jd[parseInt(d,10)].fy,h=this.jd[parseInt(d,10)].ey;this.Wl=this.jd[parseInt(d,10)].Zh;this.Ul=this.jd[parseInt(d,10)].Sh;this.lk=e;this.kk=h;var k=this.gb,l=this.Pa,n=this.ra.Q;this.b.save();this.b.clearRect(-k,-l,2*k,2*l);this.b.restore();var p=Math.max(n[14],.1);this.b.setTransform(p,0,0,p,0,0);var m=1*n[12],n=-1*n[13],q=null;c.t&&(q=c.t.At);var t=
this.jd[parseInt(d,10)],s=t.fb.Xi,t=t.t,z=null;t&&(z=t.Xi);var y=this.lk,I=this.kk,P=this.cy,N=this.gy,H=P.getImageData(0,0,y,I),T=N.getImageData(0,0,y,I),ca=H.data,W=T.data,wa=ca.length,oa=c.jc,ya=c.Eb,Pa=c.Gb,Ja=c.Xb/oa,Qa=c.Wb/oa;if(this.$x!=d||this.Eb!=ya||this.Gb!=Pa||this.Xb!=Ja||this.Wb!=Qa||q&&!mq(q,this.hy,0)){var ka=this.$p;ka.width=e;ka.height=h;ka=this.bq;ka.width=e;ka.height=h;e=0;do{var ka=[0,0,0,0],h=[0,0,0,0],za=s[e]/255*oa,ra=s[e],ra=(ra/255-Ja)/(Qa-Ja),ra=255*ra;za>=ya&&za<=Pa&&
(ka=new qd(c.Ti[0],c.Ti[1],c.Ti[2]),ka=(new qd(c.Ri[0],c.Ri[1],c.Ri[2])).scale(ra).add(ka.scale(255-ra)),ka=[Math.floor(ka.x),Math.floor(ka.y),Math.floor(ka.z),255],t&&(-255==q[3]?h=[z[e],z[e+1],z[e+2],z[e+3]]:mq(q,z,e)&&(h=[z[e],z[e+1],z[e+2],z[e+3]])));"X"==this.hd?(ca[e]=ka[0],ca[e+1]=ka[1],ca[e+2]=ka[2],ca[e+3]=ka[3],W[e]=h[0],W[e+1]=h[1],W[e+2]=h[2],W[e+3]=h[3]):"Y"==this.hd?(ra=Math.floor(e/(4*y)),ra=ra*y*4+(4*(y-1)-(e-ra*y*4)),ca[ra]=ka[0],ca[ra+1]=ka[1],ca[ra+2]=ka[2],ca[ra+3]=ka[3],W[ra]=
h[0],W[ra+1]=h[1],W[ra+2]=h[2],W[ra+3]=h[3]):(ra=wa-1-e,ca[ra-3]=ka[0],ca[ra-2]=ka[1],ca[ra-1]=ka[2],ca[ra]=ka[3],W[ra-3]=h[0],W[ra-2]=h[1],W[ra-1]=h[2],W[ra]=h[3]);e+=4}while(e<wa);P.putImageData(H,0,0);N.putImageData(T,0,0);this.$x=d;this.Eb=ya;this.Gb=Pa;this.Xb=Ja;this.Wb=Qa;t&&(this.hy=q)}this.b.globalAlpha=1;this.b.translate(k/2/p,l/2/p);"X"==this.hd&&(this.b.rotate(.5*Math.PI),d=m,m=n,n=-d);m=-y*this.Wl/2+m;n=-I*this.Ul/2+n;this.b.drawImage(this.$p,m,n,y*this.Wl,I*this.Ul);t&&c.t.vb&&(this.b.globalAlpha=
c.t.gd,this.b.drawImage(this.bq,m,n,y*this.Wl,I*this.Ul));this.Cb.SLICENAVIGATORS&&this.Ka.eq&&this.Ka.zt&&!this.Ka.Zg&&(m=this.Ka.fd,m=this.PD(m[0],m[1]))&&(c.Th=m[0][0],c.Uh=m[0][1],c.Vh=m[0][2],c.ia(!1),this.onSliceNavigation(),this.b.setTransform(1,0,0,1,0,0),this.b.lineWidth=1,this.b.beginPath(),this.b.moveTo(this.Ka.fd[0],0),this.b.lineTo(this.Ka.fd[0],this.Ka.fd[1]-10),this.b.moveTo(this.Ka.fd[0],this.Ka.fd[1]+10),this.b.lineTo(this.Ka.fd[0],this.Pa),this.b.strokeStyle=this.qe[0],this.b.stroke(),
this.b.closePath(),this.b.beginPath(),this.b.moveTo(0,this.Ka.fd[1]),this.b.lineTo(this.Ka.fd[0]-10,this.Ka.fd[1]),this.b.moveTo(this.Ka.fd[0]+10,this.Ka.fd[1]+.5),this.b.lineTo(this.gb,this.Ka.fd[1]),this.b.strokeStyle=this.qe[1],this.b.stroke(),this.b.closePath(),this.b.font="10pt Arial",this.b.textAlign="left",this.b.textBaseline="top",this.b.fillStyle="white",this.b.fillText("RAS: "+m[2][0].toFixed(2)+", "+m[2][1].toFixed(2)+", "+m[2][2].toFixed(2),0,0),y=t=n="undefined","undefined"!=typeof c.rc[m[1][2].toFixed(0)]&&
"undefined"!=typeof c.rc[m[1][2].toFixed(0)][m[1][1].toFixed(0)]&&(n=c.rc[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.ob&&(t=c.t.rc[m[1][2].toFixed(0)][m[1][1].toFixed(0)][m[1][0].toFixed(0)],c.t.en&&(y=c.t.en.get(t),"undefined"!=typeof y&&(y=y[0])))),this.b.fillText("Background:  "+n+" ("+m[1][0].toFixed(0)+", "+m[1][1].toFixed(0)+", "+m[1][2].toFixed(0)+")",0,15),c.ob&&this.b.fillText("Labelmap:  "+y+" ("+t+")",0,30))}};v("X.renderer2D",Cq);v("X.renderer2D.prototype.init",Cq.prototype.xa);
v("X.renderer2D.prototype.add",Cq.prototype.add);v("X.renderer2D.prototype.onShowtime",Cq.prototype.$B);v("X.renderer2D.prototype.onRender",Cq.prototype.WB);v("X.renderer2D.prototype.onScroll",Cq.prototype.dw);v("X.renderer2D.prototype.onWindowLevel",Cq.prototype.CL);v("X.renderer2D.prototype.get",Cq.prototype.get);v("X.renderer2D.prototype.resetViewAndRender",Cq.prototype.Xo);v("X.renderer2D.prototype.xy2ijk",Cq.prototype.PD);v("X.renderer2D.prototype.render",Cq.prototype.k);
v("X.renderer2D.prototype.destroy",Cq.prototype.ve);v("X.renderer2D.prototype.onSliceNavigation",Cq.prototype.Xr);function Eq(){ad.call(this)}w(Eq,ad);v("xiv.vis.RenderEngine",Eq);Eq.prototype.ID_PREFIX="xiv.vis.RenderEngine";var Fq="isSelectedVolume"+B();v("xiv.vis.RenderEngine.EventType",{wO:"j",tO:"k",uO:"l"});v("xiv.vis.RenderEngine.SELECTED_VOL_KEY",Fq);v("xiv.vis.RenderEngine.prototype.ID_PREFIX",Eq.prototype.ID_PREFIX);function Gq(){Cq.call(this)}w(Gq,Cq);v("xiv.vis.XtkRenderer2D",Gq);f=Gq.prototype;f.gf=function(){this.dl()};f.dw=function(){this.Xr()};f.cl=function(a){Gq.d.cl.call(this,a);this.dispatchEvent({type:"k",value:a.nk})};f.xa=function(){this.config.PROGRESSBAR_ENABLED=!1;this.config.SLICENAVIGATORS=!1;Gq.d.xa.call(this);this.Ka.onMouseMove=this.IK.bind(this);this.Ka.config.MOUSEWHEEL_ENABLED=!1;this.Ka.config.MOUSECLICKS_ENABLED=!1;this.Ka.config.KEYBOARD_ENABLED=!1;this.Ka.xa()};f.ac=function(){return this.hd};
f.dH=function(){return this.ra};f.cI=function(){return this.Ka.mousePosition};f.ur=function(){};f.IK=function(){this.dispatchEvent({type:"mouseover",iK:this.Ka.iK,rM:this.Ka.shiftDown})};f.Xr=function(){this.dispatchEvent({type:"m",volume:this.yd[0],$P:this.yd[0]["index"+this.hd],ZP:this.hd,rM:this.Ka.zt})};f.k=function(){this.Gc&&this.b?(Gq.d.k.call(this),this.dispatchEvent({type:"l"})):(window.console.log("init"),this.xa(),window.console.log(this.sm().visible))};f.eH=function(){return this.Gc};
f.sm=function(){return this.yd[0]};f.yA=function(){if(null!=this.jd){var a=this.yd[0];if(null!=a[K.REORIENTED_DIMENSIONS_KEY]&&"false"==a.reslicing.toString())switch(this.ac()){case "X":return a[K.REORIENTED_DIMENSIONS_KEY][0];case "Y":return a[K.REORIENTED_DIMENSIONS_KEY][1];case "Z":return a[K.REORIENTED_DIMENSIONS_KEY][2]}return this.jd.length}};f.OA=function(){return this.ra.Q[14]};f.bD=function(a){this.ra.Q[14]=a};function Hq(a){.01>a.ra.Q[14]&&(a.ra.Q[14]=.01)}
f.Xm=function(){this.ra.Q[14]+=.03;Hq(this)};f.Ym=function(){this.ra.Q[14]+=-.03;Hq(this)};
function Iq(a,b,c,d){var e=a.yd[0],h=a.ra.Q,k=null,l=a.lk,n=a.kk,p=null,m=null;if(null!=e){"Y"==a.hd?(k=a.jd[parseInt(e.indexY,10)],p=k.Zh,m=k.Sh,a.qe[0]="red",a.qe[1]="blue"):"Z"==a.hd?(k=a.jd[parseInt(e.indexZ,10)],p=k.Zh,m=k.Sh,a.qe[0]="red",a.qe[1]="green"):(k=a.jd[parseInt(e.indexX,10)],p=k.Sh,m=k.Zh,a.qe[0]="green",a.qe[1]="blue",e=l,l=n,n=e);var e=1*h[12],k=-1*h[13],h=Math.max(h[14],.6),q=[a.gb/2,a.Pa/2],p=l*p*h,m=n*m*h,t=q[0]-p/2,q=q[1]-m/2,t=t+e*h,q=q+k*h;if("vertical"===c)return b=Math.max(0,
b),b=Math.min(b,l),d?t+(a.lk-b)/l*p:t+b/l*p;b=Math.max(0,b);b=Math.min(b,n);return d?q+(a.kk-b)/n*m:q+b/n*m}}f.HA=function(a,b){return Iq(this,a,"vertical",b)};f.mA=function(a,b){return Iq(this,a,"horizontal",b)};f.ve=function(){Gq.d.ve.call(this)};v("xiv.vis.XtkRenderer2D.ZOOM_MINIMUM",.01);v("xiv.vis.XtkRenderer2D.prototype.onResize",Gq.prototype.gf);v("xiv.vis.XtkRenderer2D.prototype.onScroll",Gq.prototype.dw);v("xiv.vis.XtkRenderer2D.prototype.onProgress",Gq.prototype.cl);
v("xiv.vis.XtkRenderer2D.prototype.init",Gq.prototype.xa);v("xiv.vis.XtkRenderer2D.prototype.getOrientation",Gq.prototype.ac);v("xiv.vis.XtkRenderer2D.prototype.getCamera",Gq.prototype.dH);v("xiv.vis.XtkRenderer2D.prototype.getMousePosition",Gq.prototype.cI);v("xiv.vis.XtkRenderer2D.prototype.isMouseOver",Gq.prototype.ur);v("xiv.vis.XtkRenderer2D.prototype.onSliceNavigation",Gq.prototype.Xr);v("xiv.vis.XtkRenderer2D.prototype.render",Gq.prototype.k);v("xiv.vis.XtkRenderer2D.prototype.getCanvas",Gq.prototype.eH);
v("xiv.vis.XtkRenderer2D.prototype.getVolume",Gq.prototype.sm);v("xiv.vis.XtkRenderer2D.prototype.getNumberSlices",Gq.prototype.yA);v("xiv.vis.XtkRenderer2D.prototype.getZoom",Gq.prototype.OA);v("xiv.vis.XtkRenderer2D.prototype.setZoom",Gq.prototype.bD);v("xiv.vis.XtkRenderer2D.prototype.zoomIn",Gq.prototype.Xm);v("xiv.vis.XtkRenderer2D.prototype.zoomOut",Gq.prototype.Ym);v("xiv.vis.XtkRenderer2D.prototype.getVerticalSliceX",Gq.prototype.HA);
v("xiv.vis.XtkRenderer2D.prototype.getHorizontalSliceY",Gq.prototype.mA);v("xiv.vis.XtkRenderer2D.prototype.destroy",Gq.prototype.ve);function Jq(){V.call(this)}w(Jq,zp);v("xiv.ui.ZoomDisplay",Jq);Jq.ID_PREFIX="xiv.ui.ZoomDisplay";Jq.prototype.k=function(a){Jq.d.k.call(this,a);this.fa.max=1E5;this.fa.min=1;O(this.Jc,"xiv-ui-framedisplay-text");O(this.fa,"xiv-ui-framedisplay-text")};Jq.prototype.Og=function(){this.Jc.innerHTML="Zoom:&nbsp"+this.fa.value+"%";this.pq()};v("xiv.ui.ZoomDisplay.ID_PREFIX",Jq.ID_PREFIX);v("xiv.ui.ZoomDisplay.prototype.updateValue",Jq.prototype.Og);v("xiv.ui.ZoomDisplay.prototype.render",Jq.prototype.k);function Kq(){V.call(this)}w(Kq,zp);v("xiv.ui.FrameDisplay",Kq);Kq.ID_PREFIX="xiv.ui.FrameDisplay";Kq.prototype.k=function(a){Kq.d.k.call(this,a);O(this.Jc,"xiv-ui-framedisplay-text");O(this.fa,"xiv-ui-framedisplay-text")};Kq.prototype.Og=function(){this.Jc.innerHTML=this.fa.value+" / "+this.fa.max;this.pq()};v("xiv.ui.FrameDisplay.ID_PREFIX",Kq.ID_PREFIX);v("xiv.ui.FrameDisplay.prototype.updateValue",Kq.prototype.Og);v("xiv.ui.FrameDisplay.prototype.render",Kq.prototype.k);function Lq(a,b){if(null==a)throw Error("Invalid direction for ResizeDragger: "+a);V.call(this);this.Jz=a;this.Kj=b;this.Hn=null;this.sb=new qm(this.a());this.yw()}w(Lq,V);v("nrg.ui.ResizeDragger",Lq);Lq.ID_PREFIX="nrg.ui.ResizeDragger";Lq.CSS_SUFFIX={};f=Lq.prototype;f.Pg=null;f.ni=null;f.hm=null;f.Vn=null;f.gh=null;f.gi=null;f.Mq=null;f.Un=null;f.offsetX=0;f.NC=function(a){this.offsetX=a};f.offsetY=0;f.qM=function(a){this.offsetY=a};f.ib=null;f.mi=null;f.Ea=null;f.ee=null;f.Ca=null;f.uc=null;
f.de=!1;f.Ce=new ih(10,10);f.Dd=function(){return this.Hn};f.zi=function(a){this.Hn=a};f.Tq=function(){return this.sb};f.fA=function(){return this.Jz};f.Fd=function(){return this.a()};
f.Tj=function(){this.mi=U(this.a());this.ib=vj(this.a());this.Pg=-1*this.mi.height/2+this.offsetY;this.ni=-1*this.mi.width/2+this.offsetX;this.sb.yg()||this.de||(this.Ea=wb(vj(this.Kj)),this.ee=wb(U(this.Kj)),this.Ea.left=this.Ea.x,this.Ea.top=this.Ea.y,this.Ea.right=this.Ea.x+this.ee.width,this.Ea.bottom=this.Ea.y+this.ee.height,this.Ca=wb(vj(this.Hn)),this.uc=wb(U(this.Hn)),this.Ca.left=this.Ca.x,this.Ca.top=this.Ca.y,this.Ca.right=this.Ca.x+this.uc.width,this.Ca.bottom=this.Ca.y+this.uc.height,
this.bh&&this.bh(this))};f.LC=function(a){return this.Ce=a};f.yw=function(){G(this.sb,"start",this.cw.bind(this));G(this.sb,"drag",this.gf.bind(this));G(this.sb,"end",this.Oo.bind(this))};f.cw=function(){this.dispatchEvent({type:"start_resize"})};f.gf=function(){this.Tj();this.dispatchEvent({type:"resize",ZL:this.Ea,ee:this.ee,oG:this.Ca,uc:this.uc});null!=this.jf&&this.jf()};f.Oo=function(){this.dispatchEvent({type:"end_resize"})};f.update=function(){this.sb.yg()||this.de||this.Tj()};f.Ef=function(){};
f.Qf=function(a,b,c){this.Tj();a=this.Ef(a);u(c)&&0===c?(tj(this.a(),a.end),this.gf(),this.Oo()):Mq(this,a.start,a.end,b,c)};f.rD=function(){null!=this.Ch&&(this.Ch.stop(),this.gf(),this.Oo())};function Mq(a,b,c,d,e){a.Ch=new Hk(a.a(),[b.x,b.y],[c.x,c.y],u(e)?e:500,fl);G(a.Ch,"begin",function(){this.de=!0;this.cw()}.bind(a));G(a.Ch,"animate",a.gf.bind(a));G(a.Ch,"end",function(){this.de=!1;this.Ch.g();J(this.Ch);this.Ch.ve();this.Ch=null;tj(this.a(),c);this.Oo();d&&d()}.bind(a));a.Ch.play()}
f.f=function(){delete this.HQ;delete this.IQ;delete this.ni;delete this.hm;delete this.Vn;delete this.gh;delete this.gi;delete this.Mq;delete this.Un;delete this.de;D(this.Ce);delete this.Ce;delete this.Kj;delete this.Hn;D(this.ib);delete this.ib;D(this.mi);delete this.mi;D(this.Ea);delete this.Ea;D(this.ee);delete this.ee;D(this.Ca);delete this.Ca;D(this.uc);delete this.uc;S(this.sb.handle);this.sb.handle=null;J(this.sb);this.sb.g();delete this.sb;delete this.Jz};
v("nrg.ui.ResizeDragger.EventType",{$s:"resize",ZE:"start_resize",YE:"end_resize"});v("nrg.ui.ResizeDragger.ID_PREFIX",Lq.ID_PREFIX);v("nrg.ui.ResizeDragger.CSS_SUFFIX",Lq.CSS_SUFFIX);v("nrg.ui.ResizeDragger.ANIM_MED",500);v("nrg.ui.ResizeDragger.prototype.vertDraggerOffset",Lq.prototype.Pg);v("nrg.ui.ResizeDragger.prototype.horizDraggerOffset",Lq.prototype.ni);v("nrg.ui.ResizeDragger.prototype.draggerLimitLeft",Lq.prototype.hm);v("nrg.ui.ResizeDragger.prototype.draggerLimitRight",Lq.prototype.Vn);
v("nrg.ui.ResizeDragger.prototype.draggerLimitTop",Lq.prototype.gh);v("nrg.ui.ResizeDragger.prototype.draggerLimitBottom",Lq.prototype.gi);v("nrg.ui.ResizeDragger.prototype.draggerLimitWidth",Lq.prototype.Mq);v("nrg.ui.ResizeDragger.prototype.draggerLimitHeight",Lq.prototype.Un);v("nrg.ui.ResizeDragger.prototype.offsetX",Lq.prototype.offsetX);v("nrg.ui.ResizeDragger.prototype.setOffsetX",Lq.prototype.NC);v("nrg.ui.ResizeDragger.prototype.offsetY",Lq.prototype.offsetY);
v("nrg.ui.ResizeDragger.prototype.setOffsetY",Lq.prototype.qM);v("nrg.ui.ResizeDragger.prototype.handlePos",Lq.prototype.ib);v("nrg.ui.ResizeDragger.prototype.handleSize",Lq.prototype.mi);v("nrg.ui.ResizeDragger.prototype.resizeePos",Lq.prototype.Ea);v("nrg.ui.ResizeDragger.prototype.resizeeSize",Lq.prototype.ee);v("nrg.ui.ResizeDragger.prototype.boundaryPos",Lq.prototype.Ca);v("nrg.ui.ResizeDragger.prototype.boundarySize",Lq.prototype.uc);v("nrg.ui.ResizeDragger.prototype.isAnimating",Lq.prototype.de);
v("nrg.ui.ResizeDragger.prototype.minSize",Lq.prototype.Ce);v("nrg.ui.ResizeDragger.prototype.getBoundaryElement",Lq.prototype.Dd);v("nrg.ui.ResizeDragger.prototype.setBoundaryElement",Lq.prototype.zi);v("nrg.ui.ResizeDragger.prototype.getDragger",Lq.prototype.Tq);v("nrg.ui.ResizeDragger.prototype.getDirection",Lq.prototype.fA);v("nrg.ui.ResizeDragger.prototype.getHandle",Lq.prototype.Fd);v("nrg.ui.ResizeDragger.prototype.updateTrackingValues",Lq.prototype.Tj);
v("nrg.ui.ResizeDragger.prototype.setMinSize",Lq.prototype.LC);v("nrg.ui.ResizeDragger.prototype.onResizeStart",Lq.prototype.cw);v("nrg.ui.ResizeDragger.prototype.onResize",Lq.prototype.gf);v("nrg.ui.ResizeDragger.prototype.onResizeEnd",Lq.prototype.Oo);v("nrg.ui.ResizeDragger.prototype.update",Lq.prototype.update);v("nrg.ui.ResizeDragger.prototype.getSlideTrajectory",Lq.prototype.Ef);v("nrg.ui.ResizeDragger.prototype.stopSlideAnimation",Lq.prototype.rD);
v("nrg.ui.ResizeDragger.prototype.slideToLimits",Lq.prototype.Qf);v("nrg.ui.ResizeDragger.prototype.disposeInternal",Lq.prototype.f);function Nq(a){Lq.call(this,"right",a)}w(Nq,Lq);v("nrg.ui.ResizeDraggerRight",Nq);Nq.ID_PREFIX="nrg.ui.ResizeDraggerRight";Nq.CSS_SUFFIX={};Nq.prototype.bh=function(){this.hm=this.Ea.left+this.Ce.width+this.ni;this.Vn=this.Ca.right+this.ni;this.Mq=this.Vn-this.hm};v("nrg.ui.ResizeDraggerRight.prototype.calculateDraggerLimits",Nq.prototype.bh);Nq.prototype.jf=function(){Hj(this.Kj,Math.min(Math.max(this.ee.width+(this.de?this.ib.x-this.Ea.right+this.ni:this.sb.clientX-this.sb.Sw),this.Ce.width),this.uc.width))};
v("nrg.ui.ResizeDraggerRight.prototype.resizeMethod",Nq.prototype.jf);Nq.prototype.update=function(a){this.sb.yg()||this.de||(Nq.d.update.call(this,a),sm(this.sb,new kj(this.hm,this.Ea.y,this.Mq,0)),tj(this.a(),this.Ea.right+this.ni,this.Ea.y),Ij(this.a(),this.ee.height))};Nq.prototype.Ef=function(a){return{start:new Ph(this.ib.x,this.ib.y),end:"MIN"==a?new Ph(this.hm,this.ib.y):new Ph(this.Vn,this.ib.y)}};v("nrg.ui.ResizeDraggerRight.ID_PREFIX",Nq.ID_PREFIX);
v("nrg.ui.ResizeDraggerRight.CSS_SUFFIX",Nq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerRight.prototype.update",Nq.prototype.update);v("nrg.ui.ResizeDraggerRight.prototype.getSlideTrajectory",Nq.prototype.Ef);function Oq(a){Lq.call(this,"right",a)}w(Oq,Lq);v("nrg.ui.ResizeDraggerBottom",Oq);Oq.ID_PREFIX="nrg.ui.ResizeDraggerBottom";Oq.CSS_SUFFIX={};Oq.prototype.bh=function(){this.gh=this.Ea.top+this.Ce.height+this.Pg;this.gi=this.Ca.bottom+this.Pg;this.Un=this.gi-this.gh};v("nrg.ui.ResizeDraggerBottom.prototype.calculateDraggerLimits",Oq.prototype.bh);Oq.prototype.jf=function(){Ij(this.Kj,Math.max(this.ee.height+(this.ib.y-this.Ea.bottom),this.Ce.height))};
v("nrg.ui.ResizeDraggerBottom.prototype.resizeMethod",Oq.prototype.jf);Oq.prototype.update=function(){this.sb.yg()||this.de||(Oq.d.update.call(this),sm(this.sb,new kj(this.Ca.x,this.gh,0,this.gi)),tj(this.a(),this.Ea.x,this.Ea.bottom+this.Pg))};Oq.prototype.Ef=function(a){return{start:new Ph(this.ib.x,this.ib.y),end:"MIN"==a?new Ph(this.ib.x,this.gh):new Ph(this.ib.x,this.gi)}};v("nrg.ui.ResizeDraggerBottom.ID_PREFIX",Oq.ID_PREFIX);v("nrg.ui.ResizeDraggerBottom.CSS_SUFFIX",Oq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerBottom.prototype.update",Oq.prototype.update);v("nrg.ui.ResizeDraggerBottom.prototype.getSlideTrajectory",Oq.prototype.Ef);function Pq(a){Lq.call(this,"right",a)}w(Pq,Lq);v("nrg.ui.ResizeDraggerTop",Pq);Pq.ID_PREFIX="nrg.ui.ResizeDraggerTop";Pq.CSS_SUFFIX={};Pq.prototype.bh=function(){this.gh=this.Ca.top-this.Pg;this.gi=this.Ea.bottom-this.Ce.height+this.Pg;this.Un=this.gi-this.gh};v("nrg.ui.ResizeDraggerTop.calculateDraggerLimits",Pq.bh);Pq.prototype.jf=function(){var a=this.ib.y-this.Pg,b=this.ee.height+(this.de?this.Ea.y-a:this.sb.Tw-this.sb.clientY);this.Kj.style.top=a.toString()+"px";Ij(this.Kj,Math.max(b,this.Ce.height))};
Pq.prototype.update=function(){this.sb.yg()||this.de||(Pq.d.update.call(this),sm(this.sb,new kj(this.Ca.x,this.gh,0,this.Un)),tj(this.a(),this.Ea.x,this.Ea.y+this.Pg))};Pq.prototype.Ef=function(a){return{start:new Ph(this.ib.x,this.ib.y),end:"MIN"==a?new Ph(this.ib.x,this.gi):new Ph(this.ib.x,this.gh)}};v("nrg.ui.ResizeDraggerTop.ID_PREFIX",Pq.ID_PREFIX);v("nrg.ui.ResizeDraggerTop.CSS_SUFFIX",Pq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerTop.prototype.calculateDraggerLimits",Pq.prototype.bh);
v("nrg.ui.ResizeDraggerTop.prototype.resizeMethod",Pq.prototype.jf);v("nrg.ui.ResizeDraggerTop.resizeMethod",Pq.jf);v("nrg.ui.ResizeDraggerTop.prototype.update",Pq.prototype.update);v("nrg.ui.ResizeDraggerTop.prototype.getSlideTrajectory",Pq.prototype.Ef);function Qq(a){Lq.call(this,"right",a)}w(Qq,Lq);v("nrg.ui.ResizeDraggerTopRight",Qq);Qq.ID_PREFIX="nrg.ui.ResizeDraggerTopRight";Qq.CSS_SUFFIX={};Qq.prototype.Tj=function(){Qq.d.Tj.call(this);this.sb.yg()||this.de||(Nq.prototype.bh.bind(this)(),Pq.prototype.bh.bind(this)())};Qq.prototype.gf=function(){Qq.d.gf.call(this);Nq.prototype.jf.bind(this)();Pq.prototype.jf.bind(this)()};
Qq.prototype.update=function(a){this.sb.yg()||this.de||(Qq.d.update.call(this,a),sm(this.sb,new kj(this.Ca.x+this.ni,this.Ca.y+this.Pg,this.uc.width,this.uc.height)),tj(this.a(),this.Ea.right+this.ni,this.Ea.y+this.Pg))};
Qq.prototype.Ef=function(a){var b=new Ph(this.ib.x,this.ib.y),c;"TOP_LEFT"==a?c=new Ph(this.Ca.x,this.Ca.y):"TOP_RIGHT"==a?c=new Ph(this.Ca.x+this.uc.width,this.Ca.y):"BOTTOM_RIGHT"==a?c=new Ph(this.Ca.x+this.uc.width,this.Ca.y+this.uc.height):"BOTTOM_LEFT"==a&&(c=new Ph(this.Ca.x,this.Ca.y+this.uc.height));return{start:b,end:c}};v("nrg.ui.ResizeDraggerTopRight.ID_PREFIX",Qq.ID_PREFIX);v("nrg.ui.ResizeDraggerTopRight.CSS_SUFFIX",Qq.CSS_SUFFIX);
v("nrg.ui.ResizeDraggerTopRight.prototype.updateTrackingValues",Qq.prototype.Tj);v("nrg.ui.ResizeDraggerTopRight.prototype.onResize",Qq.prototype.gf);v("nrg.ui.ResizeDraggerTopRight.prototype.update",Qq.prototype.update);v("nrg.ui.ResizeDraggerTopRight.prototype.getSlideTrajectory",Qq.prototype.Ef);function Rq(a){Lq.call(this,"right",a)}w(Rq,Lq);v("nrg.ui.ResizeDraggerLeft",Rq);Rq.ID_PREFIX="nrg.ui.ResizeDraggerLeft";Rq.CSS_SUFFIX={};Rq.prototype.jf=function(){Hj(this.Kj,Math.min(Math.max(this.ee.width+(this.Ea.x-this.ib.x),this.Ce.width),this.uc.width));tj(this.a(),this.ib.x,this.Ea.y)};v("nrg.ui.ResizeDraggerLeft.prototype.resizeMethod",Rq.prototype.jf);
Rq.prototype.update=function(a){this.sb.yg()||this.de||(Rq.d.update.call(this,a),sm(this.sb,new kj(this.Ca.x-this.mi.width,this.Ca.y,this.uc.width-this.Ce.width-this.mi.width,0)),tj(this.a(),this.Ea.x-this.mi.width,this.Ea.y))};Rq.prototype.Ef=function(a){return{start:new Ph(this.ib.x,this.ib.y),end:"MIN"==a?new Ph(this.Ca.x+this.Ce.width,this.ib.y):new Ph(this.Ca.x+this.uc.width-this.Ce.width,this.ib.y)}};v("nrg.ui.ResizeDraggerLeft.ID_PREFIX",Rq.ID_PREFIX);
v("nrg.ui.ResizeDraggerLeft.CSS_SUFFIX",Rq.CSS_SUFFIX);v("nrg.ui.ResizeDraggerLeft.resizeMethod",Rq.jf);v("nrg.ui.ResizeDraggerLeft.prototype.update",Rq.prototype.update);v("nrg.ui.ResizeDraggerLeft.prototype.getSlideTrajectory",Rq.prototype.Ef);function Sq(a,b){V.call(this);this.q=Vh(a);this.me={};this.Jr=this.Kr=20;this.Mm(b||Sq.fQ)}w(Sq,V);v("nrg.ui.Resizable",Sq);Sq.ID_PREFIX="nrg.ui.Resizable";Sq.CSS_SUFFIX={hN:"boundary"};var Tq="TOP RIGHT BOTTOM LEFT TOP_LEFT TOP_RIGHT BOTTOM_RIGHT BOTTOM_LEFT".split(" "),Uq=["RIGHT","BOTTOM"],Vq=new kj(0,0,600,600);f=Sq.prototype;f.jM=function(a,b){this.aQ(a);if(0>b)throw Error("Threshold must be greater than zero!");this.XP[a]=b};f.Fd=function(a){return this.me[a].Fd()};f.Kk=function(a){return this.me[a]};
f.DH=function(){var a=[];E(pb(this.me),function(b){a.push(b.Fd())});return a};f.Dd=function(){return this.kg};f.zi=function(a){this.kg=a;if(this.kg.parentNode!==this.q.parentNode)throw Error("Boundary element parentNode must be same as resizable  element's parentNode.");this.update()};f.KC=function(a){this.Jr=a};f.MC=function(a){this.Kr=a};f.$H=function(){return this.Jr};f.aI=function(){return this.Kr};
f.Mm=function(a){a=a||"DEFAULT";r(a)&&(a="ALL"==a.toUpperCase()?Tq:"DEFAULT"==a.toUpperCase()?Uq:[a]);Wq(this);E(a,function(a){if(!r(a))throw Error("String required!");if(!Jb(Tq,a))throw Error("Invalid direction: ",a);this.Ey(a)}.bind(this))};f.Ut=function(a){if(!Jb(Tq,a))throw Error("Invalid draggerDir '"+a);};f.jJ=function(a){this.Ut(a);if(!this.me[a])throw Error("No ResizeDragger for "+a);};f.Qf=function(a,b,c,d){a=a.toUpperCase();this.Ut(a);this.update();this.me[a].Qf(b,c,d)};
function Xq(a,b){switch(a){case "TOP":return new Pq(b);case "BOTTOM":return new Oq(b);case "LEFT":return new Rq(b);case "RIGHT":return new Nq(b);case "TOP_RIGHT":return new Qq(b);case "TOP_LEFT":window.console.log("ToDo: need to implement resize dragger for top left.");break;case "BOTTOM_LEFT":window.console.log("ToDo: need to implement resize dragger for bottom left.");break;case "BOTTOM_RIGHT":window.console.log("ToDo: need to implement resize dragger for bottom right.")}}
f.Ey=function(a){if(a in this.me)throw Error("Resize direction "+a+" already in use.");this.me[a]=Xq(a,this.q);G(this.me[a],"start_resize",this.fL.bind(this));G(this.me[a],"resize",this.dl.bind(this));G(this.me[a],"end_resize",this.eL.bind(this));this.update()};f.update=function(){if(null!=this.kg){var a=new ih(this.Kr,this.Jr);C(this.me,function(b){this.kg&&this.kg.parentNode&&R(this.kg.parentNode,b.Fd());b.Dd()!==this.kg&&b.zi(this.kg);b.LC(a);b.Tj();b.update()}.bind(this))}};f.fL=function(){this.dispatchEvent({type:"resize_start"})};
f.dl=function(a){this.dispatchEvent({type:"resize",ZL:a.Ea,ee:a.ee,oG:a.Ca,uc:a.uc})};f.eL=function(){this.update();this.dispatchEvent({type:"resize_end"})};function Wq(a){C(a.me,function(a){a&&(J(a),a.g())});D(a.me)}f.f=function(){Sq.d.f.call(this);Wq(this);delete this.me;this.kg&&(S(this.kg.parentNode),delete this.kg)};v("nrg.ui.Resizable.EventType",{$s:"resize",ZE:"resize_start",YE:"resize_end"});v("nrg.ui.Resizable.ID_PREFIX",Sq.ID_PREFIX);v("nrg.ui.Resizable.CSS_SUFFIX",Sq.CSS_SUFFIX);
v("nrg.ui.Resizable.DIRECTIONS",Tq);v("nrg.ui.Resizable.DEFAULT_DIRECTIONS",Uq);v("nrg.ui.Resizable.DEFAULT_LIMITS",Vq);v("nrg.ui.Resizable.DEFAULT_MIN_HEIGHT",20);v("nrg.ui.Resizable.DEFAULT_MIN_WIDTH",20);v("nrg.ui.Resizable.createResizeDragger",Xq);v("nrg.ui.Resizable.prototype.setBoundThreshold",Sq.prototype.jM);v("nrg.ui.Resizable.prototype.getHandle",Sq.prototype.Fd);v("nrg.ui.Resizable.prototype.getResizeDragger",Sq.prototype.Kk);v("nrg.ui.Resizable.prototype.getHandles",Sq.prototype.DH);
v("nrg.ui.Resizable.prototype.getBoundaryElement",Sq.prototype.Dd);v("nrg.ui.Resizable.prototype.setBoundaryElement",Sq.prototype.zi);v("nrg.ui.Resizable.prototype.setMinHeight",Sq.prototype.KC);v("nrg.ui.Resizable.prototype.setMinWidth",Sq.prototype.MC);v("nrg.ui.Resizable.prototype.getMinHeight",Sq.prototype.$H);v("nrg.ui.Resizable.prototype.getMinWidth",Sq.prototype.aI);v("nrg.ui.Resizable.prototype.setResizeDirections",Sq.prototype.Mm);v("nrg.ui.Resizable.prototype.checkDirectionValid",Sq.prototype.Ut);
v("nrg.ui.Resizable.prototype.hasDragger",Sq.prototype.jJ);v("nrg.ui.Resizable.prototype.slideToLimits",Sq.prototype.Qf);v("nrg.ui.Resizable.prototype.addResizeDirection",Sq.prototype.Ey);v("nrg.ui.Resizable.prototype.update",Sq.prototype.update);v("nrg.ui.Resizable.prototype.disposeInternal",Sq.prototype.f);function Yq(a){V.call(this);this.Tb=a}w(Yq,V);v("xiv.ui.layouts.LayoutFrame",Yq);Yq.ID_PREFIX="xiv.ui.layouts.LayoutFrame";Yq.CSS_SUFFIX={};f=Yq.prototype;f.xb=function(){return this.Tb};f.Sc=null;f.R=function(){return this.Rp};f.Mm=function(a){this.Rp=this.Rp?this.Rp:new Sq(this.a());this.Rp.Mm(a)};f.f=function(){Yq.d.f.call(this);delete this.Tb};v("xiv.ui.layouts.LayoutFrame.EventType",{});v("xiv.ui.layouts.LayoutFrame.ID_PREFIX",Yq.ID_PREFIX);v("xiv.ui.layouts.LayoutFrame.CSS_SUFFIX",Yq.CSS_SUFFIX);
v("xiv.ui.layouts.LayoutFrame.prototype.getTitle",Yq.prototype.xb);v("xiv.ui.layouts.LayoutFrame.prototype.getResizable",Yq.prototype.R);v("xiv.ui.layouts.LayoutFrame.prototype.setResizeDirections",Yq.prototype.Mm);v("xiv.ui.layouts.LayoutFrame.prototype.disposeInternal",Yq.prototype.f);function Zq(){V.call(this);if(null==this.constructor.TITLE)throw window.console.log("\n\n\n\nThis is the class attempting to inherit from it:"),window.console.log(this,this.constructor,this.constructor.TITLE,this.constructor.ID_PREFIX),Error("Sublcasses of xiv.ui.layouts.Layout must have  the TITLE defined as a constructor property!");this.i={}}w(Zq,V);v("xiv.ui.layouts.Layout",Zq);
var $q="Slider_"+B(),ar="FrameDisplay_"+B(),br="ZoomDisplay_"+B(),cr="Crosshairs_"+B(),dr="PlayButton_"+B(),er={ka:$q,Od:ar,uf:br,ud:cr,Oh:dr};Zq.ID_PREFIX="xiv.ui.layouts.Layout";Zq.CSS_SUFFIX={};f=Zq.prototype;f.Ab=20;f.rd=20;f.nM=function(a){this.rd=a};f.oM=function(a){this.Ab=a};f.QH=function(){return this.i};f.Ju=function(a){return this.i[a]};f.PH=function(a){window.console.log(a,this.i[a]);var b={};C(er,function(c){b[c]=this.i[a][c]}.bind(this));window.console.log("INTERACTORS!",b);return b};
f.xb=function(){return this.constructor.TITLE};f.By=function(a){this.i=this.i?this.i:{};this.i[a.xb()]=a};f.fh=function(){this.dispatchEvent({type:"n"})};f.sw=function(){C(this.qm(),function(a){null!=a.ka&&(a.ka.g(),delete a.ka);null!=a.ud&&(a.ud.g(),delete a.ud);null!=a.Od&&(a.Od.g(),delete a.Od);null!=a.uf&&(a.uf.g(),delete a.uf);null!=a.Oh&&(a.Oh.g(),delete a.Oh)})};
f.Lp=function(){C(this.qm(),function(a){null!=a.ka&&(a.ka.o(),a.ka.C(a.ka.w()));null!=a.ud&&a.ud.o();null!=a.Od&&a.Od.o();null!=a.uf&&a.uf.o();null!=a.Oh&&a.Oh.o()})};f.o=function(){Zq.d.o.call(this);this.fh()};f.f=function(){Zq.d.f.call(this);delete this.rd;delete this.Ab;this.Tn(this.EE);delete this.EE};v("xiv.ui.layouts.Layout.EventType",{$s:"n"});v("xiv.ui.layouts.Layout.INTERACTORS",er);v("xiv.ui.layouts.Layout.ID_PREFIX",Zq.ID_PREFIX);v("xiv.ui.layouts.Layout.CSS_SUFFIX",Zq.CSS_SUFFIX);
v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameHeight",Zq.prototype.nM);v("xiv.ui.layouts.Layout.prototype.setMinLayoutFrameWidth",Zq.prototype.oM);v("xiv.ui.layouts.Layout.prototype.getLayoutFrames",Zq.prototype.QH);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameByTitle",Zq.prototype.Ju);v("xiv.ui.layouts.Layout.prototype.getLayoutFrameInteractors",Zq.prototype.PH);v("xiv.ui.layouts.Layout.prototype.getTitle",Zq.prototype.xb);v("xiv.ui.layouts.Layout.prototype.addLayoutFrame",Zq.prototype.By);
v("xiv.ui.layouts.Layout.prototype.dispatchResize",Zq.prototype.fh);v("xiv.ui.layouts.Layout.prototype.removeAllInteractors",Zq.prototype.sw);v("xiv.ui.layouts.Layout.prototype.updateInteractors",Zq.prototype.Lp);v("xiv.ui.layouts.Layout.prototype.updateStyle",Zq.prototype.o);v("xiv.ui.layouts.Layout.prototype.disposeInternal",Zq.prototype.f);function fr(){V.call(this)}w(fr,V);v("xiv.ui.Crosshairs",fr);fr.ID_PREFIX="xiv.ui.Crosshairs";fr.CSS_SUFFIX={HN:"horizontal",yP:"vertical"};f=fr.prototype;f.Qg=null;f.wg=null;f.$C=function(a){null!=a&&(this.Qg.style.left=a.toString()+"px")};f.aD=function(a){null!=a&&(this.wg.style.top=a.toString()+"px")};f.k=function(a){this.Qg=gr(this,"vertical");this.wg=gr(this,"horizontal");a.appendChild(this.wg);a.appendChild(this.Qg)};
f.Gp=function(a){a=!1===a?"hidden":"visible";this.Qg.style.visibility=a;this.wg.style.visibility=a};function gr(a,b){b=b.toLowerCase();if(!rb(fr.CSS_SUFFIX,b))throw Error("Invalid orientation: "+b);return Q("div",{id:a.constructor.ID_PREFIX+"_"+b+"_"+B(),"class":a.constructor.dd+"-"+b.toLowerCase()})}f.f=function(){fr.d.f.call(this);S(this.Qg);delete this.Qg;S(this.wg);delete this.wg};v("xiv.ui.Crosshairs.EventType",{});v("xiv.ui.Crosshairs.ID_PREFIX",fr.ID_PREFIX);
v("xiv.ui.Crosshairs.CSS_SUFFIX",fr.CSS_SUFFIX);v("xiv.ui.Crosshairs.prototype.vertical",fr.prototype.Qg);v("xiv.ui.Crosshairs.prototype.horizontal",fr.prototype.wg);v("xiv.ui.Crosshairs.prototype.setX",fr.prototype.$C);v("xiv.ui.Crosshairs.prototype.setY",fr.prototype.aD);v("xiv.ui.Crosshairs.prototype.render",fr.prototype.k);v("xiv.ui.Crosshairs.prototype.toggleVisible",fr.prototype.Gp);v("xiv.ui.Crosshairs.prototype.disposeInternal",fr.prototype.f);function hr(a,b){ak.call(this,a);this.Ry=null;this.Ra=new rq;this.MJ=b||hd;G(this.Ra,"change",this.UA,!1,this)}w(hr,ak);f=hr.prototype;f.Na="horizontal";f.so=!1;f.kK=!1;f.ah=10;f.Ir=0;f.lB=!0;f.Lr=0;f.PE=1E3;f.Zb=!0;f.$e=!1;f.B=function(){hr.d.B.call(this);var a=this.O().B("div",this.ba(this.Na));this.ue(a)};f.ue=function(a){hr.d.ue.call(this,a);Ol(a,this.ba(this.Na));this.yz();Jl(this.a(),"slider");ir(this)};
f.mb=function(){hr.d.mb.call(this);this.Ne=new qm(this.ua);this.pg=new qm(this.yc);this.Ne.qj(this.$e);this.pg.qj(this.$e);this.Ne.lu=this.pg.lu=fa;this.yb=new jo(this.a());jr(this,!0);this.a().tabIndex=0;this.Hh()};
function jr(a,b){b?(a.nb().D(a.Ne,"beforedrag",a.cr).D(a.pg,"beforedrag",a.cr).D(a.Ne,["start","end"],a.hr).D(a.pg,["start","end"],a.hr).D(a.yb,"key",a.dr).D(a.a(),"click",a.er).D(a.a(),"mousedown",a.er),a.lB&&kr(a,!0)):(a.nb().Bb(a.Ne,"beforedrag",a.cr).Bb(a.pg,"beforedrag",a.cr).Bb(a.Ne,["start","end"],a.hr).Bb(a.pg,["start","end"],a.hr).Bb(a.yb,"key",a.dr).Bb(a.a(),"click",a.er).Bb(a.a(),"mousedown",a.er),a.lB&&kr(a,!1))}f.Lc=function(){hr.d.Lc.call(this);Cc(this.Ne,this.pg,this.yb,this.Zk)};
f.cr=function(a){var b=a.uu==this.Ne?this.ua:this.yc,c;"vertical"==this.Na?(c=this.a().clientHeight-b.offsetHeight,c=(c-a.top)/c*(this.T()-this.ja())+this.ja()):c=a.left/(this.a().clientWidth-b.offsetWidth)*(this.T()-this.ja())+this.ja();c=a.uu==this.Ne?Math.min(Math.max(c,this.ja()),this.w()+this.Ed()):Math.min(Math.max(c,this.w()),this.T());lr(this,b,c)};
f.hr=function(a){var b="start"==a.type;Sl(this.a(),"goog-slider-dragging",b);Sl(a.target.handle,"goog-slider-thumb-dragging",b);a=a.uu==this.Ne;b?(this.dispatchEvent("s"),this.dispatchEvent(a?"o":"q")):(this.dispatchEvent("t"),this.dispatchEvent(a?"p":"r"))};
f.dr=function(a){var b=!0;switch(a.keyCode){case 36:mr(this,this.ja());break;case 35:mr(this,this.T());break;case 33:nr(this,this.ah);break;case 34:nr(this,-this.ah);break;case 37:var c=this.$e&&this.bf()?1:-1;nr(this,a.shiftKey?c*this.ah:c*this.Kp);break;case 40:nr(this,a.shiftKey?-this.ah:-this.Kp);break;case 39:c=this.$e&&this.bf()?-1:1;nr(this,a.shiftKey?c*this.ah:c*this.Kp);break;case 38:nr(this,a.shiftKey?this.ah:this.Kp);break;default:b=!1}b&&a.preventDefault()};
f.er=function(a){this.a().focus&&this.a().focus();var b=a.target;oi(this.ua,b)||oi(this.yc,b)||(b="click"==a.type,b&&xa()<this.Lr+this.PE||(b||(this.Lr=xa()),this.kK?mr(this,or(this,a)):(this.Ww(a),this.Sf=pr(this,or(this,a)),this.gB="vertical"==this.Na?this.Ar<this.Sf.offsetTop:this.Ar>qr(this,this.Sf)+this.Sf.offsetWidth,a=Th(this.a()),this.nb().D(a,"mouseup",this.Uw,!0).D(this.a(),"mousemove",this.Ww),this.Ej||(this.Ej=new Yf(200),this.nb().D(this.Ej,Zf,this.VA)),this.VA(),this.Ej.start())))};
f.TA=function(a){nr(this,(0<a.detail?-1:1)*this.Kp);a.preventDefault()};f.VA=function(){var a;if("vertical"==this.Na){var b=this.Ar,c=this.Sf.offsetTop;this.gB?b<c&&(a=rr(this,this.Sf)+this.ah):b>c+this.Sf.offsetHeight&&(a=rr(this,this.Sf)-this.ah)}else b=this.Ar,c=qr(this,this.Sf),this.gB?b>c+this.Sf.offsetWidth&&(a=rr(this,this.Sf)+this.ah):b<c&&(a=rr(this,this.Sf)-this.ah);da(a)&&lr(this,this.Sf,a)};
f.Uw=function(){this.Ej&&this.Ej.stop();var a=Th(this.a());this.nb().Bb(a,"mouseup",this.Uw,!0).Bb(this.a(),"mousemove",this.Ww)};function sr(a,b){var c=Cj(b,a.a());return"vertical"==a.Na?c.y:a.$e&&a.bf()?a.a().clientWidth-c.x:c.x}f.Ww=function(a){this.Ar=sr(this,a)};function or(a,b){var c=a.ja(),d=a.T();if("vertical"==a.Na){var e=a.ua.offsetHeight,h=a.a().clientHeight-e,e=sr(a,b)-e/2;return(d-c)*(h-e)/h+c}e=a.ua.offsetWidth;h=a.a().clientWidth-e;e=sr(a,b)-e/2;return(d-c)*e/h+c}
function rr(a,b){if(b==a.ua)return a.Ra.w();if(b==a.yc)return a.Ra.w()+a.Ra.Ed();throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}f.yg=function(){return this.Ne.yg()||this.pg.yg()};function nr(a,b){Math.abs(b)<a.Gd()&&(b=(0==b?0:0>b?-1:1)*a.Gd());var c=rr(a,a.ua)+b,d=rr(a,a.yc)+b,c=id(c,a.ja(),a.T()-a.Ir),d=id(d,a.ja()+a.Ir,a.T());a.Oj(c,d-c)}function lr(a,b,c){var d=sq(a.Ra,c);c=b==a.ua?d:a.Ra.w();b=b==a.yc?d:a.Ra.w()+a.Ra.Ed();c>=a.ja()&&b>=c+a.Ir&&a.T()>=b&&a.Oj(c,b-c)}
f.Oj=function(a,b){this.ja()<=a&&a<=this.T()-b&&this.Ir<=b&&b<=this.T()-a&&(a!=this.w()||b!=this.Ed())&&(this.Ra.$k=!0,this.Ra.Of(0),this.Ra.C(a),this.Ra.Of(b),this.Ra.$k=!1,this.UA())};f.ja=function(){return this.Ra.ja()};f.Sb=function(a){this.Ra.Sb(a)};f.T=function(){return this.Ra.T()};f.Lb=function(a){this.Ra.Lb(a)};function pr(a,b){return b<=a.Ra.w()+a.Ra.Ed()/2?a.ua:a.yc}f.UA=function(){this.Hh();ir(this);this.dispatchEvent("change")};
f.Hh=function(){if(this.ua&&!this.so){var a=tr(this,rr(this,this.ua)),b=tr(this,rr(this,this.yc));if("vertical"==this.Na)this.ua.style.top=a.y+"px",this.yc.style.top=b.y+"px",this.ec&&(a=ur(b.y,a.y,this.ua.offsetHeight),this.ec.style.top=a.offset+"px",this.ec.style.height=a.size+"px");else{var c=this.$e&&this.bf()?"right":"left";this.ua.style[c]=a.x+"px";this.yc.style[c]=b.x+"px";this.ec&&(a=ur(a.x,b.x,this.ua.offsetWidth),this.ec.style[c]=a.offset+"px",this.ec.style.width=a.size+"px")}}};
function ur(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function tr(a,b){var c=new Ph;if(a.ua){var d=a.ja(),e=a.T(),e=b==d&&d==e?0:(b-d)/(e-d);"vertical"==a.Na?(d=a.a().clientHeight-a.ua.offsetHeight,e=Math.round(e*d),c.x=qr(a,a.ua),c.y=d-e):(d=Math.round(e*(a.a().clientWidth-a.ua.offsetWidth)),c.x=d,c.y=a.ua.offsetTop)}return c}
function mr(a,b){b=id(b,a.ja(),a.T());a.so&&a.Fq.stop(!0);var c=new Sk,d,e=pr(a,b),h=a.w(),k=a.Ed(),l=rr(a,e),n=tr(a,l);d=a.Gd();Math.abs(b-l)<d&&(b=id(l+(b>l?d:-d),a.ja(),a.T()));lr(a,e,b);l=tr(a,rr(a,e));d="vertical"==a.Na?[qr(a,e),l.y]:[l.x,e.offsetTop];n=new Hk(e,[n.x,n.y],d,100);n.qj(a.$e);c.add(n);a.ec&&vr(a,e,h,k,l,c);a.Ry&&(e=a.Ry.dQ(h,b,100),E(e,function(a){c.add(a)}));a.Fq=c;a.nb().D(c,"end",a.OG);a.so=!0;c.play(!1)}f.de=function(){return this.so};
function vr(a,b,c,d,e,h){var k=tr(a,c),l=tr(a,c+d);c=k;d=l;b==a.ua?c=e:d=e;"vertical"==a.Na?(b=ur(l.y,k.y,a.ua.offsetHeight),k=ur(d.y,c.y,a.ua.offsetHeight),e=new Hk(a.ec,[qr(a,a.ec),b.offset],[qr(a,a.ec),k.offset],100),b=new Kk(a.ec,b.size,k.size,100)):(b=ur(k.x,l.x,a.ua.offsetWidth),k=ur(c.x,d.x,a.ua.offsetWidth),e=new Hk(a.ec,[b.offset,a.ec.offsetTop],[k.offset,a.ec.offsetTop],100),b=new Jk(a.ec,b.size,k.size,100));e.qj(a.$e);b.qj(a.$e);h.add(e);h.add(b)}f.OG=function(){this.so=!1};
f.Ci=function(a){if(this.Na!=a){var b=this.ba(this.Na),c=this.ba(a);this.Na=a;this.a()&&(a=this.a(),Nl(a,b)&&(Ql(a,b),Ol(a,c)),b=this.$e&&this.bf()?"right":"left",this.ua.style[b]=this.ua.style.top="",this.yc.style[b]=this.yc.style.top="",this.ec&&(this.ec.style[b]=this.ec.style.top="",this.ec.style.width=this.ec.style.height=""),this.Hh())}};f.ac=function(){return this.Na};
f.f=function(){hr.d.f.call(this);this.Ej&&this.Ej.g();delete this.Ej;this.Fq&&this.Fq.g();delete this.Fq;delete this.ua;delete this.yc;this.ec&&delete this.ec;this.Ra.g();delete this.Ra;this.yb&&(this.yb.g(),delete this.yb);this.Zk&&(this.Zk.g(),delete this.Zk);this.Ne&&(this.Ne.g(),delete this.Ne);this.pg&&(this.pg.g(),delete this.pg)};f.Kp=1;f.Gd=function(){return this.Ra.Gd()};f.Oc=function(a){this.Ra.Oc(a)};f.w=function(){return this.Ra.w()};f.C=function(a){lr(this,this.ua,a)};f.Ed=function(){return this.Ra.Ed()};
f.Of=function(a){lr(this,this.yc,this.Ra.w()+a)};f.ea=function(a){Mj(this.a(),a);a&&this.Hh()};function ir(a){var b=a.a();b&&(Kl(b,"valuemin",a.ja()),Kl(b,"valuemax",a.T()),Kl(b,"valuenow",a.w()),Kl(b,"valuetext",a.MJ(a.w())||""))}function kr(a,b){b?(a.Zk||(a.Zk=new Ap(a.a())),a.nb().D(a.Zk,"mousewheel",a.TA)):a.nb().Bb(a.Zk,"mousewheel",a.TA)}f.Rb=function(a){this.Zb!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.Zb=a,jr(this,a),a||this.Uw(),Sl(this.a(),"goog-slider-disabled",!a))};
f.isEnabled=function(){return this.Zb};function qr(a,b){return a.$e?Fk(b):b.offsetLeft};function wr(a,b){hr.call(this,a,b);this.Ra.Of(0)}w(wr,hr);wr.prototype.ba=function(a){return"vertical"==a?"goog-slider-vertical":"goog-slider-horizontal"};wr.prototype.yz=function(){var a=this.a(),b=Xh(document,null,"goog-slider-thumb",a)[0];b||(b=this.yk(),a.appendChild(b));this.ua=this.yc=b};wr.prototype.yk=function(){var a=this.O().B("div","goog-slider-thumb");Jl(a,"button");return a};function xr(){V.call(this)}w(xr,V);v("xiv.ui.PlayButton",xr);xr.ID_PREFIX="xiv.ui.PlayButton";xr.CSS_SUFFIX={Lh:"image"};f=xr.prototype;f.Za=null;f.vo=!1;f.Dh=null;f.P=null;f.xg=70;f.k=function(a){xr.d.k.call(this,a);this.Za=Q("img",{id:"PlayButton_"+B()});O(this.Za,xr.CSS.Lh);this.a().appendChild(this.Za);this.Za.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";G(this.Za,"click",function(){this.vo?(this.vo=!1,this.pause()):(this.vo=!0,this.play())}.bind(this))};
f.pause=function(){this.Za.src=serverRoot+"/images/viewer/xiv/ui/other/play.png";null!=this.Dh&&null!=this.P&&this.P.stop()};f.play=function(){this.Za.src=serverRoot+"/images/viewer/xiv/ui/other/pause.png";null!=this.Dh&&(null==this.P&&(this.P=new Yf),this.P.setInterval(this.xg),this.P.addEventListener(Zf,function(){this.Dh.w()==this.Dh.T()?this.Dh.C(this.Dh.ja()):this.Dh.C(this.Dh.w()+1)}.bind(this)),this.P.start())};f.setInterval=function(a){this.xg=a};f.If=function(){return this.vo};
f.VC=function(a){this.Dh=a};f.f=function(){xr.d.f.call(this);S(this.Za);J(this.Za);delete this.Za;null!=this.P&&(J(this.P),this.P.g());delete this.Dh;delete this.vo;delete this.P;delete this.xg};v("xiv.ui.PlayButton.ID_PREFIX",xr.ID_PREFIX);v("xiv.ui.PlayButton.prototype.pause",xr.prototype.pause);v("xiv.ui.PlayButton.prototype.play",xr.prototype.play);v("xiv.ui.PlayButton.prototype.isPlaying",xr.prototype.If);v("xiv.ui.PlayButton.prototype.setInterval",xr.prototype.setInterval);
v("xiv.ui.PlayButton.prototype.setSlider",xr.prototype.VC);function yr(){this.bb=[];this.hb=[]}f=yr.prototype;f.sg=function(){return this.bb.length+this.hb.length};f.Bm=function(){return 0==this.bb.length&&0==this.hb.length};f.clear=function(){this.bb=[];this.hb=[]};f.contains=function(a){return Jb(this.bb,a)||Jb(this.hb,a)};f.remove=function(a){var b=Cb(this.bb,a);if(0>b)return Mb(this.hb,a);Ab.splice.call(this.bb,b,1);return!0};
f.li=function(){for(var a=[],b=this.bb.length-1;0<=b;--b)a.push(this.bb[b]);for(var c=this.hb.length,b=0;b<c;++b)a.push(this.hb[b]);return a};function zr(a){wr.call(this);this.constructor.Pp=this.constructor.ID_PREFIX.toLowerCase().replace(/\./g,"-");this.constructor.dd=this.constructor.Pp;V.prototype.Bq.bind(this)();null!=a&&this.Ci(a)}w(zr,wr);v("nrg.ui.Slider",zr);zr.ID_PREFIX="nrg.ui.Slider";zr.CSS_SUFFIX={lF:"track",iP:"track-hovered",at:"thumb",gP:"thumb-hovered"};f=zr.prototype;f.xr=!1;f.Ds=!1;f.KJ=function(){return this.xr};f.Ei=function(a){this.Ds=a};
f.k=function(a){this.q=Q("div",{id:zr.ID_PREFIX+"_Widget_"+B()});this.Pb(this.q);a=null!=a?a:document.body;a.appendChild(this.q);this.Fh=Q("div",{id:zr.ID_PREFIX+"_Track_"+B()});this.q.appendChild(this.Fh);this.Tf=Yh("goog-slider-thumb",this.q);G(this,"change",this.Nv.bind(this));G(this,"s",this.mL.bind(this));G(this,"t",this.jL.bind(this));this.Ci(this.ac().toLowerCase())};f.a=function(){return this.q};f.II=function(){return this.Fh};f.CI=function(){return this.Tf};
f.tq=function(a){null==this.$j&&(this.$j={});if(null==this.$j[a.id]){var b=new Ap(a);b.addEventListener("mousewheel",this.ZK,!1,this);this.$j[a.id]=b}};f.mG=function(a){null==this.Yj&&(this.Yj={});if(null==this.Yj[a.id]){var b=new jo(a);G(b,"key",this.wi.bind(this));this.Yj[a.id]=b}};f.wi=function(){};f.o=function(){var a=this.w(),a=tr(this,a);"horizontal"==this.ac().toLowerCase()?this.Tf.style.left=a.x.toString()+"px":"vertical"==this.ac().toLowerCase()&&(this.Tf.style.left=a.y.toString()+"px")};
f.Ci=function(a){zr.d.Ci.call(this,a);this.oa&&Ar(this,this.ac().toLowerCase())};function Ar(a,b){function c(a,c){Jh(a,[xh(c,"horizontal"),xh(c,"vertical")],[c,xh(c,b)])}c(a.q,a.constructor.dd);c(a.Fh,zr.CSS.lF);c(a.Tf,zr.CSS.at)}f.lx=!1;f.nu=1;f.YC=function(a,b){this.lx=a;u(b)&&(this.nu=b)};f.ZK=function(a){var b=Math.abs(a.Zd)<Math.abs(a.ei)?a.ei:a.Zd;this.lx?this.C(Math.round(this.w()-b*this.nu)):this.C(Math.round(this.w()-(0>b?-1:1)));this.dispatchEvent({type:"v"});a.preventDefault()};f.je=null;
f.zA=function(){if(null!=this.je){var a=this.je.li();if(0<a.length)return a[0]}};f.Nv=function(a){a.stopPropagation();null==this.je&&(this.je=new yr);2>this.je.sg()?(a=this.w(),this.je.hb.push(a)):(a=this.w(),this.je.hb.push(a),a=this.je,0==a.bb.length&&(a.bb=a.hb,a.bb.reverse(),a.hb=[]),a.bb.pop());this.Ds||this.dispatchEvent({type:"u",value:this.w(),fK:this.ja(),$J:this.T()});this.Ds=!1};f.mL=function(){this.xr=!0};f.jL=function(){this.xr=!1};
f.f=function(){zr.d.f.call(this);delete this.Ds;null!=this.q&&(J(this),S(this.q),delete this.q);null!=this.Tf&&(J(this.Tf),S(this.Tf),delete this.Tf);null!=this.Fh&&(J(this.Fh),S(this.Fh),delete this.Fh);null!=this.Yj&&(C(this.Yj,function(a){J(a);a.g()}),D(this.Yj),delete this.Yj);null!=this.$j&&(C(this.$j,function(a){J(a);a.g()}),D(this.$j),delete this.$j);null!=this.xD&&(Kb(this.xD),delete this.xD);null!=this.CD&&(Kb(this.CD),delete this.CD);null!=this.je&&(D(this.je),delete this.je);delete this.lx;
delete this.nu;delete this.xr};v("nrg.ui.Slider.EventType",{ZD:"u",iO:"v"});v("nrg.ui.Slider.ID_PREFIX",zr.ID_PREFIX);v("nrg.ui.Slider.CSS_SUFFIX",zr.CSS_SUFFIX);v("nrg.ui.Slider.prototype.suspendChangeEvent",zr.prototype.Ei);v("nrg.ui.Slider.prototype.render",zr.prototype.k);v("nrg.ui.Slider.prototype.isSliding",zr.prototype.KJ);v("nrg.ui.Slider.prototype.getPreviousValue",zr.prototype.zA);v("nrg.ui.Slider.prototype.getElement",zr.prototype.a);v("nrg.ui.Slider.prototype.getTrack",zr.prototype.II);
v("nrg.ui.Slider.prototype.getThumb",zr.prototype.CI);v("nrg.ui.Slider.prototype.bindToMouseWheel",zr.prototype.tq);v("nrg.ui.Slider.prototype.bindToArrowKeys",zr.prototype.mG);v("nrg.ui.Slider.prototype.updateStyle",zr.prototype.o);v("nrg.ui.Slider.prototype.setOrientation",zr.prototype.Ci);v("nrg.ui.Slider.prototype.setUseDeltaToScroll",zr.prototype.YC);v("nrg.ui.Slider.prototype.disposeInternal",zr.prototype.f);function Br(){zr.call(this)}w(Br,zr);v("xiv.ui.FrameSlider",Br);Br.ID_PREFIX="xiv.ui.FrameSlider";Br.CSS_SUFFIX={};Br.prototype.k=function(){Br.d.k.call(this)};Br.prototype.f=function(){Br.d.f.call(this)};v("xiv.ui.FrameSlider.EventType",{});v("xiv.ui.FrameSlider.ID_PREFIX",Br.ID_PREFIX);v("xiv.ui.FrameSlider.CSS_SUFFIX",Br.CSS_SUFFIX);v("xiv.ui.FrameSlider.prototype.render",Br.prototype.k);v("xiv.ui.FrameSlider.prototype.disposeInternal",Br.prototype.f);function Cr(a){Zq.call(this);a=null!=a?a:pb(Dr);a=g(a)?a:[a];E(a,function(b,c){a[c]=b.toUpperCase()});Er(this,a);Fr(this,a);null!=this.i.X&&this.He();null!=this.i.Y&&this.Lg();null!=this.i.Z&&this.Pj();null!=this.i.V&&this.rp();this.o()}w(Cr,Zq);v("xiv.ui.layouts.XyzvLayout",Cr);Cr.TITLE="XyzvLayout";Cr.ID_PREFIX="xiv.ui.layouts.XyzvLayout";var Dr={Wg:"X",Re:"Y",Gl:"Z",Sp:"V"};
Cr.CSS_SUFFIX={Wg:"x",Re:"y",Gl:"z",Sp:"v",ka:"slider",Sg:"slider-thumb",gF:"slider-thumb-hovered",Ph:"slider-track",RO:"slider-track-x",SO:"slider-track-y",TO:"slider-track-z",DN:"framenumber"};function Gr(a,b,c,d,e){this.ka=a;this.Od=b;this.ud=c;this.uf=d;this.Oh=e}f=Cr.prototype;f.rC=0;f.Bi=function(a,b){this.i[a].Mm(b);var c=this.vz(a);R(this.a(),c);c.style.position="absolute";this.i[a].R().zi(c);this.i[a].R().update()};
f.vz=function(a){return Q("div",{id:this.constructor.ID_PREFIX+"_ResizeBoundary_"+a+"_"+B(),"class":xh(this.constructor.dd,a.toLowerCase()+"-resizeboundary")})};function Er(a,b){if(b.length>ob(Dr))throw Error("Invalid amount of frames "+b+". Must be "+Dr);E(b,function(a){if(!rb(Dr,a))throw Error("Invalid frame title ",a);}.bind(a))}function Fr(a,b){var c="";E(b,function(a,b){c=a.toUpperCase();this.By(new Yq(c));R(this.a(),this.i[c].a());O(this.i[c].a(),Cr.CSS[b])}.bind(a))}f.SM=function(a){a.Bw(this.qm())};
f.Bw=function(a){this.df(function(b,c){null!=a[c]&&(b[$q]=a[c].ka,S(a[c].ka.a()),b.a().appendChild(a[c].ka.a()),b[ar]=a[c].Od,S(a[c].Od.a()),b.a().appendChild(a[c].Od.a()),b[cr]=a[c].ud,b.a().appendChild(a[c].ud.Qg),b.a().appendChild(a[c].ud.wg))})};f.zy=function(){this.sw();Hr(this);Ir(this);Jr(this);Kr(this);Lr(this)};f.qm=function(){var a={};this.df(function(b,c){a[c]=new Gr(b[$q],b[ar],b[cr],b[br],b[dr])});return a};f.pA=function(a){a=this.i[a];return new Gr(a[$q],a[ar],a[cr],a[br],a[dr])};
f.oA=function(a,b){return this.i[a][b]};f.lA=function(a){return this.i[a]};function Hr(a){var b;a.df(function(a,d){b=new zr("horizontal");b.k(a.a());b.a().id=d+"_LayoutFrameSlider_"+B();a[$q]=b;Jh(b.a(),null,[Cr.CSS.ka]);Jh(b.Tf,null,[Cr.CSS.Sg]);Jh(b.Fh,null,[Cr.CSS.Ph,xh(Cr.CSS.Ph,d.toLowerCase())])}.bind(a))}function Ir(a){var b;a.df(function(a){b=new Kq;b.k(a.a());a[ar]=b}.bind(a))}function Jr(a){var b;a.df(function(a){b=new Jq;b.k(a.a());a[br]=b}.bind(a))}
function Lr(a){var b;a.df(function(a){b=new xr;b.k(a.a());a[dr]=b}.bind(a))}function Kr(a){var b;a.df(function(a){b=new fr;a[cr]=b;b.k(a.a());a.a().appendChild(b.wg);a.a().appendChild(b.Qg)}.bind(a))}f.df=function(a){C(Dr,function(b){b=b.toUpperCase();null!=this.i[b]&&"V"!=b&&a(this.i[b],b)}.bind(this))};f.loop=function(a){C(Dr,function(b){b=b.toUpperCase();a(this.i[b],b)}.bind(this))};f.He=function(){null!=this.constructor.CSS&&O(this.i.X.a(),this.constructor.CSS.Wg)};
f.Lg=function(){null!=this.constructor.CSS&&O(this.i.Y.a(),this.constructor.CSS.Re)};f.Qo=function(a){this.ai();var b=U(this.i.X.a()),c=U(this.i.Y.a()),d=U(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.A.width)};f.Pj=function(){null!=this.constructor.CSS&&O(this.i.Z.a(),this.constructor.CSS.Gl)};f.rp=function(){null!=this.constructor.CSS&&O(this.i.V.a(),this.constructor.CSS.Sp)};f.ff=fa;f.bl=fa;f.Sr=fa;f.Rr=fa;f.Le=fa;f.lf=fa;f.Me=fa;f.ql=fa;f.f=function(){Cr.d.f.call(this);delete this.rC};
v("xiv.ui.layouts.XyzvLayout.TITLE",Cr.TITLE);v("xiv.ui.layouts.XyzvLayout.EventType",{});v("xiv.ui.layouts.XyzvLayout.ID_PREFIX",Cr.ID_PREFIX);v("xiv.ui.layouts.XyzvLayout.FRAMES",Dr);v("xiv.ui.layouts.XyzvLayout.CSS_SUFFIX",Cr.CSS_SUFFIX);v("xiv.ui.layouts.XyzvLayout.InteractorSet",Gr);v("xiv.ui.layouts.XyzvLayout.prototype.resizeMargin",Cr.prototype.rC);v("xiv.ui.layouts.XyzvLayout.prototype.setLayoutFrameResizable",Cr.prototype.Bi);
v("xiv.ui.layouts.XyzvLayout.prototype.createResizeBoundary",Cr.prototype.vz);v("xiv.ui.layouts.XyzvLayout.prototype.transferInteractors",Cr.prototype.SM);v("xiv.ui.layouts.XyzvLayout.prototype.setInteractors",Cr.prototype.Bw);v("xiv.ui.layouts.XyzvLayout.prototype.addInteractors",Cr.prototype.zy);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractors",Cr.prototype.qm);v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorsByPlane",Cr.prototype.pA);
v("xiv.ui.layouts.XyzvLayout.prototype.getInteractorByPlane",Cr.prototype.oA);v("xiv.ui.layouts.XyzvLayout.prototype.getFrameByPlane",Cr.prototype.lA);v("xiv.ui.layouts.XyzvLayout.prototype.loopXyz",Cr.prototype.df);v("xiv.ui.layouts.XyzvLayout.prototype.loop",Cr.prototype.loop);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_X",Cr.prototype.He);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Y",Cr.prototype.Lg);v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_Z",Cr.prototype.Pj);
v("xiv.ui.layouts.XyzvLayout.prototype.setupLayoutFrame_V",Cr.prototype.rp);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_X",Cr.prototype.ff);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Y",Cr.prototype.bl);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_Z",Cr.prototype.Sr);v("xiv.ui.layouts.XyzvLayout.prototype.onLayoutFrameResize_V",Cr.prototype.Rr);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_X",Cr.prototype.Le);
v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Z",Cr.prototype.lf);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_Y",Cr.prototype.Me);v("xiv.ui.layouts.XyzvLayout.prototype.updateStyle_V",Cr.prototype.ql);v("xiv.ui.layouts.XyzvLayout.prototype.disposeInternal",Cr.prototype.f);function Mr(){Cr.call(this,["X","Y","Z"])}w(Mr,Cr);v("xiv.ui.layouts.TwoDWidescreen",Mr);Mr.TITLE="TwoDWidescreen";Mr.ID_PREFIX="xiv.ui.layouts.TwoDWidescreen";Mr.CSS_SUFFIX={Wg:"x",Re:"y",Gl:"z"};f=Mr.prototype;f.He=function(){Mr.d.He.call(this);this.Bi("X",["RIGHT"]);G(this.i.X.R(),"resize",this.ff.bind(this));G(this.i.X.R(),"resize_end",this.o.bind(this))};f.Lg=function(){Mr.d.Lg.call(this);this.Bi("Y",["BOTTOM"]);G(this.i.Y.R(),"resize",this.bl.bind(this));G(this.i.Y.R(),"resize_end",this.o.bind(this))};
f.ff=function(){this.Qo(function(a){var b=a.width,c=Math.max(this.A.width-a.width,this.Ab);E(["Y","Z"],function(a){this.i[a].a().style.left=b+"px";this.i[a].a().style.width=c+"px"}.bind(this))}.bind(this));this.fh()};f.bl=function(){this.Qo(function(a,b){window.console.log("Y SIZE",b.height);var c=b.height,d=this.A.height-c;this.i.Z.a().style.top=c+"px";this.i.Z.a().style.height=d+"px"}.bind(this));this.fh()};f.o=function(){Mr.d.o.call(this);this.Zo();this.Le();this.Me();this.lf()};
f.Zo=function(){if(this.sa.width!==this.A.width||this.sa.height!==this.A.height){var a=1-(this.sa.height-this.A.height)/this.sa.height,b=1-(this.sa.width-this.A.width)/this.sa.width;this.df(function(c){frameSize=U(c.a());c.a().style.width=Math.max(frameSize.width*b,this.Ab).toString()+"px";c.a().style.height=Math.max(frameSize.height*a,this.rd).toString()+"px"}.bind(this))}};
f.Le=function(){var a=this.i.X;a.a().style.height=this.A.height.toString()+"px";bl(a.R().Dd(),{left:this.Ab,width:this.A.width-2*this.Ab});var b=a.R().Fd("RIGHT");b.style.left=a.a().style.width;Ij(b,this.A.height);a.R().update()};f.Me=function(){var a=this.i.Y;a.a().style.left=this.i.X.a().style.width;bl(a.R().Dd(),{top:this.rd,height:this.A.height-2*this.rd});var b=a.R().Fd("BOTTOM");b.style.top=a.a().style.height;Hj(b,parseInt(a.a().style.width));a.R().update()};
f.lf=function(){var a=this.i.Z;a.a().style.left=this.i.X.a().style.width;a.a().style.top=this.i.Y.a().style.height;a.a().style.height=this.A.height-parseInt(this.i.Y.a().style.height)+NaN};v("xiv.ui.layouts.TwoDWidescreen.TITLE",Mr.TITLE);v("xiv.ui.layouts.TwoDWidescreen.EventType",{});v("xiv.ui.layouts.TwoDWidescreen.ID_PREFIX",Mr.ID_PREFIX);v("xiv.ui.layouts.TwoDWidescreen.CSS_SUFFIX",Mr.CSS_SUFFIX);v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_X",Mr.prototype.He);
v("xiv.ui.layouts.TwoDWidescreen.prototype.setupLayoutFrame_Y",Mr.prototype.Lg);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_X",Mr.prototype.ff);v("xiv.ui.layouts.TwoDWidescreen.prototype.onLayoutFrameResize_Y",Mr.prototype.bl);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle",Mr.prototype.o);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_X",Mr.prototype.Le);v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Y",Mr.prototype.Me);
v("xiv.ui.layouts.TwoDWidescreen.prototype.updateStyle_Z",Mr.prototype.lf);function Nr(a){Cr.call(this,a)}w(Nr,Cr);v("xiv.ui.layouts.SingleFrameLayout",Nr);Nr.TITLE="SingleFrameLayout";Nr.ID_PREFIX="xiv.ui.layouts.SingleFrameLayout";Nr.prototype.Zo=function(){if(this.sa.width!==this.A.width||this.sa.height!==this.A.height){var a=this.sa.height*(1-(this.sa.height-this.A.height)/this.sa.height),b=this.sa.width*(1-(this.sa.width-this.A.width)/this.sa.width);this.loop(function(c){null!=c&&Gj(c.a(),Math.max(b,this.Ab),Math.max(a,this.rd))}.bind(this))}};
Nr.prototype.o=function(){Nr.d.o.call(this);this.Zo()};v("xiv.ui.layouts.SingleFrameLayout.TITLE",Nr.TITLE);v("xiv.ui.layouts.SingleFrameLayout.ID_PREFIX",Nr.ID_PREFIX);v("xiv.ui.layouts.SingleFrameLayout.prototype.updateStyle",Nr.prototype.o);function Or(){Cr.call(this,"V");O(this.i.V.a(),xh(Yq.dd,this.constructor.TITLE))}w(Or,Nr);v("xiv.ui.layouts.ThreeD",Or);Or.TITLE="ThreeD";Or.ID_PREFIX="xiv.ui.layouts.ThreeD";v("xiv.ui.layouts.ThreeD.TITLE",Or.TITLE);v("xiv.ui.layouts.ThreeD.ID_PREFIX",Or.ID_PREFIX);function Pr(){Cr.call(this,"X");O(this.i.X.a(),xh(Yq.dd,this.constructor.TITLE.toLowerCase()))}w(Pr,Nr);v("xiv.ui.layouts.Sagittal",Pr);Pr.TITLE="Sagittal";Pr.ID_PREFIX="xiv.ui.layouts.Sagittal";v("xiv.ui.layouts.Sagittal.TITLE",Pr.TITLE);v("xiv.ui.layouts.Sagittal.ID_PREFIX",Pr.ID_PREFIX);function Qr(){Cr.call(this)}w(Qr,Cr);v("xiv.ui.layouts.Conventional",Qr);Qr.TITLE="Conventional";Qr.ID_PREFIX="xiv.ui.layouts.Conventional";Qr.CSS_SUFFIX={Wg:"x",Re:"y",Gl:"z",Sp:"v",NP:"v-boundary"};f=Qr.prototype;f.He=function(){Qr.d.He.call(this);this.Bi("X",["RIGHT","TOP_RIGHT"]);G(this.i.X.R(),"resize",this.ff.bind(this));G(this.i.X.R(),"resize_end",this.o.bind(this))};f.Lg=function(){Qr.d.Lg.call(this)};
f.Pj=function(){Qr.d.Pj.call(this);this.Bi("Z",["RIGHT","TOP_RIGHT"]);G(this.i.Z.R(),"resize",this.Sr.bind(this));G(this.i.Z.R(),"resize_end",this.o.bind(this))};f.rp=function(){Qr.d.rp.call(this);this.Bi("V","BOTTOM");G(this.i.V.R(),"resize",this.Rr.bind(this));G(this.i.V.R(),"resize_end",this.o.bind(this))};function Rr(a,b){a.ai();var c=U(a.i.X.a()),d=U(a.i.Y.a()),e=U(a.i.Z.a());b(c,d,e)}
f.ff=function(){Rr(this,function(a,b,c){var d=Math.max(this.A.width-a.width-c.width,this.Ab),e=c.width,h=this.A.height-a.height;this.Ab==d&&(e=Math.max(this.A.width-a.width-b.width,this.Ab),tj(this.i.X.a(),e,h));tj(this.i.Z.a(),0,h);Gj(this.i.Z.a(),e,a.height);tj(this.i.Y.a(),c.width+a.width,h);Gj(this.i.Y.a(),d,a.height);Gj(this.i.V.a(),this.A.width,this.A.height-a.height)}.bind(this));this.fh()};
f.Sr=function(){Rr(this,function(a,b,c){var d=Math.max(this.A.width-c.width-b.width,this.Ab),e=b.width,h=this.A.height-c.height;this.Ab==d&&(e=Math.max(this.A.width-c.width-a.width,this.Ab));tj(this.i.X.a(),c.width,h);Gj(this.i.X.a(),d,c.height);tj(this.i.Y.a(),c.width+d,h);Gj(this.i.Y.a(),e,b.height);Gj(this.i.V.a(),this.A.width,this.A.height-c.height)}.bind(this));this.fh()};
f.Rr=function(){this.ai();var a=parseInt(this.i.V.a().style.height),b=this.A.height-a;C(this.i,function(c){c!==this.i.V&&bl(c.a(),{top:a,height:b})}.bind(this));this.Le();this.Me();this.fh()};f.o=function(){Qr.d.o.call(this);this.ql();this.jx();this.kx();this.Le();this.Me();this.lf()};f.jx=function(){var a=parseInt(this.i.V.a().style.height),b=Math.max(this.A.height-a,this.rd);this.df(function(c){c.a().style.top=a+"px";c.a().style.height=b+"px"})};
f.kx=function(){var a,b=1-(this.sa.width-this.A.width)/this.sa.width;this.sa.width!==this.A.width&&this.df(function(c){a=U(c.a());c.a().style.width=Math.max(a.width*b,this.Ab).toString()+"px"}.bind(this))};
function Sr(a,b){var c=a.i.V.R().Kk("BOTTOM"),d=a.i[b].R().Dd(),e=vj(a.i[b].a()),h=U(a.i[b].a());tj(d,parseInt(d.style.left),a.rd);Gj(d,a.A.width-3*a.Ab,a.A.height-2*a.rd);d=a.i[b].R().Fd("RIGHT");tj(d,e.x+h.width,e.y);Ij(d,a.A.height-c.ib.y);tj(a.i[b].R().Fd("TOP_RIGHT"),e.x+h.width,e.y);a.i[b].R().update()}f.Le=function(){this.i.X.a().style.left=this.i.Z.a().style.width;bl(this.i.X.R().Dd(),{left:2*this.Ab});Sr(this,"X")};
f.Me=function(){this.i.Y.a().style.left=(parseInt(this.i.Z.a().style.width)+parseInt(this.i.X.a().style.width)).toString()+"px"};f.lf=function(){bl(this.i.Z.R().Dd(),{left:this.Ab});Sr(this,"Z")};
f.ql=function(){if(this.sa.width!==this.A.width||this.sa.height!==this.A.height){var a=U(this.i.V.a());Gj(this.i.V.a(),this.A.width,Math.max(a.height*(1-(this.sa.height-this.A.height)/this.sa.height),this.rd))}tj(this.i.V.R().Dd(),this.A.width,this.rd);Gj(this.i.V.R().Dd(),this.A.width-3*this.Ab,this.A.height-2*this.rd);a=this.i.V.R().Fd("BOTTOM");tj(a,0,U(this.i.V.a()).height);Hj(a,this.A.width);this.i.V.R().update()};v("xiv.ui.layouts.Conventional.TITLE",Qr.TITLE);
v("xiv.ui.layouts.Conventional.EventType",{});v("xiv.ui.layouts.Conventional.ID_PREFIX",Qr.ID_PREFIX);v("xiv.ui.layouts.Conventional.CSS_SUFFIX",Qr.CSS_SUFFIX);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_X",Qr.prototype.He);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Y",Qr.prototype.Lg);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_Z",Qr.prototype.Pj);v("xiv.ui.layouts.Conventional.prototype.setupLayoutFrame_V",Qr.prototype.rp);
v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_Z",Qr.prototype.Sr);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_X",Qr.prototype.ff);v("xiv.ui.layouts.Conventional.prototype.onLayoutFrameResize_V",Qr.prototype.Rr);v("xiv.ui.layouts.Conventional.prototype.updateStyle",Qr.prototype.o);v("xiv.ui.layouts.Conventional.prototype.updateStyle_X",Qr.prototype.Le);v("xiv.ui.layouts.Conventional.prototype.updateStyle_Y",Qr.prototype.Me);
v("xiv.ui.layouts.Conventional.prototype.updateStyle_Z",Qr.prototype.lf);v("xiv.ui.layouts.Conventional.prototype.updateStyle_V",Qr.prototype.ql);function Tr(){Cr.call(this,"Z");O(this.i.Z.a(),xh(Yq.dd,this.constructor.TITLE))}w(Tr,Nr);v("xiv.ui.layouts.Transverse",Tr);Tr.TITLE="Transverse";Tr.ID_PREFIX="xiv.ui.layouts.Transverse";v("xiv.ui.layouts.Transverse.TITLE",Tr.TITLE);v("xiv.ui.layouts.Transverse.ID_PREFIX",Tr.ID_PREFIX);function Ur(){Cr.call(this)}w(Ur,Cr);v("xiv.ui.layouts.FourUp",Ur);Ur.TITLE="Four-Up";Ur.ID_PREFIX="xiv.ui.layouts.FourUp";Ur.CSS_SUFFIX={Wg:"x",Re:"y",Gl:"z",Sp:"v"};f=Ur.prototype;f.He=function(){Ur.d.He.call(this);this.Bi("X",["RIGHT","TOP","TOP_RIGHT"]);G(this.i.X.R(),"resize",this.ff.bind(this));G(this.i.X.R(),"resize_end",this.o.bind(this))};
f.ff=function(){var a=vj(this.i.X.a()),b=U(this.i.X.a());tj(this.i.Y.a(),b.width,a.y);Gj(this.i.Y.a(),this.A.width-b.width,b.height);tj(this.i.Z.a(),0,0);Gj(this.i.Z.a(),b.width,a.y);tj(this.i.V.a(),b.width,0);Gj(this.i.V.a(),this.A.width-b.width,a.y);a=this.i.X.R().Kk("RIGHT").Fd();a.style.top="0px";a.style.height=this.A.height.toString()+"px";this.fh()};f.o=function(){Ur.d.o.call(this);this.Zo();this.lf();this.ql();this.Le();this.Me()};
f.Zo=function(){if(this.sa.width!==this.A.width||this.sa.height!==this.A.height){var a=this.sa.height*(1-(this.sa.height-this.A.height)/this.sa.height)/2,b=this.sa.width*(1-(this.sa.width-this.A.width)/this.sa.width)/2;this.loop(function(c){Gj(c.a(),Math.max(b,this.Ab),Math.max(a,this.rd))}.bind(this))}};
f.Le=function(){this.i.X.a().style.top=this.i.Z.a().style.height;tj(this.i.X.R().Dd(),this.Ab,this.rd);Gj(this.i.X.R().Dd(),this.A.width-2*this.Ab,this.A.height-2*this.rd);var a=this.i.X.R().Kk("TOP").Fd();a.style.left="0px";a.style.width=this.A.width.toString()+"px";this.i.X.R().update();a=this.i.X.R().Kk("RIGHT").Fd();a.style.top="0px";a.style.height=this.A.height.toString()+"px"};f.Me=function(){this.i.Y.a().style.left=this.i.Z.a().style.width;this.i.Y.a().style.top=this.i.Z.a().style.height};
f.lf=function(){};f.ql=function(){this.i.V.a().style.left=this.i.Z.a().style.width};f.f=function(){Ur.d.f.call(this)};v("xiv.ui.layouts.FourUp.TITLE",Ur.TITLE);v("xiv.ui.layouts.FourUp.EventType",{});v("xiv.ui.layouts.FourUp.ID_PREFIX",Ur.ID_PREFIX);v("xiv.ui.layouts.FourUp.CSS_SUFFIX",Ur.CSS_SUFFIX);v("xiv.ui.layouts.FourUp.prototype.setupLayoutFrame_X",Ur.prototype.He);v("xiv.ui.layouts.FourUp.prototype.onLayoutFrameResize_X",Ur.prototype.ff);v("xiv.ui.layouts.FourUp.prototype.updateStyle",Ur.prototype.o);
v("xiv.ui.layouts.FourUp.prototype.updateStyle_X",Ur.prototype.Le);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Y",Ur.prototype.Me);v("xiv.ui.layouts.FourUp.prototype.updateStyle_Z",Ur.prototype.lf);v("xiv.ui.layouts.FourUp.prototype.updateStyle_V",Ur.prototype.ql);v("xiv.ui.layouts.FourUp.prototype.disposeInternal",Ur.prototype.f);function Vr(){Cr.call(this,["X","Y","Z"])}w(Vr,Cr);v("xiv.ui.layouts.TwoDRow",Vr);Vr.TITLE="TwoDRow";Vr.ID_PREFIX="xiv.ui.layouts.TwoDRow";Vr.CSS_SUFFIX={Wg:"x",Re:"y",Gl:"z"};f=Vr.prototype;f.He=function(){Vr.d.He.call(this);this.Bi("X",["RIGHT"]);G(this.i.X.R(),"resize",this.ff.bind(this));G(this.i.X.R(),"resize_end",this.o.bind(this))};f.Lg=function(){Vr.d.Lg.call(this);this.Bi("Y",["RIGHT"]);G(this.i.Y.R(),"resize",this.bl.bind(this));G(this.i.Y.R(),"resize_end",this.o.bind(this))};f.Pj=function(){Vr.d.Pj.call(this)};
f.Qo=function(a){this.ai();var b=U(this.i.X.a()),c=U(this.i.Y.a()),d=U(this.i.Z.a());a(b,c,d,b.width+c.width+d.width-this.A.width)};f.ff=function(){this.Qo(function(a,b,c){b=Math.max(this.A.width-a.width-c.width,this.Ab);var d=this.A.height-a.height;tj(this.i.Y.a(),a.width,d);Gj(this.i.Y.a(),b,a.height);tj(this.i.Z.a(),a.width+b,d);Gj(this.i.Z.a(),c.width,a.height)}.bind(this));this.fh()};
f.bl=function(){this.Qo(function(a,b){var c=this.A.height-b.height;tj(this.i.X.a(),0,c);Gj(this.i.X.a(),a.width,b.height);tj(this.i.Z.a(),a.width+b.width,c);Gj(this.i.Z.a(),this.A.width-a.width-b.width,b.height)}.bind(this));this.fh()};f.o=function(){Vr.d.o.call(this);this.kx();this.jx();this.Le();this.Me();this.lf()};f.jx=function(){var a=this.A.height.toString()+"px";this.df(function(b){b.a().style.height=a})};
f.kx=function(){var a,b=1-(this.sa.width-this.A.width)/this.sa.width;this.sa.width!==this.A.width&&this.df(function(c){a=U(c.a());newWidth=c.a().style.width=Math.max(a.width*b,this.Ab).toString()+"px"}.bind(this))};function Wr(a,b){var c=a.i[b].R().Dd(),d=vj(a.i[b].a()),e=U(a.i[b].a());tj(c,parseInt(c.style.left),a.rd);Gj(c,a.A.width-3*a.Ab,a.A.height-2*a.rd);c=a.i[b].R().Fd("RIGHT");tj(c,d.x+e.width,d.y);Ij(c,a.A.height);a.i[b].R().update()}
f.Le=function(){bl(this.i.X.R().Dd(),{left:this.Ab});Wr(this,"X")};f.Me=function(){this.i.Y.a().style.left=this.i.X.a().style.width;bl(this.i.Y.R().Dd(),{left:2*this.Ab});Wr(this,"Y")};f.lf=function(){this.i.Z.a().style.left=(parseInt(this.i.X.a().style.width)+parseInt(this.i.Y.a().style.width)).toString()+"px"};v("xiv.ui.layouts.TwoDRow.TITLE",Vr.TITLE);v("xiv.ui.layouts.TwoDRow.EventType",{});v("xiv.ui.layouts.TwoDRow.ID_PREFIX",Vr.ID_PREFIX);v("xiv.ui.layouts.TwoDRow.CSS_SUFFIX",Vr.CSS_SUFFIX);
v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_X",Vr.prototype.He);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Y",Vr.prototype.Lg);v("xiv.ui.layouts.TwoDRow.prototype.setupLayoutFrame_Z",Vr.prototype.Pj);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_X",Vr.prototype.ff);v("xiv.ui.layouts.TwoDRow.prototype.onLayoutFrameResize_Y",Vr.prototype.bl);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle",Vr.prototype.o);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_X",Vr.prototype.Le);
v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Y",Vr.prototype.Me);v("xiv.ui.layouts.TwoDRow.prototype.updateStyle_Z",Vr.prototype.lf);v("nrg.array",function(){});v("nrg.array.naturalCompare",function(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,h,k;h=(k=a.charAt(c++)).charCodeAt(0);)h=46==h||48<=h&&57>=h,h!==e&&(b[++d]="",e=h),b[d]+=k;return b}var d=c(a),e=c(b);for(x=0;d[x]&&e[x];x++)if(d[x]!==e[x]){var h=Number(d[x]),k=Number(e[x]);return h==d[x]&&k==e[x]?h-k:d[x]>e[x]?1:-1}return d.length-e.length});function Xr(){Cr.call(this,"Y");O(this.i.Y.a(),xh(Yq.dd,this.constructor.TITLE.toLowerCase()))}w(Xr,Nr);v("xiv.ui.layouts.Coronal",Xr);Xr.TITLE="Coronal";Xr.ID_PREFIX="xiv.ui.layouts.Coronal";v("xiv.ui.layouts.Coronal.TITLE",Xr.TITLE);v("xiv.ui.layouts.Coronal.ID_PREFIX",Xr.ID_PREFIX);function Yr(){V.call(this);this.constructor.Hx={};this.constructor.Hx[Ur.TITLE]=Ur;this.constructor.Hx[Qr.TITLE]=Qr;this.Al={};this.Jj={};this.Gi={}}w(Yr,V);v("xiv.ui.layouts.LayoutHandler",Yr);Yr.ID_PREFIX="xiv.ui.layouts.LayoutHandler";Yr.CSS_SUFFIX={};f=Yr.prototype;f.ub=null;f.Id=null;f.pv=!1;f.aj=null;f.Ke=null;f.Vy=!0;f.OJ=function(){return this.pv};f.eG=function(a){this.Vy=a};f.cA=function(){return this.ub[this.Xc]};f.dA=function(a){return this.ub[this.Xc].Ju(a)};
f.Lp=function(){null!=this.Id&&this.Id.Lp()};f.Xq=function(){return null!=this.Id?this.Id.qm():null};function Zr(a){var b=[];a=a.Id.qm();C(a,function(a){C(a,function(a){b.push(a.a())})});return b}f.uA=function(a){return null!=this.Id?this.Id.pA(a):null};f.WH=function(a){return null!=this.Id?this.Id.lA(a):null};f.tA=function(a,b){return null!=this.Id?this.Id.oA(a,b):null};f.IC=function(a){this.Ai(a);null!=this.Id&&this.Id.sw();this.ub[a].zy();this.Id=this.ub[a]};
f.Ay=function(a,b){if(void 0 in this.Al)throw Error(a+" is an already used layout title!");b&&(this.Al[a]=b)};f.Ai=function(a,b){if(!(a in this.Al))throw Error("Invalid layout: "+a+"!");null==this.ub&&(this.ub={});a in this.ub||(this.ub[a]=new this.Al[a],G(this.ub[a],"n",this.Tr.bind(this)),$r(this.ub[a]),R(this.a(),this.ub[a].a()));this.bs=this.Xc;this.Xc=a;as(this);this.uD(!1===b?0:500)};
function as(a){var b;C(a.ub[a.Xc].i,function(a,d){b=this.uA(d);null!=b&&null!=b.ka&&null!=b.Oh&&(O(a.a(),"xiv-ui-layouts-hoverframe"),E([b.ka.a(),b.Oh.a()],function(a){O(a,"xiv-ui-layouts-fadeableinteractor")}.bind(this)))}.bind(a))}function bs(a){var b;C(a.ub[a.Xc].i,function(a,d){b=this.tA(d,$q);null!=b&&null==a[cs]&&(b.tq(a.a()),a[cs]=!0)}.bind(a))}f.Tr=function(){this.dispatchEvent({type:"z"})};
f.uD=function(a){a=u(a)&&0<=a?a:500;this.bs==this.Xc?bs(this):this.bs?this.Vy?ds(this,a):ds(this,0):(es(this,this.Xc),fs(this,this.Xc))};function gs(a,b,c){E(ji(b.a()),function(a){null!=this.Jj[c]||(this.Jj[c]=[]);this.Jj[c].push(a)}.bind(a))}function hs(a){C(a.Gi,function(a){R(this.a().parentNode,a)}.bind(a))}function is(a,b){var c=[];C(a.Gi,function(a,e){c=Nb(c,vl(a,this.aj[e],this.Ke[e],b))}.bind(a));return c}
function ds(a,b){var c=a.ub[a.Xc].i,d;es(a,a.Xc);fs(a,a.Xc);null!=a.aj&&D(a.aj);null!=a.Ke&&D(a.Ke);a.aj={};a.Ke={};C(a.ub[a.bs].i,function(a,b){d=a.a().cloneNode(!1);this.Gi[b]=d;gs(this,a,b);C(this.Jj,function(a,b){E(a,function(a){S(a);null!=this.Gi[b]&&this.Gi[b].appendChild(a)}.bind(this))}.bind(this));if(b in c){var k=ul(a.a(),c[b].a());this.aj[b]=k.iG;this.Ke[b]=k.PM}else this.aj[b]={"z-index":0},this.Ke[b]={opacity:0}}.bind(a));hs(a);wl(is(a,b),a.Yv.bind(a),a.Zv.bind(a),a.Xv.bind(a))}
f.Yv=function(){this.bB();this.pv=!0;this.dispatchEvent({type:"w",ex:this.Gi})};var cs=B();f=Yr.prototype;f.Zv=function(){this.dispatchEvent({type:"y",ex:this.Gi})};
f.Xv=function(){var a=this.ub[this.Xc].i;C(a,function(a,c){null!=this.Jj[c]&&E(this.Jj[c],function(c){a.a().appendChild(c)})}.bind(this));C(a,function(a,c){null!=this.Ke[c]&&bl(a.a(),this.Ke[c])}.bind(this));this.ub[this.Xc]!==this.Id&&this.ub[this.Xc].Bw(this.Xq());js(this);this.pv=!1;es(this,this.Xc);fs(this,this.Xc);ks(this);this.dispatchEvent({type:"x",frames:a});bs(this);this.o()};function fs(a,b){a.ub[b].a().style.opacity=1;a.ub[b].o()}
function es(a,b){a.ub[b].a().style.visibility="visible";a.ub[b].o()}f.bB=function(){C(this.ub,function(a){a.a().style.visibility="hidden";a.o()}.bind(this))};function js(a){C(a.Gi,function(a){S(a);delete a})}function $r(a){C(a.i,function(a){G(a.a(),"dblclick",function(){})})}f.KK=function(a){this.JQ.push(a)};f.o=function(){Yr.d.o.call(this);this.ub[this.Xc].o()};function ks(a){null!=a.aj&&(C(a.aj,function(a){D(a)}),D(a.Ke),delete a.Ke);null!=a.Ke&&(C(a.Ke,function(a){D(a)}),D(a.Ke),delete a.Ke)}
f.f=function(){Yr.d.f.call(this);ks(this);delete this.Gi;D(this.Jj);delete this.Jj;delete this.Id;this.Tn(this.ub);delete this.ub;D(this.Al);delete this.Al;delete this.Xc;delete this.bs};v("xiv.ui.layouts.LayoutHandler.EventType",{TN:"w",SN:"x",UN:"y",$s:"z"});v("xiv.ui.layouts.LayoutHandler.ID_PREFIX",Yr.ID_PREFIX);v("xiv.ui.layouts.LayoutHandler.CSS_SUFFIX",Yr.CSS_SUFFIX);v("xiv.ui.layouts.LayoutHandler.ANIM_TIME",500);v("xiv.ui.layouts.LayoutHandler.SLIDER_BOUND",cs);
v("xiv.ui.layouts.LayoutHandler.prototype.layoutChanging",Yr.prototype.OJ);v("xiv.ui.layouts.LayoutHandler.prototype.animateLayoutChange",Yr.prototype.eG);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayout",Yr.prototype.cA);v("xiv.ui.layouts.LayoutHandler.prototype.getCurrentLayoutFrame",Yr.prototype.dA);v("xiv.ui.layouts.LayoutHandler.prototype.updateInteractors",Yr.prototype.Lp);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractors",Yr.prototype.Xq);
v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsElements",Yr.prototype.nQ);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorsByPlane",Yr.prototype.uA);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterFrameByPlane",Yr.prototype.WH);v("xiv.ui.layouts.LayoutHandler.prototype.getMasterInteractorByPlane",Yr.prototype.tA);v("xiv.ui.layouts.LayoutHandler.prototype.setMasterLayout",Yr.prototype.IC);v("xiv.ui.layouts.LayoutHandler.prototype.addLayout",Yr.prototype.Ay);
v("xiv.ui.layouts.LayoutHandler.prototype.setLayout",Yr.prototype.Ai);v("xiv.ui.layouts.LayoutHandler.prototype.switchLayout",Yr.prototype.uD);v("xiv.ui.layouts.LayoutHandler.prototype.hideAllLayouts",Yr.prototype.bB);v("xiv.ui.layouts.LayoutHandler.prototype.onLayoutFrameDoubleClicked",Yr.prototype.KK);v("xiv.ui.layouts.LayoutHandler.prototype.updateStyle",Yr.prototype.o);v("xiv.ui.layouts.LayoutHandler.prototype.disposeInternal",Yr.prototype.f);function ms(a,b){this.x=a;this.y=b}w(ms,Ph);f=ms.prototype;f.clone=function(){return new ms(this.x,this.y)};f.Ag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};f.scale=Ph.prototype.scale;f.Ib=function(){this.x=-this.x;this.y=-this.y;return this};f.normalize=function(){return this.scale(1/this.Ag())};f.add=function(a){this.x+=a.x;this.y+=a.y;return this};f.Pc=function(a){this.x-=a.x;this.y-=a.y;return this};
f.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};f.km=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function ns(){cd.call(this);this.u="shaders";this.jq="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.jq=a+="}\n";this.Zp="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Zp=a+="}\n"}
w(ns,cd);
var os={vP:"vertexPosition",uP:"vertexNormal",tP:"vertexColor",xP:"vertexTexturePos",wP:"vertexScalar"},ps={zP:"view",qO:"perspective",iN:"center",nO:"objectTransform",pP:"useObjectColor",lO:"objectColor",rP:"useScalars",HO:"scalarsReplaceMode",EO:"scalarsMin",BO:"scalarsMax",FO:"scalarsMinColor",CO:"scalarsMaxColor",GO:"scalarsMinThreshold",DO:"scalarsMaxThreshold",AO:"scalarsInterpolation",rO:"pointSize",mO:"objectOpacity",kO:"normal",qP:"usePicking",sP:"useTexture",oP:"useLabelMapTexture",RN:"labelmapOpacity",
QN:"labelmapColor",ZO:"textureSampler",$O:"textureSampler2",DP:"volumeLowerThreshold",KP:"volumeUpperThreshold",HP:"volumeScalarMin",FP:"volumeScalarMax",IP:"volumeScalarMinColor",GP:"volumeScalarMaxColor",MP:"volumeWindowLow",LP:"volumeWindowHigh",JP:"volumeTexture"};
function qs(a){var b=Object.keys(ps);if(!Object.keys(os).every(function(a){a=os[a];return-1!=this.jq.search(a)||-1!=this.Zp.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=ps[a];return-1!=this.jq.search(a)||-1!=this.Zp.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};function rs(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");cd.call(this);this.u="buffer";this.Db=a;this.Pi=b;this.Qi=c}w(rs,cd);function ss(a,b){this.bu=a instanceof Ph?a:new Ph(a,b)}w(ss,bp);ss.prototype.Fe=function(a,b,c,d){Io(wj(a),0,a,b,this.bu,c,null,d)};function ts(a,b){this.OL=4;this.nw=b||void 0;Fm.call(this,a)}w(ts,Fm);ts.prototype.Fw=function(a){this.nw=a||void 0;this.ya()&&this.Fe()};ts.prototype.Fe=function(){if(this.nw){var a=!this.ya()&&"move_offscreen"!=this.Vm,b=this.a();a&&(b.style.visibility="hidden",Mj(b,!0));this.nw.Fe(b,this.OL,this.zQ);a&&Mj(b,!1)}};function us(a,b,c){this.wb=c||(a?Rh(Vh(a)):Rh());ts.call(this,this.wb.B("div",{style:"position:absolute;display:none;"}));this.hu=new Ph(1,1);this.Fk=new mg;a&&this.am(a);null!=b&&this.pp(b)}w(us,ts);var vs=[];f=us.prototype;f.se=null;f.className="goog-tooltip";f.hD=500;f.kJ=0;f.O=function(){return this.wb};f.am=function(a){a=Vh(a);this.Fk.add(a);G(a,"mouseover",this.Rk,!1,this);G(a,"mouseout",this.gr,!1,this);G(a,"mousemove",this.QA,!1,this);G(a,"focus",this.Pk,!1,this);G(a,"blur",this.gr,!1,this)};
f.detach=function(a){if(a)a=Vh(a),ws(this,a),this.Fk.remove(a);else{for(var b=this.Fk.li(),c=0;a=b[c];c++)ws(this,a);this.Fk.clear()}};function ws(a,b){Vc(b,"mouseover",a.Rk,!1,a);Vc(b,"mouseout",a.gr,!1,a);Vc(b,"mousemove",a.QA,!1,a);Vc(b,"focus",a.Pk,!1,a);Vc(b,"blur",a.gr,!1,a)}f.pp=function(a){pi(this.a(),a)};f.xw=function(a){var b=this.a();b&&S(b);us.d.xw.call(this,a);a&&(b=this.wb.na.body,b.insertBefore(a,b.lastChild))};f.Ou=function(){return vi(this.a())};
f.rm=function(){return this.Qj?this.ya()?4:1:this.mo?3:this.ya()?2:0};f.Mv=function(){if(!Fm.prototype.Mv.call(this))return!1;if(this.anchor)for(var a,b=0;a=vs[b];b++)oi(a.a(),this.anchor)||a.ea(!1);Lb(vs,this);a=this.a();a.className=this.className;xs(this);G(a,"mouseover",this.XA,!1,this);G(a,"mouseout",this.WA,!1,this);ys(this);return!0};
f.Vv=function(){Mb(vs,this);for(var a=this.a(),b,c=0;b=vs[c];c++)b.anchor&&oi(a,b.anchor)&&b.ea(!1);this.cC&&zs(this.cC);Vc(a,"mouseover",this.XA,!1,this);Vc(a,"mouseout",this.WA,!1,this);this.anchor=void 0;0==this.rm()&&(this.qs=!1);Fm.prototype.Vv.call(this)};f.DB=function(a,b){this.anchor==a&&this.Fk.contains(this.anchor)&&(this.qs||!this.PQ?(this.ea(!1),this.ya()||(this.anchor=a,this.Fw(b||As(this,0)),this.ea(!0))):this.anchor=void 0);this.Qj=void 0};
f.aK=function(a){this.mo=void 0;a==this.anchor&&(null!=this.se&&(this.se==this.a()||this.Fk.contains(this.se))||this.hz&&this.hz.se||this.ea(!1))};function Bs(a,b){var c=Ei(a.wb);a.hu.x=b.clientX+c.x;a.hu.y=b.clientY+c.y}f.Rk=function(a){var b=Cs(this,a.target);this.se=b;xs(this);b!=this.anchor&&(this.anchor=b,this.Qj||(this.Qj=$f(ua(this.DB,this,b,void 0),this.hD)),Ds(this),Bs(this,a))};function Cs(a,b){try{for(;b&&!a.Fk.contains(b);)b=b.parentNode;return b}catch(c){return null}}
f.QA=function(a){Bs(this,a);this.qs=!0};f.Pk=function(a){this.se=a=Cs(this,a.target);this.qs=!0;if(this.anchor!=a){this.anchor=a;var b=As(this,1);xs(this);this.Qj||(this.Qj=$f(ua(this.DB,this,a,b),this.hD));Ds(this)}};function As(a,b){if(0==b){var c=a.hu.clone();return new Es(c)}return new Fs(a.se)}function Ds(a){if(a.anchor)for(var b,c=0;b=vs[c];c++)oi(b.a(),a.anchor)&&(b.hz=a,a.cC=b)}
f.gr=function(a){var b=Cs(this,a.target),c=Cs(this,a.relatedTarget);b!=c&&(b==this.se&&(this.se=null),ys(this),this.qs=!1,!this.ya()||a.relatedTarget&&oi(this.a(),a.relatedTarget)?this.anchor=void 0:zs(this))};f.XA=function(){var a=this.a();this.se!=a&&(xs(this),this.se=a)};f.WA=function(a){var b=this.a();this.se!=b||a.relatedTarget&&oi(b,a.relatedTarget)||(this.se=null,zs(this))};function ys(a){a.Qj&&(ba.clearTimeout(a.Qj),a.Qj=void 0)}
function zs(a){2==a.rm()&&(a.mo=$f(ua(a.aK,a,a.anchor),a.kJ))}function xs(a){a.mo&&(ba.clearTimeout(a.mo),a.mo=void 0)}f.f=function(){this.ea(!1);ys(this);this.detach();this.a()&&S(this.a());this.se=null;delete this.wb;us.d.f.call(this)};function Es(a,b){ss.call(this,a,b)}w(Es,ss);Es.prototype.Fe=function(a,b,c){b=wj(a);b=zj(b);c=c?new jj(c.top+10,c.right,c.bottom,c.left+10):new jj(10,0,0,10);Ko(this.bu,a,4,c,b,9)&496&&Ko(this.bu,a,4,c,b,5)};function Fs(a){cp.call(this,a,3)}w(Fs,cp);
Fs.prototype.Fe=function(a,b,c){var d=new Ph(10,0);Io(this.element,this.Nn,a,b,d,c,9)&496&&Io(this.element,2,a,1,d,c,5)};function Gs(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!u(b)||!u(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof Dp))throw Error("Invalid interactor.");us.call(this);this.u="caption";this.vf=a;this.mq=b;this.nq=c;this.Ka=d;this.Xh=null;this.gk=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.gk=[a];Uc(d,me,this.yo.bind(this));this.bv()}
w(Gs,us);Gs.prototype.bv=function(){var a=qj(this.vf,"position");if("static"==a||""==a)this.vf.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Q("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.gk[0]));a.appendChild(b);b.appendChild(c);this.Xh=b;this.Fw(new ss(this.mq,this.nq));this.ea(!0);this.am(this.vf);this.a().classList.add("x-tooltip")};Gs.prototype.yo=function(){this.ea(!1);this.Xh&&S(this.Xh);this.a()&&S(this.a());this.Xh=null};function Hs(){Aq.call(this);this.u="renderer3D";this.mn=this.qn=this.ln=this.pn=this.kn=this.nn=this.xt=this.yt=null;this.ab=[0,0,0];this.cn=[0,0,0];this.ny=null;this.ht=new jd;this.An=new jd;this.ok=new jd;this.rn=new jd;this.Kl=new jd;this.Tl=new jd;this.mk=new jd;this.Yl=new jd;this.Cb={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1}}w(Hs,Aq);Hs.prototype.__defineGetter__("config",function(){return this.Cb});f=Hs.prototype;
f.YL=function(){this.mn=this.qn=this.ln=this.pn=this.kn=this.nn=null;this.ab=[0,0,0]};f.Wv=function(a){Hs.d.Wv.call(this,a);var b=a.mq;a=a.nq;var c=this.kw(b,a);if(c=this.get(c))if(c=c.Jl){var d=Dj(this.Ba),b=new Gs(this.Ba,d.x+b+10,d.y+a+10,this.Ka);a=Dm(c,null);if(b=b.a())b.innerHTML=Cm(a)}};
f.xa=function(){Hs.d.xa.call(this,"experimental-webgl");try{if(this.b.viewport(0,0,this.gb,this.Pa),this.b.clearColor(this.cn[0],this.cn[1],this.cn[2],0),this.b.enable(this.b.BLEND),this.b.blendEquation(this.b.FUNC_ADD),this.b.blendFunc(this.b.SRC_ALPHA,this.b.ONE_MINUS_SRC_ALPHA),this.b.enable(this.b.DEPTH_TEST),this.b.depthFunc(this.b.LEQUAL),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT),this.Cb.PICKING_ENABLED){var a=this.b.createFramebuffer(),b=this.b.createRenderbuffer(),c=this.b.createTexture();
this.b.bindTexture(this.b.TEXTURE_2D,c);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGB,this.gb,this.Pa,0,this.b.RGB,this.b.UNSIGNED_BYTE,null);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST);this.b.bindFramebuffer(this.b.FRAMEBUFFER,
a);this.b.bindRenderbuffer(this.b.RENDERBUFFER,b);this.b.renderbufferStorage(this.b.RENDERBUFFER,this.b.DEPTH_COMPONENT16,this.gb,this.Pa);this.b.bindRenderbuffer(this.b.RENDERBUFFER,null);this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,c,0);this.b.framebufferRenderbuffer(this.b.FRAMEBUFFER,this.b.DEPTH_ATTACHMENT,this.b.RENDERBUFFER,b);this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);this.ny=a}}catch(d){throw Error("Exception while accessing GL Context!\n"+
d);}a=new ns;Is(this,a)};
function Is(a,b){if(null==a.Gc||null==a.b||null==a.ra)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof ns))throw Error("Could not add shaders.");qs(b);var c=a.b.createShader(a.b.FRAGMENT_SHADER),d=a.b.createShader(a.b.VERTEX_SHADER);a.b.shaderSource(c,b.Zp);a.b.shaderSource(d,b.jq);a.b.compileShader(c);a.b.compileShader(d);if(!a.b.getShaderParameter(c,a.b.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.b.getShaderInfoLog(c));if(!a.b.getShaderParameter(d,
a.b.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.b.getShaderInfoLog(d));var e=a.b.createProgram();a.b.attachShader(e,d);a.b.attachShader(e,c);a.b.linkProgram(e);if(!a.b.getProgramParameter(e,a.b.LINK_STATUS))throw Error("Could not create shader program!\n"+a.b.getShaderInfoLog(c)+"\n"+a.b.getShaderInfoLog(d)+"\n"+a.b.getProgramInfoLog(e));a.b.useProgram(e);a.xt=e;Object.keys(os).forEach(function(a){a=os[a];this.ht.set(a,this.b.getAttribLocation(this.xt,a));this.b.enableVertexAttribArray(this.ht.get(a))}.bind(a));
Object.keys(ps).forEach(function(a){a=ps[a];this.An.set(a,this.b.getUniformLocation(this.xt,a))}.bind(a));a.yt=b}
f.Ih=function(a){Hs.d.Ih.call(this,a);var b=!1;if(null!=a){this.get(a.xd)&&(b=!0);var c=a.xd,d=a.G,e=a.ha,h=a.Uc,k=a.fb,l=a.la,n=a.sc,p=a.Sd,m=a.t,q=a.lb;if(null!=m&&null!=m.la&&m.la.J)this.Ih(m);else if(null!=m&&m.J&&this.Ih(m),null!=p&&null!=p.la&&p.la.J)this.Vb.load(p,a);else if(null!=k&&null!=k.la&&k.la.J)this.Vb.load(k,a);else{if(null!=l&&g(l))if(null!=a.Mh){if(a.Mh.Fo!=l.length||!a.J)return}else{b=0;c=l.length;for(b=0;b<c;b++)this.Vb.load(l[b],a);return}else{if(null!=l&&l.J){this.Vb.load(a,
a);return}if(null!=q&&null!=q.la&&q.la.J){this.Vb.load(q,a);return}}if(0<a.j.length)for(l=a.j,p=l.length,m=m=0;m<p;m++)this.Ih(l[m]);if(d){for(l=0;this.dq;)l++,window.console.log("Possible thread lock avoided: "+l);this.dq=!0;p=a instanceof Me&&a.Yh instanceof Re;b&&null!=k&&k.J&&(l=this.mk.get(c),null!=l&&this.b.isBuffer(l.Db)&&this.b.deleteBuffer(l.Db));l=null;if(null!=k)if(!b||k.J){l=a.Xl;if(null==l)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");
m=!1;k.Xi&&(m=!0);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,m);m=this.b.createTexture();m.tJ=k.cg;this.Yl.set(k.xd,m);this.b.bindTexture(this.b.TEXTURE_2D,m);k.Xi?(m=this.b.RGBA,k.dy&&(m=this.b.LUMINANCE,this.b.pixelStorei(this.b.UNPACK_ALIGNMENT,1)),this.b.texImage2D(this.b.TEXTURE_2D,0,m,k.wt,k.vt,0,m,this.b.UNSIGNED_BYTE,k.Xi)):this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.b.RGBA,this.b.UNSIGNED_BYTE,m.tJ);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);
this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);p?(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.NEAREST),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.NEAREST)):(this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR),this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR));this.b.bindTexture(this.b.TEXTURE_2D,null);m=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,
m);this.b.bufferData(this.b.ARRAY_BUFFER,new Float32Array(l),this.b.STATIC_DRAW);l=new rs(m,l.length,2);this.mk.set(c,l);k.J=!1}else l=this.mk.get(c);Rf(this.Vb,.1);if(p)this.dq=!1,A.Qd(this.u+".update"),Rf(this.Vb,.9);else{if(!b||d.J||n.J){p=n.Fb;k=A.v.cc(p,d.gg,d.hg,d.ig);p=A.v.cc(p,d.dg,d.eg,d.fg);if(null===this.nn||k.x<this.nn)this.nn=k.x;if(null===this.kn||p.x>this.kn)this.kn=p.x;if(null===this.pn||k.y<this.pn)this.pn=k.y;if(null===this.ln||p.y>this.ln)this.ln=p.y;if(null===this.qn||k.z<this.qn)this.qn=
k.z;if(null===this.mn||p.z>this.mn)this.mn=p.z;this.ab=[(this.nn+this.kn)/2,(this.pn+this.ln)/2,(this.qn+this.mn)/2];n.J=!1}b&&d.J&&(n=this.ok.get(c),null!=n&&this.b.isBuffer(n.Db)&&this.b.deleteBuffer(n.Db));n=null;!b||d.J?(n=this.b.createBuffer(),d.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,n),this.b.bufferData(this.b.ARRAY_BUFFER,d.kc,this.b.STATIC_DRAW),n=new rs(n,d.count,3),d.J=!1):n=this.ok.get(c);Rf(this.Vb,.3);b&&e.J&&(k=this.ok.get(c),null!=k&&this.b.isBuffer(k.Db)&&this.b.deleteBuffer(k.Db));
k=null;!b||e.J?(k=this.b.createBuffer(),e.resize(),this.b.bindBuffer(this.b.ARRAY_BUFFER,k),this.b.bufferData(this.b.ARRAY_BUFFER,e.kc,this.b.STATIC_DRAW),k=new rs(k,e.count,3),e.J=!1):k=this.rn.get(c);Rf(this.Vb,.3);b&&h&&h.J&&(e=this.Kl.get(c),null!=e&&this.b.isBuffer(e.Db)&&this.b.deleteBuffer(e.Db));e=null;if(h)if(!b||h.J){if(h.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.b.createBuffer();h.resize();this.b.bindBuffer(this.b.ARRAY_BUFFER,e);this.b.bufferData(this.b.ARRAY_BUFFER,
h.kc,this.b.STATIC_DRAW);e=new rs(e,h.count,3);h.J=!1}else e=this.Kl.get(c);Rf(this.Vb,.2);b&&q&&q.J&&(h=this.Tl.get(c),null!=h&&this.b.isBuffer(h.Db)&&this.b.deleteBuffer(h.Db));h=null;if(q)if(h=q.fn,!b||q.J){if(h.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,d);this.b.bufferData(this.b.ARRAY_BUFFER,h,this.b.STATIC_DRAW);h=new rs(d,h.length,3);q.J=!1}else h=this.Tl.get(c);Rf(this.Vb,.1);b||this.$g.add(a);this.ok.set(c,
n);this.rn.set(c,k);this.Kl.set(c,e);this.mk.set(c,l);this.Tl.set(c,h);this.dq=a.J=!1}}else a.J=!1}}};f.kw=function(a,b){if(this.Cb.PICKING_ENABLED){this.yh(!0,!1);var c=new Uint8Array(4);this.b.readPixels(a,this.Pa-b,1,1,this.b.RGBA,this.b.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
f.yh=function(a,b){Hs.d.yh.call(this,a,b);this.b.viewport(0,0,this.gb,this.Pa);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);var c=this.$g.kb,d=c.length;if(0!=d){a?this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.ny):this.b.bindFramebuffer(this.b.FRAMEBUFFER,null);var e=this.ra.ut,h=this.ra.Q;this.b.uniformMatrix4fv(this.An.get("perspective"),!1,e);this.b.uniformMatrix4fv(this.An.get("view"),!1,h);e=this.ab;this.b.uniform3f(this.An.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
h=this.yd.length;for(e=0;e<h;++e){var k=this.yd[e];if(k instanceof K){var l=A.v.cc(this.ra.Q,k.Aa[0]+k.e[0].H[0],k.Aa[1]+k.e[0].H[1],k.Aa[2]+k.e[0].H[2]),n=A.v.cc(this.ra.Q,k.Aa[0]-k.e[0].H[0],k.Aa[1]-k.e[0].H[1],k.Aa[2]-k.e[0].H[2]),p=Math.abs(l.z-n.z),l=A.v.cc(this.ra.Q,k.Aa[0]+k.e[1].H[0],k.Aa[1]+k.e[1].H[1],k.Aa[2]+k.e[1].H[2]),n=A.v.cc(this.ra.Q,k.Aa[0]-k.e[1].H[0],k.Aa[1]-k.e[1].H[1],k.Aa[2]+-k.e[1].H[2]),m=Math.abs(l.z-n.z),l=A.v.cc(this.ra.Q,k.Aa[0]+k.e[2].H[0],k.Aa[1]+k.e[2].H[1],k.Aa[2]+
k.e[2].H[2]),n=A.v.cc(this.ra.Q,k.Aa[0]-k.e[2].H[0],k.Aa[1]-k.e[2].H[1],k.Aa[2]-k.e[2].H[2]),l=Math.max(p,m,Math.abs(l.z-n.z));l==p?Qe(k,0):l==m?Qe(k,1):Qe(k,2)}}if(this.Cb.ORDERING_ENABLED){p=!1;h=this.yd;k=h.length-1;do if(e=h[k],e instanceof K&&e.Ue&&-1!=e.Ob){var p=e.j[e.Ob].j,m=e.Ob,l=A.v.cc(this.ra.Q,e.Aa[0]+e.e[m].Xa[0],e.Aa[1]+e.e[m].Xa[1],e.Aa[2]+e.e[m].Xa[2]),n=A.v.cc(this.ra.Q,e.Aa[0]-e.e[m].Xa[0],e.Aa[1]-e.e[m].Xa[1],e.Aa[2]-e.e[m].Xa[2]),l=l.z-n.z,n=Math.max(e.Hl[e.Ob],Math.max(e.Hl[e.Ob+
4],e.Hl[e.Ob+8])),q=Math.min(e.Hl[e.Ob],Math.min(e.Hl[e.Ob+4],e.Hl[e.Ob+8]));if(0>l*(n+q))for(l=l=0;l<e.vn[m]-1;l++)p[l]&&(p[l].gd=e.gd,p[l].wd=e.e[m].Vl*l);else for(l=e.vn[m]-1;0<=l;l--)p[l]&&(p[l].gd=e.gd,p[l].wd=(e.vn[m]-1)*e.e[m].Vl-e.e[m].Vl*l);p=!0}while(k--);h=this.$g.kb;k=h.length-1;do e=h[k],!e.vb||1==e.gd||e instanceof Me||(p=e,m=e.G.Wp,e=A.v.cc(e.sc.Fb,m[0],m[1],m[2]),e=A.v.cc(this.ra.Q,e.x,e.y,e.z),e=A.S.su(this.ra.ik,e),e=Math.round(1E3*e)/1E3,p.wd=e,p=!0);while(k--);p&&this.$g.sort()}if(h=
!a&&null!=b&&b&&this.Cb.STATISTICS_ENABLED)var t=0,s=0,z=0,y=0;var e=this.ht,k=e.get("vertexPosition"),p=e.get("vertexNormal"),m=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.An,q=e.get("usePicking"),I=e.get("useObjectColor"),P=e.get("objectColor"),N=e.get("useScalars"),H=e.get("scalarsReplaceMode"),T=e.get("scalarsMin"),ca=e.get("scalarsMax"),W=e.get("scalarsMinColor"),wa=e.get("scalarsMaxColor"),oa=e.get("scalarsInterpolation"),ya=e.get("scalarsMinThreshold"),Pa=
e.get("scalarsMaxThreshold"),Ja=e.get("objectOpacity"),Qa=e.get("labelmapOpacity"),ka=e.get("labelmapColor"),za=e.get("useTexture"),ra=e.get("useLabelMapTexture"),Jc=e.get("textureSampler"),De=e.get("textureSampler2"),Ee=e.get("volumeLowerThreshold"),Fe=e.get("volumeUpperThreshold"),ce=e.get("volumeScalarMin"),Uh=e.get("volumeScalarMax"),Vv=e.get("volumeWindowLow"),Wv=e.get("volumeWindowHigh"),Xv=e.get("volumeScalarMinColor"),Yv=e.get("volumeScalarMaxColor"),ls=e.get("volumeTexture"),Zv=e.get("objectTransform"),
$v=e.get("pointSize"),e=d;do{var Ra=c[d-e];if(Ra){var lb=null;Ra instanceof Me&&Ra.Yh&&(lb=Ra.Yh);if(Ra.vb&&(!lb||lb.vb)&&(!a||Ra.sn)){var Gc=Ra.xd,Td=Ra.jn,ld=this.ok.get(Gc),ve=this.rn.get(Gc),hn=this.Kl.get(Gc),sf=this.Tl.get(Gc),jn=this.mk.get(Gc);this.b.bindBuffer(this.b.ARRAY_BUFFER,ld.Db);this.b.vertexAttribPointer(k,ld.Qi,this.b.FLOAT,!1,0,0);this.b.bindBuffer(this.b.ARRAY_BUFFER,ve.Db);this.b.vertexAttribPointer(p,ve.Qi,this.b.FLOAT,!1,0,0);a?this.b.uniform1i(q,!0):this.b.uniform1i(q,!1);
!hn||a||Td?(ve=1,Td&&!a&&(ve=0),this.b.uniform1i(I,ve),ve=Ra.Oa,a&&(ve=[Math.floor(Gc%65025%255)/255,Math.floor(Gc%65025/255)/255,Math.floor(Gc/65025)/255]),this.b.uniform3f(P,parseFloat(ve[0]),parseFloat(ve[1]),parseFloat(ve[2])),this.b.vertexAttribPointer(m,ld.Qi,this.b.FLOAT,!1,0,0)):(this.b.uniform1i(I,!1),this.b.bindBuffer(this.b.ARRAY_BUFFER,hn.Db),this.b.vertexAttribPointer(m,hn.Qi,this.b.FLOAT,!1,0,0));!sf||a||Td?(this.b.uniform1i(N,!1),this.b.vertexAttribPointer(n,ld.Qi,this.b.FLOAT,!1,0,
0)):(this.b.uniform1i(N,!0),this.b.uniform1i(H,Ra.lb.qy),Gc=Ra.lb.Ti,Td=Ra.lb.Ri,this.b.uniform3f(W,parseFloat(Gc[0]),parseFloat(Gc[1]),parseFloat(Gc[2])),this.b.uniform3f(wa,parseFloat(Td[0]),parseFloat(Td[1]),parseFloat(Td[2])),this.b.uniform1f(ya,parseFloat(Ra.lb.Eb)),this.b.uniform1f(Pa,parseFloat(Ra.lb.Gb)),this.b.uniform1f(T,parseFloat(Ra.lb.pe)),this.b.uniform1f(ca,parseFloat(Ra.lb.jc)),this.b.uniform1i(oa,parseInt(Ra.lb.jt,10)),this.b.bindBuffer(this.b.ARRAY_BUFFER,sf.Db),this.b.vertexAttribPointer(n,
sf.Qi,this.b.FLOAT,!1,0,0));this.b.uniform1f(Ja,parseFloat(Ra.gd));Ra.fb&&jn&&!a?(this.b.uniform1i(za,!0),this.b.activeTexture(this.b.TEXTURE0),this.b.bindTexture(this.b.TEXTURE_2D,this.Yl.get(Ra.fb.xd)),this.b.uniform1i(Jc,0),this.b.bindBuffer(this.b.ARRAY_BUFFER,jn.Db),this.b.vertexAttribPointer(l,jn.Qi,this.b.FLOAT,!1,0,0),this.b.uniform1i(ls,!1)):(this.b.uniform1i(za,!1),this.b.vertexAttribPointer(l,ld.Qi,this.b.FLOAT,!1,0,0));lb&&(this.b.uniform1i(ls,!0),this.b.uniform1f(Ee,lb.Eb),this.b.uniform1f(Fe,
lb.Gb),this.b.uniform1f(ce,lb.pe),this.b.uniform1f(Uh,lb.jc),Gc=lb.Ti,Td=lb.Ri,this.b.uniform3f(Xv,parseFloat(Gc[0]),parseFloat(Gc[1]),parseFloat(Gc[2])),this.b.uniform3f(Yv,parseFloat(Td[0]),parseFloat(Td[1]),parseFloat(Td[2])),this.b.uniform1f(Vv,lb.Xb),this.b.uniform1f(Wv,lb.Wb),sf=lb.t,this.b.uniform1i(ra,!1),lb.Ue?this.b.uniform1f(Ja,parseFloat(lb.gd)):sf&&sf.vb&&(lb=Ra.t.xd,this.b.uniform1i(ra,!0),this.b.activeTexture(this.b.TEXTURE1),this.b.bindTexture(this.b.TEXTURE_2D,this.Yl.get(lb)),this.b.uniform1i(De,
1),this.b.uniform1f(Qa,sf.gd),this.b.uniform4fv(ka,sf.At)));this.b.uniformMatrix4fv(Zv,!1,Ra.sc.Fb);lb=1;"POINTS"==Ra.Vd&&(lb=Ra.tn);this.b.uniform1f($v,lb);lb=-1;Ra.Vd==Ud?(lb=this.b.TRIANGLES,h&&(s+=ld.Pi/3)):"LINES"==Ra.Vd?(this.b.lineWidth(Ra.Rl),lb=this.b.LINES,h&&(z+=ld.Pi/2)):"POINTS"==Ra.Vd?(lb=this.b.POINTS,h&&(y+=ld.Pi)):"TRIANGLE_STRIPS"==Ra.Vd?(lb=this.b.TRIANGLE_STRIP,h&&(s+=ld.Pi/3)):"POLYGONS"==Ra.Vd&&(lb=0==ld.Pi%3?this.b.TRIANGLES:this.b.TRIANGLE_FAN,h&&(s+=ld.Pi/3));h&&(t+=ld.Pi);
this.b.drawArrays(lb,0,ld.Pi)}}}while(--e);h&&(c="Objects: "+d+" | "+("Vertices: "+t+" | "),c+="Triangles: "+Math.round(s)+" | ",c+="Lines: "+z+" | ",c+="Points: "+y+" | ",c+="Textures: "+this.Yl.sg(),window.console.log(c))}};
f.remove=function(a){Hs.d.remove.call(this,a);if(0<a.j.length)for(var b=a.j,c=b.length,d=0,d=0;d<c;d++)this.remove(b[d]);b=a.xd;c=this.mk.get(b);null!=c&&this.b.isBuffer(c.Db)&&this.b.deleteBuffer(c.Db);a.fb&&(c=this.Yl.get(a.fb.xd))&&(this.b.deleteTexture(c),this.Yl.remove(a.fb.xd));c=this.ok.get(b);null!=c&&this.b.isBuffer(c.Db)&&this.b.deleteBuffer(c.Db);c=this.rn.get(b);null!=c&&this.b.isBuffer(c.Db)&&this.b.deleteBuffer(c.Db);c=this.Kl.get(b);null!=c&&this.b.isBuffer(c.Db)&&this.b.deleteBuffer(c.Db);
c=this.Tl.get(b);null!=c&&this.b.isBuffer(c.Db)&&this.b.deleteBuffer(c.Db);this.ok.remove(b);this.rn.remove(b);this.Kl.remove(b);this.mk.remove(b);this.Tl.remove(b);this.$g.remove(a);return!0};f.ve=function(){this.yt=null;delete this.yt;this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);Hs.d.ve.call(this)};Hs.prototype.__defineGetter__("bgColor",function(){return this.cn});Hs.prototype.__defineSetter__("bgColor",function(a){this.cn=a});
Hs.prototype.ML=function(a,b,c,d,e){null!=c||(c=4);null!=d||(d=2);if(null==e){e=this.kw(a,b);if(-1==e)return null;e=this.get(e);if(!e)return null}var h=qq(this.ra,a/this.gb*2-1,(this.Pa-b)/this.Pa*2-1,0);a=qq(this.ra,a/this.gb*2-1,(this.Pa-b)/this.Pa*2-1,1);h[0]+=this.ab[0];h[1]+=this.ab[1];h[2]+=this.ab[2];a[0]+=this.ab[0];a[1]+=this.ab[1];a[2]+=this.ab[2];b=[e.G.gg,e.G.hg,e.G.ig];var k=[e.G.dg,e.G.hg,e.G.ig],l=[e.G.dg,e.G.eg,e.G.ig],n=[e.G.gg,e.G.eg,e.G.ig],p=[e.G.gg,e.G.eg,e.G.fg],m=[e.G.gg,e.G.hg,
e.G.fg],q=[e.G.dg,e.G.eg,e.G.fg],t=[e.G.dg,e.G.hg,e.G.fg];b=[A.v.cc(e.sc.Fb,b[0],b[1],b[2]),A.v.cc(e.sc.Fb,k[0],k[1],k[2]),A.v.cc(e.sc.Fb,l[0],l[1],l[2]),A.v.cc(e.sc.Fb,n[0],n[1],n[2]),A.v.cc(e.sc.Fb,p[0],p[1],p[2]),A.v.cc(e.sc.Fb,m[0],m[1],m[2]),A.v.cc(e.sc.Fb,q[0],q[1],q[2]),A.v.cc(e.sc.Fb,t[0],t[1],t[2])];var k=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],s;for(s in b)s=b[s],k=[Math.min(k[0],s.x),Math.max(k[1],s.x),Math.min(k[2],s.y),Math.max(k[3],s.y),Math.min(k[4],s.z),Math.max(k[5],
s.z)];s=k;b=[];k=[];for(l=0;6>l;l++){var n=Math.floor(l/2),p=(n+1)%3,m=(n+2)%3,t=(2+2*n)%6,z=(4+2*n)%6,y=1/a[n]*(s[l]-h[n]);Infinity!=y&&-Infinity!=y&&(q=h[p]+a[p]*y,y=h[m]+a[m]*y,q>=s[t]&&q<=s[t+1]&&y>=s[z]&&y<=s[z+1]?(t=[],t[n]=s[l],t[p]=q,t[m]=y,b.push(t)):(t=[],t[n]=s[l],t[p]=q,t[m]=y,k.push(t)))}a=[b,k];a=a[0];if(0==a.length)return null;k=Array(2);for(s=0;2>s;s++)b=a[s],k[s]=Math.sqrt((b[0]-h[0])*(b[0]-h[0])+(b[1]-h[1])*(b[1]-h[1])+(b[2]-h[2])*(b[2]-h[2]));h=b=s=null;k[0]<k[1]?(s=a[0],b=a[1]):
(s=a[1],b=a[0]);h=Math.sqrt((s[0]-b[0])*(s[0]-b[0])+(s[1]-b[1])*(s[1]-b[1])+(s[2]-b[2])*(s[2]-b[2]));h/=c;a=s;s=[b[0]-s[0],b[1]-s[1],b[2]-s[2]];b=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);k=[s[0]/b,s[1]/b,s[2]/b];l=e.G.kc;n=l.length;for(s=0;s<h;s+=c)for(a=[a[0]+c*k[0],a[1]+c*k[1],a[2]+c*k[2]],b=0;b<n;b+=3)if(p=l[b],m=l[b+1],q=l[b+2],t=new A.S(p,m,q),t=A.v.cc(e.sc.Fb,p,m,q),Math.sqrt((a[0]-t.x)*(a[0]-t.x)+(a[1]-t.y)*(a[1]-t.y)+(a[2]-t.z)*(a[2]-t.z))<=d)return[t.x,t.y,t.z];return null};
v("X.renderer3D",Hs);v("X.renderer3D.prototype.init",Hs.prototype.xa);v("X.renderer3D.prototype.add",Hs.prototype.add);v("X.renderer3D.prototype.onShowtime",Hs.prototype.$B);v("X.renderer3D.prototype.onRender",Hs.prototype.WB);v("X.renderer3D.prototype.get",Hs.prototype.get);v("X.renderer3D.prototype.render",Hs.prototype.k);v("X.renderer3D.prototype.destroy",Hs.prototype.ve);v("X.renderer3D.prototype.remove",Hs.prototype.remove);v("X.renderer3D.prototype.resetBoundingBox",Hs.prototype.YL);
v("X.renderer3D.prototype.resetViewAndRender",Hs.prototype.Xo);v("X.renderer3D.prototype.pick",Hs.prototype.kw);v("X.renderer3D.prototype.pick3d",Hs.prototype.ML);function Js(){Hs.call(this)}w(Js,Hs);v("xiv.vis.XtkRenderer3D",Js);f=Js.prototype;f.gf=function(){this.dl()};f.cl=function(a){Js.d.cl.call(this,a);this.dispatchEvent({type:"k",value:a.nk})};f.k=function(){this.Gc&&this.b?(Js.d.k.call(this),this.dispatchEvent({type:"l"})):(this.Cb.PROGRESSBAR_ENABLED=!1,this.xa())};f.ve=function(){Js.d.ve.call(this)};f.remove=function(a){null!=a&&Js.d.remove.call(this,a)};v("xiv.vis.XtkRenderer3D.prototype.onResize",Js.prototype.gf);
v("xiv.vis.XtkRenderer3D.prototype.onProgress",Js.prototype.cl);v("xiv.vis.XtkRenderer3D.prototype.render",Js.prototype.k);v("xiv.vis.XtkRenderer3D.prototype.remove",Js.prototype.remove);function Ks(){ad.call(this);this.vl=[]}w(Ks,ad);v("xiv.vis.XtkPlane",Ks);var Ls=[-300,300,300];f=Ks.prototype;f.Cm=!0;f.Fl=null;f.orientation=null;f.Vo=null;f.Ga=null;f.gj=null;f.Ya=function(){return this.Ga};f.ac=function(){return this.orientation};f.ss=function(a){null!=this.Ga&&(null!=a?(this.wq=a,this.Ga.camera.focus=a.focus,this.Ga.camera.position=a.position,this.Ga.camera.up=a.UM,a instanceof Ip&&(this.Ga.camera.view=a.view)):this.Ga.camera.position=Ls)};
f.rs=function(a){this.gj.style.background=null!=a?r(a)?a:null!=a.az?"-webkit-linear-gradient(top, "+a.az+", "+a.backgroundColor+")":a.backgroundColor:"black"};f.oH=function(){return this.Eq};f.kH=function(){return this.gj};f.kl=function(a){this.gj=a;null!=this.Ga||this.xa(a);this.Ga.container=a};f.ew=function(a){this.dispatchEvent(a)};
f.xa=function(a){null!=this.Ga&&(J(this.Ga),this.Ga.ve(),this.Ga=null);if(null==this.Fl)throw Error('XtkPlane subclass must have the property "XRenderer" defined.');this.Ga=new this.Fl;this.Ga.orientation=this.orientation;this.kl(a||this.gj||document.body);this.Ga.xa();G(this.Ga,"k",function(a){this.dispatchEvent({type:"k",value:a.value})}.bind(this));G(this.Ga,"A",this.ew.bind(this))};f.add=function(a){this.Cm&&(!0==a.isSelectedVolume&&(this.Eq=a),this.vl.push(a),this.Ga.add(a))};f.isEnabled=function(){return this.Cm};
function Ms(a){null!=a.Xf&&(S(a.Xf),delete a.Xf)}function Ns(a){a.Xf=Q("div",{id:"DisabledOverlay_"+B()});a.Xf.className="xiv-vis-xtkplane-disabledoverlay";var b=a.orientation;"V"==a.orientation&&(b="3D");var c=Q("div",{id:"DisabledOverlay_"+B()});c.style.display="table-cell";c.style.verticalAlign="middle";c.innerHTML=b+" render plane disabled.";a.Xf.appendChild(c);a.gj.appendChild(a.Xf)}
f.Rb=function(a){(this.Cm=!1!==a)?kl(this.Xf,200,function(){this.Xf.style.visibility="hidden";Ms(this)}.bind(this)):(null!=this.Xf||Ns(this),this.Xf.style.visibility="visible",hl(this.Xf,200,function(){}.bind(this)))};f.restore=function(){this.xa();Os(this);null!=this.wq&&this.ss(this.wq);null!=this.tc&&this.rs(this.tc);this.k()};f.VL=function(){E(this.vl,function(a){null!=a&&this.Ga.remove(a)}.bind(this))};function Os(a){E(a.vl,function(a){this.Ga.add(a)}.bind(a))}f.k=function(){this.Cm&&this.Ga.k()};
f.o=function(){null!=this.Ga&&this.Ga.gf()};f.g=function(){Ks.d.g.call(this);null!=this.Ga&&(this.Ga.ve(),delete this.Ga);Ms(this);null!=this.tc&&delete this.tc;null!=this.wq&&delete this.wq;null!=this.Vo&&(null!=this.Vo.g&&(this.Vo.stop(),this.Vo.g()),delete this.Vo);delete this.Cm;delete this.Fl;delete this.gj;delete this.orientation;D(this.vl);delete this.Eq;delete this.OQ};v("xiv.vis.XtkPlane.DEFAULT_CAMERA_POSITION",Ls);v("xiv.vis.XtkPlane.DEFAULT_BACKGROUND","black");
v("xiv.vis.XtkPlane.prototype.XRenderer",Ks.prototype.Fl);v("xiv.vis.XtkPlane.prototype.orientation",Ks.prototype.orientation);v("xiv.vis.XtkPlane.prototype.Renderer",Ks.prototype.Ga);v("xiv.vis.XtkPlane.prototype.container",Ks.prototype.gj);v("xiv.vis.XtkPlane.prototype.getRenderer",Ks.prototype.Ya);v("xiv.vis.XtkPlane.prototype.getOrientation",Ks.prototype.ac);v("xiv.vis.XtkPlane.prototype.setCamera",Ks.prototype.ss);v("xiv.vis.XtkPlane.prototype.setBackground",Ks.prototype.rs);
v("xiv.vis.XtkPlane.prototype.getCurrentVolume",Ks.prototype.oH);v("xiv.vis.XtkPlane.prototype.getContainer",Ks.prototype.kH);v("xiv.vis.XtkPlane.prototype.setContainer",Ks.prototype.kl);v("xiv.vis.XtkPlane.prototype.init",Ks.prototype.xa);v("xiv.vis.XtkPlane.prototype.add",Ks.prototype.add);v("xiv.vis.XtkPlane.prototype.isEnabled",Ks.prototype.isEnabled);v("xiv.vis.XtkPlane.prototype.setEnabled",Ks.prototype.Rb);v("xiv.vis.XtkPlane.prototype.restore",Ks.prototype.restore);
v("xiv.vis.XtkPlane.prototype.removeXObjectsFromRenderer",Ks.prototype.VL);v("xiv.vis.XtkPlane.prototype.render",Ks.prototype.k);v("xiv.vis.XtkPlane.prototype.updateStyle",Ks.prototype.o);v("xiv.vis.XtkPlane.prototype.dispose",Ks.prototype.g);function Ps(){Ks.call(this);this.orientation="V";this.Fl=Js}w(Ps,Ks);v("xiv.vis.XtkPlane3D",Ps);v("xiv.vis.XtkPlane3D.DEFAULT_CAMERA_POSITION",[-300,300,300]);function Qs(a){hr.call(this,a);this.Ra.C(this.ja());this.Ra.Of(this.T()-this.ja())}w(Qs,hr);Qs.prototype.ba=function(a){return"vertical"==a?"goog-twothumbslider-vertical":"goog-twothumbslider-horizontal"};Qs.prototype.yk=function(a){a=this.O().B("div",a);Jl(a,"button");return a};
Qs.prototype.yz=function(){var a=Xh(document,null,"goog-twothumbslider-value-thumb",this.a())[0],b=Xh(document,null,"goog-twothumbslider-extent-thumb",this.a())[0],c=Xh(document,null,"goog-twothumbslider-rangehighlight",this.a())[0];a||(a=this.yk("goog-twothumbslider-value-thumb"),this.a().appendChild(a));b||(b=this.yk("goog-twothumbslider-extent-thumb"),this.a().appendChild(b));c||(c=this.O().B("div","goog-twothumbslider-rangehighlight"),this.O().dv(c,a));this.ua=a;this.yc=b;this.ec=c};function Rs(){Xd.call(this);this.u="fibers";Aa(this,new gd)}w(Rs,Xd);v("X.fibers",Rs);function Ss(){this.il=Q("div",{id:this.constructor.ID_PREFIX+"_"+B(),"class":this.constructor.dd});dm.call(this,"",this.il,!0);O(this.pb,Ss.CSS.aF);this.zf.style.marginTop="-4px";this.pb.style.marginTop="0px";this.pb.style.border="none";this.iD(!1)}w(Ss,dm);v("nrg.ui.ZippyTree",Ss);var Fn="C",Ts={rN:"B",QE:Fn};Ss.ID_PREFIX="nrg.ui.ZippyTree";Ss.CSS_SUFFIX={aF:"rootnode"};f=Ss.prototype;f.Xk=1;f.uj=!1;f.GJ=!0;f.or=1;f.wu=0;f.ps=null;f.Wf=null;f.ww=function(a){this.Dz=a};
f.Bm=function(){return 0===ji(this.zf).length};f.pz=function(){this.Ip(function(a){a.ic.mc(!1)},this)};f.Ln=function(){this.pz()};f.Xz=function(){var a=[];this.Ip(function(b){a.push(b)},this);return a};f.Ru=function(){var a=[];C(this.da,function(b){a.push(b)});return a};function Us(a,b,c,d){c==d?a.Gs.push(b):C(b.da,function(a){Us(this,a,c+1,d)}.bind(a))}f.xA=function(a){this.Gs=[];Us(this,this,0,a);a=Ob(this.Gs);Kb(this.Gs);delete this.Gs;return a};
f.mm=function(){this.Ip(function(a){a.ic.mc(!0)},this)};f.Ip=function(a,b){C(b.da,function(b){a(b);this.Ip(a,b)}.bind(this))};f.a=function(){return this.il};f.mc=function(a,b){return Vs(this,a,b,!0)};function Vs(a,b,c,d){c=null!=c?c:a;if(null!=c.da[b]){var e=c.da[b],h=e.ic;null!=h.xf?Uc(h,d?"a":"b",function(){h.og!=d&&e.mc(d)}):e.mc(d);return e}}f.dp=function(a,b){return Vs(this,a,b,!1)};f.ao=function(a){var b=this,c=[];E(a,function(a){c.push(b.da[a]);b=b.da[a]}.bind(this));return c};
f.wf=function(a,b){!g(a)||ni(a)?Ws(this,a,b):E(a,function(a){this.wf(a,b)}.bind(this))};function Ws(a,b,c){c?(c&&(c=r(c)?[c]:c,c.length>a.Xk&&(a.Xk=c.length)),a.On(c,a,b)):R(a.il,b)}
f.On=function(a,b,c,d){d=null!=d?d:1;b=null!=b?b:this;var e=b.zf;if(0==a.length)Xs(this,b,c),null!=c&&Ys(this,c,d-2);else{0<a.length&&a.length>this.Xk&&(this.Xk=a.length);if(b.da[a[0]])e=b.da[a[0]];else{var h=a[0];e.style.opacity=this.or;var k=new dm(h,e,!1);b.pb.parentNode==this.il&&2==this.il.childNodes.length&&(k.pb.style.marginTop="5px");k.pb.style.left="inherit";k.pb.style.width="inherit";Zs(this,k);b.da[h]=k;k.pb.style.opacity=this.or;e.style.opacity=1;this.uj&&$s(this,k.pb);this.dispatchEvent({type:Fn,
De:k});e=k}Ys(this,e.pb,d-1);this.On(1<a.length?a.slice(1):[],e,c,d+1)}};function Ys(a,b,c){null!=b&&b._maxDepth!=a.Xk&&(null==b._maxDepth&&(b._maxDepth=a.Xk),c=0>c?0:c,null!=b._nodeDepth||(b._nodeDepth=c),b.style.width=(100-5*c).toString()+"%",b.style.left=(5*c).toString()+"%")}
f.ms=function(a,b,c,d){b=null!=b?b:0;E(this.Xz(),function(e){G(e,"c",function(){timer=new Yf;timer.setInterval(10);timer.addEventListener(Zf,function(){a.style.height=(U(this.a()).height+b).toString()+"px";null!=c&&c()}.bind(this));timer.start();Uc(e,e.ic.og?"b":"a",function(){timer.stop();delete timer;null!=c&&c();null!=d&&d()}.bind(this))}.bind(this))}.bind(this))};
function Zs(a,b){G(b,"a",function(){this.dispatchEvent({type:"a",De:b})}.bind(a));G(b,"c",function(){this.dispatchEvent({type:"c",De:b})}.bind(a));G(b,"b",function(){this.dispatchEvent({type:"b",De:b})}.bind(a))}function $s(a,b){(new Nk(b,a.wu)).play()}f.NL=function(){this.uj&&!this.Wf.If()&&this.Wf.play()};f.RM=function(a){this.or=(this.uj=!0===a)?0:1;this.wu=this.uj?300:0;this.uj&&(at(this),this.ps=[],this.Wf=new Sk,G(this.Wf,"end",this.nz.bind(this)))};
function Xs(a,b,c){if(null!=c){var d=b.zf,e=function(){bl(c,{position:"relative"});c.style.opacity=0;hl(c,300);null!=this.Dz?this.Dz(d,c):d.appendChild(c);bt(d);this.uj?$s(this,c,function(){this.dispatchEvent({type:"B"})}.bind(this)):this.dispatchEvent({type:"B"})}.bind(a);b.Sk()&&!b.Em?b.Wo(!0):(0<=b.xb().indexOf("EXPERIMENTS")||a.Qq(a,b),e())}}
f.Qq=function(a,b){if(null!=a){if(null!=a.da)for(var c in a.da)if(a.da.hasOwnProperty(c))if(0<=a.da[c].xb().indexOf("EXPERIMENTS"))for(var d in a.da[c].da){if(a.da[c].da.hasOwnProperty(d)&&a.da[c].da[d]==b){a.da[c].Sk()&&!a.da[c].Em&&a.da[c].Wo(!0);return}}else this.Qq(a.da[c],b);a.Sk()&&!a.Em&&a.Wo(!0)}};
f.HC=function(a,b){if(null!=a){if(null!=a.da)for(var c in a.da)if(a.da.hasOwnProperty(c))if(0<=a.da[c].xb().indexOf("EXPERIMENTS"))for(var d in a.da[c].da){if(a.da[c].da.hasOwnProperty(d)&&a.da[c].da[d]==b){a.da[c].Sk()&&!a.da[c].Go&&a.da[c].Dw();return}}else this.Qq(a.da[c],b);a.Sk()&&!a.Go&&a.Dw()}};
function bt(a){var b=[],c=[],d=ji(a),e=d.length;E(d,function(a){Nl(a,dm.CSS.yl)?b.push(a):1==a.childNodes.length&&Nl(a.childNodes[0],dm.CSS.Jh)&&c.push(a)});E(b,function(b,d){ii(a,b,e);ii(a,c[d],e+1)})}f.nz=function(){for(this.Wf.g();this.ps.length;)this.Wf.add(this.ps[0]),Ab.splice.call(this.ps,0,1);G(this.Wf,"end",this.nz.bind(this));this.Wf.play()};function at(a){null!=a.wC&&(a.qu(a.wC),delete a.wC);null!=a.Wf&&(a.Iq(a.Wf),delete a.Wf)}
f.f=function(){Ss.d.f.call(this);S(this.il);delete this.il;at(this);delete this.Xk;delete this.uj;delete this.GJ;delete this.or;delete this.wu};v("nrg.ui.ZippyTree.EventType",Ts);v("nrg.ui.ZippyTree.INDENT_PCT",5);v("nrg.ui.ZippyTree.ID_PREFIX",Ss.ID_PREFIX);v("nrg.ui.ZippyTree.CSS_SUFFIX",Ss.CSS_SUFFIX);v("nrg.ui.ZippyTree.FADE_TIME",300);v("nrg.ui.ZippyTree.NODE_DEPTH_KEY","_nodeDepth");v("nrg.ui.ZippyTree.MAX_DEPTH_KEY","_maxDepth");
v("nrg.ui.ZippyTree.folderSorter",function(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=ji(a),d=b[em].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[em]&&(e=h[em].toLowerCase(),e=La(d,e),0>e)){hi(b,h);return}a.appendChild(b)});v("nrg.ui.ZippyTree.prototype.setCustomInsertMethod",Ss.prototype.ww);v("nrg.ui.ZippyTree.prototype.isEmpty",Ss.prototype.Bm);v("nrg.ui.ZippyTree.prototype.contractAll",Ss.prototype.pz);v("nrg.ui.ZippyTree.prototype.collapseAll",Ss.prototype.Ln);
v("nrg.ui.ZippyTree.prototype.findAndRemoveLoadingIndicator",Ss.prototype.Qq);v("nrg.ui.ZippyTree.prototype.setLoadingIndicatorToNoFileIndicator",Ss.prototype.HC);v("nrg.ui.ZippyTree.prototype.getAllNodes",Ss.prototype.Xz);v("nrg.ui.ZippyTree.prototype.getTopLevelNodes",Ss.prototype.Ru);v("nrg.ui.ZippyTree.prototype.getNodesByLevel",Ss.prototype.xA);v("nrg.ui.ZippyTree.prototype.expandAll",Ss.prototype.mm);v("nrg.ui.ZippyTree.prototype.traverse",Ss.prototype.Ip);
v("nrg.ui.ZippyTree.prototype.getElement",Ss.prototype.a);v("nrg.ui.ZippyTree.prototype.setExpanded",Ss.prototype.mc);v("nrg.ui.ZippyTree.prototype.setCollapsed",Ss.prototype.dp);v("nrg.ui.ZippyTree.prototype.getFolderNodes",Ss.prototype.ao);v("nrg.ui.ZippyTree.prototype.addContents",Ss.prototype.wf);v("nrg.ui.ZippyTree.prototype.createBranch",Ss.prototype.On);v("nrg.ui.ZippyTree.prototype.scaleElementOnChange",Ss.prototype.ms);v("nrg.ui.ZippyTree.prototype.playFx",Ss.prototype.NL);
v("nrg.ui.ZippyTree.prototype.toggleFadeInFx",Ss.prototype.RM);v("nrg.ui.ZippyTree.prototype.disposeInternal",Ss.prototype.f);function ct(){}w(ct,$n);ga(ct);ct.prototype.B=function(a){var b=a.O().B("span",this.Jk(a).join(" "));dt(this,b,a.ej);return b};ct.prototype.Pb=function(a,b){b=ct.d.Pb.call(this,a,b);var c=Ml(b),d=et;Jb(c,ft(this,gt))?d=gt:Jb(c,ft(this,ht))?d=ht:Jb(c,ft(this,et))&&(d=et);a.ej=d;Kl(b,"checked",d==gt?"mixed":d==ht?"true":"false");return b};ct.prototype.kh=function(){return"checkbox"};
function dt(a,b,c){if(b){var d=ft(a,c);Nl(b,d)||(C(it,function(a){a=ft(this,a);Sl(b,a,a==d)},a),Kl(b,"checked",c==gt?"mixed":c==ht?"true":"false"))}}ct.prototype.ba=function(){return"goog-checkbox"};function ft(a,b){var c=a.ba();if(b==ht)return c+"-checked";if(b==et)return c+"-unchecked";if(b==gt)return c+"-undetermined";throw Error("Invalid checkbox state: "+b);};function jt(a,b,c){c=c||ct.ye();po.call(this,null,c,b);this.ej=da(a)?a:et}w(jt,po);var ht=!0,et=!1,gt=null,it={jN:ht,lP:et,mP:gt};f=jt.prototype;f.zb=null;f.ph=function(){return this.ej==ht};f.Kd=function(a){a!=this.ej&&(this.ej=a,dt(this.Ya(),this.a(),this.ej))};f.Pf=function(a){this.oa?(this.Lc(),this.zb=a,this.mb()):this.zb=a};f.toggle=function(){this.Kd(this.ej?et:ht)};
f.mb=function(){jt.d.mb.call(this);if(this.Qk){var a=this.nb();this.zb&&a.D(this.zb,"click",this.Tu).D(this.zb,"mouseover",this.Rk).D(this.zb,"mouseout",this.fr).D(this.zb,"mousedown",this.nh).D(this.zb,"mouseup",this.vg);a.D(this.a(),"click",this.Tu)}this.zb&&(this.zb.id||(this.zb.id=dk(this)+".lbl"),Kl(this.a(),"labelledby",this.zb.id))};f.Rb=function(a){jt.d.Rb.call(this,a);if(a=this.a())a.tabIndex=this.isEnabled()?0:-1};
f.Tu=function(a){a.stopPropagation();var b=this.ej?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.toggle(),this.dispatchEvent("change"))};f.ug=function(a){32==a.keyCode&&this.Tu(a);return!1};Xn("goog-checkbox",function(){return new jt});function kt(){Xd.call(this);this.u="mesh";Aa(this,new gd)}w(kt,Xd);v("X.mesh",kt);function lt(){V.call(this);this.ef=[];this.Rf=[]}w(lt,V);v("xiv.ui.XtkController",lt);lt.ID_PREFIX="xiv.ui.XtkController";lt.CSS_SUFFIX={zE:"label",gE:"component"};var mt=B();function nt(){return Q("div",{id:"Label_"+B(),"class":lt.CSS.zE})}function ot(a){a=g(a.file)?a.file[0]:a.file||a.name;return zl(a)}function pt(a,b){b.DC([ot(a)])}f=lt.prototype;f.Fj=!1;f.k=function(a){lt.d.k.call(this,a)};f.Pf=function(a){null==this.zb&&(this.zb=nt(),R(this.a(),this.zb));this.zb.innerHTML=a};f.MH=function(){return this.zb};
f.ep=function(a){this.defaultValue=a};f.pH=function(){return this.defaultValue};f.DC=function(a){r(a)&&(a=[a]);this.Wn=a};f.BH=function(){return this.Wn};f.Kg=function(a){this.Sa=a};f.ae=function(){return this.Sa};function qt(a){this.min=parseInt(a.min);this.max=parseInt(a.max);this.th=parseInt(a.windowLow);this.Aj=parseInt(a.windowHigh)}f.tg=function(){return new qt(this.Sa)};
f.Mj=function(a){a=this.ma=a;this.ma instanceof ak?(a=this.ma.a(),this.ma.oa?this.ma.a().parentNode!==this.a()&&this.ma.a()!==this.a()&&this.a().appendChild(this.ma.a()):this.ma.k(this.a())):this.a().appendChild(a);null!=a&&O(a,lt.CSS.gE)};f.Wz=function(){return Nb(this.ef,this.Rf)};f.VH=function(){return this.ef};f.mB=function(){return this.Fj};f.lM=function(a){this.Fj=a};f.yI=function(){return this.Rf};f.iH=function(){return this.ma};f.Ic=fa;
f.Cd=function(a,b,c){a=new a;a.k();r(b)&&a.Pf(b);R(this.a(),a.a());null!=c&&G(a,"D",c);return a};f.refresh=function(){};f.Ht=function(a,b){var c=this.Cd(b,"Color",function(b){a.color=b.color}.bind(this));pt(a,c);this.Rf.push(c);c[mt]=a;c.refresh()};f.Ny=function(a,b){var c=this.Cd(b,"Opacity",function(b){a.opacity=parseFloat(b.value/100)});pt(a,c);this.Rf.push(c);c.ma.o();c.gp("%")};f.It=function(a,b){var c=this.Cd(b,"Visible",function(b){a.visible=b.checked});pt(a,c);this.Rf.push(c);c.ma.Kd(a.visible)};
f.f=function(){lt.d.f.call(this);this[mt]=null;delete this.Fj;delete this.Sa;E(this.Rf,function(a){J(a);a.g()});Kb(this.Rf);delete this.Rf;E(this.ef,function(a){J(a);a.g();controller=null});Kb(this.ef);delete this.ef;null!=this.ma&&(J(this.ma),this.ma instanceof ak?this.ma.g():S(this.ma),delete this.ma);null!=this.Wn&&(Kb(this.Wn),delete this.Wn);null!=this.zb&&(S(this.zb),delete this.zb);delete this.defaultValue};v("xiv.ui.XtkController.ID_PREFIX",lt.ID_PREFIX);
v("xiv.ui.XtkController.CSS_SUFFIX",lt.CSS_SUFFIX);v("xiv.ui.XtkController.EventType",{ZD:"D"});v("xiv.ui.XtkController.OBJ_KEY",mt);v("xiv.ui.XtkController.CurrentLevels",qt);v("xiv.ui.XtkController.createLabel",nt);v("xiv.ui.XtkController.getXObjLabel",ot);v("xiv.ui.XtkController.getObjectCategory",function(a){if(a instanceof kt)return"Meshes";if(a instanceof K)return"Volumes";if(a instanceof Rs)return"Fibers";if(a instanceof iq)return"Annotations"});
v("xiv.ui.XtkController.setControllerFolders",pt);v("xiv.ui.XtkController.prototype.render",lt.prototype.k);v("xiv.ui.XtkController.prototype.setLabel",lt.prototype.Pf);v("xiv.ui.XtkController.prototype.getLabel",lt.prototype.MH);v("xiv.ui.XtkController.prototype.setDefaultValue",lt.prototype.ep);v("xiv.ui.XtkController.prototype.getDefaultValue",lt.prototype.pH);v("xiv.ui.XtkController.prototype.setFolders",lt.prototype.DC);v("xiv.ui.XtkController.prototype.getFolders",lt.prototype.BH);
v("xiv.ui.XtkController.prototype.setXObj",lt.prototype.Kg);v("xiv.ui.XtkController.prototype.getXObj",lt.prototype.ae);v("xiv.ui.XtkController.prototype.setComponent",lt.prototype.Mj);v("xiv.ui.XtkController.prototype.getAllControllers",lt.prototype.Wz);v("xiv.ui.XtkController.prototype.getMasterControllers",lt.prototype.VH);v("xiv.ui.XtkController.prototype.isInitialized",lt.prototype.mB);v("xiv.ui.XtkController.prototype.setInitialized",lt.prototype.lM);
v("xiv.ui.XtkController.prototype.getCurrentLevels",lt.prototype.tg);v("xiv.ui.XtkController.prototype.getSubControllers",lt.prototype.yI);v("xiv.ui.XtkController.prototype.getComponent",lt.prototype.iH);v("xiv.ui.XtkController.prototype.dispatchComponentEvent",lt.prototype.Ic);v("xiv.ui.XtkController.prototype.createController",lt.prototype.Cd);v("xiv.ui.XtkController.prototype.refresh",lt.prototype.refresh);v("xiv.ui.XtkController.prototype.add_colorPalette",lt.prototype.Ht);
v("xiv.ui.XtkController.prototype.add_opacity",lt.prototype.Ny);v("xiv.ui.XtkController.prototype.add_visible",lt.prototype.It);v("xiv.ui.XtkController.prototype.disposeInternal",lt.prototype.f);function rt(a){ad.call(this);this.P=null;this.q=a;a=F||jc&&!qc("531")&&"TEXTAREA"==a.tagName;this.Kc=new Wj(this);this.Kc.D(this.q,a?["keydown","paste","cut","drop","input"]:"input",this)}w(rt,ad);
rt.prototype.handleEvent=function(a){if("input"==a.type)F&&qc(10)&&0==a.keyCode&&0==a.charCode||(st(this),hc&&this.q!=Th(this.q).activeElement||this.dispatchEvent(tt(a)));else if("keydown"!=a.type||Tl(a)){var b="keydown"==a.type?this.q.value:null;F&&229==a.keyCode&&(b=null);var c=tt(a);st(this);this.P=$f(function(){this.P=null;this.q.value!=b&&this.dispatchEvent(c)},0,this)}};function st(a){null!=a.P&&(ba.clearTimeout(a.P),a.P=null)}function tt(a){a=new Hc(a.Yc);a.type="input";return a}
rt.prototype.f=function(){rt.d.f.call(this);this.Kc.g();st(this);delete this.q};function ut(a,b,c){ak.call(this,a);vt(this,b||"#f00");this.className=c||"goog-hsv-palette";this.na=Bi(this.O())}w(ut,ak);f=ut.prototype;f.us=function(a){a!=this.em&&(vt(this,a),wt(this),this.dispatchEvent("action"))};function vt(a,b){var c=wk(b).zj,d=Ck(c),e=d[0],h=d[1],k=d[2],d=Math.max(Math.max(e,h),k),l=Math.min(Math.min(e,h),k);if(l==d)l=e=0;else{var n=d-l,l=n/d,e=60*(e==d?(h-k)/n:h==d?2+(k-e)/n:4+(e-h)/n);0>e&&(e+=360);360<e&&(e-=360)}a.qd=[e,l,d];a.qd[0]/=360;a.em=c}
function xt(a,b,c,d){if(null!=b||null!=c||null!=d)a.qd[0]=null!=b?b:a.qd[0],a.qd[1]=null!=c?c:a.qd[1],a.qd[2]=null!=d?d:a.qd[2],b=[360*a.qd[0],a.qd[1],a.qd[2]],b=Ek(b[0],b[1],b[2]),a.em=b,wt(a),a.dispatchEvent("action")}f.We=function(){return!1};
f.B=function(){var a=this.O(),b=F&&!qc("7")?" "+(this.className+"-noalpha"):"",c=a.B("DIV",this.className+"-hs-backdrop");this.ym=a.B("DIV",this.className+"-hs-handle");this.Cj=a.B("DIV",this.className+"-hs-image",this.ym);this.tl=a.B("DIV",this.className+"-v-image");this.Mp=a.B("DIV",this.className+"-v-handle");this.Fs=a.B("DIV",this.className+"-swatch");this.Uk=a.B("input",{"class":this.className+"-input",type:"text",dir:"ltr"});var d=a.B("label",null,this.Uk);this.q=a.B("DIV",this.className+b,
c,this.Cj,this.tl,this.Mp,this.Fs,d)};f.mb=function(){ut.d.mb.call(this);wt(this);var a=this.nb();a.D(this.a(),"mousedown",this.nh);this.ro||(this.ro=new rt(this.Uk));a.D(this.ro,"input",this.cJ)};f.f=function(){ut.d.f.call(this);delete this.Cj;delete this.ym;delete this.tl;delete this.Mp;delete this.Fs;delete this.Uk;this.ro&&(this.ro.g(),delete this.ro);Wc(this.Fv);Wc(this.Gv)};
function wt(a){if(a.oa){var b=a.qd[1],c=a.qd[2],d=a.Cj.offsetWidth*a.qd[0];a.bf()&&(d=a.Cj.offsetWidth-d);var e=Math.ceil(a.ym.offsetWidth/2),d=d-e,b=a.Cj.offsetHeight*(1-b),b=b-Math.ceil(a.ym.offsetHeight/2),e=a.ym,h=a.bf();null!==b&&(e.style.top=b+"px");h?(e.style.right=d+"px",e.style.left=""):(e.style.left=d+"px",e.style.right="");b=a.tl.offsetTop-Math.floor(a.Mp.offsetHeight/2)+(255-c)/255*a.tl.offsetHeight;a.Mp.style.top=b+"px";Lj(a.Cj,c/255);oj(a.tl,"background-color",Ek(360*a.qd[0],a.qd[1],
255));oj(a.Fs,"background-color",a.em);oj(a.Fs,"color",127.5<a.qd[2]?"#000":"#fff");var k;try{k=wk(a.Uk.value).zj}catch(l){}a.em!=k&&(a.Uk.value=a.em)}}f.nh=function(a){if(a.target==this.tl||a.target==this.Mp){var b=Kj(this.tl);this.SA(b,a);this.Fv=G(this.na,"mousemove",ua(this.SA,this,b));this.Gv=G(this.na,"mouseup",this.vg,!1,this)}else if(a.target==this.Cj||a.target==this.ym)b=Kj(this.Cj),this.RA(b,a),this.Fv=G(this.na,"mousemove",ua(this.RA,this,b)),this.Gv=G(this.na,"mouseup",this.vg,!1,this)};
f.SA=function(a,b){b.preventDefault();var c=Ei(this.O()),c=Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height),c=Math.round(255*(a.top+a.height-c)/a.height);xt(this,null,null,c)};f.RA=function(a,b){b.preventDefault();var c=Ei(this.O()),d=(Math.min(Math.max(c.x+b.clientX,a.left),a.left+a.width)-a.left)/a.width,c=(-Math.min(Math.max(c.y+b.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height;xt(this,d,c,null)};f.vg=function(){Wc(this.Fv);Wc(this.Gv)};
f.cJ=function(){/^#?[0-9a-f]{6}$/i.test(this.Uk.value)&&this.us(this.Uk.value)};function yt(){lt.call(this);this.Pf("Color");this.fj=new ut;this.fj.k();G(this.fj,"action",this.Ic.bind(this));O(this.fj.a(),this.constructor.CSS.eE);this.Mn=Q("div",{id:this.constructor.ID_PREFIX+"_ColorPaletteHolder_"+B(),"class":yt.CSS.fE});R(this.Mn,this.fj.a());Q("div",{id:this.constructor.ID_PREFIX+"_ColorPalette_"+B(),"class":yt.CSS.wN});this.a().appendChild(this.Mn);this.Mj(this.Mn)}w(yt,lt);v("xiv.ui.ColorPaletteController",yt);yt.ID_PREFIX="xiv.ui.ColorPaletteController";
yt.CSS_SUFFIX={nN:"colorsquare",fE:"colorpaletteholder",eE:"colorpalette",Wj:"closebutton"};yt.prototype.refresh=function(){var a=Math.floor(255*this[mt].color[0]),b=Math.floor(255*this[mt].color[1]),c=Math.floor(255*this[mt].color[2]),a=Math.min(255,Math.max(0,a)),b=Math.min(255,Math.max(0,b)),c=Math.min(255,Math.max(0,c));this.fj.us(Ak([a,b,c]))};yt.prototype.Ic=function(a){this.dispatchEvent({type:"D",color:Ck(a.target.em).map(function(a){return a/255})})};
yt.prototype.f=function(){yt.d.f.call(this);J(this.fj);this.fj.g();delete this.fj;S(this.Mn);delete this.Mn};v("xiv.ui.ColorPaletteController.ID_PREFIX",yt.ID_PREFIX);v("xiv.ui.ColorPaletteController.CSS_SUFFIX",yt.CSS_SUFFIX);v("xiv.ui.ColorPaletteController.PANEL_MARGIN_X",20);v("xiv.ui.ColorPaletteController.PANEL_MARGIN_Y",20);v("xiv.ui.ColorPaletteController.prototype.refresh",yt.prototype.refresh);v("xiv.ui.ColorPaletteController.prototype.dispatchComponentEvent",yt.prototype.Ic);
v("xiv.ui.ColorPaletteController.prototype.disposeInternal",yt.prototype.f);function zt(){lt.call(this);this.Pf("Display All");this.Jn=Q("div",{id:"CheckboxHodler_"+B()});O(this.Jn,zt.CSS.$D);this.uk=new jt(!0);this.uk.Pb(this.Jn);this.Mj(this.uk);G(this.uk,"change",this.Nv.bind(this))}w(zt,lt);v("xiv.ui.CheckboxController",zt);zt.ID_PREFIX="xiv.ui.CheckboxController";zt.CSS_SUFFIX={$D:"checkboxholder"};f=zt.prototype;f.refresh=function(){this.Kd(this.ma.ph())};f.Kd=function(a){this.ma.Kd(a)};f.Nv=function(){this.Ic()};f.Ic=function(){this.dispatchEvent({type:"D",checked:this.uk.ph()})};
f.gH=function(){return this.Jn};f.f=function(){zt.d.f.call(this);S(this.Jn);delete this.Jn;J(this.uk);this.uk.g();delete this.uk};v("xiv.ui.CheckboxController.ID_PREFIX",zt.ID_PREFIX);v("xiv.ui.CheckboxController.CSS_SUFFIX",zt.CSS_SUFFIX);v("xiv.ui.CheckboxController.prototype.setChecked",zt.prototype.Kd);v("xiv.ui.CheckboxController.prototype.refresh",zt.prototype.refresh);v("xiv.ui.CheckboxController.prototype.getCheckboxHolder",zt.prototype.gH);
v("xiv.ui.CheckboxController.prototype.dispatchComponentEvent",zt.prototype.Ic);v("xiv.ui.CheckboxController.prototype.disposeInternal",zt.prototype.f);function At(){lt.call(this);this.Pf("Slider");this.gs=0}w(At,lt);v("xiv.ui.SliderBase",At);At.ID_PREFIX="xiv.ui.SliderBase";At.CSS_SUFFIX={ka:"slider",Sg:"slider-thumb",Px:"slider-thumb-hover",Ph:"slider-track",PO:"slider-track-hover",qF:"valueinput",sF:"valueinput-display",rF:"valueinput-box"};f=At.prototype;f.Hq=0;f.wa=null;f.s=null;f.fp=function(a){this.Hq=a};f.gp=function(a){this.wa.gp(a)};f.k=function(a){At.d.k.call(this,a);this.gu();this.wa=this.fu(this.AL.bind(this))};
f.gu=function(){this.s=new zr;this.Mj(this.s);this.s.Oc(1);this.s.Sb(0);this.s.Lb(100);this.s.C(100);O(this.s.a(),At.CSS.ka);O(this.s.Tf,At.CSS.Sg);O(this.s.Fh,At.CSS.Ph);G(this.s,"u",this.Ic.bind(this));this.s.a().style.zIndex=0};f.fu=function(a){var b=new zp;b.k(this.a());O(b.a(),At.CSS.qF);O(b.Jc,At.CSS.sF);O(b.fa,At.CSS.rF);G(b,"h",a);return b};
f.AL=function(a){window.console.log("INPUT",a);window.console.log(this.wa.Gd());window.console.log(this.wa.T());window.console.log(this.wa.ja());window.console.log(this.wa.w());a=parseFloat(this.wa.w());a=id(a,this.s.ja(),this.s.T());this.wa.C(a);this.s.C(a)};f.JI=function(){return this.wa};f.C=function(a){this.s.C(a);this.wa.Rb(!1);this.wa.C(a);this.wa.Rb(!0)};f.Lb=function(a){null!=this.wa&&this.wa.Lb(a);this.s.Lb(a);this.refresh()};f.Oc=function(a){null!=this.wa&&this.wa.Oc(a);this.s.Oc(a);this.refresh()};
f.Sb=function(a){null!=this.wa&&this.wa.Sb(a);this.s.Sb(a);this.refresh()};f.w=function(){return this.s.w()};f.T=function(){return this.s.T()};f.Gd=function(){return this.s.Gd()};f.ja=function(){return this.s.ja()};f.Ic=function(){var a=this.s.w().toFixed(this.Hq),b=this.s.zA();null!=this.wa&&this.wa.C(a);this.dispatchEvent({type:"D",value:a,fK:this.s.ja(),$J:this.s.T(),KQ:b})};
f.Cp=function(a){null!=a&&(this.s.Gd()!=a.Gd()&&a.Oc(this.s.Gd()),this.s.ja()!=a.ja()&&a.Sb(this.s.ja()),this.s.T()!=a.T()&&a.Lb(this.s.T()),this.s.w()!=a.w()&&a.C(this.s.w()))};f.refresh=function(){this.gs++;if(5>this.gs){var a=this.s.w();this.s instanceof V&&this.s.o();this.s.C(0);this.s.C(a);this.Cp(this.wa)}else 5==this.gs&&(window.console.log("NOTE:  Slider refresh limit reached (prevent stack overflow)"),setTimeout(function(){this.gs=0}.bind(this),3E3))};
f.f=function(){At.d.f.call(this);delete this.Hq;null!=this.s&&(this.s.g(),delete this.s);null!=this.wa&&(this.wa.g(),delete this.wa)};v("xiv.ui.SliderBase.ID_PREFIX",At.ID_PREFIX);v("xiv.ui.SliderBase.CSS_SUFFIX",At.CSS_SUFFIX);v("xiv.ui.SliderBase.prototype.slider",At.prototype.s);v("xiv.ui.SliderBase.prototype.displayDecimals",At.prototype.Hq);v("xiv.ui.SliderBase.prototype.valueInput",At.prototype.wa);v("xiv.ui.SliderBase.prototype.createSlider",At.prototype.gu);
v("xiv.ui.SliderBase.prototype.createInputBox",At.prototype.fu);v("xiv.ui.SliderBase.prototype.dispatchComponentEvent",At.prototype.Ic);v("xiv.ui.SliderBase.prototype.syncInputToSlider",At.prototype.Cp);v("xiv.ui.SliderBase.prototype.setDisplayDecimals",At.prototype.fp);v("xiv.ui.SliderBase.prototype.render",At.prototype.k);v("xiv.ui.SliderBase.prototype.getValueInput",At.prototype.JI);v("xiv.ui.SliderBase.prototype.setValue",At.prototype.C);v("xiv.ui.SliderBase.prototype.setStep",At.prototype.Oc);
v("xiv.ui.SliderBase.prototype.setMaximum",At.prototype.Lb);v("xiv.ui.SliderBase.prototype.setMinumum",At.prototype.Sb);v("xiv.ui.SliderBase.prototype.getValue",At.prototype.w);v("xiv.ui.SliderBase.prototype.getStep",At.prototype.Gd);v("xiv.ui.SliderBase.prototype.getMaximum",At.prototype.T);v("xiv.ui.SliderBase.prototype.getMinumum",At.prototype.ja);v("xiv.ui.SliderBase.prototype.refresh",At.prototype.refresh);v("xiv.ui.SliderBase.prototype.setDisplaySuffix",At.prototype.gp);
v("xiv.ui.SliderBase.prototype.disposeInternal",At.prototype.f);function Bt(){At.call(this);this.Pf("Master Opacity")}w(Bt,At);v("xiv.ui.SliderController",Bt);Bt.ID_PREFIX="xiv.ui.SliderController";v("xiv.ui.SliderController.ID_PREFIX",Bt.ID_PREFIX);function Ct(){At.call(this);this.Pf("TwoThumb")}w(Ct,At);v("xiv.ui.TwoThumbSliderController",Ct);Ct.ID_PREFIX="xiv.ui.TwoThumbSliderController";Ct.CSS_SUFFIX={ka:"slider",Ph:"slider-track",Sg:"slider-thumb",fF:"slider-thumb-extent",zN:"extent-input"};f=Ct.prototype;f.$d=null;f.k=function(a){Ct.d.k.call(this,a);this.wa.AC("left");this.$d=this.fu(this.EK.bind(this))};f.uH=function(){return this.$d};
f.gu=function(){this.s=new Qs;this.s.B();var a=this.s.a();a.setAttribute("id","ThresholdSlider_"+B());O(a,At.CSS.ka);O(a,Ct.CSS.ka);var b=Q("div",{id:"ThwoThumbSlider_track_"+B(),"class":At.CSS.Ph});a.appendChild(b);O(b,Ct.CSS.Ph);this.Mj(this.s);O(this.s.ua,At.CSS.Sg);O(this.s.ua,Ct.CSS.Sg);O(this.s.ua,Ct.CSS.OO);dl(this.s.ua,At.CSS.Px);O(this.s.yc,At.CSS.Sg);O(this.s.yc,Ct.CSS.Sg);O(this.s.yc,Ct.CSS.fF);dl(this.s.yc,At.CSS.Px);G(this.s,"change",this.Ic.bind(this))};
f.refresh=function(){Ct.d.refresh.call(this);null!=this.$d&&this.Cp(this.$d);var a=this.ae(),b=parseInt(a.min),c=parseInt(a.max);if(null!=a){if(b!=this.s.ja()||c!=this.s.T())this.s.Sb(b),this.s.Lb(c),this.s.Oj(c-b),this.s.C(b),this.s.Oc(1);b=U(this.s.ua).width;a=this.s.T()-this.s.ja();c=U(this.s.a()).width-b;b=c*((this.s.w()-this.s.ja())/a);a=c*(this.s.Ed()/a);this.s.ua.style.left=b.toString()+"px";this.s.yc.style.left=a.toString()+"px"}};
f.Cp=function(a){Ct.d.Cp.call(this,a);null!=this.$d&&a==this.$d&&this.$d.C(this.s.Ed()+this.s.w())};f.Oj=function(a,b){this.s.Oj(a,b)};f.Of=function(a){this.s.Of(a)};f.Ed=function(){return this.s.Ed()};f.EK=function(){var a=parseInt(this.$d.w());this.s.Of(a-this.s.w())};f.Ic=function(){var a=this.s.w(),b=this.s.Ed()+a;this.wa.C(a);this.$d.C(b);this.dispatchEvent({type:"D",lower:a,upper:b})};
f.f=function(){null!=this.s&&(J(this.s),null==this.s.Ra&&(this.s.Ra=new rq),this.s.g(),delete this.s);Ct.d.f.call(this);null!=this.$d&&(this.$d.g(),delete this.$d)};v("xiv.ui.TwoThumbSliderController.ID_PREFIX",Ct.ID_PREFIX);v("xiv.ui.TwoThumbSliderController.CSS_SUFFIX",Ct.CSS_SUFFIX);v("xiv.ui.TwoThumbSliderController.prototype.refresh",Ct.prototype.refresh);v("xiv.ui.TwoThumbSliderController.prototype.extentInput",Ct.prototype.$d);v("xiv.ui.TwoThumbSliderController.prototype.getExtentInput",Ct.prototype.uH);
v("xiv.ui.TwoThumbSliderController.prototype.setValueAndExtent",Ct.prototype.Oj);v("xiv.ui.TwoThumbSliderController.prototype.setExtent",Ct.prototype.Of);v("xiv.ui.TwoThumbSliderController.prototype.getExtent",Ct.prototype.Ed);v("xiv.ui.TwoThumbSliderController.prototype.dispatchComponentEvent",Ct.prototype.Ic);v("xiv.ui.TwoThumbSliderController.prototype.disposeInternal",Ct.prototype.f);function Dt(){lt.call(this);this.Uj=[]}w(Dt,lt);v("xiv.ui.MasterController3D",Dt);Dt.ID_PREFIX="xiv.ui.MasterController3D";Dt.CSS_SUFFIX={};Dt.prototype.add=function(a){this.Uj.push(a);this.Ny(a,Bt);1==this.Uj.length&&R(document.body,this.a())};Dt.prototype.f=function(){Dt.d.f.call(this);Kb(this.Uj);delete this.Uj};v("xiv.ui.MasterController3D.ID_PREFIX",Dt.ID_PREFIX);v("xiv.ui.MasterController3D.CSS_SUFFIX",Dt.CSS_SUFFIX);v("xiv.ui.MasterController3D.CONTROLLERS",{CP:"Visible",oO:"Opacity"});
v("xiv.ui.MasterController3D.prototype.add",Dt.prototype.add);v("xiv.ui.MasterController3D.prototype.disposeInternal",Dt.prototype.f);function Et(){Dt.call(this)}w(Et,Dt);v("xiv.ui.AnnotationsController3D",Et);Et.ID_PREFIX="xiv.ui.AnnotationsController3D";Et.CSS_SUFFIX={};Et.prototype.add=function(a){Et.d.add.call(this,a);this.It(a,zt);this.Ht(a,yt)};v("xiv.ui.AnnotationsController3D.ID_PREFIX",Et.ID_PREFIX);v("xiv.ui.AnnotationsController3D.CSS_SUFFIX",Et.CSS_SUFFIX);v("xiv.ui.AnnotationsController3D.prototype.add",Et.prototype.add);function Ft(){lt.call(this);this.Mj(Q("input",{id:this.constructor.ID_PREFIX+"_RadioButtonHolder_"+B(),type:"radio"}));O(this.ma,Ft.CSS.XE);G(this.ma,"change",this.Ic.bind(this))}w(Ft,lt);v("xiv.ui.RadioButtonController",Ft);Ft.ID_PREFIX="xiv.ui.RadioButtonController";Ft.CSS_SUFFIX={XE:"radiobutton"};Ft.prototype.Ic=function(){this.dispatchEvent({type:"D",checked:this.ma.checked})};Ft.prototype.f=function(){Ft.d.f.call(this)};v("xiv.ui.RadioButtonController.ID_PREFIX",Ft.ID_PREFIX);
v("xiv.ui.RadioButtonController.CSS_SUFFIX",Ft.CSS_SUFFIX);v("xiv.ui.RadioButtonController.prototype.dispatchComponentEvent",Ft.prototype.Ic);v("xiv.ui.RadioButtonController.prototype.disposeInternal",Ft.prototype.f);function Gt(){lt.call(this);this.vl=[]}w(Gt,lt);v("xiv.ui.MasterController2D",Gt);Gt.ID_PREFIX="xiv.ui.MasterController2D";Gt.CSS_SUFFIX={};Gt.prototype.add=function(){};Gt.prototype.f=function(){Gt.d.f.call(this);Kb(this.vl);delete this.vl};v("xiv.ui.MasterController2D.ID_PREFIX",Gt.ID_PREFIX);v("xiv.ui.MasterController2D.CSS_SUFFIX",Gt.CSS_SUFFIX);v("xiv.ui.MasterController2D.prototype.add",Gt.prototype.add);v("xiv.ui.MasterController2D.prototype.disposeInternal",Gt.prototype.f);function Ht(){Dt.call(this)}w(Ht,Dt);v("xiv.ui.VolumeController3D",Ht);Ht.ID_PREFIX="xiv.ui.VolumeController3D";Ht.CSS_SUFFIX={};f=Ht.prototype;f.Qy=function(a){var b=this.Cd(zt,"Volume Rendering",function(b){a.volumeRendering=b.checked});pt(a,b);this.Rf.push(b);b.ma.Kd(!1)};f.hL=function(a){null!=this.Dp&&(this.Dp.ae().lowerThreshold=parseFloat(a.lower),this.Dp.ae().upperThreshold=parseFloat(a.upper))};f.Dp=null;
f.Oy=function(a){var b=this.Cd(Ct,"Threshold",this.hL.bind(this));b.Kg(a);pt(a,b);this.Rf.push(b);var c=a.lowerThreshold,d=a.upperThreshold;-Infinity==c&&(c=-1E4,a.lowerThreshold=c);Infinity==a.upperThreshold&&(d=1E4,a.upperThreshold=d);var e=b.ma;e.Sb(c);e.Lb(d);e.Oj(d-c);e.C(c);e.Oc(1);e.Of(d-c);a.upperThreshold=d;a.lowerThreshold=c;e.a().style.top="8px";b.wa.a().style.top="-1px";b.$d.a().style.top="-1px";b.wa.a().style.left="calc(100% - 112px)";b.wa.Jc.style.textAlign="left";b.wa.fa.style.textAlign=
"left";this.Dp=b};f.add=function(a){Ht.d.add.call(this,a);this.Qy(a);this.Oy(a)};f.o=function(){Ht.d.o.call(this)};f.f=function(){Ht.d.f.call(this);this.Dp.g()};v("xiv.ui.VolumeController3D.ID_PREFIX",Ht.ID_PREFIX);v("xiv.ui.VolumeController3D.DEFAULT_THRESHOLD",1E4);v("xiv.ui.VolumeController3D.CSS_SUFFIX",Ht.CSS_SUFFIX);v("xiv.ui.VolumeController3D.prototype.add_volumeRendering",Ht.prototype.Qy);v("xiv.ui.VolumeController3D.prototype.add_threshold",Ht.prototype.Oy);
v("xiv.ui.VolumeController3D.prototype.add",Ht.prototype.add);v("xiv.ui.VolumeController3D.prototype.updateStyle",Ht.prototype.o);v("xiv.ui.VolumeController3D.prototype.disposeInternal",Ht.prototype.f);function It(){Dt.call(this)}w(It,Dt);v("xiv.ui.MeshController3D",It);It.ID_PREFIX="xiv.ui.MeshController3D";It.CSS_SUFFIX={};It.prototype.add=function(a){It.d.add.call(this,a);this.It(a,zt);this.Ht(a,yt)};v("xiv.ui.MeshController3D.ID_PREFIX",It.ID_PREFIX);v("xiv.ui.MeshController3D.CSS_SUFFIX",It.CSS_SUFFIX);v("xiv.ui.MeshController3D.prototype.add",It.prototype.add);v("xiv.ui.MeshController3D.prototype.disposeInternal",It.prototype.f);function Jt(){lt.call(this)}w(Jt,lt);v("xiv.ui.Histogram",Jt);Jt.ID_PREFIX="xiv.ui.Histogram";Jt.CSS_SUFFIX={YD:"canvas",BE:"linecanvas",FE:"max",NE:"min",bE:"clipmax",cE:"clipmin"};Jt.LEVEL_CUTOFF=.999;f=Jt.prototype;f.Ma=null;f.ad=null;f.Hp=null;f.Ks=null;f.Gr=null;f.uG="rgb(40,40,40)";f.Mc=[null,null];f.mg=[null,null];f.oJ="rgb(90,90,90)";f.Zm=[0,1E3];f.md=[0,1E3];f.Xt=!1;f.dD=function(a,b){this.Zm[0]=a;this.Zm[1]=b};
f.vw=function(a,b){if(this.Xt)this.md[0]=a,this.md[1]=b;else{var c=this.tg();this.md[0]=c.min;this.md[1]=c.max}};f.cD=function(a,b){this.dD(a,b);this.vw(a,b)};
f.k=function(a){Jt.d.k.call(this,a);this.Mj(this);this.bi=Q("canvas",{id:this.constructor.ID_PREFIX+"_Canvas_"+B(),"class":this.constructor.CSS.YD});this.a().appendChild(this.bi);this.hj=this.bi.getContext("2d");this.hj.fillStyle=this.uG;this.ri=Q("canvas",{id:this.constructor.ID_PREFIX+"_LineCanvas_"+B(),"class":this.constructor.CSS.BE});this.a().appendChild(this.ri);this.zg=this.ri.getContext("2d");this.Mc[0]=Q("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.NE},"-1000");
this.a().appendChild(this.Mc[0]);this.Mc[1]=Q("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.FE},"1000");this.a().appendChild(this.Mc[1]);this.mg[0]=Q("div",{id:this.constructor.ID_PREFIX+"_Min_"+B(),"class":this.constructor.CSS.cE},"-1000");this.a().appendChild(this.mg[0]);this.mg[1]=Q("div",{id:this.constructor.ID_PREFIX+"_Max_"+B(),"class":this.constructor.CSS.bE},"1000");this.a().appendChild(this.mg[1])};f.ae=function(){return Jt.d.ae.call(this)};
f.kz=function(a){this.Xt=a;!1==a&&this.vw(null,null)};function Kt(a){if(null==a.Ma){var b=a.ae(),c=b.max;E(b.image,function(a){E(a,function(a){E(a,function(a){if(null==this.Ma){this.Ma=[];for(var b=0,b=0;b<=c;b++)this.Ma.push(0)}this.Ma[parseInt(a)]++;this.Ks++}.bind(this))}.bind(this))}.bind(a));if(null!=a.Ma){var d,e=0;a.Hp=Rb(a.Ma.length);null==a.ad&&(a.ad=[],a.Gr=0,E(a.Ma,function(a,b){d=a/this.Ks;this.ad.push(d);e+=d;this.Hp[b]=e;this.Gr=Math.max(this.Gr,d)}.bind(a)))}}}
f.Mz=function(){if(null!=this.ae()){var a=U(this.bi),b=a.width,a=a.height;if(0!=b&&0!=a&&(this.bi.height=a,this.bi.width=b,this.ri.height=a,this.ri.width=b,Kt(this),null!=this.Ma)){for(var c=0,d=this.Zm[0];d<this.Zm[1]+1;d++)this.ad[d]>c&&(c=this.ad[d]);for(var e=[],d=this.md[0];d<this.md[1]+1;d++)e.push(this.ad[d]/c);for(var b=(b-0)/(this.md[1]-this.md[0]),c=1>b?1:Math.round(b),h=0,k=0,l=e.length,d=0;d<l;d++)h=Math.round(a*e[d]),k=Math.round(d*b),isNaN(h)||null==h||(this.hj.fillStyle=this.oJ,this.hj.fillRect(c*
k,a,c,-h))}}};f.MA=function(){var a=Math.round(.1*this.ad.length),b=Math.round(.9*this.ad.length),c,d=0;for(c=1;c<a;c++)this.ad[c]>d&&(d=c);var e=this.ad[d],h=d;for(c=d+1;c<a;c++)this.ad[c]<e&&(h=c,e=this.ad[c]);d=this.ad[a];e=0;for(c=a+1;c<b;c++)this.ad[c]<d&&(e=c,d=this.ad[c]);return[h,e]};f.rA=function(a){if(null!=this.Ma)for(var b=0,c=0,d=this.Ma.length;c<d;c++)if(b+=this.Ma[c],b/this.Ks>=a)return c};
f.Nz=function(){if(null!=this.ae()){var a=U(this.ri),b=a.width,a=a.height;this.ri.width=b;var c=this.tg(),d=(b-0)/(this.md[1]-this.md[0]),e=-1*this.md[0]*d,h=c.th*d+e,c=c.Aj*d+e,k=this.md[0]*d+e,d=this.md[1]*d+e,l=(a-0)/(c-h),e=-1*h*l,n=k*l+e,e=d*l+e;this.Mc[0].style.width="auto";this.Mc[1].style.width="auto";var p=new $k(this.a()),l=p.left,p=p.right;this.Mc[0].style.left=h.toString()+"px";h=el(this.Mc[0],l,p);this.Mc[1].style.left=c.toString()+"px";var m=el(this.Mc[1],l,p);h.right+5>m.left&&(this.Mc[0].innerHTML+=
", "+this.Mc[1].innerHTML,this.Mc[1].innerHTML="",el(this.Mc[0],l,p));h=new $k(this.bi);this.mg[0].style.left=h.left.toString()+"px";this.mg[1].style.left=(h.right-U(this.mg[1]).width).toString()+"px";this.zg.beginPath();this.zg.strokeStyle="black";this.zg.moveTo(k,a-n);this.zg.lineTo(d,a-e);this.zg.lineWidth=.5;this.zg.stroke();0<c&&c<b&&(this.zg.moveTo(c,a),this.zg.lineTo(c,a-15),this.zg.lineWidth=.5,this.zg.stroke())}};
f.refresh=function(){if(null!=this.ae()){var a=this.tg();this.Mc[0].innerHTML="Min: "+a.th;this.Mc[1].innerHTML="Max: "+a.Aj;this.mg[0].innerHTML=this.md[0];this.mg[1].innerHTML=this.md[1]}this.Mz();this.Nz()};
f.f=function(){Jt.d.f.call(this);this.Mc=[null,null];delete this.Mc;this.mg=[null,null];delete this.mg;null!=this.bi&&(S(this.bi),delete this.bi);null!=this.ri&&(S(this.ri),delete this.ri);null!=this.Ma&&(Kb(this.Ma),delete this.Ma);null!=this.ad&&(Kb(this.ad),delete this.ad);null!=this.Hp&&(Kb(this.Hp),delete this.Hp);delete this.Ks;delete this.Gr;delete this.hj;delete this.zg;Kb(this.Zm);delete this.Zm;Kb(this.md);delete this.md;delete this.Xt};v("xiv.ui.Histogram.EventType",{});
v("xiv.ui.Histogram.ID_PREFIX",Jt.ID_PREFIX);v("xiv.ui.Histogram.CSS_SUFFIX",Jt.CSS_SUFFIX);v("xiv.ui.Histogram.LEVEL_CUTOFF",Jt.LEVEL_CUTOFF);v("xiv.ui.Histogram.prototype.render",Jt.prototype.k);v("xiv.ui.Histogram.prototype.draw",Jt.prototype.Mz);v("xiv.ui.Histogram.prototype.drawLine",Jt.prototype.Nz);v("xiv.ui.Histogram.prototype.clipToZoom",Jt.prototype.kz);v("xiv.ui.Histogram.prototype.setZoomRange",Jt.prototype.dD);v("xiv.ui.Histogram.prototype.setClipRange",Jt.prototype.vw);
v("xiv.ui.Histogram.prototype.setZoomAndClipRange",Jt.prototype.cD);v("xiv.ui.Histogram.prototype.getLevelByPixelThreshold",Jt.prototype.rA);v("xiv.ui.Histogram.prototype.getVisiblePixelRange",Jt.prototype.MA);v("xiv.ui.Histogram.prototype.refresh",Jt.prototype.refresh);v("xiv.ui.Histogram.prototype.disposeInternal",Jt.prototype.f);function Lt(){lt.call(this);this.dj=new ip("Reset");this.Mj(this.dj);O(this.dj.a(),"xiv-ui-buttoncontroller-element");G(this.dj.a(),"click",this.Ic.bind(this))}w(Lt,lt);v("xiv.ui.ButtonController",Lt);Lt.ID_PREFIX="xiv.ui.ButtonController";Lt.CSS_SUFFIX={};Lt.prototype.Ic=function(){this.dispatchEvent({type:"D",checked:this.dj.ph()})};Lt.prototype.f=function(){Lt.d.f.call(this);J(this.dj);J(this.dj.a());this.dj.g();delete this.dj};v("xiv.ui.ButtonController.ID_PREFIX",Lt.ID_PREFIX);
v("xiv.ui.ButtonController.CSS_SUFFIX",Lt.CSS_SUFFIX);v("xiv.ui.ButtonController.prototype.dispatchComponentEvent",Lt.prototype.Ic);v("xiv.ui.ButtonController.prototype.disposeInternal",Lt.prototype.f);function Mt(){lt.call(this);this.Uj=[]}w(Mt,lt);v("xiv.ui.MasterController",Mt);Mt.ID_PREFIX="xiv.ui.MasterController";Mt.CSS_SUFFIX={};Mt.prototype.add=function(a){this.Uj.push(a)};Mt.prototype.f=function(){Mt.d.f.call(this);Kb(this.Uj);delete this.Uj};v("xiv.ui.MasterController.ID_PREFIX",Mt.ID_PREFIX);v("xiv.ui.MasterController.CSS_SUFFIX",Mt.CSS_SUFFIX);v("xiv.ui.MasterController.CONTROLLERS",{});v("xiv.ui.MasterController.prototype.add",Mt.prototype.add);
v("xiv.ui.MasterController.prototype.disposeInternal",Mt.prototype.f);function Nt(){Mt.call(this);this.n={min:null,max:null,cj:null,dh:null,Ff:null,bc:null,reset:null,$Q:null,te:null,tp:[]}}w(Nt,Mt);v("xiv.ui.LevelsController",Nt);Nt.ID_PREFIX="xiv.ui.LevelsController";Nt.CSS_SUFFIX={};f=Nt.prototype;f.Sa=null;f.mH=function(){return this.n};function Ot(a){var b=a.n.Ff.MA();a.n.bc.Oj(b[0],b[1]-b[0])}
f.add=function(a){Nt.d.add.call(this,a);this.Sa=a;a=this.Cd(Ct,"Zoom Range",this.HK.bind(this));a.Kg(this.Sa);pt(this.Sa,a);this.ef.push(a);a.wa.fa.style.textAlign="left";a.wa.Jc.style.textAlign="left";this.n.bc=a;Pt(this);Qt(this);Rt(this);this.n.min=this.Cd(Bt,"Minimum",this.NK.bind(this));this.n.min.Kg(this.Sa);pt(this.Sa,this.n.min);this.ef.push(this.n.min);this.n.min.Lb(1E3);this.n.min.Sb(0);this.n.min.C(0);this.n.min.Oc(1);this.n.min.fp(0);this.n.min.ep(this.Sa.min);this.n.min.refresh();a=this.Cd(Bt,
"Maximum",this.LK.bind(this));a.Kg(this.Sa);pt(this.Sa,a);this.ef.push(a);a.Lb(1E3);a.Sb(0);a.C(1E3);a.Oc(1);a.fp(0);a.ep(this.Sa.max);a.refresh();this.n.max=a;a=this.Cd(Bt,"Brightness",this.wK.bind(this));a.Kg(this.Sa);pt(this.Sa,a);this.ef.push(a);a.Lb(100);a.Sb(0);a.C(0);a.Oc(1);a.fp(0);a.refresh();this.n.cj=a;a=this.Cd(Bt,"Contrast",this.zK.bind(this));a.Kg(this.Sa);pt(this.Sa,a);this.ef.push(a);a.Lb(100);a.Sb(0);a.C(0);a.Oc(1);a.fp(0);a.refresh();this.n.dh=a;a=this.Cd(Lt,null,this.dL.bind(this));
pt(this.Sa,a);this.ef.push(a);a.Kg(this.Sa);this.n.reset=a;this.n.tp.push(this.n.min);this.n.tp.push(this.n.max);this.n.tp.push(this.n.cj);this.n.tp.push(this.n.dh);St(this)};
function St(a){E(a.n.tp,function(a){O(a.zb,"xiv-ui-levelscontroller-sliderlabel");O(a.a(),"xiv-ui-levelscontroller-slidercontroller");O(a.ma.a(),"xiv-ui-levelscontroller-slider");O(a.wa.a(),"xiv-ui-levelscontroller-slidervalue");a.ma.o()}.bind(a));O(a.n.bc.zb,"xiv-ui-levelscontroller-twothumbsliderlabel");O(a.n.bc.zb,"xiv-ui-levelscontroller-sliderlabel");O(a.n.bc.a(),"xiv-ui-levelscontroller-twothumbslidercontroller");O(a.n.bc.ma.a(),"xiv-ui-levelscontroller-twothumbslider");O(a.n.bc.wa.a(),"xiv-ui-levelscontroller-twothumbslidervalue");
O(a.n.bc.$d.a(),"xiv-ui-levelscontroller-twothumbsliderextent")}f.dL=function(){this.Sa.windowLow=0;E([this.n.max,this.n.min],function(a){a.C(a.defaultValue);a.refresh();this.n.te.Kd(!1)}.bind(this));Ot(this);this.n.Ff.update()};
function Rt(a){a.n.te=a.Cd(zt,"Clip X-Axis to Zoom");pt(a.Sa,a.n.te);a.ef.push(a.n.te);a.n.te.ma.a().style.left="calc(100% - 15px)";a.n.te.zb.style.fontSize="10px";G(a.n.te,"D",function(a){null!=this.n.Ff&&null!=this.n.bc&&(this.n.Ff.kz("true"==a.checked.toString()),this.n.bc.refresh())}.bind(a))}function Qt(a){var b=a.Cd(Jt,null,function(){}.bind(a));b.Kg(a.Sa);pt(a.Sa,b);a.ef.push(b);b.refresh();a.n.Ff=b}
f.HK=function(){null!=this.n.Ff&&(this.n.Ff.cD(this.n.bc.w(),this.n.bc.Ed()+this.n.bc.w()),this.n.Ff.refresh())};function Tt(a){var b=a.n.min.tg();E([a.n.max,a.n.min],function(a,d){a.Lb(b.max);a.Sb(b.min);a.C(0==d?b.max:b.min)});Pt(a);a.n.Ff.refresh()}function Pt(a){if(null!=a.n.min){var b=a.n.min.tg();a.n.bc.Sb(b.min);a.n.bc.Lb(b.max);a.n.bc.C(b.min);a.n.bc.Oc(1);a.n.bc.Of(b.max-b.min)}}
f.NK=function(){null!=this.n.max&&null!=this.n.min&&(this.n.min.ja()!=this.Sa.min&&Tt(this),this.Sa.windowLow=this.n.min.w(),Ut(this,this.n.min))};f.LK=function(){null!=this.n.max&&null!=this.n.min&&(this.n.max.T()!=this.Sa.max&&Infinity!=this.Sa.max&&Tt(this),this.Sa.windowHigh=this.n.max.w(),Ut(this,this.n.max))};
function Ut(a,b){switch(b){case a.n.min:a.n.min.w()>=a.n.max.w()&&a.n.max.C(a.n.min.w()+1);case a.n.max:a.n.max.w()<=a.n.min.w()&&a.n.min.C(a.n.max.w()-1);var c=a.n.cj.ma;c.Ei(!0);var d=a.n.min.tg(),d=Math.round((1-(d.th+(d.Aj-d.th)/2-d.min)/(d.max-d.min))*c.T());a.n.cj.C(d);c.Ei(!1);c=a.n.dh.ma;c.Ei(!0);var d=a.n.min.tg(),e=a.n.dh.T()/2,h=(d.max-d.min)/(d.Aj-d.th)*e;h>e&&(h=a.n.dh.T()-(d.Aj-d.th)/(d.max-d.min)*e);d=Math.round(h);a.n.dh.C(d);c.Ei(!1);case a.n.cj:case a.n.dh:c=a.n.min.ma,d=a.n.max.ma,
e=a.n.min.tg(),c.Ei(!0),d.Ei(!0),a.n.min.C(e.th,!0),a.n.max.C(e.Aj,!0),d.Ei(!1),c.Ei(!1)}a.n.Ff.refresh()}f.refresh=function(){null!=this.n.te&&this.n.te.refresh()};f.wK=function(){if(null!=this.n.cj){var a=this.n.min.tg(),b=this.n.cj.ma,b=a.min+(a.max-a.min)*((b.T()-b.w())/b.T()),c=a.Aj-a.th,a=Math.round(b-c/2),b=Math.round(b+c/2);Vt(this,a,b);Ut(this,this.n.cj)}};
f.zK=function(){if(null!=this.n.dh){var a=this.n.min.tg(),b=this.n.dh.ma,c,d=a.th+(a.Aj-a.th)/2,a=a.max-a.min;c=b.T()/2;c=b.w()<=c?b.w()/c:c/(b.T()-b.w());0<c&&(b=Math.round(d-.5*a/c),d=Math.round(d+.5*a/c),Vt(this,b,d));Ut(this,this.n.dh)}};function Vt(a,b,c){b==c&&(b=c-1);a.Sa.windowLow=b;a.Sa.windowHigh=c}f.f=function(){D(this.n);delete this.Sa;Nt.d.f.call(this)};v("xiv.ui.LevelsController.ID_PREFIX",Nt.ID_PREFIX);v("xiv.ui.LevelsController.CSS_SUFFIX",Nt.CSS_SUFFIX);
v("xiv.ui.LevelsController.prototype.add",Nt.prototype.add);v("xiv.ui.LevelsController.prototype.getControllerSet",Nt.prototype.mH);v("xiv.ui.LevelsController.prototype.disposeInternal",Nt.prototype.f);function Wt(){Mt.call(this)}w(Wt,Mt);v("xiv.ui.VolumeController",Wt);Wt.ID_PREFIX="xiv.ui.VolumeController";Wt.CSS_SUFFIX={};Wt.prototype.add=function(a){Wt.d.add.call(this,a);this.Py(a);this.My(a)};Wt.prototype.Py=function(a){var b=this.Cd(Ft,"Visible",function(){});pt(a,b);this.Rf.push(b);b.Kg(a);b.ma.checked=a[Fq]||!1};Wt.prototype.My=function(a){var b=this.Cd(zt,"Show Label Map");pt(a,b);this.Rf.push(b);b.Kg(a);b.ma.Kd(!0)};Wt.prototype.f=function(){Wt.d.f.call(this)};
v("xiv.ui.VolumeController.ID_PREFIX",Wt.ID_PREFIX);v("xiv.ui.VolumeController.CSS_SUFFIX",Wt.CSS_SUFFIX);v("xiv.ui.VolumeController.prototype.add",Wt.prototype.add);v("xiv.ui.VolumeController.prototype.add_visibleRadio",Wt.prototype.Py);v("xiv.ui.VolumeController.prototype.add_labelMapToggle",Wt.prototype.My);v("xiv.ui.VolumeController.prototype.disposeInternal",Wt.prototype.f);function Xt(){V.call(this);C(Yt(),function(a,b){this[b]=null})}w(Xt,V);v("xiv.ui.XtkControllerTree",Xt);function Zt(a,b,c){this["2D"]=a;this["3D"]=b;this.all=null!=c?c:null}v("xiv.ui.XtkControllerTree.ControlSet",Zt);Xt.ID_PREFIX="xiv.ui.XtkControllerTree";Xt.CSS_SUFFIX={};function Yt(){return{volumes:null,annotations:null,meshes:null,levels:null}}f=Xt.prototype;f.Ix=function(){};f.UD=function(){return this.lh([this.Ji])};f.Ix=function(){return this.lh([this.$f])};f.AF=function(){return this.lh([this.dk])};
f.IH=function(){};f.lh=function(a){var b=[];E(g(a)?a:[a],function(a){null!=a&&(b=Nb(b,a.Wz()))});return b};f.TH=function(){return this.$f};f.refresh=function(){var a=this.lh([this.$f,this.ek,this.dk,this.Zj,this.Ji,this.Ws]);E(a,function(a){a.refresh()}.bind(this))};
f.cu=function(a,b){a instanceof K?(null==this.ek&&(this.$f=new Nt,this.ek=new Wt,this.dk=new Ht),this.$f.add(a,b),this.ek.add(a,b),this.dk.add(a,b)):a instanceof kt?(null==this.Zj&&(this.Zj=new It),this.Zj.add(a,b)):a instanceof iq&&(null==this.Ji&&(this.Ji=new Et),this.Ji.add(a));this.volumes=new Zt(null,this.lh([this.dk]),this.lh([this.ek]));this.annotations=new Zt(null,this.lh([this.Ji]));this.meshes=new Zt(null,this.lh([this.Zj]));this.levels=new Zt(null,null,this.lh([this.$f]))};
f.f=function(){Xt.d.f.call(this);null!=this.$f&&(this.$f.g(),delete this.$f);null!=this.ek&&(this.ek.g(),delete this.ek);null!=this.Vx&&(this.Vx.g(),delete this.Vx);null!=this.dk&&(this.dk.g(),delete this.dk);null!=this.Zj&&(this.Zj.g(),delete this.Zj);null!=this.Ji&&(this.Ji.g(),delete this.Ji);null!=this.Ws&&(this.Ws.g(),delete this.Ws)};v("xiv.ui.XtkControllerTree.ControlSet",Zt);v("xiv.ui.XtkControllerTree.ID_PREFIX",Xt.ID_PREFIX);v("xiv.ui.XtkControllerTree.CSS_SUFFIX",Xt.CSS_SUFFIX);
v("xiv.ui.XtkControllerTree.getEmptyPropertiesObject",Yt);v("xiv.ui.XtkControllerTree.prototype.Levels",Xt.prototype.Ix);v("xiv.ui.XtkControllerTree.prototype.Annotations",Xt.prototype.UD);v("xiv.ui.XtkControllerTree.prototype.Volumes3D",Xt.prototype.AF);v("xiv.ui.XtkControllerTree.prototype.getHistograms",Xt.prototype.IH);v("xiv.ui.XtkControllerTree.prototype.getControllers",Xt.prototype.lh);v("xiv.ui.XtkControllerTree.prototype.getLevelsController",Xt.prototype.TH);
v("xiv.ui.XtkControllerTree.prototype.refresh",Xt.prototype.refresh);v("xiv.ui.XtkControllerTree.prototype.createControllers",Xt.prototype.cu);v("xiv.ui.XtkControllerTree.prototype.disposeInternal",Xt.prototype.f);function $t(a){Ks.call(this);this.orientation=a;this.Fl=Gq;this.Eq=null}w($t,Ks);v("xiv.vis.XtkPlane2D",$t);f=$t.prototype;f.CA=function(){return this.Ga.CA()};f.DA=function(){return this.Ga.DA()};f.sm=function(){return null!=this.Ga?this.Ga.sm():null};f.kl=function(a){$t.d.kl.call(this,a)};f.g=function(){$t.d.g.call(this);delete this.Eq;delete this.tQ;delete this.uQ};v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerX",$t.prototype.CA);
v("xiv.vis.XtkPlane2D.prototype.getSliceRelativeToContainerY",$t.prototype.DA);v("xiv.vis.XtkPlane2D.prototype.getVolume",$t.prototype.sm);v("xiv.vis.XtkPlane2D.prototype.setContainer",$t.prototype.kl);v("xiv.vis.XtkPlane2D.prototype.dispose",$t.prototype.g);function au(){ad.call(this);this.pf=null;this.vc={volumes:[],meshes:[],fibers:[],spheres:[]};this.Ki=new $t("X");this.ak=new $t("Y");this.bk=new $t("Z");this.qc=new Ps;this.Dc={};this.Dc[this.Ki.ac()]=this.Ki;this.Dc[this.ak.ac()]=this.ak;this.Dc[this.bk.ac()]=this.bk;this.Dc[this.qc.ac()]=this.qc;this.uh=null;this.ys(this.qc);bu(this)}w(au,Eq);v("xiv.vis.XtkEngine",au);au.ID_PREFIX="xiv.vis.XtkEngine";au.SLICE_TO_RAS_KEY="sliceToRAS"+B();au.HAS_LABEL_MAP_KEY="hasLabelMap";f=au.prototype;f.hs=!1;
f.Eu=function(){return this.vc.volumes};f.Du=function(){return this.vc.meshes};f.Cu=function(){return this.vc.spheres};function cu(a,b){null!=b.Pd.En&&E(b.Pd.En,function(a){this.vc.spheres.push(du(a))}.bind(a))}f.PC=function(a,b){switch(a.toLowerCase()){case "x":this.Ki.Rb(b);break;case "y":this.ak.Rb(b);break;case "z":this.bk.Rb(b);break;case "v":this.qc.Rb(b)}};f.ys=function(a){this.uh=a;this.uh.xa();this.WL=G(this.uh,"k",this.bw.bind(this))};f.nI=function(){return this.uh};f.ew=function(a){this.dispatchEvent(a)};
function bu(a){C(a.Dc,function(a){G(a,"E",this.ew.bind(this));G(a,"G",function(){}.bind(this))}.bind(a))}f.mC=function(){this.pf.refresh()};f.nH=function(){return this.pf};
function eu(a,b){null!=a.pf&&(a.pf.g(),a.pf=null);a.pf=new Xt;null!=(b.Pd&&null!=b.Pd.En)&&(cu(a,b),E(a.vc.spheres,function(a){this.pf.cu(a)}.bind(a)));var c;E(b.$,function(a){c=a.va();if(null!=c&&(currXObj=fu(c,a.hi),renderProps=a.Pd,currXObj))if(this.pf.cu(currXObj,renderProps),currXObj instanceof K){"scans"==b.yf.toLowerCase()&&(window.console.log("Turning off reslicing for scan"),currXObj.reslicing=!1);a=currXObj;var e=renderProps;null!=e||(e={origin:[0,0,0],Ls:1E4,Fr:-1E4,wr:!0,nx:!1});a.origin=
e.origin;a.upperThreshold=e.Ls;a.lowerThreshold=e.Fr;a.volumeRendering=e.nx;a[Fq]=e.wr;a[au.SLICE_TO_RAS_KEY]=e.Mw;null!=e.oB?(a.labelmap.file=e.oB,a.labelmap.colortable.file=e.NJ,a[au.HAS_LABEL_MAP_KEY]=!0):a[au.HAS_LABEL_MAP_KEY]=!1;this.vc.volumes.push(currXObj)}else currXObj instanceof kt?(a=currXObj,e=renderProps,a.color=e.color||[.5,.5,.5],a.opacity=e.opacity||1,this.vc.meshes.push(currXObj)):currXObj instanceof Rs&&(au.RQ(currXObj,renderProps),this.vc.fibers.push(currXObj))}.bind(a))}
f.oC=function(){this.ys(this.qc);this.qc.xa();C(this.vc,function(a,b){"volumes"!==b&&E(a,function(a){this.qc.add(a)}.bind(this))}.bind(this));Uc(this.qc.Ya(),"l",function(){this.Ur();this.Ki.k()}.bind(this));this.qc.k()};f.nC=function(a){var b=null!=a?a:this.Lk();C(this.Dc,function(a,d){"v"!=d.toLowerCase()&&(a.xa(),a.add(b),a.k())})};function gu(a){var b=a.Lk();C(a.vc.volumes,function(a){a!==b&&(a.visible=!1)})}
f.pC=function(){var a=this.Lk(),b=[],c=[],d=["x","y","z","v"];C(this.vc,function(a,d){currArr="volumes"==d?c:b;E(a,function(a){currArr.push(a)})}.bind(this));E(b,function(a){this.qc.add(a)}.bind(this));E(c,function(b){b!==a&&(b.visible=!0,this.qc.add(b))}.bind(this));this.uh.Ya().onShowtime=function(){Mb(d,this.uh.ac().toLowerCase());hu(this,a)}.bind(this);this.uh.add(a);this.uh.k()};
f.k=function(a){this.hs=!1;eu(this,a);var b=a.Pd;null!=b?(null!=b.backgroundColor&&this.qc.rs(a.Pd.backgroundColor),null!=b.vq&&this.qc.ss(a.Pd.vq)):(this.qc.rs(),this.qc.ss());if(0<this.vc.volumes.length){a=this.Dc;b="";for(b in a)if(a[b].isEnabled()){this.ys(a[b]);break}this.pC()}else this.qc.isEnabled()&&this.oC()};function hu(a,b){var c=ob(a.Dc)-1;C(a.Dc,function(a){a!=this.uh&&a.isEnabled()&&(a.add(b),Uc(a.Ya(),"l",function(){c--;0==c&&this.Ur()}.bind(this)),a.k())}.bind(a))}
f.Lk=function(){if(0!=this.vc.volumes.length){for(var a=0,b=this.vc.volumes.length;a<b;a++){var c=this.vc.volumes[a];if(c[Fq])return c}this.vc.volumes[0][Fq]=!0;return this.vc.volumes[0]}};f.o=function(){C(this.Dc,function(a){a.o()}.bind(this))};f.bw=function(a){this.hs||this.dispatchEvent({type:"k",value:a.value})};f.Ur=function(a){gu(this);Wc(this.WL);this.hs=!0;this.dispatchEvent({type:"l",value:null!=a?a.value:1})};f.gI=function(){return this.Ki};f.hI=function(){return this.ak};f.iI=function(){return this.bk};
f.fI=function(){return this.qc};f.Yq=function(a){return this.Dc[a]};f.jI=function(){return this.Dc};var iu=["nrrd","nii","nii.gz","mgh","mgz"],ju=["dicom","dcm","ima"],ku=["hdr","img"],lu=["nii","nii.gz"],mu=["jpeg","jpg","gif","png","img"],nu="stl vtk obj fsm inflated smoothwm pial orig".split(" "),ou=["trk"];function pu(a){var b=void 0;qu(a)?b=new kt:ru(a)||su(a)||tu(a)?b=new K:uu(a)&&(b=new Rs);return b}
function du(a){var b=new iq;b.center=a.position;b.caption=a.name;b.name=a.name;b.radius=3;b.color=[.85,0,0];return b}function ru(a){return-1<iu.indexOf(a)?!0:!1}function tu(a){return-1<mu.indexOf(a)?!0:!1}function su(a){return-1<ju.indexOf(a)?!0:!1}function qu(a){return-1<nu.indexOf(a)?!0:!1}function uu(a){return-1<ou.indexOf(a)?!0:!1}
function fu(a,b){function c(a){var b=uh(a);a=th(a);return b+"/"+a}var d=g(a)?vh(a[0]):vh(a),d=pu(d);if(null==d)throw Error("No renderable files in the set :(<br>");if(g(a)){var e=[];E(a,function(a){e.push(c(a))});a=e}else a=c(a);null!=b?(d.file=qb(b),d.filedata=pb(b)):d.file=a;return d}
au.prototype.g=function(){au.d.g.call(this);null!=this.pf&&(this.pf.g(),delete this.pf);J(this.Ki);J(this.ak);J(this.bk);J(this.qc);delete this.uh;D(this.Dc);delete this.Dc;this.Ki.g();delete this.Ki;this.ak.g();delete this.ak;this.bk.g();delete this.bk;this.qc.g();delete this.qc;C(this.vc,function(a){C(a,function(a){J(a);D(a)})});D(this.vc);delete this.vc;delete this.hs};v("xiv.vis.XtkEngine.EventType",{NO:"E",LO:"F",MO:"G",ERROR:"H",PP:"I",VN:"J",WN:"K"});v("xiv.vis.XtkEngine.ID_PREFIX",au.ID_PREFIX);
v("xiv.vis.XtkEngine.ANATOMICAL_TO_CARTESIAN",{SAGITTAL:"X",CORONAL:"Y",AXIAL:"Z",TRANSVERSE:"Z"});v("xiv.vis.XtkEngine.SLICE_TO_RAS_KEY",au.SLICE_TO_RAS_KEY);v("xiv.vis.XtkEngine.HAS_LABEL_MAP_KEY",au.HAS_LABEL_MAP_KEY);v("xiv.vis.XtkEngine.isVolume",ru);v("xiv.vis.XtkEngine.isImage",tu);v("xiv.vis.XtkEngine.isDicom",su);v("xiv.vis.XtkEngine.isAnalyze",function(a){return-1<ku.indexOf(a)?!0:!1});v("xiv.vis.XtkEngine.isNifti",function(a){return-1<lu.indexOf(a)?!0:!1});
v("xiv.vis.XtkEngine.isMesh",qu);v("xiv.vis.XtkEngine.isFiber",uu);v("xiv.vis.XtkEngine.prototype.getCurrentMeshes",au.prototype.Du);v("xiv.vis.XtkEngine.prototype.getCurrentAnnotations",au.prototype.Cu);v("xiv.vis.XtkEngine.prototype.getCurrentVolumes",au.prototype.Eu);v("xiv.vis.XtkEngine.prototype.setPlaneEnabled",au.prototype.PC);v("xiv.vis.XtkEngine.prototype.setPrimaryRenderPlane",au.prototype.ys);v("xiv.vis.XtkEngine.prototype.getPrimaryRenderPlane",au.prototype.nI);
v("xiv.vis.XtkEngine.prototype.refreshControllers",au.prototype.mC);v("xiv.vis.XtkEngine.prototype.getControllerTree",au.prototype.nH);v("xiv.vis.XtkEngine.prototype.render3dPlane",au.prototype.oC);v("xiv.vis.XtkEngine.prototype.render2D",au.prototype.nC);v("xiv.vis.XtkEngine.prototype.renderAllPlanes",au.prototype.pC);v("xiv.vis.XtkEngine.prototype.render",au.prototype.k);v("xiv.vis.XtkEngine.prototype.getSelectedVolume",au.prototype.Lk);v("xiv.vis.XtkEngine.prototype.updateStyle",au.prototype.o);
v("xiv.vis.XtkEngine.prototype.getPlaneX",au.prototype.gI);v("xiv.vis.XtkEngine.prototype.getPlaneY",au.prototype.hI);v("xiv.vis.XtkEngine.prototype.getPlaneZ",au.prototype.iI);v("xiv.vis.XtkEngine.prototype.getPlaneV",au.prototype.fI);v("xiv.vis.XtkEngine.prototype.getPlaneByOrientation",au.prototype.Yq);v("xiv.vis.XtkEngine.prototype.getPlanes",au.prototype.jI);v("xiv.vis.XtkEngine.prototype.dispose",au.prototype.g);function zi(){V.call(this);this.Za=Q("img",{id:"nrg.ui.Thumbnail_"+B()});"NONE"!=this.Za.src&&R(this.a(),this.Za);this.Ie=Q("div",{id:"DisplayText_"+B()});R(this.a(),this.Ie);this.bp=Q("div",{id:"selectedIndicator_"+B()});O(this.bp,zi.CSS.eF);R(this.a(),this.bp);this.yw();this.a().className=zi.dd;O(this.a(),zi.CSS.oE);this.Za.className=zi.CSS.Lh;this.Ie.className=zi.CSS.ck}w(zi,V);v("nrg.ui.Thumbnail",zi);zi.ID_PREFIX="nrg.ui.Thumbnail";
zi.CSS_SUFFIX={Lh:"image",ck:"text",JO:"selected",OE:"mouseover",LN:"image-mouseover",aP:"text-mouseover",Dx:"highlight",Vj:"active",Ex:"image-active",Qx:"text-active",eF:"selectindicator",Ox:"selectindicator-active",oE:"hoverable"};f=zi.prototype;f.dz=null;f.sr=!1;f.JH=function(){return this.Za};f.xC=function(a){this.dz=a;this.Za.onerror=function(){this.Za.onerror="";this.Za.src=this.dz}.bind(this)};f.AI=function(){return this.Ie};
f.Ou=function(){for(var a=this.Ie;a.childNodes[0];)a=a.childNodes[0];return a.parentNode.innerHTML};f.qw=function(a,b){null!=a||(a=500);var c=0;null==this.P&&(this.P=new Yf);this.P.setInterval(50);this.P.addEventListener(Zf,function(){c+=50;this.a().style.opacity=c/50%2;c>=a&&(this.P.stop(),this.P.g(),delete this.P,this.a().style.opacity=1,null!=b&&b())}.bind(this));this.P.start()};f.oh=function(){return this.sr};
f.Aw=function(a){this.Za.src=a;this.Za.className=zi.CSS.Lh;"NONE"==a&&(oj(this.Za,"display","none"),oj(this.a(),{height:"50px","outline-width":"1px","outline-style":"solid","outline-color":"white","margin-left":"-15px",width:"110%"}),oj(this.Ie,{height:"20px",left:"30px"}),oj(this.bp,{display:"none"}))};f.pp=function(a){this.Ie.innerHTML=a};
f.setActive=function(a,b){var c=this.a();(this.sr=a)?(b&&O(c,zi.CSS.Dx),O(c,zi.CSS.Vj),O(this.Ie,zi.CSS.Qx),O(this.Za,zi.CSS.Ex),O(this.bp,zi.CSS.Ox)):(Hh(c,zi.CSS.Dx),Hh(c,zi.CSS.Vj),Hh(this.Ie,zi.CSS.Qx),Hh(this.Za,zi.CSS.Ex),Hh(this.bp,zi.CSS.Ox))};f.o=function(a){a&&this.a()&&bl(this.a(),a)};f.yw=function(){Xc(this.a(),"L")&&Wc("L");G(this.a(),"click",function(){this.dispatchEvent({type:"L"})}.bind(this))};
f.f=function(){zi.d.f.call(this);J(this);J(this.a());S(this.Za);delete this.Za;S(this.Ie);delete this.Ie;delete this.YP;delete this.sr};v("nrg.ui.Thumbnail.EventType",{kN:"L"});v("nrg.ui.Thumbnail.ID_PREFIX",zi.ID_PREFIX);v("nrg.ui.Thumbnail.CSS_SUFFIX",zi.CSS_SUFFIX);v("nrg.ui.Thumbnail.prototype.getImage",zi.prototype.JH);v("nrg.ui.Thumbnail.prototype.setBrokenThumbnailUrl",zi.prototype.xC);v("nrg.ui.Thumbnail.prototype.getTextElement",zi.prototype.AI);v("nrg.ui.Thumbnail.prototype.getText",zi.prototype.Ou);
v("nrg.ui.Thumbnail.prototype.isActive",zi.prototype.oh);v("nrg.ui.Thumbnail.prototype.setImage",zi.prototype.Aw);v("nrg.ui.Thumbnail.prototype.setText",zi.prototype.pp);v("nrg.ui.Thumbnail.prototype.setActive",zi.prototype.setActive);v("nrg.ui.Thumbnail.prototype.updateStyle",zi.prototype.o);v("nrg.ui.Thumbnail.prototype.pulse",zi.prototype.qw);v("nrg.ui.Thumbnail.prototype.disposeInternal",zi.prototype.f);function vu(){V.call(this)}w(vu,V);v("nrg.ui.ScrollableContainer",vu);vu.ID_PREFIX="nrg.ui.ScrollableContainer";vu.CSS_SUFFIX={dF:"scrollarea",ka:"slider",Sg:"slider-thumb",Ph:"slider-track",gF:"slider-thumb-hovered",QO:"slider-track-hovered"};f=vu.prototype;f.P=null;
f.k=function(a){vu.d.k.call(this,a);null==this.Hg&&(this.Hg=Q("div",{id:this.constructor.ID_PREFIX+"_ScrollArea_"+B(),"class":vu.CSS.dF}),this.a().appendChild(this.Hg));this.jb=new zr("vertical");this.jb.k(this.a());G(this.jb,"u",this.Hj.bind(this));G(this.jb,"s",this.YB.bind(this));G(this.jb,"t",this.XB.bind(this));wu(this);O(this.jb.a(),vu.CSS.ka);O(this.jb.Tf,vu.CSS.Sg);O(this.jb.Fh,vu.CSS.Ph);this.o();this.$c();this.P=new Yf};f.wf=function(a){this.oa||this.k();R(this.Hg,a);this.$c()};f.a=function(){return this.q};
f.wI=function(){return this.jb};f.sI=function(){return this.Hg};f.o=function(a){a&&bl(this.q,a)};
f.$c=function(){var a=U(this.q).height,b=U(this.Hg).height,c=[this.jb.ja(),this.jb.T()],d=[0,b-a],e=this.jb.Tf,h=this.jb.a();a<b?("hidden"==h.style.visibility&&(h.style.opacity=0,h.style.visibility="visible",hl(h,200)),a=Math.round(a/b*a),e.style.height=a.toString()+"px",this.jb.Rb(!0),e=this.jb.T()-this.jb.w(),c=Vk(e,c,d).remappedVal,this.Hg.style.top=(-c).toString()+"px"):"hidden"!=h.style.visibility&&kl(h,200,function(){this.jb&&(h.style.visibility="hidden",this.jb.Rb(!1),this.jb.C(100))}.bind(this))};
f.YB=function(){this.dispatchEvent({type:"N"})};f.XB=function(){this.dispatchEvent({type:"O"})};f.Hj=function(){this.$c();this.dispatchEvent({type:"M"})};function wu(a){a.P=new Yf;a.P.setInterval(100);var b=function(){200<(new Date).getTime()-this.lv&&(this.P.stop(),delete this.lv,this.XB())}.bind(a);G(a.jb,"v",function(){void 0==this.lv&&this.YB();this.lv=(new Date).getTime();this.P.stop();this.P.addEventListener(Zf,b);this.P.start()}.bind(a));a.jb.tq(a.a())}
f.f=function(){vu.d.f.call(this);null!=this.jb&&(J(this.jb),this.jb.g(),delete this.jb);null!=this.Hg&&(S(this.Hg),delete this.Hg);this.P.g();delete this.P};v("nrg.ui.ScrollableContainer.ID_PREFIX",vu.ID_PREFIX);v("nrg.ui.ScrollableContainer.CSS_SUFFIX",vu.CSS_SUFFIX);v("nrg.ui.ScrollableContainer.MAX_LABEL_LENGTH",30);v("nrg.ui.ScrollableContainer.prototype.render",vu.prototype.k);v("nrg.ui.ScrollableContainer.prototype.addContents",vu.prototype.wf);
v("nrg.ui.ScrollableContainer.prototype.getElement",vu.prototype.a);v("nrg.ui.ScrollableContainer.prototype.getSlider",vu.prototype.wI);v("nrg.ui.ScrollableContainer.prototype.getScrollArea",vu.prototype.sI);v("nrg.ui.ScrollableContainer.prototype.updateStyle",vu.prototype.o);v("nrg.ui.ScrollableContainer.prototype.mapSliderToContents",vu.prototype.$c);v("nrg.ui.ScrollableContainer.prototype.disposeInternal",vu.prototype.f);function xu(){V.call(this)}w(xu,vu);v("nrg.ui.ScrollableZippyTree",xu);xu.ID_PREFIX="nrg.ui.ScrollableZippyTree";xu.CSS_SUFFIX={BF:"zippytree"};f=xu.prototype;f.k=function(a){xu.d.k.call(this,a);this.qa=new Ss;O(this.qa.a(),xu.CSS.BF);this.Hg.appendChild(this.qa.a());this.qp();this.jb.YC(!0,.3)};f.wf=function(a,b){this.qa.wf(a,b);g(a);this.jb.tq(this.qa.a())};f.mm=function(){this.qa.mm()};f.ms=function(a,b,c,d){this.qa.ms(a,b,function(){null!=c&&c();this.$c()}.bind(this),function(){null!=d&&d()}.bind(this))};
f.Ln=function(){this.qa.Ln()};f.mc=function(a,b){this.qa.mc(a,b)};f.WI=function(){return this.qa};f.YF=function(a){this.qa.On(a);this.$c()};f.qp=function(){G(this.qa,"B",this.$c.bind(this));G(this.qa,"a",this.$c.bind(this));G(this.qa,"b",this.$c.bind(this));G(this.qa,gm.QE,this.$c.bind(this))};f.o=function(a){a&&bl(this.a(),a)};f.f=function(){xu.d.f.call(this);null!=this.qa&&(J(this.qa),this.qa.g(),delete this.qa)};v("nrg.ui.ScrollableZippyTree.EventType",{});
v("nrg.ui.ScrollableZippyTree.ID_PREFIX",xu.ID_PREFIX);v("nrg.ui.ScrollableZippyTree.CSS_SUFFIX",xu.CSS_SUFFIX);v("nrg.ui.ScrollableZippyTree.prototype.render",xu.prototype.k);v("nrg.ui.ScrollableZippyTree.prototype.addContents",xu.prototype.wf);v("nrg.ui.ScrollableZippyTree.prototype.expandAll",xu.prototype.mm);v("nrg.ui.ScrollableZippyTree.prototype.collapseAll",xu.prototype.Ln);v("nrg.ui.ScrollableZippyTree.prototype.setExpanded",xu.prototype.mc);
v("nrg.ui.ScrollableZippyTree.prototype.getZippyTree",xu.prototype.WI);v("nrg.ui.ScrollableZippyTree.prototype.addFolders",xu.prototype.YF);v("nrg.ui.ScrollableZippyTree.prototype.setZippyTreeEvents",xu.prototype.qp);v("nrg.ui.ScrollableZippyTree.prototype.scaleElementOnChange",xu.prototype.ms);v("nrg.ui.ScrollableZippyTree.prototype.updateStyle",xu.prototype.o);v("nrg.ui.ScrollableZippyTree.prototype.disposeInternal",xu.prototype.f);function yu(a,b,c){ln.call(this);this.lD=!0===a;this.kD=!0===b;this.fD=!0===c}w(yu,ln);v("xiv.ui.HelpDialog",yu);yu.ID_PREFIX="xiv.ui.HelpDialog";yu.CSS={iE:"nrg-ui-helpdialog-dialog",ck:"nrg-ui-helpdialog-text",cF:"xiv-ui-helpdialog-scrollablezippytree",TITLE:"xiv-ui-helpdialog-title",Wj:"xiv-ui-helpdialog-closebutton"};yu.LAYOUT_IMAGE_ID=yu.ID_PREFIX+".LayoutImage";
yu.prototype.k=function(a){yu.d.k.call(this,a);O(this.a(),"xiv-ui-helpdialog");this.an=new xu;O(this.an.a(),yu.CSS.cF);this.an.k(this.a());zu(this);this.Ly(yu.CSS.TITLE);this.wy(yu.CSS.Wj)};yu.prototype.Cw=function(a){null!=document.getElementById(yu.LAYOUT_IMAGE_ID)&&(document.getElementById(yu.LAYOUT_IMAGE_ID).src=a)};
function zu(a){var b=[["Close ViewBox",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Add ViewBox Column",'<img style="height:12px;width:6px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertcolumn.png"></img>'],["Add ViewBox Row",'<img style="height:6px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/insertrow.png"></img>'],["Drag/Swap ViewBox",'<img style="height:17px;width:7px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBoxManager/handle.png"></img>']],
c=[["Change Layouts"," ","<img height=15 width=15 id="+yu.LAYOUT_IMAGE_ID+"></img>"],["Help","keystroke: ?",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Help.png"></img>'],["Info. Metadata","keystroke: I",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Info.png"></img>'],["Settings","keystroke: S",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png"></img>'],
["Levels","keystroke: B or L",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Levels.png"></img>'],["2D Pan","keystroke: H or P",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png"></img>'],["2D Zoom","keystroke: Z",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png"></img>'],["2D Crosshairs","keystroke: C",'<img style="height:15px;width:15px" src="'+
serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png"></img>']];a.lD&&c.push(["Volumes","keystroke: V",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Volumes.png"></img>']);a.kD&&c.push(["Meshes","keystroke: M",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Meshes.png"></img>']);a.fD&&c.push(["Annotations","keystroke: A",'<img style="height:15px;width:15px" src="'+serverRoot+'/images/viewer/xiv/ui/ViewBox/Toggle-Annotations.png"></img>']);
var d=[["Close XImgView",'<img style="height:10px;width:10px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/close.png"></img>'],["Full-screen view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/fullscreen.png"></img>'],["Pop-up view",'<img style="height:12px;width:12px" src="'+serverRoot+'/images/viewer/xiv/ui/Modal/popup.png"></img>']];a.oc("Help");E([[["Resize","left-click + drag","panel borders"]],b,c,d],function(a,b){var c='<table style="margin-left:10%;width:90%;color:white;left:10%;" RULES=ROWS FRAME=HSIDES  BORDERCOLOR="black">';
E(a,function(a){c+="<tr>";E(a,function(a,b){switch(b){case 0:a='<b><font size="1">'+a+"</font></b>";break;case 1:a='<i><font size="1">'+a+"</font></i>";break;default:a='<font size="1">'+a+"</font>"}c+="<td height=25>"+a+"</td>"});c+="</tr>"});var c=c+"</table>",d;currText=b+1;switch(currText){case 1:d="Images";break;case 2:d="ViewBox Manipulation";break;case 3:d="ViewBox Toggles";break;case 4:d="Modal"}S(c);var n=Q("div");n.innerHTML=c;this.an.wf(n,[d])}.bind(a))}
yu.prototype.f=function(){yu.d.f.call(this);delete this.lD;delete this.kD;delete this.fD;null!=this.an&&this.an.g()};v("xiv.ui.HelpDialog.EventType",{});v("xiv.ui.HelpDialog.ID_PREFIX",yu.ID_PREFIX);v("xiv.ui.HelpDialog.LAYOUT_IMAGE_ID",yu.LAYOUT_IMAGE_ID);v("xiv.ui.HelpDialog.CSS_SUFFIX",yu.CSS_SUFFIX);v("xiv.ui.HelpDialog.prototype.render",yu.prototype.k);v("xiv.ui.HelpDialog.prototype.setLayoutButton",yu.prototype.Cw);v("xiv.ui.HelpDialog.prototype.disposeInternal",yu.prototype.f);function Au(a,b,c){ip.call(this,a,b||jp.ye(),c);this.td(16,!0)}w(Au,ip);Xn("goog-toggle-button",function(){return new Au(null)});function Bu(a){V.call(this);this.L={};this.M=a}w(Bu,V);v("xiv.ui.ViewBoxDialogs",Bu);Bu.ID_PREFIX="xiv.ui.ViewBoxDialogs";Bu.CSS_SUFFIX={Yf:"generic-toggle",uE:"infodialog",vE:"infodialog-text",gO:"modaldialog"};var Cu="Info_"+B(),Du="Help_"+B(),Eu={MN:Cu,FN:Du},Fu="ToggleClass_"+B();f=Bu.prototype;f.rH=function(){return this.L};f.qH=function(a){return this.L[a]};
f.Pn=function(a,b,c,d,e,h,k,l){e=null!=e?e:"";var n=this.M.jj("LEFT",c,a,e,function(b){var c=this.L[a];b="true"==b.getAttribute("checked");c.ea(b);c.ix();Gu(this,c);this.dispatchEvent({type:b?"P":"Q",Gz:this.L[a],Hz:a})}.bind(this),d);null!=this.L[a]&&this.L[a].g();c=new ln;this.L[a]=c;Tm(c,null!=k?k:!1);$m(c,null!=l?l:null);c.k(this.M.Mb);Sm(c,0);this.L[a].Xd();c.oc(e);O(c.a(),b);G(c,"f",function(){this.M.Po(n)}.bind(this));G(c,Wm,function(){}.bind(this));this.L[a].ea(!0);this.L[a].Xd();this.L[a].Xd(!1);
!1===h&&Wn(this.M.ie[a])};f.wG=function(){this.Pn(Eu.fO,"xiv-ui-viewboxdialogs-meshes-dialog",Bu.CSS.Yf,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Mesh.png","Volume Controls",!1,!1)};f.yG=function(){this.Pn(Eu.EP,"xiv-ui-viewboxdialogs-volumes-dialog",Bu.CSS.Yf,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Volume.png","Volume Controls",!1,!1)};f.uz=function(){Hu(this);Iu(this)};
function Ju(a,b,c){var d=new ln;$m(d,cn);d.k(null!=b?b:document.body);d.ll(a);O(d.a(),"nrg-ui-dialogs-yesnomodal");Tm(d,!0);var e=d.a(),h=d.ki();Uc(d,an,function(a){var b=e.cloneNode(!0);b.style.opacity=1;b.style.display="inline";R(e.parentNode,b);var n=h.cloneNode(!0);n.style.opacity=.7;n.style.display="inline";R(e.parentNode,n);b.style.zIndex=2E9;n.style.zIndex=2E9;yl([b,n],1,0,null,null,function(){S(b);delete b;S(n);delete n});"yes"===a.key.toLowerCase()&&null!=c&&c();d.ru=!0;d.Mo()});d.ea(!0);
d.Xd(!0);d.ru=!1;e.style.opacity=0;e.style.zIndex=2E9;h.style.opacity=0;h.style.zIndex=2E9;hl(e,150);il(h,150,.7)}f.LA=function(){var a=[];C(this.L,function(b){b.ya()&&a.push(b.a())});return a};f.showModalDialog=function(a){if(null==this.L[a])throw Error("Invalid dialog key: ",a);this.L[a].ea(!0);this.L[a].Xd()};
function Gu(a,b){C(null!=b?[b]:a.L,function(a){if(null!=a&&!la(a)){var b=a.Im,e=a.gA(),h;if(null!=b&&null!=e){for(var k=[e,b],l=0;l<k.length;l++)for(h in k[l])if(isNaN(k[l][h])&&!la(k[l][h]))return;U(a.a().parentNode);h=U(a.a());var k=vj(a.a()),l=e.left+(k.x-b.left)/b.width*e.width,b=e.top+(k.y-b.top)/b.height*e.height,n=k.x+h.width,p=k.y+h.height,m=e.left+e.width,q=e.top+e.height,l=k.x,b=k.y;n>m&&(l=e.left+e.width-h.width);l<e.left&&(l=e.left);p>q&&(b=e.top+e.height-h.height);b<e.top&&(b=e.top);
tj(a.a(),l,b)}}})}f.update=function(){C(this.L,function(a){a.ix();Gu(this,a)}.bind(this))};f.Gp=function(a,b){var c=!1===b?0:1;window.console.log(a,this.L[a]);null!=this.L[a].a()&&il(this.L[a].a(),200,c)};f.Uq=function(){return this.L[Du]};
function Hu(a){null!=a.L[Du]&&a.L[Du].g();var b=new yu(0<a.M.Ya().Eu().length,0<a.M.Ya().Du().length,0<a.M.Ya().Cu().length);Tm(b,!1);$m(b,null);b.k(a.M.Mb);b.ea(!1);b.Xd();var c=a.M.jj("LEFT",Bu.CSS.Yf,Du,"Help",function(a){a="true"==a.getAttribute("checked");b.ea(a);this.dispatchEvent({type:a?"P":"Q",Gz:b})}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Help.png");G(b,"f",function(){this.M.Po(c)}.bind(a));a.M.Po(c);a.L[Du]=new yu}
function Iu(a){null!=a.L[Cu]&&a.L[Cu].g();currDialog=new ln;O(currDialog.ar(),"xiv-ui-viewboxdialogs-infodialog-title");var b="",b=0<a.M.Ua.length?a.M.Ua[0].Mu():zl(a.M.Ua[0].vh);Tm(currDialog,!1);currDialog.rk(b);$m(currDialog,null);currDialog.k(a.M.Mb);currDialog.ea(!0);currDialog.Mr("left","top",0,-22);currDialog.oc("Info.");O(currDialog.a(),Bu.CSS.uE);O(currDialog.Eh[0],Bu.CSS.vE);a.M.jj("LEFT",Bu.CSS.Yf,Cu,"Info.",function(a){a="true"==a.getAttribute("checked");currDialog.ea(a);currDialog.Mr("left",
"top",0,-15);this.dispatchEvent({type:a?"P":"Q",Gz:currDialog});this.M.gD(a)}.bind(a),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Info.png");currDialog.is();a.L[Cu]=currDialog;a.M.$b(Cu);a=Wh("nrg-ui-dialog-text",currDialog.a());O(a[0],"xiv-ui-viewboxdialogs-infodialog-text");O(currDialog.La(),"xiv-ui-viewboxdialogs-infodialog-content")}f.f=function(){delete this.M;null!=this.L&&(C(this.L,function(a){J(a);a.f();a.g()}.bind(this)),D(this.L))};v("xiv.ui.ViewBoxDialogs.EventType",{uN:"P",tN:"Q"});
v("xiv.ui.ViewBoxDialogs.ID_PREFIX",Bu.ID_PREFIX);v("xiv.ui.ViewBoxDialogs.CSS_SUFFIX",Bu.CSS_SUFFIX);v("xiv.ui.ViewBoxDialogs.DIALOG_KEYS",Eu);v("xiv.ui.ViewBoxDialogs.TOGGLED_CLASS",Fu);v("xiv.ui.ViewBoxDialogs.createModalDialog",Bu.eQ);v("xiv.ui.ViewBoxDialogs.prototype.getDialogs",Bu.prototype.rH);v("xiv.ui.ViewBoxDialogs.prototype.getDialog",Bu.prototype.qH);v("xiv.ui.ViewBoxDialogs.prototype.createGenericToggleableDialog",Bu.prototype.Pn);
v("xiv.ui.ViewBoxDialogs.prototype.createMeshesDialog",Bu.prototype.wG);v("xiv.ui.ViewBoxDialogs.prototype.createVolumesDialog",Bu.prototype.yG);v("xiv.ui.ViewBoxDialogs.prototype.createPostRenderDialogs",Bu.prototype.uz);v("xiv.ui.ViewBoxDialogs.prototype.dispsePostRenderDialogs",Bu.prototype.gQ);v("xiv.ui.ViewBoxDialogs.prototype.setModalDialogOnYes",Bu.prototype.QQ);v("xiv.ui.ViewBoxDialogs.prototype.showModalDialog",Bu.prototype.showModalDialog);
v("xiv.ui.ViewBoxDialogs.prototype.getVisibleDialogElements",Bu.prototype.LA);v("xiv.ui.ViewBoxDialogs.prototype.update",Bu.prototype.update);v("xiv.ui.ViewBoxDialogs.prototype.toggleVisible",Bu.prototype.Gp);v("xiv.ui.ViewBoxDialogs.prototype.getHelpDialog",Bu.prototype.Uq);v("xiv.ui.ViewBoxDialogs.prototype.disposeInternal",Bu.prototype.f);function Y(a,b,c,d){ad.call(this);this.M=a;this.pa=b;this.Ta=c;this.L=d;this.Jd={p:null,c:null};this.Cq={x:null,y:null};this.Cg={l:!1,m:!1,r:!1};this.Yk={up:{},dn:{},ot:{},ov:{}};G(this.L,"P",this.QB.bind(this));a=document.body;this.yb=new jo;this.yb.am(a);G(this.yb,"key",this.wi.bind(this));this.sl=!1;document.addEventListener("mousemove",this.Vw.bind(this),!1)}w(Y,ad);v("xiv.ui.ViewBoxInteractorHandler",Y);
var Ku="Crosshairs_"+B(),Lu="Settings_"+B(),Mu="TwoDPan_"+B(),Nu="TwoDZoom_"+B(),Ou="Folder_"+B(),Pu={ud:Ku,KO:Lu,jP:Mu,kP:Nu,CN:Ou};
Y.CSS={Yf:"xiv-ui-viewboxinteractorhandler-generic-toggle",wx:"xiv-ui-viewboxinteractorhandler-generic-dialog",xx:"xiv-ui-viewboxinteractorhandler-generic-zippytree",Fx:"xiv-ui-viewboxinteractorhandler-levelsdialog",$N:"xiv-ui-viewboxinteractorhandler-levelsdialog-hovered",aO:"xiv-ui-viewboxinteractorhandler-levels-slider",bO:"xiv-ui-viewboxinteractorhandler-levels-slidercontroller",cO:"xiv-ui-viewboxinteractorhandler-levels-sliderlabel",ZN:"xiv-ui-viewboxinteractorhandler-levels-checkboxholder",
YN:"xiv-ui-viewboxinteractorhandler-levels-checkboxcontroller"};Y.CURSOR_CSS={CF:"xiv-ui-viewboxinteractorhandler-zoom-follower",yx:"xiv-ui-viewboxinteractorhandler-viewframe-grab",Bx:"xiv-ui-viewboxinteractorhandler-viewframe-grab-custom",zx:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing",Ax:"xiv-ui-viewboxinteractorhandler-viewframe-grabbing-custom",Xx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-in",Yx:"xiv-ui-viewboxinteractorhandler-viewframe-zoom-out"};
Y.ORIENTATION_KEY="Orientation_"+B();f=Y.prototype;f.yb=null;f.Ii=null;f.Ma=null;f.cb=null;f.ox=!1;f.$r=!1;f.Yb={};f.eA=function(a){return this.Yb[a]};f.tz=function(){this.Bz();Qu(this);Ru(this);this.xz();this.rz(!1);this.zz();this.Az();this.sz();this.rv()};function Su(a){var b=a.M.Mb;C(Y.CURSOR_CSS,function(a){Hh(b,a)})}function Tu(a,b,c,d){b=b?O:Hh;b(a.M.Mb,c);null!=d&&(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.match(/Chrome/i))&&b(a.M.Mb,d)}
function Uu(a){Tu(a,!0,Y.CURSOR_CSS.yx,Y.CURSOR_CSS.Bx);Tu(a,!1,Y.CURSOR_CSS.zx,Y.CURSOR_CSS.Ax)}function Vu(a){Tu(a,!1,Y.CURSOR_CSS.Yx);Tu(a,!0,Y.CURSOR_CSS.Xx)}f.Vw=function(a){this.Cq.x=a.clientX||a.pageX;this.Cq.y=a.clientY||a.pageY};
f.WK=function(a){this.fm=a.target;this.Jd.p=this.Jd.c;this.Jd.c=[this.Cq.x,this.Cq.y];if(null!=this.Jd.p){(new ms(this.Jd.c[0],this.Jd.c[1])).add(new ms(this.Jd.p[0],this.Jd.p[1]));a=this.Jd.c[0]-this.Jd.p[0];var b=this.Jd.c[1]-this.Jd.p[1];this.sl&&(this.Vf.style.visibility="hidden");this.ox?(this.sl&&this.sl&&(S(this.Vf),R(this.fm.gj,this.Vf),this.Vf.style.visibility="visible",this.Vf.style.left=this.Jd.c[0]+20+"px",this.Vf.style.top=this.Jd.c[1]+"px"),Vu(this),this.Cg.l&&Wu(this,a,b)):this.$r&&
(Uu(this),this.Cg.l&&(Tu(this,!1,Y.CURSOR_CSS.yx,Y.CURSOR_CSS.Bx),Tu(this,!0,Y.CURSOR_CSS.zx,Y.CURSOR_CSS.Ax),this.fm.ra.Zr([-1*a,-1*b]),this.Qm()))}};f.SK=function(){Su(this);this.fm=null;this.sl&&(this.Vf.style.visibility="hidden")};f.$v=function(a){0==a.button?this.Cg.l=!0:1==a.button?this.LM.Cg.m=!0:2==a.button&&(this.Cg.r=!0)};f.aw=function(a){0==a.button?this.Cg.l=!1:1==a.button?this.LM.Cg.m=!1:2==a.button&&(this.Cg.r=!1)};
f.wi=function(a){if(this.M.ur())if(-3<=a.keyCode-40&&0>=a.keyCode-40)a=a.keyCode,Xu(this,this.fm,40==a||37==a?-1:1);else switch(a.keyCode){case 27:a=this.M.Qu(Mu);window.console.log("escape","pan",a,a.getAttribute("checked"));"true"==a.getAttribute("checked").toString()&&this.M.$b(Mu);"true"==this.M.Qu(Nu).getAttribute("checked").toString()&&this.M.$b(Nu);break;case 90:this.M.$b(Nu);break;case 72:case 80:this.M.$b(Mu);break;case 66:case 76:this.M.$b(this.Yb.levels);break;case 86:this.M.$b(this.Yb.volumes);
break;case 77:this.M.$b(this.Yb.meshes);break;case 65:this.M.$b(this.Yb.annotations);break;case 67:this.M.$b(Ku);break;case 83:this.M.$b(this.Yb[Lu]);break;case 191:a.shiftKey&&this.M.$b(Du);break;case 73:this.M.$b(Cu)}};function Wu(a,b,c){Su(a);var d=function(){Vu(this);this.fm.Xm()}.bind(a),e=function(){Tu(this,!0,Y.CURSOR_CSS.Yx);Tu(this,!1,Y.CURSOR_CSS.Xx);this.fm.Ym()}.bind(a);Math.abs(b)>Math.abs(c)?1<b?d():e():0>c?d():e();Yu(a);a.Qm()}f.Lx=0;f.Mx=0;
f.sD=function(a){this.Lx=a.clientX;this.Mx=a.clientY;window.console.log("store mouse coords",this.Lx,this.Mx)};f.rv=function(){Zu(this,function(a,b){this.Yk.ov[b]=G(a.Ya(),"mouseover",this.WK.bind(this));var c=a.Ya().Gc;this.Yk.ot[b]=G(c,"mouseleave",this.SK.bind(this));this.Yk.dn[b]=G(c,"mousedown",this.$v.bind(this));this.Yk.up[b]=G(c,"mouseup",this.aw.bind(this))}.bind(this))};function Xu(a,b,c){Zu(a,function(a,b,h){h.ka.C(h.ka.w()+c)}.bind(a),b.ac())}
function Zu(a,b,c){if(null!=a.pa){var d=a.Ta.Xq(),e=function(a,c){null!=d&&null!=d[c]&&b(a,c,d[c],a.sm())};if(r(c)){var h=a.pa.Yq(c);if(null==h)throw Error("Invalid plane: ",h);e(a.pa.Yq(c),c)}else C(a.pa.Dc,function(a,b){e(a,b)}.bind(a))}}f.Az=function(){this.M.jj("LEFT",Y.CSS.Yf,Nu,"2D Zoom",function(a){Su(this);if(this.ox=a="true"==a.getAttribute("checked").toString())this.M.hx(Mu),Vu(this)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DZoom.png");this.M.$b(Nu)};
f.zz=function(){this.M.jj("LEFT",Y.CSS.Yf,Mu,"2D Pan",function(a){Su(this);if(this.$r=a="true"==a.getAttribute("checked").toString())Uu(this),this.M.hx(Nu)}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-2DPan.png");this.M.$b(Mu)};
f.sz=function(){!this.M.$A()&&this.M.aB()&&(this.M.jj("LEFT",Y.CSS.Yf,Ou,"Select a different catalog or volume",function(a){Su(this);this.$r=a="true"==a.getAttribute("checked").toString();$u(this.M.Fc,200);a&&(this.M.Lz(),av(this.M,this.M.Fc,200),Uu(this))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Folder.png"),this.M.$b(Ou))};
f.rz=function(a){this.M.jj("LEFT",Y.CSS.Yf,Ku,"Toggle Crosshairs",function(a){this.BD("true"==a.getAttribute("checked"))}.bind(this),serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Crosshairs.png");!1===a&&this.M.$b(Ku)};
f.xz=function(){this.Yb[Lu]=Lu+"_"+B();this.L.Pn(this.Yb[Lu],Y.CSS.wx,Y.CSS.Yf,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-Settings.png","Settings",!1,!1);this.cb[Lu]=new xu;this.cb[Lu].k();var a=this.cb[Lu].a();O(a,Y.CSS.xx);this.L.L[this.Yb[Lu]].a().appendChild(a);this.cb[Lu].mm();a=new zt;a.k();a.Pf("Enable 3D Rendering");a.ma.Kd(!0);this.cb[Lu].wf(a.a(),"3D Rendering");G(a,"D",function(a){this.pa.PC("V",a.checked)}.bind(this));return a};
f.Qm=function(){Zu(this,function(a,b,c,d){bv(this,b,d)}.bind(this))};
function cv(a){null!=a.pa&&(E(a.Ii.volumes.all,function(a){"Show Label Map"==a.zb.innerHTML&&G(a,"D",function(c){c="true"==c.checked.toString();var d=(a.ae().labelmap.visible=c)?1:-1;Zu(this,function(a,b,c,l){a=c.ka;b=a.w();a.C(b+d);dv(a,l)}.bind(this));$f(function(){Zu(this,function(a,b,c,l){a=c.ka;b=a.w();a.C(b-d);dv(a,l)}.bind(this),1)}.bind(this),1)}.bind(this))}.bind(a)),Zu(a,function(a,c,d,e){var h=d.ka,k=d.Od,l=d.uf;d=d.ud;h[Y.ORIENTATION_KEY]=c;k[Y.ORIENTATION_KEY]=c;l[Y.ORIENTATION_KEY]=
c;d[Y.ORIENTATION_KEY]=c;ev(this);fv(this);dv(h,e);bv(this,h[Y.ORIENTATION_KEY],e);gv(this,h);hv(this,this.Yb.volumes);null!=a.Ya()&&(G(a.Ya(),"I",function(){Yu(this)}.bind(this)),G(h,"u",function(a){dv(a.target,e);bv(this,a.target[Y.ORIENTATION_KEY],e);gv(this,a.target)}.bind(this)),G(k,"h",function(a){iv(this,a.target,e);this.Qm()}.bind(this)),G(l,"h",function(){a.Ya().bD(l.w()/100);this.Qm()}.bind(this)))}.bind(a)),a.pa.mC())}
function hv(a,b){var c=b.split("_")[0];null!=a.cb[c]&&(a.cb[c].$c(),a.Ii.$f.refresh(),C(a.Ii[c],function(a){null!=a&&E(a,function(a){switch(c.toLowerCase()){case "volumes":var d=b.split("_")[0];a instanceof Ft?(a.ma.checked=a.ae()[Fq]||!1,null==this.Os&&(this.Os=[]),-1==this.Os.indexOf(a)&&this.Os.push(a)):"Show Label Map"==a.zb.innerHTML&&(a.ae()[au.HAS_LABEL_MAP_KEY]?a.ae().labelmap.visible&&!a.ma.ph()&&a.Kd(!0):(S(a.a()),a.a().style.visibility="hidden",a.a().style.height="0px",a.Kd(!1)),this.cb[d].$c());
a.refresh();break;case "meshes":a instanceof Bt&&a.o();break;case "annotations":a instanceof Bt&&(window.console.log("ANNOT",a),a.o())}}.bind(this))}.bind(a)))}f.QB=function(a,b){null==a.Hz&&null==b||hv(this,null!=b?b:a.Hz)};f.Xy=function(){var a=this.Ma.Ff.rA(Jt.LEVEL_CUTOFF);this.Ma.max.ep(a);this.Ma.min.ep(0);this.Ma.min.C(0);this.Ma.max.C(a);Ot(this.Ii.$f);this.Ma.Ff.refresh();this.L.L[this.Yb.levels]};
function dv(a,b){if(null!=b){var c=a[Y.ORIENTATION_KEY],d="Y"==c||"Z"==c?a.T()-a.w()-1:a.w()-1;"false"==b.reslicing.toString()&&("transverse"==b[K.ORIENTATION_KEY]&&"Z"==c?d+=2:"coronal"==b[K.ORIENTATION_KEY]&&"Y"==c?d+=2:"sagittal"==b[K.ORIENTATION_KEY]&&"X"==c&&(d+=1));b["index"+a[Y.ORIENTATION_KEY]]=d}}function jv(a,b,c,d,e){var h=a.pa.Yq(b).Ya();a=a.Ta.cA().Ju(b);b=null;null!=a&&(b=a[cr]);null!=b&&("vertical"==c?b.$C(h.HA(d,e)):"horizontal"==c&&b.aD(h.mA(d,e)))}
function bv(a,b,c){if(null!=c)switch(b){case "X":b=c.indexX;jv(a,"Y","vertical",b,!0);jv(a,"Z","vertical",b,!0);break;case "Y":b=c.indexY;jv(a,"X","vertical",b,!1);jv(a,"Z","horizontal",b,!1);break;case "Z":b=c.indexZ,jv(a,"X","horizontal",b,!1),jv(a,"Y","horizontal",b,!1)}}function gv(a,b){Zu(a,function(a,b,e){a=e.Od;e=e.ka;a.Lb(e.T());a.Sb(1);a.C(e.w())}.bind(a),b[Y.ORIENTATION_KEY])}function Yu(a){Zu(a,function(a,c,d){d.uf&&a.Ya()&&(a=a.Ya().OA(),d.uf.w(),d.uf.C(Math.round(100*a)))}.bind(a))}
function iv(a,b,c){null!=c&&Zu(a,function(a,c,h){h.ka.C(b.w())}.bind(a),b[Y.ORIENTATION_KEY])}function Qu(a){Zu(a,function(a,c,d){null!=d.ka&&d.ka.C(d.ka.T()/2)}.bind(a))}
function Ru(a){Zu(a,function(a,c,d,e){if(null!=e[au.SLICE_TO_RAS_KEY]&&null!=d.ka){slider=d.ka;orientation=slider[Y.ORIENTATION_KEY];a=e.bbox;e=e[au.SLICE_TO_RAS_KEY];var h;"X"==orientation?(h=a[1]-a[0],h=(e.bM[0]-a[0])/h):"Y"==orientation?(h=a[3]-a[2],h=(e.vG[1]-a[2])/h):"Z"==orientation&&(h=a[5]-a[4],h=(e.lG[2]-a[4])/h);slider.C(Math.round(slider.T()*h)+1)}}.bind(a))}
function ev(a){var b,c;Zu(a,function(a,e,h,k){null!=h.ka&&(c=h.ka,b=c[Y.ORIENTATION_KEY],null!=k&&(c.Lb(a.Ya().yA()),c.Sb(1),null!=b&&c.C(k["index"+b]+1)))})}function fv(a){var b;Zu(a,function(a,d,e,h){null!=e.ka&&(b=e.ka,playbutton=e.Oh,null!=h&&playbutton.VC(b))})}f.UB=function(){Zu(this,function(a,b,c,d){iv(this,c.Od,d);Yu(this)}.bind(this));this.Qm()};
f.bx=function(a){var b=!1===a?0:1;Zu(this,function(a,d,e){il(e.ka.a(),200,b);il(e.Od.a(),200,b);il(e.ud.Qg,200,b);il(e.ud.wg,200,b);il(e.uf.a(),200,b)}.bind(this))};f.lJ=function(){this.bx(!1);this.L.Gp(Cu,!1)};f.tM=function(){this.bx(!0);this.L.Gp(Cu,!0)};f.update=function(){this.Ta.Lp()};f.BD=function(a){var b=!0==a?"visible":"hidden";Zu(this,function(a,d,e){null!=e.ud&&(e.ud.Qg.style.visibility=b,e.ud.wg.style.visibility=b)}.bind(this))};
f.HD=function(){null!=this.Ta&&null!=this.pa&&Zu(this,function(a,b,c,d){if(null!=c){var e=c.ka;c=c.Od;e[Y.ORIENTATION_KEY]=b;c[Y.ORIENTATION_KEY]=b;null!=a.Ya()&&(iv(this,c,d),e.o())}}.bind(this))};
f.vD=function(a){a.JC(serverRoot+"/images/viewer/xiv/ui/LayoutMenu/menu.png");C({Sagittal:{Nh:Pr,tb:serverRoot+"/images/viewer/xiv/ui/Layouts/sagittal.png"},Coronal:{Nh:Xr,tb:serverRoot+"/images/viewer/xiv/ui/Layouts/coronal.png"},Transverse:{Nh:Tr,tb:serverRoot+"/images/viewer/xiv/ui/Layouts/transverse.png"},"3D":{Nh:Or,tb:serverRoot+"/images/viewer/xiv/ui/Layouts/3d.png"},Conventional:{Nh:Qr,tb:serverRoot+"/images/viewer/xiv/ui/Layouts/conventional.png"},"Four-Up":{Nh:Ur,tb:serverRoot+"/images/viewer/xiv/ui/Layouts/four-up.png"},
"2D Row":{Nh:Vr,tb:serverRoot+"/images/viewer/xiv/ui/Layouts/2drow.png"},"2D Widescreen":{Nh:Mr,tb:serverRoot+"/images/viewer/xiv/ui/Layouts/2dwidescreen.png"}},function(b,c){a.Dy(c,b.tb);this.Ta.Ay(c,b.Nh);"Four-Up"==c&&this.Ta.IC(c)}.bind(this));G(a,"item_selected",this.MK.bind(this))};f.MK=function(a){this.Ta.Ai(a.title);null!=this.L&&null!=this.L.Uq()&&this.L.Uq().Cw(a.target.Dj.src)};function kv(a,b){G(a.cb[b].qa,"c",function(a){this.QB(a,this.Yb[b])}.bind(a))}
function lv(a,b){G(b,"D",function(a){E(this.Os,function(b){var e=b.ae();b!==a.target?(b.ma.checked=!1,e.visible=!1):(e.visible=!0,this.pa.nC(e))}.bind(this))}.bind(a))}function mv(a,b){C(a.Ii[b],function(a,d){g(a)&&E(a,function(a){var c=a.Wn||[];"all"!==d&&0<c.length&&c.push(d);this.cb[b].wf(a.a(),c);a instanceof Ft&&lv(this,a)}.bind(this))}.bind(a))}
function nv(a){a.cb=Yt();a.Yb=wb(a.cb);C(a.cb,function(a,c){var d=!1;switch(c){case "volumes":0==this.pa.Eu().length&&(d=!0);break;case "meshes":0==this.pa.Du().length&&(d=!0);break;case "annotations":0==this.pa.Cu().length&&(d=!0)}d?ub(this.cb,c):(this.cb[c]=new xu,this.cb[c].k(),this.Yb[c]=c+"_"+B(),mv(this,c),kv(this,c))}.bind(a))}f.Bz=function(){this.Ii=this.pa.pf;this.Ma=this.Ii.$f.n;nv(this);ov(this);cv(this)};
function ov(a){C(a.cb,function(a,c){var d=!1;C(this.Ii[c],function(a){null!=a&&g(a)&&0<a.length&&(d=!0)}.bind(this));if(d){this.L.Pn(this.Yb[c],Y.CSS.wx,Y.CSS.Yf,serverRoot+"/images/viewer/xiv/ui/ViewBox/Toggle-"+eb(c)+".png",eb(c),!1,!1);var e=this.cb[c].a();O(e,Y.CSS.xx);this.L.L[this.Yb[c]].a().appendChild(e);1<this.cb[c].qa.Ru().length?this.cb[c].Ln():(this.cb[c].mm(),this.cb[c].$c());"levels"==c&&pv(this)}}.bind(a))}
function pv(a){var b=a.L.L[a.Yb.levels],c=a.cb.levels.qa,d=b.a();O(d,Y.CSS.Fx);O(b.ar(),Y.CSS.Fx+"-title");var e=a.cb.levels.jb.a();e.style.visibility="hidden";S(e);E(c.Ru(),function(a){a.pb.style.height=0;a.pb.style.opacity=0;a.pb.style.visibility="hidden"});var c=a.cb.levels.qa.xA(1)[0],e=Q("div",{id:"HistDetails_"+B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails"}),h=Q("div",{id:"HistDetailsFade_"+B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails-fadebottom"});d.appendChild(h);d=
Q("div",{id:"HistDetauls_"+B(),"class":"xiv-ui-viewboxinteractorhandler-histdetails-expandbutton"},"Histogram...");e.appendChild(d);e.appendChild(a.Ma.bc.a());e.appendChild(a.Ma.te.a());ii(c.zf,e,1);G(e,"mouseenter",function(){h.style.opacity=0;h.style.visibility="visible";hl(h,220)});G(e,"mouseleave",function(){kl(h,220,function(){h.style.visibility="hidden"})});a.Ma.bc.a().style.width="85%";a.Ma.bc.a().style.left="1%";a.Ma.bc.a().style.top="20px";a.Ma.te.a().style.width="90%";a.Ma.te.a().style.left=
"10px";a.Ma.te.a().style.top="25px";a.Ma.te.Kd(!1);a.M.$b(a.Yb.levels);b.Mr("right","top",10,40);a.M.$b(a.Yb.levels)}
f.g=function(){Y.d.g.call(this);document.removeEventListener("mousemove",this.Vw.bind(this));document.removeEventListener("mousemove",this.Vw);null!=this.yb&&(this.yb.g(),delete this.yb);null!=this.Yb&&D(this.Yb);delete this.Yb;null!=this.cb&&(C(this.cb,function(a){a.g()}),D(this.cb));delete this.cb;D(this.Jd);delete this.Jd;C(this.Yk,function(a){C(a,function(a){Wc(a);delete a});D(a)});D(this.Yk);delete this.Yk;this.sl&&(S(this.Vf),delete this.Vf);delete this.sl;delete this.Ii;delete this.ox;delete this.$r;
delete this.M;delete this.pa;delete this.Ta;delete this.L;delete this.xQ};v("xiv.ui.ViewBoxInteractorHandler.EventType",{xO:"R",XN:"S",nP:"T",vN:"U"});v("xiv.ui.ViewBoxInteractorHandler.TOGGLEABLE",Pu);v("xiv.ui.ViewBoxInteractorHandler.ORIENTATION_KEY",Y.ORIENTATION_KEY);v("xiv.ui.ViewBoxInteractorHandler.DIALOG_SPLIT","_");v("xiv.ui.ViewBoxInteractorHandler.prototype.createInteractors",Y.prototype.tz);v("xiv.ui.ViewBoxInteractorHandler.prototype.getDialogKey",Y.prototype.eA);
v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDZoomToggle",Y.prototype.Az);v("xiv.ui.ViewBoxInteractorHandler.prototype.createTwoDPanToggle",Y.prototype.zz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createCrosshairToggle",Y.prototype.rz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createFolderToggle",Y.prototype.sz);v("xiv.ui.ViewBoxInteractorHandler.prototype.createSettingsDialog",Y.prototype.xz);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncAllCrosshairs",Y.prototype.Qm);
v("xiv.ui.ViewBoxInteractorHandler.prototype.applyAutoLevel",Y.prototype.Xy);v("xiv.ui.ViewBoxInteractorHandler.prototype.onLayoutResize",Y.prototype.UB);v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleInteractorsVisible",Y.prototype.bx);v("xiv.ui.ViewBoxInteractorHandler.prototype.hideInteractors",Y.prototype.lJ);v("xiv.ui.ViewBoxInteractorHandler.prototype.showInteractors",Y.prototype.tM);v("xiv.ui.ViewBoxInteractorHandler.prototype.update",Y.prototype.update);
v("xiv.ui.ViewBoxInteractorHandler.prototype.toggleCrosshairsVisible",Y.prototype.BD);v("xiv.ui.ViewBoxInteractorHandler.prototype.updateInteractorStyles",Y.prototype.HD);v("xiv.ui.ViewBoxInteractorHandler.prototype.syncLayoutMenuToLayoutHandler",Y.prototype.vD);v("xiv.ui.ViewBoxInteractorHandler.prototype.createViewableCtrls",Y.prototype.Bz);v("xiv.ui.ViewBoxInteractorHandler.prototype.dispose",Y.prototype.g);function qv(){xc.call(this)}w(qv,xc);v("xiv.utils.ErrorCatcher",qv);
function rv(a){function b(a){a.target.g()}var c;g(a)||(a=[a]);null!=c&&!g(c)&&(c=[c]);var d=new nn;$m(d,bn);E(a,function(a){d.rk(a)});null!=c&&E(c,function(a){d.Gt(a)});d.oc("XImgView Error");d.ea(!0);d.a().style.position="fixed";d.Xd();d.a().style.opacity=0;hl(d.a(),400);d.ki().style.opacity=0;il(d.ki(),400,.75);d.a().style.height="250px";a=U(d.a());d.a().style.top="calc(50% - "+a.height/2+"px)";d.a().style.left="calc(50% - "+a.width/2+"px)";d.is();d.Xd();Uc(d,an,b);Uc(d,"f",b)}
function sv(){var a,b='<a target="_blank" style="color: #5CB8E6"  href=';ac()?(a="Internet Explorer",b+='"http://msdn.microsoft.com/en-us/library/ie/bg182648(v=vs.85).aspx">'):Yb("Chrome")||Yb("CriOS")?(a="Chrome",b+='"https://productforums.google.com/forum/#!msg/chrome/CgYesRogD4c/sU1TQsRgnWgJ">'):Yb("Firefox")?(a="Firefox",b+='"https://support.mozilla.org/en-US/questions/984663">'):bc()?(a="Safari",b+='"https://discussions.apple.com/thread/3300585?start=0">'):$b()&&(a="Opera",b+='"http://techdows.com/2012/06/turn-on-hardware-acceleration-and-webgl-in-opera-12.html">');
rv('<br>It looks like <a target="_blank" style="color: #5CB8E6" href="https://developer.mozilla.org/en-US/docs/Web/WebGL/Getting_started_with_WebGL">Experimental-WebGL</a> is disabled.<br><br><br>'+(b+("How to enable WebGL in "+a+".</a>")))}qv.checkForWebGL=function(){var a=Q("canvas"),b;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){b=null}return null!=b?!0:!1};f=qv.prototype;f.Zt=[];f.ul=null;f.Or=null;f.Nd=null;f.ou=document.body;f.Uv=null;f.jH=function(){return this.Zt};
f.OC=function(a){this.Uv=a};f.zC=function(a){this.ou=a};function tv(a){Kb(a.Zt);a.ul=window.console.log;a.Or=function(){a.ul&&a.ul.apply(this,arguments);var b="";E(arguments,function(a,d){0<d&&(b+=" ");b+=a});a.Zt.push(b)};window.console.log=a.Or}f.Ps=function(a){!0===a?(tv(this),window.onerror=this.Tv.bind(this)):(window.onerror=void 0,null!=this.ul&&(window.console.log=this.ul,this.Or=this.ul=null))};
f.Tv=function(a,b,c){if(null==this.Nd){null!=this.Uv&&this.Uv();var d="",e="",d="<b>Render Error!</b><br><br>";r(a)&&(e+=a+"<br>");r(b)&&(e+="src: "+b+"<br>",u(c)&&(e+=" line: "+c+"<br>"));this.Nd=new nn;this.Nd.k(this.ou);$m(this.Nd,null);this.Nd.rk(d);this.Nd.Gt(e);Tm(this.Nd,!0);this.Nd.ea(!0);this.Nd.is();this.Nd.Xd();Uc(this.Nd,"f",function(a){a.target.g();this.Nd=null}.bind(this))}};f.clear=function(){null!=this.Nd&&(this.Nd.g(),delete this.Nd)};
f.g=function(){qv.d.g.call(this);this.clear();delete this.ul;delete this.Or;delete this.ou};v("xiv.utils.ErrorCatcher.EventType",{ERROR:"V"});
v("xiv.utils.ErrorCatcher.isCompatible",function(){var a=!0,b=cc(),c={Chrome:{uo:Yb("Chrome")||Yb("CriOS"),Ho:11},IE:{uo:ac(),Ho:11},Safari:{uo:bc(),Ho:5.1},Opera:{uo:$b(),Ho:12},Firefox:{uo:Yb("Firefox"),Ho:4}},d=!1;C(c,function(c){c.uo&&!d&&1==$a(c.Ho,b)&&(rv("<br>XImgView is supported on the following browsers:<br>Google Chrome, Version 12+<br>Firefox, Version 4+<br>Safari, Version 5.1+<br>Opera Next, Version 12+<br>Internet Explorer, Version 11+<br>"),a=!1,d=!0)});a&&!qv.checkForWebGL()&&(sv(),
a=!1);return a});v("xiv.utils.ErrorCatcher.executeTestError",function(){throw"TEST ERROR!";});v("xiv.utils.ErrorCatcher.checkForWebGL",qv.checkForWebGL);v("xiv.utils.ErrorCatcher.prototype.setOnErrorCallback",qv.prototype.OC);v("xiv.utils.ErrorCatcher.prototype.setDialogParent",qv.prototype.zC);v("xiv.utils.ErrorCatcher.prototype.getConsoleLog",qv.prototype.jH);v("xiv.utils.ErrorCatcher.prototype.waitForError",qv.prototype.Ps);v("xiv.utils.ErrorCatcher.prototype.clear",qv.prototype.clear);
v("xiv.utils.ErrorCatcher.prototype.onError",qv.prototype.Tv);v("xiv.utils.ErrorCatcher.prototype.dispose",qv.prototype.g);F&&qc(8);function Lh(){V.call(this);this.Uo=Q("div",{id:Lh.ID_PREFIX+"_ProgBarHolder_"+B(),"class":Lh.CSS.SE});R(this.a(),this.Uo);this.Km=Q("div",{id:Lh.ID_PREFIX+"_ProgBarThumb_"+B(),"class":Lh.CSS.at});R(this.Uo,this.Km);this.rh=Q("div",{id:Lh.ID_PREFIX+"_LabelHolder_"+B(),"class":Lh.CSS.AE});R(this.a(),this.rh);this.sj=Q("div",{id:Lh.ID_PREFIX+"_EndNode_"+B(),"class":Lh.CSS.jE});R(this.Km,this.sj)}w(Lh,V);v("xiv.ui.ProgressBarPanel",Lh);var uv={};Lh.ID_PREFIX="xiv.ui.ProgressBarPanel";
Lh.CSS_SUFFIX={at:"thumb",SE:"progbarholder",sO:"progressbar",AE:"labelholder",jE:"endnode",Us:"endnode-glow",EN:"glownode"};uv={eN:"W"};f=Lh.prototype;f.bd=0;f.je=null;f.zo="";f.Jw=!1;f.Pf=function(a){this.zo=a;this.rh.innerHTML=this.zo};f.Iw=function(a){this.Jw=null!=a&&!1===a?!1:!0;this.C(this.bd)};
f.C=function(a){0>a||100<a||(this.bd=a,this.Km.style.width="calc("+a.toString()+"% + 4px)",0==this.bd&&Kh(this.sj)?Hh(this.sj,Lh.CSS.Us):90<this.bd&&!Kh(this.sj)&&O(this.sj,Lh.CSS.Us),this.rh.innerHTML=this.zo,this.Jw&&(0<this.zo.length&&(this.rh.innerHTML+=" "),this.rh.innerHTML+=this.bd.toString()+"%"))};f.w=function(){return this.bd};
f.f=function(){Lh.d.f.call(this);null!=this.Km&&(S(this.Km),delete this.Km);null!=this.Uo&&(S(this.Uo),delete this.Uo);null!=this.rh&&(S(this.rh),delete this.rh);null!=this.sj&&(S(this.sj),delete this.sj);null!=this.je&&(D(this.je),delete this.je);this.zo=this.Jw=null};v("xiv.ui.ProgressBarPanel.EventType",uv);v("xiv.ui.ProgressBarPanel.ID_PREFIX",Lh.ID_PREFIX);v("xiv.ui.ProgressBarPanel.CSS_SUFFIX",Lh.CSS_SUFFIX);v("xiv.ui.ProgressBarPanel.prototype.setLabel",Lh.prototype.Pf);
v("xiv.ui.ProgressBarPanel.prototype.showValue",Lh.prototype.Iw);v("xiv.ui.ProgressBarPanel.prototype.setValue",Lh.prototype.C);v("xiv.ui.ProgressBarPanel.prototype.getValue",Lh.prototype.w);v("xiv.ui.ProgressBarPanel.prototype.disposeInternal",Lh.prototype.f);function vv(){V.call(this)}w(vv,xu);v("nrg.ui.ThumbnailGallery",vv);vv.ID_PREFIX="nrg.ui.ThumbnailGallery";vv.CSS_SUFFIX={iE:"dialog",bt:"thumbnail",ct:"thumbnail-image",cP:"thumbnail-text"};var wv=B();f=vv.prototype;f.Cs=!1;f.Nw=function(a){this.Cs=a;null!=this.qa&&this.Cs&&this.qa.ww(xv)};f.k=function(a){vv.d.k.call(this,a);yv(this);this.Cs&&this.qa.ww(xv)};
function xv(a,b){if(null!=a.childNodes&&0!=a.childNodes.length)for(var c=ji(a),d=b[wv].toLowerCase(),e,h,k=c.length,l=0;l<k;l++)if(h=c[l],null!=h[wv]&&(e=h[wv].toLowerCase(),e=La(d,e),0>e)){hi(b,h);return}a.appendChild(b)}f.Qn=function(a,b){var c=new zi;Jh(c.a(),Fh(c.a()),this.Sj);Jh(c.Ie,Fh(c.Ie),this.ol);Jh(c.Za,Fh(c.Za),this.nl);c.Aw(a);c.pp(b);return c};f.loop=function(a){C(this.Ec,function(b){a(b)})};
f.$l=function(a,b){if(!rb(this.Ec,a)){this.Ec=this.Ec?this.Ec:{};this.Ec[a.a().getAttribute("id")]=a;a.a()[wv]=a.Ou().toLowerCase();this.wf(a.a(),b);this.$c();var c=a.a();G(c,"mouseenter",function(){this.dispatchEvent({type:"X",Mi:a})}.bind(this));G(c,"mouseleave",function(){this.dispatchEvent({type:"Y",Mi:a})}.bind(this))}};f.ij=function(a,b,c){a=this.Qn(a,b);this.$l(a,c);zv(this,"image");zv(this,"text");zv(this,"thumbnail");this.$c();return a};
f.qp=function(){vv.d.qp.call(this);G(this.Hg,"mouseover",this.sD.bind(this))};f.sD=function(a){this.GB=a.clientX;this.HB=a.clientY};function zv(a,b){var c,d=[],e="";for(e in a.Ec){switch(b){case "thumbnail":d=a.Sj;c=a.Ec[e].a();break;case "image":d=a.nl;c=a.Ec[e].Za;break;case "text":d=a.ol,c=a.Ec[e].Ie}Jh(c,Fh(c),d)}}f.Gy=function(a){null!=this.Sj||yv(this);this.Sj.push(a);zv(this,"thumbnail")};f.Jy=function(a){this.nl.push(a);zv(this,"image")};f.Ky=function(a){this.ol.push(a);zv(this,"text")};
f.o=function(a){a&&bl(this.a(),a)};function yv(a){var b=new zi;a.Sj=Fh(b.a());a.Sj.push(vv.CSS.bt);a.nl=Fh(b.Za);a.nl.push(vv.CSS.ct);a.ol=Fh(b.Ie);a.ol.push(vv.CSS.Sx);S(b.a());delete b}
f.f=function(){vv.d.f.call(this);delete this.Cs;null!=this.GB&&delete this.GB;null!=this.HB&&delete this.HB;null!=this.Ec&&(this.Tn(this.Ec),delete this.Ec);null!=this.qa&&(J(this.qa),this.qa.g(),delete this.qa);null!=this.Sj&&(Kb(this.Sj),delete this.Sj);null!=this.nl&&(Kb(this.nl),delete this.nl);null!=this.ol&&(Kb(this.ol),delete this.ol);delete this.VQ};v("nrg.ui.ThumbnailGallery.ID_PREFIX",vv.ID_PREFIX);v("nrg.ui.ThumbnailGallery.CSS_SUFFIX",vv.CSS_SUFFIX);
v("nrg.ui.ThumbnailGallery.THUMB_SORT_TAG",wv);v("nrg.ui.ThumbnailGallery.thumbnailSorter",xv);v("nrg.ui.ThumbnailGallery.prototype.sortThumbnailsOnInsert",vv.prototype.Nw);v("nrg.ui.ThumbnailGallery.prototype.render",vv.prototype.k);v("nrg.ui.ThumbnailGallery.prototype.createThumbnail",vv.prototype.Qn);v("nrg.ui.ThumbnailGallery.prototype.loop",vv.prototype.loop);v("nrg.ui.ThumbnailGallery.prototype.addThumbnail",vv.prototype.$l);v("nrg.ui.ThumbnailGallery.prototype.createAndAddThumbnail",vv.prototype.ij);
v("nrg.ui.ThumbnailGallery.prototype.setZippyTreeEvents",vv.prototype.qp);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailClass",vv.prototype.Gy);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailImageClass",vv.prototype.Jy);v("nrg.ui.ThumbnailGallery.prototype.addThumbnailTextClass",vv.prototype.Ky);v("nrg.ui.ThumbnailGallery.prototype.updateStyle",vv.prototype.o);v("nrg.ui.ThumbnailGallery.prototype.disposeInternal",vv.prototype.f);function Av(){V.call(this)}w(Av,V);v("xiv.ui.ViewableGroupMenu",Av);Av.ID_PREFIX="xiv.ui.ViewableGroupMenu";Av.CSS_SUFFIX={yl:"header",bt:"thumbnail",Sx:"thumbnail-text",ct:"thumbnail-image",jF:"thumbnailgallery",Op:"background"};f=Av.prototype;f.aa=null;f.tc=null;f.tm=null;
f.k=function(a){Av.d.k.call(this,a);this.tc=Q("div",{id:this.constructor.ID_PREFIX+"_Background_"+B()});O(this.tc,this.constructor.CSS.Op);null!=this.a().parentNode||null!=a?R(a||this.a().parentNode,this.tc):R(this.a(),this.tc);this.tm=Q("div",{id:this.constructor.ID_PREFIX+"_HeaderText_"+B(),"class":Av.CSS.yl});this.tm.innerHTML="<b> Select Slicer Scene View </b>";R(this.a(),this.tm);null!=this.aa||this.reset()};f.Xn=function(){return this.tc};f.show=function(){hl(this.a(),nm.fN)};
f.ij=function(a,b){null!=this.aa||this.reset();var c=this.aa.ij(a,b);Bv(this,c);return c};f.vm=function(){kl(this.a(),500);S(this.a())};f.reset=function(){null!=this.aa&&(this.aa.g(),delete this.aa);this.aa=new vv;this.aa.Nw(!0);this.aa.k(this.a());O(this.aa.a(),Av.CSS.jF);this.aa.Gy(Av.CSS.bt);this.aa.Jy(Av.CSS.ct);this.aa.Ky(Av.CSS.Sx)};function Bv(a,b){G(b,"L",function(a){a.target.qw(300,function(){this.dispatchEvent({type:"Z",Zw:b})}.bind(this))}.bind(a))}
f.f=function(){Av.d.f.call(this);null!=this.tc&&(S(this.tc),delete this.tc);null!=this.tm&&(S(this.tm),delete this.tm);null!=this.aa&&(this.aa.g(),delete this.aa)};v("xiv.ui.ViewableGroupMenu.ID_PREFIX",Av.ID_PREFIX);v("xiv.ui.ViewableGroupMenu.EventType",{BP:"Z"});v("xiv.ui.ViewableGroupMenu.CSS_SUFFIX",Av.CSS_SUFFIX);v("xiv.ui.ViewableGroupMenu.prototype.render",Av.prototype.k);v("xiv.ui.ViewableGroupMenu.prototype.getBackground",Av.prototype.Xn);v("xiv.ui.ViewableGroupMenu.prototype.show",Av.prototype.show);
v("xiv.ui.ViewableGroupMenu.prototype.createAndAddThumbnail",Av.prototype.ij);v("xiv.ui.ViewableGroupMenu.prototype.hide",Av.prototype.vm);v("xiv.ui.ViewableGroupMenu.prototype.reset",Av.prototype.reset);v("xiv.ui.ViewableGroupMenu.prototype.disposeInternal",Av.prototype.f);var Cv;function Dv(a,b,c,d,e){this.hj=a;this.al=b;this.Sy=c;this.hG=d;this.So=e}Dv.prototype.getName=function(){return this.al};function Ev(a){return!a.al||"[object Object]"==a.hj}
function Fv(a){var b=[a.hj?Gv(a.hj)+".":"",a.al?Gv(Hv(a.al)):"anonymous",Gv(a.hG),a.Sy?" [as "+Gv(Hv(a.Sy))+"]":""];if(a.So)if(b.push(" at "),Boolean(ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit)){var c=a.So.match(/\d+$/)[0];b.push('<a href="" onclick="CLOSURE_INSPECTOR___.showLine(\'',Gv(a.So),"', '",c,"'); return false\">",Gv(a.So),"</a>")}else b.push(Gv(a.So));return b.join("")}
var Iv=/^    at(?: (?:(.*?)\.)?((?:new )?(?:[a-zA-Z_$][\w$]*|<anonymous>))(?: \[as ([a-zA-Z_$][\w$]*)\])?)? (?:\(unknown source\)|\(native\)|\((?:eval at )?((?:http|https|file):\/\/[^\s)]+|javascript:.*)\)|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,Jv=/^([a-zA-Z_$][\w$]*)?(\(.*\))?@(?::0|((?:http|https|file):\/\/[^\s)]+|javascript:.*))$/,Kv=/^(?:(?:([a-zA-Z_$][\w$]*)|<anonymous function(?:\: (?:([a-zA-Z_$][\w$]*(?:\.[a-zA-Z_$][\w$]*)*)\.)?([a-zA-Z_$][\w$]*))?>)(\(.*\)))?@((?:http|https|file):\/\/[^\s)]+|javascript:.*)?$/,
Lv=/^function ([a-zA-Z_$][\w$]*)/,Mv=/^   at ([a-zA-Z_$][\w$]*(?:\s+\w+)*)\s*\((eval code:[^)]*|((?:http|https|file):\/\/[^\s)]+|javascript:.*))\)?$/;
function Nv(){for(var a=[],b=arguments.callee.caller,c=0;b&&20>c;){var d=Function.prototype.toString.call(b).match(Lv),d=d?d[1]:"",e=["("];if(b.arguments)for(var h=0;h<b.arguments.length;h++){var k=b.arguments[h];0<h&&e.push(", ");r(k)?e.push('"',k,'"'):k&&k.$replay?e.push("goog.testing.Mock"):e.push(String(k))}else e.push("unknown");e.push(")");a.push(new Dv("",d,"",e.join(""),""));try{b=b.caller}catch(l){break}c++}return a}
function Ov(a){var b=a.match(Iv);if(b)return new Dv(b[1]||"",b[2]||"",b[3]||"","",b[4]||b[5]||"");if(5E5<a.length){var b=a.indexOf("("),c=a.lastIndexOf("@"),d=a.lastIndexOf(":"),e="";0<=b&&b<c&&(e=a.substring(0,b));var h="";0<=c&&c+1<d&&(h=a.substring(c+1));d="";0<=b&&0<c&&b<c&&(d=a.substring(b,c));return new Dv("",e,"",d,h)}return(b=a.match(Jv))?new Dv("",b[1]||"","",b[2]||"",b[3]||""):(b=a.match(Kv))?new Dv(b[2]||"",b[1]||b[3]||"","",b[4]||"",b[5]||""):(b=a.match(Mv))?new Dv("",b[1]||"","","",b[2]||
""):null}function Hv(a){return Cv?Cv(a):a}function Gv(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Pv(){var a=Error();if(a.stack)return a.stack;try{null.x()}catch(b){return b.stack}return""}v("setDeobfuscateFunctionName",function(a){Cv=a});function Qv(a,b){return a==b}function Rv(a,b){return a.toString()===b.toString()}var Sv={String:Qv,Number:Qv,Boolean:Qv,Date:function(a,b){return a.getTime()==b.getTime()},RegExp:Rv,Function:Rv};function Tv(a,b,c){return Math.abs(a-b)<=c}var Uv={Number:Tv};
function aw(a){var b=typeof a;try{switch(b){case "object":if(null==a){b="null";break}case "function":switch(a.constructor){case (new String("")).constructor:b="String";break;case (new Boolean(!0)).constructor:b="Boolean";break;case (new Number(0)).constructor:b="Number";break;case [].constructor:b="Array";break;case RegExp().constructor:b="RegExp";break;case (new Date).constructor:b="Date";break;case Function:b="Function";break;default:var c=a.constructor.toString().match(/function\s*([^( ]+)\(/);
c&&(b=c[1])}break}}catch(d){}finally{b=b.substr(0,1).toUpperCase()+b.substr(1)}return b}function bw(a){var b;try{b="<"+String(a)+">"}catch(c){b="<toString failed: "+c.message+">"}null!==a&&void 0!==a&&(b+=" ("+aw(a)+")");return b}function cw(a,b){return b.length==a+1?b[0]:null}function dw(a,b,c){return c.length==b+1?c[a]:c[a-1]}function ew(a,b){b.length==a||b.length==a+1&&r(b[0])||fw(null,"Incorrect arguments passed to assert function")}
function gw(a,b){var c="Expected "+bw(a)+" but was "+bw(b);if("string"==typeof a&&"string"==typeof b){for(var d=Math.min(a.length,b.length),e=0;e<d&&a.charAt(e)==b.charAt(e);)e++;for(var h=0;h<d&&a.charAt(a.length-h-1)==b.charAt(b.length-h-1);)h++;e+h>d&&(h=0);if(2<e||2<h)d=function(a){var b=Math.max(0,e-2),c=Math.min(a.length,a.length-(h-2));return(0<b?"...":"")+a.substring(b,c)+(c<a.length?"...":"")},c+="\nDifference was at position "+e+". Expected ["+d(a)+"] vs. actual ["+d(b)+"]"}return c}
function hw(a,b){ew(1,arguments);var c=cw(1,arguments),d=dw(1,1,arguments);ja(d)||fw(c,"Bad argument to assert(boolean)");d||fw(c,"Call to assert(boolean) with false")}function iw(a,b){ew(1,arguments);var c=cw(1,arguments),d=dw(1,1,arguments);ja(d)||fw(c,"Bad argument to assertTrue(boolean)");d||fw(c,"Call to assertTrue(boolean) with false")}function jw(a,b,c){ew(2,arguments);var d=dw(1,2,arguments),e=dw(2,2,arguments),h=gw(d,e);d===e||fw(cw(2,arguments),h)}
function kw(a,b){ew(1,arguments);var c="Expected not to be "+bw(null);null!==dw(1,1,arguments)||fw(cw(1,arguments),c)}function lw(a,b){ew(1,arguments);var c="Expected not to be "+bw(void 0);void 0!==dw(1,1,arguments)||fw(cw(1,arguments),c)}
function mw(a,b,c){function d(a,b,c){for(var q=0;q<h.length;++q){var t=h[q]===a,s=k[q]===b;if(t||s){t&&s||e.push("Asymmetric cycle detected at "+c);return}}h.push(a);k.push(b);if(a!==b)if(q=aw(a),t=aw(b),q==t){var s="Array"==q,z=l(q,a,b);if(null!=z)""!=z&&e.push(c+": "+z);else if(s&&a.length!=b.length)e.push(c+": Expected "+a.length+"-element array but got a "+b.length+"-element array");else if(z=c+(s?"[%s]":c?".%s":"%s"),a.__iterator__)la(a.km)?a.km(b)||e.push("equals() returned false for "+(c||
q)):a.Hb?d(a.Hb,b.Hb,z.replace("%s","map_")):e.push("unable to check "+(c||q)+" for equality: it has an iterator we do not know how to handle. please add an equals method");else{for(var y in a)s&&(y|0)==y||(y in b?d(a[y],b[y],z.replace("%s",y)):e.push("property "+y+" not present in actual "+(c||t)));for(y in b)s&&(y|0)==y||y in a||e.push("property "+y+" not present in expected "+(c||q));if(s)for(y=0;y<a.length;y++)d(a[y],b[y],z.replace("%s",String(y)))}}else e.push(c+" "+gw(a,b));h.pop();k.pop()}
var e=[],h=[],k=[],l=c||function(a,b,c){return(a=Sv[a])?a(b,c)?"":gw(b,c):null};d(a,b,"");return 0==e.length?null:gw(a,b)+"\n   "+e.join("\n   ")}function nw(a,b,c){ew(2,arguments);var d=cw(2,arguments)?cw(2,arguments):"",e=mw(dw(1,2,arguments),dw(2,2,arguments));!e||fw(d,e)}function ow(a,b,c,d){ew(3,arguments);var e=dw(1,3,arguments),h=dw(2,3,arguments),k=dw(3,3,arguments);Tv(e,h,k)||fw(cw(3,arguments),"Expected "+e+", but got "+h+" which was more than "+k+" away")}
function pw(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function qw(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function rw(a){var b=document.createElement("DIV");b.innerHTML=a;return b.innerHTML.replace(/^\s+|\s+$/g,"")}function fw(a,b){ba.CLOSURE_INSPECTOR___&&ba.CLOSURE_INSPECTOR___.supportsJSUnit&&ba.CLOSURE_INSPECTOR___.jsUnitFailure(a,b);throw new sw(a,b);}
function sw(a,b){this.message=(a?a:"")+(a&&b?"\n":"")+(b?b:"");var c=Pv();if(c){if(g(c))for(var d=[],e=0;e<c.length;e++){var h=c[e],k=h.getFunctionName()||"unknown",l=h.getFileName(),h=l?l+":"+h.getLineNumber()+":"+h.getColumnNumber():"unknown";d.push(new Dv("",k,"","",h))}else for(c=c.replace(/\s*$/,"").split("\n"),d=[],e=0;e<c.length;e++)d.push(Ov(c[e]));c=d}else c=Nv();for(d=c.length-1;c[d]&&Ev(c[d]);)d--;e=-1;for(k=0;k<c.length;k++)if(c[k]&&"_assert"==c[k].getName()){e=k;break}h=[];for(k=e+1;k<=
d;k++)h.push("> "),c[k]?h.push(Fv(c[k])):h.push("(unknown)"),h.push("\n");this.comment=a||null;Error.captureStackTrace?Error.captureStackTrace(this,sw):this.stack=Error().stack||""}w(sw,Error);sw.prototype.toString=function(){return this.message};v("fail",function(a){fw("Call to fail()",a)});v("assert",hw);
v("assertThrows",function(a,b){ew(1,arguments);var c=dw(1,1,arguments),d=cw(1,arguments);"function"==typeof c||fw(d,"Argument passed to assertThrows is not a function");try{c()}catch(e){return e&&r(e.stacktrace)&&r(e.message)&&(c=e.message.length-e.stacktrace.length,e.message.indexOf(e.stacktrace,c)==c&&(e.message=e.message.substr(0,c-14))),e}fw(d,"No exception thrown from function passed to assertThrows")});
v("assertNotThrows",function(a,b){ew(1,arguments);var c=cw(1,arguments),d=dw(1,1,arguments);"function"==typeof d||fw(c,"Argument passed to assertNotThrows is not a function");try{return d()}catch(e){c=(c?c+"\n":"")+"A non expected exception was thrown from function passed to assertNotThrows",fw(c,e.stack||e.stacktrace||e.toString())}});v("assertTrue",iw);
v("assertFalse",function(a,b){ew(1,arguments);var c=cw(1,arguments),d=dw(1,1,arguments);ja(d)||fw(c,"Bad argument to assertFalse(boolean)");!d||fw(c,"Call to assertFalse(boolean) with true")});v("assertEquals",jw);v("assertNotEquals",function(a,b,c){ew(2,arguments);var d=dw(2,2,arguments),e="Expected not to be "+bw(d);dw(1,2,arguments)!==d||fw(cw(2,arguments),e)});v("assertNull",function(a,b){ew(1,arguments);var c=dw(1,1,arguments),d=gw(null,c);null===c||fw(cw(1,arguments),d)});
v("assertNotNull",kw);v("assertUndefined",function(a,b){ew(1,arguments);var c=dw(1,1,arguments),d=gw(void 0,c);void 0===c||fw(cw(1,arguments),d)});v("assertNotUndefined",lw);v("assertNotNullNorUndefined",function(a,b){ew(1,arguments);kw.apply(null,arguments);lw.apply(null,arguments)});v("assertNonEmptyString",function(a,b){ew(1,arguments);var c=dw(1,1,arguments),d="Expected non-empty string but was "+bw(c);void 0!==c&&null!==c&&"string"==typeof c&&""!==c||fw(cw(1,arguments),d)});
v("assertNaN",function(a,b){ew(1,arguments);isNaN(dw(1,1,arguments))||fw(cw(1,arguments),"Expected NaN")});v("assertNotNaN",function(a,b){ew(1,arguments);!isNaN(dw(1,1,arguments))||fw(cw(1,arguments),"Expected not NaN")});v("assertObjectEquals",nw);
v("assertObjectRoughlyEquals",function(a,b,c,d){ew(3,arguments);var e=dw(3,3,arguments),h=cw(3,arguments)?cw(3,arguments):"",k=mw(dw(1,3,arguments),dw(2,3,arguments),function(a,b,c){return(a=Uv[a])?a(b,c,e)?"":gw(b,c)+" which was more than "+e+" away":null});!k||fw(h,k)});v("assertObjectNotEquals",function(a,b,c){ew(2,arguments);var d=cw(2,arguments)?cw(2,arguments):"";mw(dw(1,2,arguments),dw(2,2,arguments))||fw(d,"Objects should not be equal")});
v("assertArrayEquals",function(a,b,c){ew(2,arguments);var d=dw(1,2,arguments),e=dw(2,2,arguments),h=cw(2,arguments)?cw(2,arguments):"",k=aw(d);"Array"==k||fw(h,"Expected an array for assertArrayEquals but found a "+k);k=aw(e);"Array"==k||fw(h,"Expected an array for assertArrayEquals but found a "+k);nw(h,Array.prototype.concat.call(d),Array.prototype.concat.call(e))});
v("assertElementsEquals",function(a,b,c){ew(2,arguments);var d=dw(1,2,arguments),e=dw(2,2,arguments),h=cw(2,arguments)?cw(2,arguments):"";if(d){jw("length mismatch: "+h,d.length,e.length);for(var k=0;k<d.length;++k)jw("mismatch at index "+k+": "+h,d[k],e[k])}else hw(h,!e)});
v("assertElementsRoughlyEqual",function(a,b,c,d){ew(3,arguments);var e=dw(1,3,arguments),h=dw(2,3,arguments),k=dw(3,3,arguments),l=cw(3,arguments)?cw(3,arguments):"";if(e){jw("length mismatch: "+l,e.length,h.length);for(var n=0;n<e.length;++n)ow(l,e[n],h[n],k)}else hw(l,!h)});
v("assertSameElements",function(a,b,c){ew(2,arguments);var d=dw(1,2,arguments),e=dw(2,2,arguments),h=cw(2,arguments);iw("Bad arguments to assertSameElements(opt_message, expected: ArrayLike, actual: ArrayLike)",ia(d)&&ia(e));d=pw(d);e=pw(e);d.length==e.length||fw(h,"Expected "+d.length+" elements: ["+d+"], got "+e.length+" elements: ["+e+"]");for(var k=pw(d),l=0;l<e.length;l++){var n=qw(k,e[l]);-1!=n||fw(h,"Expected ["+d+"], got ["+e+"]");k.splice(n,1)}});
v("assertEvaluatesToTrue",function(a,b){ew(1,arguments);dw(1,1,arguments)||fw(cw(1,arguments),"Expected to evaluate to true")});v("assertEvaluatesToFalse",function(a,b){ew(1,arguments);dw(1,1,arguments)&&fw(cw(1,arguments),"Expected to evaluate to false")});v("assertHTMLEquals",function(a,b,c){ew(2,arguments);var d=dw(2,2,arguments),e=rw(dw(1,2,arguments)),d=rw(d),h=gw(e,d);e===d||fw(cw(2,arguments),h)});
v("assertHashEquals",function(a,b,c){ew(2,arguments);var d=dw(1,2,arguments),e=dw(2,2,arguments),h=cw(2,arguments),k;for(k in d)k in e||fw(h,"Expected hash had key "+k+" that was not found"),d[k]==e[k]||fw(h,"Value for key "+k+" mismatch - expected = "+d[k]+", actual = "+e[k]);for(k in e)k in d||fw(h,"Actual hash had key "+k+" that was not expected")});v("assertRoughlyEquals",ow);
v("assertContains",function(a,b,c){ew(2,arguments);var d=dw(1,2,arguments),e=dw(2,2,arguments);-1!=qw(e,d)||fw(cw(2,arguments),"Expected '"+e+"' to contain '"+d+"'")});v("assertNotContains",function(a,b,c){ew(2,arguments);var d=dw(1,2,arguments),e=dw(2,2,arguments);-1==qw(e,d)||fw(cw(2,arguments),"Expected '"+e+"' not to contain '"+d+"'")});
v("assertRegExp",function(a,b,c){ew(2,arguments);var d=dw(1,2,arguments),e=dw(2,2,arguments);"string"==typeof d&&(d=new RegExp(d));d.test(e)||fw(cw(2,arguments),"Expected '"+e+"' to match RegExp "+d.toString())});function Z(){V.call(this);this.Ua=[];this.Dl={};this.Jb={hP:null,bn:null,Zf:null,VD:null,gN:null,WD:null,$E:null,kF:null};this.Jb.bn=Q("div",{id:Z.ID_PREFIX+"_menu_top_left_"+B(),"class":Z.CSS.ME,viewbox:this.a().id});ii(this.a(),this.Jb.bn,0);tw(this);this.rr=Q("div",{id:Z.ID_PREFIX+"_Instruction_"+B(),"class":Z.CSS.yE});this.rr.innerHTML="Click or drag and drop any left thumbnail to view.";R(this.a(),this.rr);this.gc=new Lh;R(this.Mb,this.gc.a());this.gc.a().style.opacity=0;$u(this.gc,0);this.o();
this.rv()}w(Z,V);v("xiv.ui.ViewBox",Z);Z.ID_PREFIX="xiv.ui.ViewBox";Z.CSS_SUFFIX={GN:"hidden",VO:"tabdragger",WO:"tabdragger-handle",yF:"viewlayoutmenu",ME:"menu-top-left",LE:"menu-left",xF:"viewlayouthandler",XO:"ziptabs",YO:"ziptab-bounds",Ux:"viewframe",qN:"component-highlight",tF:"viewablegroupmenu",xN:"emptymenubutton",yE:"instructions"};var uw={Scans:"Four-Up",Slicer:"Conventional","Slicer Scenes":"Conventional"};f=Z.prototype;f.RJ="empty";f.ie=null;f.Ta=null;f.Ub=null;f.pa=null;f.gc=null;
f.Fc=null;f.L=null;f.Kh=null;f.ke=null;f.ZA=!1;f.Ss=!1;f.Tm=null;f.Jm=null;f.Um=null;f.Vk=!1;f.Es=!1;f.IJ=function(){return this.Vk};f.Ya=function(){return this.pa};f.ZH=function(){return this.Jb};f.UH=function(){return this.RJ};f.TI=function(){return this.Ua};f.OI=function(){return this.Mb};f.RH=function(){return this.Ta};f.SH=function(){return this.Ub};f.RI=function(){return this.Fc};
function vw(a,b){var c=new Yf,d=0;null!=b||(b=function(a){return a});c.setInterval(20);G(c,Zf,function(){d+=20;str="0px 0px 0px 2px rgba(255,255,255,"+b(d/200)+")";this.Mb.style.boxShadow=str;200<d&&(c.stop(),c.g(),delete c)}.bind(a));c.start()}f.Zu=function(){vw(this)};f.Wm=function(){vw(this,function(a){return 1-a})};f.FI=function(){return this.Rj};f.fv=function(){return null!=this.Rj||null!=this.Fc&&null!=this.Fc.a()&&"hidden"!=this.Fc.a().style.visibility&&!this.fB};f.Wt=function(){this.Rj=void 0};
f.JG=function(a){this.tu=this.tu?this.tu:[];this.tu.push(a)};f.Ai=function(a){this.Ub.np(a)};f.cL=function(){this.gc.C(0);this.gc.Iw(!0);av(this,this.gc,0)};function ww(a,b){a.gc.Pf("");a.gc.Iw(!0);a.gc.C(100*b)}f.bw=function(a){if(this.Ss)ww(this,.5*a.value+.5);else if(1<this.Um){var b=1/this.Um;.96<a.value&&this.Jm!=a.value&&.96>this.Jm&&this.Jm<a.value?(this.Tm++,ww(this,b*this.Tm)):(this.Jm=a.value,b=1/this.Um,ww(this,b*this.Tm+a.value*b+a.value*b))}else ww(this,a.value)};
function tw(a){a.Mb=Q("div",{id:Z.ID_PREFIX+"_ViewFrame_"+B(),"class":Z.CSS.Ux});R(a.a(),a.Mb);E(["top","bottom","left","right"],function(a){R(this.Mb,Q("div",{id:Z.ID_PREFIX+"_ViewFrameBorder_"+B(),"class":Z.CSS.Ux+"-border-"+a}))}.bind(a))}
function xw(a){var b=a.pa.Lk();!0==b[K.SINGLE_FRAME_SCAN]?(a.Ai("Transverse"),b=Zr(a.Ta),E(b,function(a){-1==a.id.indexOf("ZoomDisplay")&&(a.style.visibility="hidden")}),S(a.Ub.a())):null!=a.Ua[0].ac()?a.Ai(a.Ua[0].ac()):null!=b[K.ORIENTATION_KEY]&&a.Ai(eb(a.pa.Lk()[K.ORIENTATION_KEY]));$f(function(){this.$b(Cu);this.$b(this.ke.eA("levels"))}.bind(a),700)}
f.Ur=function(){this.Kh.Ps(!1);E(Wh("xtk-progress-bar"),function(a){a.visibility="hidden"});this.Vk=this.Ss=!1;this.L.uz();this.L.Uq().Cw(this.Ub.Dj.src);this.ke.tz();this.ke.Xy();var a=[this.Jb.Zf,this.Ub.a()];a.push(this.Ta.a());var b=[];b.push(this.gc.a());"demo"!=nm.MODE&&(a=Nb(a,this.L.LA()),xw(this),this.pa.Lk()[K.SINGLE_FRAME_SCAN]||(a=Nb(a,Zr(this.Ta))));var c=[],d=[],e=[],h=[];E(a,function(){c.push(0);d.push(1)});d[0]=.5;E(b,function(){e.push(1);h.push(0)});yl(Nb(a,b),Nb(c,e),Nb(d,h),400,
null,null,function(){this.Jb.Zf.style.removeProperty("opacity");this.gc.C(0);$u(this.gc,0);this.dispatchEvent("aa");this.Es=!1;this.o();this.Tr()}.bind(this))};f.Yv=function(a){C(this.pa.Dc,function(b,c){null!=a.ex[c]&&(b.kl(a.ex[c]),b.o())})};f.Tr=function(){this.pa&&this.pa.o();null!=this.ke&&this.ke.update();null!=this.pa&&this.ke.UB()};
function yw(a,b){a.Fc.reset();D(a.Dl);Jb(a.Ua,b)||a.Ua.push(b);1==a.Ua.length&&a.Ai(uw[b.yf]);var c=b.Ia,d=null;1<c.length?(E(c,function(a,b){d=this.Fc.ij(a.pl,a.xb()||b);this.Dl[na(d)]=a}.bind(a)),$u(a.gc,0),av(a,a.Fc,200),a.Vk=!1,"scans"==c[0].yf?Ba("."+Av.CSS.yl).pJ("<b> Select catalog or volume </b>"):"experimentResources"==c[0].yf&&Ba("."+Av.CSS.yl).pJ("<b> Select volume </b>")):a.load(c[0],!1)}f.HH=function(){return 700};
function zw(a,b){Ju("Scans with frame counts greater than 700 may crash the Viewer.&nbspAre you sure you want to continue?",a.Mb,b)}function Aw(a,b){Ju("ViewBox in use.&nbspProceed anyway?",a.Mb,b)}
function Bw(a,b,c){var d=function(){this.load(b,c)}.bind(a),e=b.Ia[0];if(null!=e.KA){var h=700<e.$[0].va().length;if("scans"==e.yf.toLowerCase()&&h&&!a.Es)return zw(a,function(){this.Es=!0;d()}.bind(a)),!1}return!a.fv()||0<a.Ua.length&&b==a.Ua[0]?!0:(Aw(a,function(){this.Wt();this.fB=!0;d();this.fB=!1}.bind(a)),!1)}f.Lz=function(){this.load(this.Ua[0],void 0)};f.$A=function(){return void 0!=this.Ua&&1<this.Ua.length};f.aB=function(){return void 0!=this.Dl&&1<Object.keys(this.Dl).length};
f.load=function(a,b){$u(this.gc,0);S(this.rr);null!=this.Kh?(this.Kh.clear(),this.Kh.Ps(!1)):(this.Kh=new qv,this.Kh.zC(this.Mb),this.Kh.OC(this.Vr.bind(this)));this.dispatchEvent("$");if(!(a instanceof Gi)||Bw(this,a,b))if(this.Vk=!0,null!=a){if(null!=b?b:1)Cw(this),Dw(this),this.L=new Bu(this),this.Ta=new Yr,this.Ta.a().style.opacity=0,R(this.Mb,this.Ta.a()),O(this.Ta.a(),Z.CSS.xF),G(this.Ta,"z",this.Tr.bind(this)),G(this.Ta,"w",this.Yv.bind(this)),G(this.Ta,"y",this.Zv.bind(this)),G(this.Ta,"x",
this.Xv.bind(this)),this.pa=new au,Ew(this),this.ke=new Y(this,this.pa,this.Ta,this.L),this.ke.vD(this.Ub),this.ZA=!0;av(this,this.gc,200);if(a instanceof Gi)yw(this,a);else{var c;C(this.pa.Dc,function(a,b){(c=this.Ta.dA(b))&&a.xa(c.a())}.bind(this));Uc(this.pa,"j",this.cL.bind(this));Uc(this.pa,"l",this.Ur.bind(this));G(this.pa,"k",this.bw.bind(this));this.Tm=null;"scans"==a.yf.toLowerCase()?(ww(this,0),av(this,this.gc,200,function(){Fw(this,a)}.bind(this))):(Gw(this,a),Hw(this,a))}}else this.Vr("The data set is empty!")};
function Gw(a,b){a.Tm=0;a.Jm=0;a.Um=b.$.length+8;E(b.$,function(a){null!=a.Pd&&null!=a.Pd.labelMapFile&&this.Um++}.bind(a))}
function Fw(a,b){a.Ss=!0;var c=a.Ua[a.Ua.length-1].GA(),d=b.$[0].va()[0],e="";null!=d?(Ya(d,"xiv/sample-data/scans/")?(d=d.split("xiv/sample-data/scans/"),e=d[0]+"xiv/sample-data/scans/"+(d[1].split("/")[0]+".zip")):e=d.split("/files/")[0]+"/files",window.console.log("XImgView Zip Downloading (XHR): "+e),ch(e,function(a){window.console.log("Downloaded: "+e+"!");b.$[0].BC(a,function(){Hw(this,b)}.bind(this),pm)}.bind(a),function(a){0<a.totalSize?ww(this,a.loaded/a.totalSize*.5):0<c&&ww(this,a.loaded/
c*.5)}.bind(a))):a.Kh.Tv("No readable files in the data set!")}function Hw(a,b){a.Kh.Ps(!0);a.pa.k(b);a.Rj=(new Date).getTime()}f.Vr=function(){this.Vk=!1;this.Wm();$u(this.gc,200);Cw(this);this.Wt();this.dispatchEvent({type:"ba"})};f.Zv=function(){C(this.pa.Dc,function(a){a.o()});this.ke.update()};f.Xv=function(a){var b=a.frames;C(this.pa.Dc,function(a,d){null!=b[d]&&(a.kl(b[d].a()),a.o())}.bind(this));this.ke.update()};
function $u(a,b,c){var d=a.a();if(null!=a){b=u(b)&&0<=b?b:0;var e=function(){d.style.visibility="hidden";S(d);null!=a.Xn&&S(a.tc);c&&c()};if("hidden"==d.style.visibility||0==b)e();else{var h=[d],k=[d.style.opacity];null!=a.Xn&&null!=a.tc&&(h.push(a.tc),k.push(a.tc.style.opacity));yl(h,k,0,b,null,null,e)}}}
function av(a,b,c,d){var e=b.a();c=u(c)&&0<=c?c:0;e.style.opacity="0";e.style.visibility="visible";R(a.Mb,e);null!=b.Xn&&R(a.Mb,b.tc);0==c?(e.style.opacity="1",d&&d()):(a=[e],e=[e.style.opacity],null!=b.Xn&&null!=b.tc&&(a.push(b.tc),e.push(b.tc.style.opacity)),yl(a,e,1,c,null,null,d))}f.Js="Info.;Help;Settings;Levels;2D Pan;2D Zoom;Toggle Crosshairs;Volumes;Annotations;Meshes".split(";");
function Iw(a,b,c,d){var e=ji(b),h=[],k;E(a.Js,function(){h.push(null)});h[d]=c;E(e,function(a){k=this.Js.indexOf(a.title);h[k]=a}.bind(a));gi(b);E(h,function(a){null!=a&&b.appendChild(a)})}
f.sk=function(a,b,c){b.style.position="relative";b.style.display="block";b.style.marginLeft="auto";b.style.marginRight="auto";b.style.marginTop="6px";b.style.marginBottom="6px";var d;switch(a){case "TOP_LEFT":d=this.Jb.bn;break;case "LEFT":d=this.Jb.Zf;break;case "BOTTOM_LEFT":d=this.Jb.VD;break;case "TOP_RIGHT":d=this.Jb.kF;break;case "RIGHT":d=this.Jb.$E;break;case "BOTTOM_RIGHT":d=this.Jb.WD}u(c)?d.insertBefore(b,d.childNodes[c]):(a=this.Js.indexOf(b.title),0<a?Iw(this,d,b,a):R(d,b));Jw(this)};
f.Po=function(a,b){a.setAttribute("checked","true"==a.getAttribute("checked")?"false":"true");"true"==a.getAttribute("checked")?il(a,200,1,null,.5):il(a,200,.5);null!=b&&b(a)};f.AD=function(a){return"true"==this.ie[a].getAttribute("checked").toString()};f.Qu=function(a){return this.ie[a]};f.$b=function(a){Wn(this.ie[a])};f.hx=function(a){g(a)||(a=[a]);E(a,function(a){null!=this.ie[a]&&this.AD(a)&&Wn(this.ie[a])}.bind(this))};
f.gD=function(a){var b=this.Ta.Xq();C(b,function(b){E([b.uf.a(),b.Od.a()],function(b){a?(b.style.visibility="visible",b.style.opacity=0,hl(b,200)):kl(b,200,function(){b.style.visibility="hidden"})})})};
f.jj=function(a,b,c,d,e,h){var k=b+"-on",l=Q("img",b);l.id=dk(this)+".IconButton_";l.title=d;null!=h&&(l.src=h);l.setAttribute("checked","true");l.setAttribute(Fu,b+"-on");O(l,k);bl(l,{cursor:"pointer"});G(l,"click",function(){this.Po(l,e)}.bind(this));this.sk(a,l);null!=this.ie?null!=this.ie[c]&&(identifer=c+"A"):this.ie={};return this.ie[c]=l};
function Dw(a){a.Jb.Zf=Q("div",{id:Z.ID_PREFIX+"_menu_left_"+B(),"class":Z.CSS.LE,viewbox:a.a().id});a.Jb.Zf.style.opacity=0;ii(a.a(),a.Jb.Zf,1);a.Ub=new rp;a.Ub.yC("Select Layout");O(a.Ub.a(),Z.CSS.yF);a.Ub.AB(!0);a.Ub.a().style.opacity=0;a.Ub.Ae.style.opacity=0;var b=a.Ub.a();Pb(a.Js,void 0,0,b.title);a.sk("LEFT",b);a.Mb.appendChild(a.Ub.Ae)}
function Ew(a){a.Fc=new Av;a.Fc.k(a.Mb);R(a.Mb,a.Fc.a());O(a.Fc.a(),Z.CSS.tF);G(a.Fc,"Z",function(a){$u(this.Fc,200,function(){this.load(this.Dl[na(a.Zw)],!1)}.bind(this))}.bind(a));$u(a.Fc,0)}f.HI=function(){return this.ie};function Jw(a){var b,c,d,e;null!=a.Jb.bn&&(d=a.Jb.bn,e=U(d),b=0,c=e.height);null!=a.Jb.Zf&&(d=a.Jb.Zf,e=U(d),a=a.A.height/2-e.height/2,d.style.top=null!=b&&a<c?"calc(100% - "+(e.height+2)+"px)":a+"px")}
f.o=function(a){Z.d.o.call(this,a);null!=this.Ta&&this.Ta.o();this.pa&&this.pa.o();null!=this.Ub&&(a=vj(this.Jb.Zf),U(this.Ub.Ae),a=a.y-130,this.Ub.EC(0,a),this.Ub.UC(0,a));Jw(this);null!=this.L&&this.L.update();null!=this.ke&&this.ke.HD()};
function Cw(a){D(a.Dl);Kb(a.Ua);null!=a.Ta&&(J(a.Ta),Bc(a.Ta.g()),delete a.Ta);null!=a.L&&a.L.g();null!=a.Ub&&(J(a.Ub),a.Ub.g(),delete a.Ub);null!=a.pa&&(a.pa.g(),delete a.pa);null!=a.Fc&&(a.Fc.g(),delete a.Fc);null!=a.ke&&a.ke.g();null!=a.ie&&(S(a.Jb.Zf),delete a.Jb.Zf,C(a.ie,function(a){J(a);S(a)}),Kb(a.ie),delete a.ie)}f.vr=!1;f.ur=function(){return this.vr};f.rv=function(){G(this.a(),"mouseenter",function(){this.vr=!0}.bind(this));G(this.a(),"mouseleave",function(){this.vr=!1}.bind(this))};
f.f=function(){Z.d.f.call(this);Cw(this);null!=this.gc&&(this.gc.g(),delete this.gc);S(this.Mb);J(this.Mb);delete this.Mb;C(this.Jb,function(a,b){S(a);delete this.Jb[b]}.bind(this));delete this.Jb;delete this.rr;delete this.OP;delete this.ZA;delete this.Ss;delete this.vr;delete this.Tm;delete this.Jm;delete this.Um;delete this.Es};v("xiv.ui.ViewBox.EventType",{vF:"$",uF:"aa",vO:"ba"});v("xiv.ui.ViewBox.ID_PREFIX",Z.ID_PREFIX);v("xiv.ui.ViewBox.CSS_SUFFIX",Z.CSS_SUFFIX);
v("xiv.ui.ViewBox.defaultLayout",uw);v("xiv.ui.ViewBox.ControllersSet",function(){});v("xiv.ui.ViewBox.prototype.getRenderer",Z.prototype.Ya);v("xiv.ui.ViewBox.prototype.getMenus",Z.prototype.ZH);v("xiv.ui.ViewBox.prototype.getLoadState",Z.prototype.UH);v("xiv.ui.ViewBox.prototype.getViewableTrees",Z.prototype.TI);v("xiv.ui.ViewBox.prototype.getViewFrame",Z.prototype.OI);v("xiv.ui.ViewBox.prototype.getLayoutHandler",Z.prototype.RH);v("xiv.ui.ViewBox.prototype.getLayoutMenu",Z.prototype.SH);
v("xiv.ui.ViewBox.prototype.getViewableGroupMenu",Z.prototype.RI);v("xiv.ui.ViewBox.prototype.highlight",Z.prototype.Zu);v("xiv.ui.ViewBox.prototype.unhighlight",Z.prototype.Wm);v("xiv.ui.ViewBox.prototype.getThumbnailLoadTime",Z.prototype.FI);v("xiv.ui.ViewBox.prototype.clearThumbnailLoadTime",Z.prototype.Wt);v("xiv.ui.ViewBox.prototype.doNotHide",Z.prototype.JG);v("xiv.ui.ViewBox.prototype.setLayout",Z.prototype.Ai);v("xiv.ui.ViewBox.prototype.showCornerInteractors",Z.prototype.gD);
v("xiv.ui.ViewBox.prototype.load",Z.prototype.load);v("xiv.ui.ViewBox.prototype.doReload",Z.prototype.Lz);v("xiv.ui.ViewBox.prototype.hasMultipleViewableTrees",Z.prototype.$A);v("xiv.ui.ViewBox.prototype.hasMultipleViewables",Z.prototype.aB);v("xiv.ui.ViewBox.prototype.addToMenu",Z.prototype.sk);v("xiv.ui.ViewBox.prototype.onToggleButtonClicked",Z.prototype.Po);v("xiv.ui.ViewBox.prototype.toggleButtonChecked",Z.prototype.AD);v("xiv.ui.ViewBox.prototype.getToggleButton",Z.prototype.Qu);
v("xiv.ui.ViewBox.prototype.getHighFrameCountThreshold",Z.prototype.HH);v("xiv.ui.ViewBox.prototype.fireToggleButton",Z.prototype.$b);v("xiv.ui.ViewBox.prototype.untoggle",Z.prototype.hx);v("xiv.ui.ViewBox.prototype.createToggleButton",Z.prototype.jj);v("xiv.ui.ViewBox.prototype.getToggleButtons",Z.prototype.HI);v("xiv.ui.ViewBox.prototype.isMouseOver",Z.prototype.ur);v("xiv.ui.ViewBox.prototype.isRendering",Z.prototype.IJ);v("xiv.ui.ViewBox.prototype.isInUse",Z.prototype.fv);
v("xiv.ui.ViewBox.prototype.showInUseDialog",Z.prototype.SQ);v("xiv.ui.ViewBox.prototype.updateStyle",Z.prototype.o);v("xiv.ui.ViewBox.prototype.disposeInternal",Z.prototype.f);function Kw(){Nn.call(this)}w(Kw,Nn);Kw.prototype.qk=function(a,b){var c=new Un(a,b);c.kp(this);this.wo.push(c);this.Fj&&Pn(this,c)};function Lw(){V.call(this)}w(Lw,V);v("xiv.ui.ViewBoxHandler",Lw);Lw.CSS_SUFFIX={mE:"handle",wF:"viewboxdragclone",Wj:"closebutton",rx:"addrowbutton",qx:"addcolumnbutton"};Lw.ID_PREFIX="xiv.ui.ViewBoxHandler";f=Lw.prototype;f.Ys=5;f.Jx=5;f.Cl=document.body;f.Ij=function(a,b){this.dispatchEvent({type:"ea",NB:a,dG:b})};f.aM=function(){return this.F.length};f.$n=function(){var a=[];E(this.F,function(b,c){a.push([]);E(b,function(){a[c].push(null)})});return a};
f.loop=function(a){this.F&&E(this.F,function(b,c){E(b,function(d,e){a(d,c,e,this.F.length,b.length)}.bind(this))}.bind(this))};f.cv=function(a,b){this.F||(this.F=[[]]);var c=0,d=[],e;if(null!=a)c=Mw(this,a),this.F[c.kr].length<this.Jx&&(d.push(Nw(this)),Pb(this.F[c.kr],c.LJ+1,0,d[0]));else{d=[];e=this.F.length?this.F.length:1;for(c=0;c<e;c++)d.push(Nw(this));0===this.F.length?this.F.push([d[0]]):E(this.F,function(a,b){a.push(d[b])})}this.Ij(d,void 0===b?!0:b);Ow(this)};
f.SL=function(a){this.F&&(a=void 0===a?!0:a,this.F[0]&&1<this.F[0].length&&E(this.F,function(a){var c=a.length-1;Pw(this,a[c]);a.splice(c,1)}.bind(this)),this.Ij(null,a),Ow(this))};function Mw(a,b){for(var c=0,d=0,e=a.F.length,h=0,c=0;c<e;c++)for(d=0,h=a.F[c].length;d<h;d++)if(b===a.F[c][d])return{kr:c,LJ:d}}f.et=function(){for(var a=0,b=0,c=this.F.length,d=0,a=0;a<c;a++)for(b=0,d=this.F[a].length;b<d;b++)if(this.F[a][b].Vk)return!0;return!1};
f.insertRow=function(a,b){this.F||(this.F=[[]]);var c=[],d,e;if(null!=a){var h=Mw(this,a),c=[];e=this.F[h.kr].length;if(this.F.length<this.Ys){for(d=0;d<e;d++)c.push(Nw(this));Pb(this.F,h.kr+1,0,c)}}else if(e=this.F[0]&&this.F[0].length?this.F[0].length:1,this.F.length<this.Ys){for(d=0;d<e;d++)c.push(Nw(this));this.F.push(c)}this.Ij(c,void 0===b?!0:b);Ow(this)};
f.UL=function(a){this.F&&(a=void 0===a?!0:a,1<this.F.length&&(E(this.F[this.F.length-1],function(a){Pw(this,a)}.bind(this)),this.F.splice(this.F.length-1,1)),this.Ij(null,a),Ow(this))};f.br=function(a){for(var b=0,c=0,d=this.F.length,e=0,b=0;b<d;b++)for(c=0,e=this.F[b].length;c<e;c++)if(a===this.F[b][c].a())return this.F[b][c]};f.MI=function(a,b){return this.F[a][b].a()};f.KI=function(a,b){return this.F[a][b]};f.JA=function(){var a=[];this.loop(function(b){a.push(b)});return a};
f.IA=function(){var a=[];this.loop(function(b){a.push(b.a())});return a};f.ZC=function(a){this.Cl=a};
function Nw(a){var b=new Z;R(a.Cl,b.a());Qw(a,b);var c=Q("img",{id:Lw.ID_PREFIX+"_dragHandle_"+B(),"class":Lw.CSS.mE});c.src=serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/handle.png";c.setAttribute("viewboxid",b.a().id);b.sk("TOP_LEFT",c,1);a.Ck||(a.Ck={});a.Ck[b.a().id]=c;c.title="Drag / Swap ViewBox";Rw(a,b);Sw(a,b);G(b,"aa",a.fw.bind(a));G(b,"$",a.gw.bind(a));G(b,"ba",a.Vr.bind(a));return b}
function Sw(a,b){var c=Q("img",{id:Lw.ID_PREFIX+"_CloseButton_"+B(),"class":Lw.CSS.qx,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addcolumn.png"});dl(c,Lw.CSS.qx+"-hovered");G(c,"click",function(){this.cv(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.sk("TOP_LEFT",c,1);a.xy||(a.xy={});a.xy[b.a().id]=c;c.title="Add ViewBox Column"}
function Rw(a,b){var c=Q("img",{id:Lw.ID_PREFIX+"_CloseButton_"+B(),"class":Lw.CSS.rx,src:serverRoot+"/images/viewer/xiv/ui/ViewBoxManager/addrow.png"});dl(c,Lw.CSS.rx+"-hovered");G(c,"click",function(){this.insertRow(b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.sk("TOP_LEFT",c,1);a.Fy||(a.Fy={});a.Fy[b.a().id]=c;c.title="Add ViewBox Row"}
function Qw(a,b){var c=Q("img",{id:Lw.ID_PREFIX+"_CloseButton_"+B(),"class":Lw.CSS.Wj,src:serverRoot+"/images/viewer/xiv/ui/Modal/close.png"});dl(c,Lw.CSS.Wj+"-hovered");G(c,"click",function(){Tw(this,b)}.bind(a));c.setAttribute("viewboxid",b.a().id);b.sk("TOP_LEFT",c,1);a.Kn||(a.Kn={});a.Kn[b.a().id]=c;c.title="Close ViewBox"}f.fw=function(a){this.dispatchEvent({type:"da",zF:a.target})};f.dt=function(a,b){this.loop(function(c){Jb(c.Ua,a)&&b(c)})};f.gw=function(a){this.dispatchEvent({type:"ca",zF:a.target})};
f.Vr=function(a){this.dispatchEvent(a)};function Pw(a,b){il(b.a(),150,0);S(a.Ck[b.a().id]);S(a.Kn[b.a().id]);b.g()}function Uw(a,b){var c=[],d;Pw(a,b);E(a.F,function(a){d=[];E(a,function(a){a.Bk||d.push(a)}.bind(this));0!=d.length&&c.push(d)}.bind(a));a.F=c;a.Ij(null,!0);Ow(a)}function Tw(a,b){1!=a.PB()&&(b.fv()?Aw(b,function(){Uw(this,b)}.bind(a)):Uw(a,b))}f.gv=function(a,b){var c=a.a()===b,d=a.a().id===b;return a===b||c||d};f.PB=function(){var a=0;this.loop(function(){a++});return a};
f.LI=function(a){for(var b=0,c=0,d=this.F.length,e=0,h=e=0,b=0;b<d;b++)for(c=0,e=this.F[b].length;c<e;c++)if(this.F[b][c]===a)return e=b+1===this.F.length,h=c+1===this.F[b].length,e&&h?this.F[0][0]:e&&!h?this.F[0][c+1]:!e&&h?this.F[b+1][0]:this.F[b+1][c+1]};f.kA=function(){var a;this.loop(function(b){null!=a||null!=b.Rj||(a=b)}.bind(this));if(null!=a)return a;var b=this.JA();g(b)?b.sort(function(a,b){return a.Rj<b.Rj?-1:a.Rj>b.Rj?1:0}):b=[b];return b[0]};
function Vw(a,b,c){var d=new Sk,e=a.Ug[b.id],h=a.Ug[c.id];b[Ww]=!0;c[Ww]=!0;d.add(new Hk(b,[b.offsetLeft,b.offsetTop],[h.x,h.y],300,fl));d.add(new Hk(c,[c.offsetLeft,c.offsetTop],[e.x,e.y],300,fl));Uc(d,"end",function(){b[Ww]=!1;c[Ww]=!1;Xw(this);for(var a,d,e,h,m=0,q=0,t=this.F.length,s,z;m<t;m++)for(q=this.F[m],s=q.length,q=0;q<s;q++)z=this.F[m][q],this.gv(z,b)&&(a=m,d=q),this.gv(z,c)&&(e=m,h=q);u(a)&&u(e)&&(m=this.F[a][d],this.F[a][d]=this.F[e][h],this.F[e][h]=m,m=U(this.F[a][d].a()),t=U(this.F[e][h].a()),
Gj(this.F[e][h].a(),m),Gj(this.F[a][d].a(),t))}.bind(a));d.play()}f.Vt=function(){this.we&&(Qn(this.we),Qn(this.fi),delete this.we,delete this.fi)};function Yw(a){a.loop(function(a){null!=a.a()&&(this.we.qk(this.Ck[a.a().id]),this.fi.qk(a.a()))}.bind(a))}function Ow(a){a.Vt();a.we=new Kw;a.fi=new Kw;Yw(a);On(a.we,a.fi);a.we.xa();a.fi.xa();a.we.du=a.eu.bind(a);G(a.we,"dragstart",a.CK.bind(a));G(a.we,"dragover",a.Sv.bind(a));G(a.we,"dragend",a.Rv.bind(a))}f.eu=function(a){return Zw(Vh(a.getAttribute("viewboxid")))};
f.CK=function(){null!=this.Ug?D(this.Ug):this.Ug={};Xw(this)};function Zw(a){var b=document.body;a=a.cloneNode(!1);a.className=Lw.CSS.wF;b&&b.appendChild(a);return a}var Ww=B();Lw.prototype.Sv=function(a){if(a.im.element.id!==a.Kq.kj.getAttribute("viewboxid")){var b=Vh(a.Kq.kj.getAttribute("viewboxid"));a=Vh(a.im.element.id);b[Ww]||a[Ww]||Vw(this,b,a)}};function Xw(a){a.loop(function(a){this.Ug[a.a().id]=vj(a.a())}.bind(a))}
Lw.prototype.Rv=function(a){var b=a.Kq.$a.Dk;a=Vh(a.Kq.kj.getAttribute("viewboxid"));a=Dj(a);a={left:a.x,top:a.y};var c=Zw(b);R(this.Cl.parentNode?this.Cl.parentNode:this.Cl,c);b=Zk(b);bl(c,{top:b.top,left:b.left,"z-index":1E4});$w(c,a).play();ax(this);this.Ij()};function $w(a,b){var c=new Sk;c.add(new Hk(a,[a.offsetLeft,a.offsetTop],[b.left,b.top],150,fl));G(c,"end",function(){S(a)});return c}function ax(a){a.loop(function(a){this.Ck[a.a().id].style.visibility="visible"}.bind(a))}
Lw.prototype.f=function(){Lw.d.f.call(this);this.loop(function(a){J(a);S(a.a());a.g()}.bind(this));E(this.F,function(a){Kb(a)});Kb(this.F);delete this.F;this.Jq(this.Ck);delete this.Ck;this.Jq(this.Kn);delete this.Kn;C(this.Ug,function(a,b){D(this.Ug[b]);delete this.Ug[b]}.bind(this));D(this.Ug);delete this.Ug;null!=this.we&&(J(this.we),this.we.g());delete this.we;null!=this.fi&&(J(this.fi),this.fi.g());delete this.fi;delete this.Cl};v("xiv.ui.ViewBoxHandler.CSS_SUFFIX",Lw.CSS_SUFFIX);
v("xiv.ui.ViewBoxHandler.EventType",{vF:"ca",uF:"da",AP:"ea"});v("xiv.ui.ViewBoxHandler.VIEW_BOX_ATTR","viewboxid");v("xiv.ui.ViewBoxHandler.ID_PREFIX",Lw.ID_PREFIX);v("xiv.ui.ViewBoxHandler.prototype.MAX_ROWS",Lw.prototype.Ys);v("xiv.ui.ViewBoxHandler.prototype.MAX_COLUMNS",Lw.prototype.Jx);v("xiv.ui.ViewBoxHandler.prototype.rowCount",Lw.prototype.aM);v("xiv.ui.ViewBoxHandler.prototype.getEmptyMatrix",Lw.prototype.$n);v("xiv.ui.ViewBoxHandler.prototype.loop",Lw.prototype.loop);
v("xiv.ui.ViewBoxHandler.prototype.insertColumn",Lw.prototype.cv);v("xiv.ui.ViewBoxHandler.prototype.removeColumn",Lw.prototype.SL);v("xiv.ui.ViewBoxHandler.prototype.insertRow",Lw.prototype.insertRow);v("xiv.ui.ViewBoxHandler.prototype.removeRow",Lw.prototype.UL);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxByElement",Lw.prototype.br);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElement",Lw.prototype.MI);v("xiv.ui.ViewBoxHandler.prototype.getViewBox",Lw.prototype.KI);
v("xiv.ui.ViewBoxHandler.prototype.getViewBoxes",Lw.prototype.JA);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxElements",Lw.prototype.IA);v("xiv.ui.ViewBoxHandler.prototype.setViewBoxesParent",Lw.prototype.ZC);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxFromVisNode",Lw.prototype.dt);v("xiv.ui.ViewBoxHandler.prototype.isMatch",Lw.prototype.gv);v("xiv.ui.ViewBoxHandler.prototype.numViewBoxes",Lw.prototype.PB);v("xiv.ui.ViewBoxHandler.prototype.getViewBoxAfter",Lw.prototype.LI);
v("xiv.ui.ViewBoxHandler.prototype.getFirstEmpty",Lw.prototype.kA);v("xiv.ui.ViewBoxHandler.prototype.ViewBoxesRendering",Lw.prototype.et);v("xiv.ui.ViewBoxHandler.prototype.disposeInternal",Lw.prototype.f);function bx(a){var b=cx;return function(){var c=this||ba,c=c[dx]||(c[dx]={}),d=b(na(a),arguments);return c.hasOwnProperty(d)?c[d]:c[d]=a.apply(this,arguments)}}var dx="closure_memoize_cache_";function cx(a,b){for(var c=[a],d=b.length-1;0<=d;--d)c.push(typeof b[d],b[d]);return c.join("\x0B")};function ex(a){ad.call(this);this.gm=a||Rh();if(this.Pz=this.cH())this.QG=G(this.gm.na,this.Pz,ua(this.Su,this))}w(ex,ad);f=ex.prototype;f.cH=bx(function(){var a=this.isSupported(),b="hidden"!=this.Vq();return a?b?((mj()||"")+"visibilitychange").toLowerCase():"visibilitychange":null});f.Vq=bx(function(){return nj("hidden",this.gm.na)});f.UI=bx(function(){return nj("visibilityState",this.gm.na)});f.isSupported=function(){return!!this.Vq()};
f.Su=function(){var a=this.isSupported()?this.gm.na[this.UI()]:null,a=new fx(!!this.gm.na[this.Vq()],a);this.dispatchEvent(a)};f.f=function(){Wc(this.QG);ex.d.f.call(this)};function fx(a,b){Dc.call(this,"visibilitychange");this.hidden=a;this.visibilityState=b}w(fx,Dc);function gx(a){zi.call(this);this.xC(serverRoot+"/images/viewer/xiv/ui/Thumbnail/silhouette.png");this.tf=a;hx(this)}w(gx,zi);v("xiv.ui.Thumbnail",gx);gx.ID_PREFIX="xiv.ui.Thumbnail";gx.CSS_SUFFIX={pE:"hoverinfo",qE:"hoverinfo-arrow",sE:"hoverinfo-arrowtop",rE:"hoverinfo-arrowbottom",IN:"hoverinfo-appear",JN:"hoverinfo-disappear",wE:"infohovertext",Lh:"image",ck:"image"};f=gx.prototype;f.zm=null;f.be=null;f.Hf=null;
function hx(a){var b="",c=a.tf.Kb;if(null!=c["Scan ID"])b+=c["Scan ID"],null!=c["Series Description"]&&(b+=" - "+c["Series Description"]);else if(null!=c.Name)b=c.Name;else if(null!=a.tf.vh)var d=a.tf.vh.split("/"),b=b+d[d.length-1].split(".")[0];var e="",e=e+("<b><font size = '2'>"+b+"</font></b><br>");E(["Total Frames","Scan Type","Orientation"],function(a){null!=c[a]&&(e+="<font size = '1.5'>"+a+": "+c[a]+"<br>")}.bind(a));a.pp(e);ix(a)}
function ix(a){a.zm=Q("div",{id:"MetdataLink_"+B()},"more...");O(a.zm,gx.CSS.wE);R(a.a(),a.zm);O(a.a(),"xiv-ui-thumbnail");O(a.Za,gx.CSS.Lh);a.be=Q("div",{id:"InfoHover_"+B()});O(a.be,gx.CSS.pE);R(Wh("xiv-ui-modal")[0],a.be);a.Hf=Q("div",{id:"InfoHoverArrow_"+B()});O(a.Hf,gx.CSS.qE);R(a.be.parentNode,a.Hf);var b=Q("div",{id:"InfoHoverArrowBottom_"+B()});O(b,gx.CSS.rE);R(a.Hf,b);b=Q("div",{id:"InfoHoverArrowTop_"+B()});O(b,gx.CSS.sE);R(a.Hf,b);a.be.innerHTML=a.tf.Mu();E([a.be,a.Hf],function(a){a.style.opacity=
0;a.style.visibility="hidden"});G(a.zm,"mouseenter",a.jD.bind(a));G(a.zm,"mouseleave",a.Yu.bind(a))}f.jD=function(){var a=Cj(this.a(),this.be.parentNode);E([this.be,this.Hf],function(a){a.style.visibility="visible"});var b=a.y-13;b+this.be.offsetHeight>window.innerHeight?b=window.innerHeight-U(this.be).height:0>b&&(b=2);tj(this.be,a.x+U(this.a()).width+13,b);tj(this.Hf,a.x+U(this.a()).width-6,a.y+7);hl(this.be,200);hl(this.Hf,200)};
f.Yu=function(){kl(this.be,200,function(){this.be.style.visibility="hidden"}.bind(this));kl(this.Hf,200,function(){this.Hf.style.visibility="hidden"}.bind(this))};f.QI=function(){return this.tf};f.f=function(){gx.d.f.call(this);this.tf.g();delete this.tf;delete this.zm;delete this.be;delete this.Hf};v("xiv.ui.Thumbnail.ID_PREFIX",gx.ID_PREFIX);v("xiv.ui.Thumbnail.CSS_SUFFIX",gx.CSS_SUFFIX);v("xiv.ui.Thumbnail.prototype.getViewable",gx.prototype.QI);v("xiv.ui.Thumbnail.prototype.hideInfo",gx.prototype.Yu);
v("xiv.ui.Thumbnail.prototype.showInfo",gx.prototype.jD);v("xiv.ui.Thumbnail.prototype.disposeInternal",gx.prototype.f);function jx(){V.call(this);G(this,"N",function(){C(this.Ec,function(a){a.Yu()})}.bind(this));this.Uf=new Kw;this.Ng=new Kw;this.Uf.du=this.eu.bind(this);G(this.Uf,"dragover",this.Sv.bind(this));G(this.Uf,"dragend",this.Rv.bind(this));G(this.Uf,"dragout",this.BK.bind(this));G(this.Ng,"drop",this.DK.bind(this));On(this.Uf,this.Ng);this.Ng.xa();this.Uf.xa()}w(jx,vv);v("xiv.ui.ThumbnailGallery",jx);jx.ID_PREFIX="xiv.ui.ThumbnailGallery";jx.CSS_SUFFIX={Rx:"thumbnail-dragging"};
var kx="THUMBNAIL_DRAGGER_"+B(),lx=kx+"_FADER"+B();f=jx.prototype;f.Uf=null;f.Ng=null;f.ij=function(a,b){var c=this.Qn(a);this.$l(c,b);return c};f.Qn=function(a){var b=new gx(a);G(b,"L",function(){this.dispatchEvent({type:"ja",Mi:b})}.bind(this));return b};f.$l=function(a,b){jx.d.$l.call(this,a,b);var c=a.a();c&&this.Uf.qk(c)};f.jz=function(){Qn(this.Ng)};f.Hy=function(a){this.Ng.qk(a)};f.Iy=function(a){E(a,function(a){this.Hy(a)}.bind(this))};f.DI=function(a){return this.Ec[a.id]};
f.Vt=function(){null!=this.Uf&&(Qn(this.Uf),this.Uf.g());null!=this.Ng&&(Qn(this.Ng),this.Ng.g())};f.eu=function(a){a=yi(a).id;if(a in this.Ec)return this.Ec[a].setActive(!0,!0),a=this.Ec[a].a().cloneNode(!0),a.setAttribute("id",kx+a.id),Hh(a,"nrg-ui-thumbnail-hoverable"),O(a,"xiv-ui-thumbnailgallery-thumbnail-dragging"),a};f.Sv=function(a){this.dispatchEvent({type:"ha",thumbnailTarget:a.im.element})};f.BK=function(a){this.dispatchEvent({type:"ia",MM:a.im.element})};
f.Rv=function(){var a=Wh(jx.CSS.Rx);E(a,function(a){kl(a,300,function(){S(a)})});null!=a[0]&&this.Ec[a[0].id.replace(kx,"")].setActive(!1,!0)};f.DK=function(a){var b=Yh(jx.CSS.Rx);if(null!=b){b.style.opacity=0;var c=b.cloneNode(!0);c.style.opacity=1;document.body.appendChild(c);S(b);a.im.element&&this.dispatchEvent({type:"ka",Mi:this.Ec[b.id.replace(kx,"")],KM:a.im.element})}};f.f=function(){jx.d.f.call(this);this.Vt()};
v("xiv.ui.ThumbnailGallery.EventType",{OE:"fa",hO:"ga",eP:"ha",dP:"ia",bP:"ja",fP:"ka"});v("xiv.ui.ThumbnailGallery.ID_PREFIX",jx.ID_PREFIX);v("xiv.ui.ThumbnailGallery.CSS_SUFFIX",jx.CSS_SUFFIX);v("xiv.ui.ThumbnailGallery.ANIM_MED",300);v("xiv.ui.ThumbnailGallery.DRAGGER_ID",kx);v("xiv.ui.ThumbnailGallery.DRAGGER_FADER_ID",lx);v("xiv.ui.ThumbnailGallery.prototype.createAndAddThumbnail",jx.prototype.ij);v("xiv.ui.ThumbnailGallery.prototype.createThumbnail",jx.prototype.Qn);
v("xiv.ui.ThumbnailGallery.prototype.addThumbnail",jx.prototype.$l);v("xiv.ui.ThumbnailGallery.prototype.clearThumbnailDropTargets",jx.prototype.jz);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTarget",jx.prototype.Hy);v("xiv.ui.ThumbnailGallery.prototype.addThumbnailDropTargets",jx.prototype.Iy);v("xiv.ui.ThumbnailGallery.prototype.getThumbnailByElement",jx.prototype.DI);v("xiv.ui.ThumbnailGallery.prototype.disposeInternal",jx.prototype.f);function mx(){var a=Bi(Rh());a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen?a.msExitFullscreen():a.exitFullscreen&&a.exitFullscreen()};function nx(a,b,c,d){ad.call(this);this.wb=c||Rh();this.jm=a;this.Mf=[];this.IM=b?b:ox;this.JD=!!d;this.Af()}w(nx,ad);var ox=0;f=nx.prototype;
f.Af=function(){this.jm.className="goog-tabpane";for(var a=[],b=ki(this.jm);b;)a.push(b),b=mi(b);this.xe=this.wb.B("ul",{className:"goog-tabpane-tabs",tabIndex:"0"});this.xc=this.wb.B("div","goog-tabpane-cont");this.jm.appendChild(this.xc);b=this.jm;switch(this.IM){case ox:b.insertBefore(this.xe,this.xc);b.insertBefore(px(this),this.xc);Ol(b,"goog-tabpane-top");break;case 1:b.appendChild(this.xe);b.appendChild(px(this));Ol(b,"goog-tabpane-bottom");break;case 2:b.insertBefore(this.xe,this.xc);Ol(b,
"goog-tabpane-left");break;case 3:b.insertBefore(this.xe,this.xc);Ol(b,"goog-tabpane-right");break;default:throw Error("Invalid tab location");}this.xe.tabIndex=0;G(this.xe,this.JD?"mousedown":"click",this.Pr,!1,this);G(this.xe,"keydown",this.Qr,!1,this);for(var c=0;b=a[c];c++)qx(this,new rx(b))};
function px(a){var b=Rh(void 0),c=null,d=b.na;F&&d.createStyleSheet?(c=d.createStyleSheet(),Nj(c)):(d=Xh(b.na,"head",void 0,void 0)[0],d||(c=Xh(b.na,"body",void 0,void 0)[0],d=b.B("head"),c.parentNode.insertBefore(d,c)),c=b.B("style"),Nj(c),b.appendChild(d,c));return a.wb.B("div","goog-tabpane-clear")}f.f=function(){nx.d.f.call(this);Vc(this.xe,this.JD?"mousedown":"click",this.Pr,!1,this);Vc(this.xe,"keydown",this.Qr,!1,this);delete this.jm;this.xc=this.xe=null};
function qx(a,b){b.$a&&b.$a!=a&&b.$a instanceof nx&&sx(b.$a,b);var c=a.Mf.length;da(void 0)&&void 0!=c?(c=void 0,a.Mf.splice(c,0,b),a.xe.insertBefore(b.pj,a.xe.childNodes[c])):(a.Mf.push(b),a.xe.appendChild(b.pj));b.lp(a,c);a.Ah||(a.Ah=b,a.dispatchEvent(new tx("change",a,a.Ah)));a.xc.appendChild(b.xc);ux(b,b==a.Ah);for(var d=c+1;c=a.Mf[d];d++)c.qo=d}function sx(a,b){u(b)&&(b=a.Mf[b]);a.Mf.splice(b.qo,1);b.lp(null);S(b.pj);S(b.xc);for(var c,d=0;c=a.Mf[d];d++)c.lp(a,d)}
function vx(a,b){if(0<=b&&b<a.Mf.length){var c=a.Mf[b];!c.isEnabled()||a.Ah&&c==a.Ah||(ux(a.Ah,!1),ux(c,!0),a.Ah=c,a.dispatchEvent(new tx("change",a,a.Ah)))}}f.La=function(){return this.xc||null};f.a=function(){return this.jm||null};f.Pr=function(a){for(var b=a.target;b!=this.xe;){if("LI"==b.tagName){var c;for(c=0;b=b.previousSibling;c++);vx(this,c);break}b=b.parentNode}a.preventDefault()};
f.Qr=function(a){if(!(a.altKey||a.metaKey||a.ctrlKey))switch(a.keyCode){case 37:a=this.Ah.qo-1;vx(this,0>a?this.Mf.length-1:a);break;case 39:a=this.Ah.qo+1;vx(this,a>=this.Mf.length?0:a);break;case 36:vx(this,0);break;case 35:vx(this,this.Mf.length-1)}};function rx(a,b,c){var d,e;if(r(a)&&!da(b))d=a;else if(b)d=b,e=a;else if(a){if(b=ki(a))d=vi(b),b.parentNode.removeChild(b);e=a}this.wb=c||Rh();this.xc=e||this.wb.B("div");this.pj=this.wb.B("li",null,d);this.qo=this.$a=null;this.Zb=!0}f=rx.prototype;
f.xb=function(){return vi(this.pj)};f.oc=function(a){pi(this.pj,a)};f.ar=function(){return this.pj};f.La=function(){return this.xc};f.getParent=function(){return this.$a};f.Rb=function(a){this.Zb=a;this.pj.className=a?"goog-tabpane-tab":"goog-tabpane-tab-disabled"};f.isEnabled=function(){return this.Zb};function ux(a,b){a.isEnabled()&&(a.xc.style.display=b?"":"none",a.pj.className=b?"goog-tabpane-tab-selected":"goog-tabpane-tab")}f.lp=function(a,b){this.$a=a;this.qo=da(b)?b:null};
function tx(a,b,c){Dc.call(this,a,b);this.page=c}w(tx,Dc);function wx(a){V.call(this);if(null!=a){var b=a;if(!r(b))throw new TypeError("String required!");b=b.toUpperCase();if(-1==xx.indexOf(b))throw Error("Invalid orienation!");}this.orientation=a||yx}w(wx,V);v("nrg.ui.Tabs",wx);var xx=["TOP","BOTTOM","LEFT","RIGHT"],yx=xx[0];wx.ID_PREFIX="nrg.ui.Tabs";wx.CSS_SUFFIX={hc:"tab",Li:"tab-active",qf:"page",RE:"page-content",Qp:"page-active",tb:"icon",zl:"icon-active",tE:"icon-content",IO:"scrollgallery"};
function zx(a,b,c,d,e){this.Vj=!1;this.TITLE=a;this.hc=b;this.tb=c;this.qf=d;this.Nh=e}f=wx.prototype;f.Jf=0;f.Hm=0;f.ge=null;f.k=function(a){wx.d.k.call(this,a);this.Nk=new nx(this.a());this.N=[];O(this.a(),wx.dd)};f.zI=function(){return this.N.length};f.NH=function(){return this.Jf};f.lI=function(){return this.Hm};f.Zq=function(){var a=[];E(this.N,function(b){a.push(b.hc)});return a};f.$q=function(){var a=[];E(this.N,function(b){a.push(b.qf)});return a};
f.EA=function(){var a=[];E(this.N,function(b){a.push(b.tb)});return a};f.aG=function(a){E(a,function(a){this.Zl(a)}.bind(this))};f.reset=function(){for(var a=this.N.length;0<a;)sx(this.Nk,a-1),a--;this.hQ()};f.Xw=function(a){if(null==this.N)return!1;for(var b=0,c=this.N.length;b<c;b++)if(this.N[b].TITLE==a)return!0;return!1};
f.Zl=function(a){this.N=null!=this.N?this.N:[];if(this.Xw(a))throw Error(a+" is an already existing tab!");var b;b=Q("div",{id:"Tab_"+B(),"class":wx.CSS.hc,title:a});R(this.a(),b);var c=Q("div",{id:"TabIcon_"+B(),"class":wx.CSS.tb}),d=Q("div",{"class":wx.CSS.tE},a);R(c,d);R(b,c);d=Q("div",{id:"TabPage_"+B(),"class":wx.CSS.qf,label:a});R(this.a().parentNode,d);var e=new rx(d,a);qx(this.Nk,e);this.N.push(new zx(a,b,c,d,e));Ax(this);Bx(this);Cx(this);this.Ak();this.setActive(0);this.o()};
f.WC=function(a,b){this.Xw(a)||this.Zl(a);var c;a:if(null!=this.N){c=0;for(var d=this.N.length;c<d;c++)if(this.N[c].TITLE==a){c=this.N[c];break a}c=void 0}else c=!1;b instanceof vu?(d=b,c.qf.appendChild(b.a())):(d=new vu,d.k(c.qf),d.wf(b));O(d.a(),wx.CSS.RE);this.o()};function Ax(a){E(a.N,function(a){J(a.hc)}.bind(a))}function Bx(a){E(a.N,function(a,c){G(a.hc,"click",function(){this.Ak();this.setActive(c)}.bind(this))}.bind(a))}function Cx(a){E(a.N,function(a,c){Dx(this,c);Ex(this,c)}.bind(a))}
function Dx(a,b){G(a.N[b].hc,"mouseover",function(){!0!==this.N[b].Vj&&(O(this.N[b].hc,wx.CSS.Li),O(this.N[b].hc,xh(wx.CSS.Li,this.orientation)),O(this.N[b].tb,wx.CSS.zl))}.bind(a))}function Ex(a,b){G(a.N[b].hc,"mouseout",function(){!0!==this.N[b].Vj&&(Hh(this.N[b].hc,wx.CSS.Li),Hh(this.N[b].hc,xh(wx.CSS.Li,this.orientation)),Hh(this.N[b].tb,wx.CSS.zl))}.bind(a))}
f.setActive=function(a){this.N[a].Vj=!0;this.Hm=this.Jf;this.Jf=a;vx(this.Nk,a);O(this.N[a].hc,wx.CSS.Li);O(this.N[a].hc,xh(wx.CSS.Li,this.orientation));O(this.N[a].qf,wx.CSS.Qp);O(this.N[a].qf,xh(wx.CSS.Qp,this.orientation));O(this.N[a].tb,wx.CSS.zl);O(this.N[a].tb,xh(wx.CSS.zl,this.orientation))};
f.Ez=function(a){this.N[a].Vj=!1;vx(this.Nk,0);Hh(this.N[a].hc,wx.CSS.Li);Hh(this.N[a].hc,xh(wx.CSS.Li,this.orientation));Hh(this.N[a].qf,wx.CSS.Qp);Hh(this.N[a].qf,xh(wx.CSS.Qp,this.orientation));Hh(this.N[a].tb,wx.CSS.zl);Hh(this.N[a].tb,xh(wx.CSS.zl,this.orientation))};f.Ak=function(){E(this.N,function(a,b){this.Ez(b)}.bind(this))};
f.o=function(){if(this.a().parentNode){O(this.a(),wx.dd);O(this.a(),xh(wx.dd,this.orientation));E(this.N,function(a){O(a.hc,xh(wx.CSS.hc,this.orientation));O(a.tb,xh(wx.CSS.tb,this.orientation));O(a.qf,xh(wx.CSS.qf,this.orientation))}.bind(this));switch(this.orientation){case "TOP":Fx(this);break;case "BOTTOM":this.YQ();break;case "RIGHT":Gx(this)}if(0<this.N.length){var a=U(this.N[0].hc);0<a.width&&0<a.height&&(this.ge=a)}}};
function Gx(a){E(a.N,function(a){this.a().parentNode&&(bl(a.hc,{height:(100/this.N.length).toString()+"%"}),a.qf.style.width="calc(100% - "+U(a.hc).width+"px)")}.bind(a))}function Fx(a){var b;E(a.N,function(a,d){this.a().parentNode&&(b=100/this.N.length,bl(a.hc,{width:b.toString()+"%",left:(d*b).toString()+"%"}))}.bind(a))}function Hx(a){E(a.N,function(a){C(a,function(c,d){J(c);c.f?c.g():c.g&&c.g();delete c;delete a[d]});D(a);delete a});Kb(a.N)}
f.f=function(){wx.d.f.call(this);E(this.Zq(),function(a){J(a)}.bind(this));Hx(this);delete this.N;J(this.Nk);this.Nk.g();delete this.Nk;delete this.Jf;delete this.Hm;delete this.XQ;delete this.orientation};v("nrg.ui.Tabs.ORIENTATIONS",xx);v("nrg.ui.Tabs.DEFAULT_ORIENTATION",yx);v("nrg.ui.Tabs.ID_PREFIX",wx.ID_PREFIX);v("nrg.ui.Tabs.CSS_SUFFIX",wx.CSS_SUFFIX);v("nrg.ui.Tabs.TabItemCollection",zx);v("nrg.ui.Tabs.prototype.tabSize",wx.prototype.ge);v("nrg.ui.Tabs.prototype.render",wx.prototype.k);
v("nrg.ui.Tabs.prototype.getTabCount",wx.prototype.zI);v("nrg.ui.Tabs.prototype.getLastActiveTab",wx.prototype.NH);v("nrg.ui.Tabs.prototype.getPreviousActiveTab",wx.prototype.lI);v("nrg.ui.Tabs.prototype.getTabElements",wx.prototype.Zq);v("nrg.ui.Tabs.prototype.getTabPages",wx.prototype.$q);v("nrg.ui.Tabs.prototype.getTabIcons",wx.prototype.EA);v("nrg.ui.Tabs.prototype.addTabs",wx.prototype.aG);v("nrg.ui.Tabs.prototype.reset",wx.prototype.reset);v("nrg.ui.Tabs.prototype.tabExists",wx.prototype.Xw);
v("nrg.ui.Tabs.prototype.addTab",wx.prototype.Zl);v("nrg.ui.Tabs.prototype.setTabPageContents",wx.prototype.WC);v("nrg.ui.Tabs.prototype.setActive",wx.prototype.setActive);v("nrg.ui.Tabs.prototype.deactivate",wx.prototype.Ez);v("nrg.ui.Tabs.prototype.deactivateAll",wx.prototype.Ak);v("nrg.ui.Tabs.prototype.updateStyle",wx.prototype.o);v("nrg.ui.Tabs.prototype.disposeInternal",wx.prototype.f);function Ix(a){wx.call(this,a)}w(Ix,wx);v("nrg.ui.ZipTabs",Ix);Ix.ID_PREFIX="nrg.ui.ZipTabs";f=Ix.prototype;f.k=function(a){Ix.d.k.call(this,a);O(this.a(),xh(Ix.dd,this.orientation));this.Sc=new Sq(this.a(),this.orientation);Jx(this);a=Wh("goog-tabpane-tabs",this.a());E(a,function(a){a.style.visibility="hidden"})};f.zi=function(a){this.Sc.zi(a);this.o()};f.R=function(){return this.Sc};
function Jx(a){G(a.Sc,"resize",function(a){this.ai();if(null!=this.ge){switch(this.orientation){case "BOTTOM":case "TOP":4>=Math.abs(this.ge.height-this.A.height)?this.Ak():this.setActive(this.Jf);break;case "LEFT":case "RIGHT":var c=36>=Math.abs(this.ge.width-this.A.width)&&this.zq;4>=Math.abs(this.ge.width-this.A.width)||c?this.Ak():this.setActive(this.Jf)}this.dispatchEvent({type:"resize",size:a.size,Ee:a.Ee})}}.bind(a))}f.zq=!1;
f.mc=function(a,b,c){this.o();a?(this.setActive(b||0),this.Sc.Qf(this.orientation,"MAX",null,c)):(this.Ak(),this.Sc.Qf(this.orientation,"MIN",null,c))};f.o=function(){Ix.d.o.call(this);switch(this.orientation){case "TOP":case "BOTTOM":null!=this.ge&&this.Sc.KC(this.ge.height);break;case "LEFT":case "RIGHT":null!=this.ge&&this.Sc.MC(this.ge.width)}this.Sc.update()};
f.Zl=function(a){Ix.d.Zl.call(this,a);1==this.Zq().length&&this.o();E(this.Zq(),function(a){G(a,"click",function(){if(null!=this.ge)switch(this.o(),this.ai(),this.orientation){case "BOTTOM":4>=Math.abs(this.A.height-this.ge.height)?(this.setActive(this.Jf),this.Sc.Qf("BOTTOM","MAX",void 0)):this.Jf==this.Hm&&this.Sc.Qf("BOTTOM","MIN",void 0);break;case "TOP":4>=Math.abs(this.A.height-this.ge.height)?(this.setActive(this.Jf),this.Sc.Qf("TOP","MAX",void 0)):this.Jf==this.Hm&&this.Sc.Qf("TOP","MIN",
void 0);break;case "RIGHT":null!=this.ge&&(4>=Math.abs(this.A.width-this.ge.width)?(this.zq=!1,this.setActive(this.Jf),this.Sc.Qf("RIGHT","MAX",void 0)):this.Jf==this.Hm&&(this.zq=!0,this.Sc.Qf("RIGHT","MIN",void 0)))}}.bind(this))}.bind(this));this.Ak();this.o()};f.f=function(){Ix.d.f.call(this);J(this.Sc);this.Sc.g();delete this.Sc;delete this.zq};v("nrg.ui.ZipTabs.BOUND_THRESHOLD_VERT",4);v("nrg.ui.ZipTabs.BOUND_THRESHOLD_HORIZ",4);v("nrg.ui.ZipTabs.EventType",{aE:"la"});
v("nrg.ui.ZipTabs.ID_PREFIX",Ix.ID_PREFIX);v("nrg.ui.ZipTabs.prototype.render",Ix.prototype.k);v("nrg.ui.ZipTabs.prototype.setBoundaryElement",Ix.prototype.zi);v("nrg.ui.ZipTabs.prototype.getResizable",Ix.prototype.R);v("nrg.ui.ZipTabs.prototype.setExpanded",Ix.prototype.mc);v("nrg.ui.ZipTabs.prototype.updateStyle",Ix.prototype.o);v("nrg.ui.ZipTabs.prototype.addTab",Ix.prototype.Zl);v("nrg.ui.ZipTabs.prototype.disposeInternal",Ix.prototype.f);/*
 Copyright 2014 Washington University
 @author kumar.sunil.p@gmail.com (Sunil Kumar)
*/
function Kx(){V.call(this);this.nd=Kx.ModalStates.Xj}w(Kx,V);v("xiv.ui.Modal",Kx);Kx.ModalStates={Oe:"fullscreen",rf:"popup",Vs:"fullscreen-popup",Vg:"windowed",Xj:"demo",hE:"demp-fullscreen"};Kx.ID_PREFIX="xiv.ui.Modal";Kx.CSS_SUFFIX={Op:"background",oN:"columnmenu",yO:"rowmenu",pN:"button",zO:"button",TE:"projecttab",UE:"projecttab-bounds",VE:"projecttab-dragger",WE:"projecttab-dragger-handle",sx:"addsubjects",lE:"foldericon"};
function Lx(){var a={};C(Mx,function(b,c){a[c]=Kx.ID_PREFIX+"."+eb(b.key)+".Button"});var b=Cl(pb(a)),c={};C(a,function(a,e){c[e]=b[a];var h=xh(a);b[a].className=h});return c}var Mx={wl:{key:"CLOSE",title:"Close XNAT Image Viewer."},Oe:{key:"FULLSCREEN",title:"Enter full-screen mode."},rf:{key:"POPUP",title:"Popup to new window."},Vg:{key:"WINDOWED",title:"Exit full-screen mode."}};f=Kx.prototype;f.no=29;f.Ns=29;f.Jr=320;f.Kr=320;f.Ro=null;f.NI=function(){return this.Ha};f.EI=function(){return this.aa};
f.oI=function(){return this.Nb};f.kI=function(){return this.ca.rf};f.hH=function(){return this.ca.wl};f.CH=function(){return this.ca.Oe};f.k=function(a){Kx.d.k.call(this,a);this.iB();this.Ha.cv(null,!1);this.Cc(this.nd)};
f.Cc=function(a){null!=this.nd&&(this.cs=this.nd);this.nd=a;null!=this.cs&&Hh(this.a(),xh(this.constructor.dd,this.cs));O(this.a(),xh(this.constructor.dd,this.nd));this.nd==Kx.ModalStates.Xj?(this.ca.Oe.style.visibility="hidden",this.ca.Vg.style.visibility="hidden"):this.nd==Kx.ModalStates.Vg?(this.ca.Oe.style.visibility="visible",this.ca.Vg.style.visibility="hidden"):this.nd==Kx.ModalStates.rf?(this.ca.rf.style.visibility="hidden",this.ca.wl.style.visibility="hidden",this.ca.Oe.style.visibility=
"visible",this.ca.Vg.style.visibility="hidden"):this.nd==Kx.ModalStates.Vs?(this.ca.rf.style.visibility="hidden",this.ca.Oe.style.visibility="hidden",this.ca.Vg.style.visibility="visible"):this.nd==Kx.ModalStates.Oe&&(this.ca.rf.style.visibility="visible",this.ca.Oe.style.visibility="hidden",this.ca.Vg.style.visibility="visible");this.o()};f.rm=function(){return this.nd};f.Bj=function(){this.aa.loop(function(a){a.setActive(!1);this.Ha.loop(function(b){-1<b.Ua.indexOf(a.tf)&&a.setActive(!0)})}.bind(this))};
f.Wy=function(){Nx(this);this.Wd=null!=this.Wd?this.Wd:[];this.kd=null!=this.kd?this.kd:new Sk;Ox(this);Px(this);G(this.kd,"end",this.PK.bind(this));E(this.Wd,function(a){this.kd.add(a)}.bind(this));this.kd.play();this.Bj()};f.PK=function(){E(this.Wd,function(a){this.kd.remove(a);J(a);a.ve();a.g()}.bind(this));Kb(this.Wd);this.o();Qx(this)};function Qx(a){a.Ha.loop(function(a){0==a.a().style.opacity&&hl(a.a(),300)})}
function Ox(a){var b=null;a.Ha.loop(function(a,d,e){b=a.a();this.Wd.push(new Hk(b,[b.offsetLeft,b.offsetTop],[this.Da.fc.Wg[d][e],this.Da.fc.Re[d][e]],300,fl))}.bind(a))}function Px(a){var b=null;a.Ha.loop(function(a,d,e){b=a.a();this.Wd.push(new Ik(b,[b.offsetWidth,b.offsetHeight],[this.Da.fc.fk[d][e],this.Da.fc.$m[d][e]],300,fl))}.bind(a))}
function Nx(a){a.Da=null!=a.Da?a.Da:{};a.ai();a.Da.Ep={};a.Da.Ep.fk=Math.round(U(a.Nb.a()).width);a.Da.Ep.$m=Math.round(a.A.height-2*a.Ns);a.Da.Ep.Re=Math.round(a.Ns);Rx(a);Sx(a)}function Rx(a){a.Da.fc={};a.Da.fc.fk=a.Ha.$n();a.Da.fc.$m=a.Ha.$n();a.Ha.loop(function(a,c,d,e,h){this.Da.fc.fk[c][d]=Math.round((this.A.width-this.Da.Ep.fk-this.no)/h-this.no);this.Da.fc.$m[c][d]=Math.round((this.A.height-(e+1)*this.no)/e)}.bind(a))}
function Sx(a){a.Da.fc.Wg=a.Ha.$n();a.Da.fc.Re=a.Ha.$n();a.Da.fc.hF=a.Da.Ep.fk+a.Ns;var b=0;a.Ha.loop(function(a,d,e){b=this.Da.fc.hF+e*(this.Da.fc.fk[d][e]+this.Ns);this.Da.fc.Wg[d][e]=b;this.Da.fc.Re[d][e]=d*(this.Da.fc.$m[d][e]+this.no);window.console.log();this.Da.fc.Re[d][e]+=this.no}.bind(a))}f.o=function(){Nx(this);this.Nb&&this.Nb.o();Tx(this);this.Bj();this.aa.o();this.aa.$c()};
function Tx(a){a.Ha&&a.Ha.loop(function(a,c,d){bl(a.a(),{height:this.Da.fc.$m[c][d],width:this.Da.fc.fk[c][d],left:this.Da.fc.Wg[c][d],top:this.Da.fc.Re[c][d]});a.o()}.bind(a))}
f.iB=function(){var a=Q("div");a.id=this.constructor.ID_PREFIX+"_Background_"+B();a.className=Kx.CSS.Op;this.a().appendChild(a);this.Zs=Q("div");R(this.a(),this.Zs);O(this.Zs,Kx.CSS.UE);this.Nb=new Ix("RIGHT");this.Nb.k(this.a());O(this.Nb.a(),Kx.CSS.TE);this.aa=new jx;this.aa.Nw(!0);var b;b=b||G;b(this.aa,"X",this.oL.bind(this));b(this.aa,"Y",this.pL.bind(this));b(this.aa,"ja",this.iL.bind(this));b(this.aa,"ha",this.lL.bind(this));b(this.aa,"ia",this.kL.bind(this));b(this.aa,"ka",this.nL.bind(this));
this.aa.k(this.Nb.a());this.Nb.WC("Project Browser",this.aa);this.Nb.zi(this.Zs);a=this.Nb.R().Fd("RIGHT");O(a,Kx.CSS.VE);this.Nb.R().Kk("RIGHT").NC(5);R(a,Q("div",{id:Z.ID_PREFIX+"_DraggerHandle_"+B(),"class":Kx.CSS.WE}));a=this.Nb.EA()[0];a.childNodes[0].style.visibility="hidden";b=Q("img",{id:Z.ID_PREFIX+"_FolderIcon_"+B(),"class":Kx.CSS.lE});b.src=this.oi+"/images/viewer/xiv/ui/Modal/folder.png";R(a,b);this.Ro=new ex;G(this.Nb,"resize",this.JM.bind(this));G(this.Nb,"resize",this.o.bind(this));
G(this.Nb,"resize_end",this.o.bind(this));this.Ha=new Lw;this.Ha.ZC(this.a());var c;c=c||G;c(this.Ha,"ca",this.gw.bind(this));c(this.Ha,"da",this.fw.bind(this));c(this.Ha,"ea",this.Ij.bind(this));G(this.Ha,"ba",this.BL.bind(this));Ux(this)};
function Ux(a){a.ca=Lx();C(a.ca,function(a){R(this.a(),a)}.bind(a));Vx(a);a.ca.wl.innerHTML="<img src="+a.oi+'/images/viewer/xiv/ui/Modal/close.png width="100%">';a.ca.Oe.innerHTML="<img src="+a.oi+'/images/viewer/xiv/ui/Modal/fullscreen.png width="100%">';a.ca.Vg.innerHTML="<img src="+a.oi+'/images/viewer/xiv/ui/Modal/windowed.png width="100%">';a.ca.rf.innerHTML="<img src="+a.oi+'/images/viewer/xiv/ui/Modal/popup.png width="100%">'}
f.vy=function(){this.$h=Q("div",{id:Kx.ID_PREFIX+"_addSubjects_"+B(),"class":Kx.CSS.sx},"+ Load all subjects in project");this.Nb.$q()[0].appendChild(this.$h);dl(this.$h,Kx.CSS.sx+"-hovered");var a=this.Nb.$q()[0],b=ji(a)[0];U(a);U(b);U(this.$h);b.style.height="calc(100% - 70px)";G(this.$h,"click",this.tK.bind(this))};f.tK=function(){this.dispatchEvent({type:"g"});kl(this.$h,150,function(){Wx(this);var a=this.Nb.$q()[0];ji(a)[0].setAttribute("style","");this.aa.$c()}.bind(this))};
function Wx(a){null!=a.$h&&(S(a.$h),J(a.$h),delete a.$h)}f.JM=function(){var a=this.Ro;a.gm.na[a.Vq()]&&this.Nb.R().Kk("RIGHT").rD()};f.BL=function(){var a=Wh("xiv-ui-thumbnailgallery-thumbnail-dragging");E(a,function(a){S(a)});this.Bj();window.console.log(this.aa.Ng.Tq());null!=this.aa.Ng.Tq()&&this.aa.Uf.rj({iQ:!0})};f.yK=function(){this.nd===Kx.ModalStates.Oe&&mx()};
f.GK=function(){var a=this.a();a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen();this.nd===Kx.ModalStates.rf?this.Cc(Kx.ModalStates.Vs):this.Cc(Kx.ModalStates.Oe);this.o()};f.EL=function(){mx();this.Cc(this.cs)};function Vx(a){var b;b=b||G;b(a.ca.Oe,"click",a.GK.bind(a));b(a.ca.Vg,"click",a.EL.bind(a));b(a.ca.wl,"click",a.yK.bind(a))}
f.oL=function(a){this.Ha.dt(a.Mi.tf,function(a){a.Zu()})};f.pL=function(a){this.Ha.dt(a.Mi.tf,function(a){a.Vk||a.Wm()})};f.kL=function(a){this.Ha.br(a.MM).Wm()};f.lL=function(a){this.Ha.br(a.thumbnailTarget).Zu()};f.iL=function(a){this.Ha.et()||a.Mi.qw(300,function(){this.Ha.kA().load(a.Mi.tf);this.Bj()}.bind(this))};f.nL=function(a){var b=this.Ha.br(a.KM);b.Wm();this.Ha.et()?b.Wm():(b.load(a.Mi.tf),this.Bj())};f.gw=function(){this.Bj()};f.fw=function(){this.Bj()};
f.Ij=function(a){null!=a&&null!=a.dG?(a.NB&&E(a.NB,function(a){bl(a.a(),{opacity:0})}),this.Wy()):this.o();this.aa.jz();this.aa.Iy(this.Ha.IA())};f.f=function(){Kx.d.f.call(this);D(this.Da);delete this.Da;this.qu(this.Wd);delete this.Wd;this.Iq(this.kd);delete this.kd;this.Jq(this.ca);delete this.ca;null!=this.Ha&&(J(this.Ha),this.Ha.g(),delete this.Ha);J(this.Nb);this.Nb.g();delete this.Nb;J(this.aa);this.aa.g();delete this.aa;Wx(this);null!=this.Ro&&(this.Ro.g(),delete this.Ro);delete this.nd;delete this.cs};
v("xiv.ui.Modal.EventType",Kx.AN);v("xiv.ui.Modal.ID_PREFIX",Kx.ID_PREFIX);v("xiv.ui.Modal.CSS_SUFFIX",Kx.CSS_SUFFIX);v("xiv.ui.Modal.prototype.getViewBoxHandler",Kx.prototype.NI);v("xiv.ui.Modal.prototype.getThumbnailGallery",Kx.prototype.EI);v("xiv.ui.Modal.prototype.getProjectTab",Kx.prototype.oI);v("xiv.ui.Modal.prototype.getPopupButton",Kx.prototype.kI);v("xiv.ui.Modal.prototype.getCloseButton",Kx.prototype.hH);v("xiv.ui.Modal.prototype.getFullScreenButton",Kx.prototype.CH);
v("xiv.ui.Modal.prototype.render",Kx.prototype.k);v("xiv.ui.Modal.prototype.setState",Kx.prototype.Cc);v("xiv.ui.Modal.prototype.getState",Kx.prototype.rm);v("xiv.ui.Modal.prototype.highlightInUseThumbnails",Kx.prototype.Bj);v("xiv.ui.Modal.prototype.animateModal",Kx.prototype.Wy);v("xiv.ui.Modal.prototype.updateStyle",Kx.prototype.o);v("xiv.ui.Modal.prototype.initSubComponents",Kx.prototype.iB);v("xiv.ui.Modal.prototype.addAddSubjectsToProjectTab",Kx.prototype.vy);
v("xiv.ui.Modal.prototype.disposeInternal",Kx.prototype.f);window["xiv.ui.Modal"]=Kx;window["xiv.ui.Modal.ModalStates"]=Kx.ModalStates;
//# sourceMappingURL=./xiv-min.js.map